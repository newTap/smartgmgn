import{K as zB,a as NB,b as UB,c as Pi,d as ln,e as hh,f as ph,g as wu,h as vJ,i as vy,j as vl,k as wa,m as DB,n as LB,o as KB,r as vu,s as FB}from"./chunk-E3NPIRHS.js";import{a as Eu,m as Ls}from"./chunk-56SJOU6P.js";import{Z as Su,a as Ay,c as XE,ca as Ey,l as be,n as e3,o as rC,r as nC,x as Ds}from"./chunk-ALUTR72U.js";import{$ as EJ,Aa as Sl,Ba as JB,Fa as ZB,G as HB,Ga as QB,Ha as El,I as WB,Ia as XB,Ja as Sy,Ka as eC,La as Au,Ma as Il,Na as hx,Qa as _i,T as jB,U as GB,V as $B,W as YB,X as lx,Y as QE,Ya as tC,Z as AJ,Za as px,_ as SJ,a as PB,aa as dx,b as _B,ba as va,c as wJ,d as BB,e as CB,h as MB,ia as ve,j as fx,ka as Bt,l as RB,la as Ae,n as OB,o as wy,q as Us,t as VB,ta as ae,u as qB,v as Al,za as yh}from"./chunk-L3A2KHJO.js";import{a as O}from"./chunk-4P36KWOF.js";import{a as wr}from"./chunk-7X4NV6OJ.js";import{c as K,d as ZE,e as kc,f as X,h as p,i as T,j as TB,k as xJ,l as en,m as Buffer,n as y}from"./chunk-3KENBVE7.js";var ky=K(xh=>{"use strict";p();y();var t3=TB(),gh=xJ(),iC=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;xh.Buffer=ne;xh.SlowBuffer=BJ;xh.INSPECT_MAX_BYTES=50;var yx=2147483647;xh.kMaxLength=yx;ne.TYPED_ARRAY_SUPPORT=IJ();!ne.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function IJ(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(ne.prototype,"parent",{enumerable:!0,get:function(){if(ne.isBuffer(this))return this.buffer}});Object.defineProperty(ne.prototype,"offset",{enumerable:!0,get:function(){if(ne.isBuffer(this))return this.byteOffset}});function Tc(e){if(e>yx)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,ne.prototype),t}function ne(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o3(e)}return cC(e,t,r)}ne.poolSize=8192;function cC(e,t,r){if(typeof e=="string")return TJ(e,t);if(ArrayBuffer.isView(e))return PJ(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Aa(e,ArrayBuffer)||e&&Aa(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Aa(e,SharedArrayBuffer)||e&&Aa(e.buffer,SharedArrayBuffer)))return n3(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return ne.from(n,t,r);let i=_J(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return ne.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}ne.from=function(e,t,r){return cC(e,t,r)};Object.setPrototypeOf(ne.prototype,Uint8Array.prototype);Object.setPrototypeOf(ne,Uint8Array);function uC(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function kJ(e,t,r){return uC(e),e<=0?Tc(e):t!==void 0?typeof r=="string"?Tc(e).fill(t,r):Tc(e).fill(t):Tc(e)}ne.alloc=function(e,t,r){return kJ(e,t,r)};function o3(e){return uC(e),Tc(e<0?0:s3(e)|0)}ne.allocUnsafe=function(e){return o3(e)};ne.allocUnsafeSlow=function(e){return o3(e)};function TJ(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!ne.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=fC(e,t)|0,n=Tc(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function r3(e){let t=e.length<0?0:s3(e.length)|0,r=Tc(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function PJ(e){if(Aa(e,Uint8Array)){let t=new Uint8Array(e);return n3(t.buffer,t.byteOffset,t.byteLength)}return r3(e)}function n3(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,ne.prototype),n}function _J(e){if(ne.isBuffer(e)){let t=s3(e.length)|0,r=Tc(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||c3(e.length)?Tc(0):r3(e);if(e.type==="Buffer"&&Array.isArray(e.data))return r3(e.data)}function s3(e){if(e>=yx)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+yx.toString(16)+" bytes");return e|0}function BJ(e){return+e!=e&&(e=0),ne.alloc(+e)}ne.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==ne.prototype};ne.compare=function(t,r){if(Aa(t,Uint8Array)&&(t=ne.from(t,t.offset,t.byteLength)),Aa(r,Uint8Array)&&(r=ne.from(r,r.offset,r.byteLength)),!ne.isBuffer(t)||!ne.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0};ne.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ne.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ne.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;let i=ne.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){let s=t[n];if(Aa(s,Uint8Array))o+s.length>i.length?(ne.isBuffer(s)||(s=ne.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(ne.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function fC(e,t){if(ne.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Aa(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return i3(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return xC(e).length;default:if(i)return n?-1:i3(e).length;t=(""+t).toLowerCase(),i=!0}}ne.byteLength=fC;function CJ(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return VJ(this,t,r);case"utf8":case"utf-8":return dC(this,t,r);case"ascii":return KJ(this,t,r);case"latin1":case"binary":return FJ(this,t,r);case"base64":return DJ(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qJ(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}ne.prototype._isBuffer=!0;function kl(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}ne.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)kl(this,r,r+1);return this};ne.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)kl(this,r,r+3),kl(this,r+1,r+2);return this};ne.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)kl(this,r,r+7),kl(this,r+1,r+6),kl(this,r+2,r+5),kl(this,r+3,r+4);return this};ne.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?dC(this,0,t):CJ.apply(this,arguments)};ne.prototype.toLocaleString=ne.prototype.toString;ne.prototype.equals=function(t){if(!ne.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:ne.compare(this,t)===0};ne.prototype.inspect=function(){let t="",r=xh.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};iC&&(ne.prototype[iC]=ne.prototype.inspect);ne.prototype.compare=function(t,r,n,i,o){if(Aa(t,Uint8Array)&&(t=ne.from(t,t.offset,t.byteLength)),!ne.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;let s=o-i,a=n-r,c=Math.min(s,a),u=this.slice(i,o),h=t.slice(r,n);for(let l=0;l<c;++l)if(u[l]!==h[l]){s=u[l],a=h[l];break}return s<a?-1:a<s?1:0};function lC(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,c3(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=ne.from(t,n)),ne.isBuffer(t))return t.length===0?-1:oC(e,t,r,n,i);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):oC(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function oC(e,t,r,n,i){let o=1,s=e.length,a=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,s/=2,a/=2,r/=2}function c(h,l){return o===1?h[l]:h.readUInt16BE(l*o)}let u;if(i){let h=-1;for(u=r;u<s;u++)if(c(e,u)===c(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===a)return h*o}else h!==-1&&(u-=u-h),h=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){let h=!0;for(let l=0;l<a;l++)if(c(e,u+l)!==c(t,l)){h=!1;break}if(h)return u}return-1}ne.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};ne.prototype.indexOf=function(t,r,n){return lC(this,t,r,n,!0)};ne.prototype.lastIndexOf=function(t,r,n){return lC(this,t,r,n,!1)};function MJ(e,t,r,n){r=Number(r)||0;let i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=t.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(t.substr(s*2,2),16);if(c3(a))return s;e[r+s]=a}return s}function RJ(e,t,r,n){return mx(i3(t,e.length-r),e,r,n)}function OJ(e,t,r,n){return mx(jJ(t),e,r,n)}function NJ(e,t,r,n){return mx(xC(t),e,r,n)}function UJ(e,t,r,n){return mx(GJ(t,e.length-r),e,r,n)}ne.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return MJ(this,t,r,n);case"utf8":case"utf-8":return RJ(this,t,r,n);case"ascii":case"latin1":case"binary":return OJ(this,t,r,n);case"base64":return NJ(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return UJ(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};ne.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function DJ(e,t,r){return t===0&&r===e.length?t3.fromByteArray(e):t3.fromByteArray(e.slice(t,r))}function dC(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let c,u,h,l;switch(a){case 1:o<128&&(s=o);break;case 2:c=e[i+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(s=l));break;case 3:c=e[i+1],u=e[i+2],(c&192)===128&&(u&192)===128&&(l=(o&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:c=e[i+1],u=e[i+2],h=e[i+3],(c&192)===128&&(u&192)===128&&(h&192)===128&&(l=(o&15)<<18|(c&63)<<12|(u&63)<<6|h&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return LJ(n)}var sC=4096;function LJ(e){let t=e.length;if(t<=sC)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=sC));return r}function KJ(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function FJ(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function VJ(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=$J[e[o]];return i}function qJ(e,t,r){let n=e.slice(t,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}ne.prototype.slice=function(t,r){let n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);let i=this.subarray(t,r);return Object.setPrototypeOf(i,ne.prototype),i};function Pn(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}ne.prototype.readUintLE=ne.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Pn(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return i};ne.prototype.readUintBE=ne.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Pn(t,r,this.length);let i=this[t+--r],o=1;for(;r>0&&(o*=256);)i+=this[t+--r]*o;return i};ne.prototype.readUint8=ne.prototype.readUInt8=function(t,r){return t=t>>>0,r||Pn(t,1,this.length),this[t]};ne.prototype.readUint16LE=ne.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||Pn(t,2,this.length),this[t]|this[t+1]<<8};ne.prototype.readUint16BE=ne.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||Pn(t,2,this.length),this[t]<<8|this[t+1]};ne.prototype.readUint32LE=ne.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||Pn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};ne.prototype.readUint32BE=ne.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||Pn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};ne.prototype.readBigUInt64LE=Iu(function(t){t=t>>>0,bh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Iy(t,this.length-8);let i=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});ne.prototype.readBigUInt64BE=Iu(function(t){t=t>>>0,bh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Iy(t,this.length-8);let i=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});ne.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Pn(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};ne.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Pn(t,r,this.length);let i=r,o=1,s=this[t+--i];for(;i>0&&(o*=256);)s+=this[t+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};ne.prototype.readInt8=function(t,r){return t=t>>>0,r||Pn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};ne.prototype.readInt16LE=function(t,r){t=t>>>0,r||Pn(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};ne.prototype.readInt16BE=function(t,r){t=t>>>0,r||Pn(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};ne.prototype.readInt32LE=function(t,r){return t=t>>>0,r||Pn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};ne.prototype.readInt32BE=function(t,r){return t=t>>>0,r||Pn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};ne.prototype.readBigInt64LE=Iu(function(t){t=t>>>0,bh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Iy(t,this.length-8);let i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});ne.prototype.readBigInt64BE=Iu(function(t){t=t>>>0,bh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Iy(t,this.length-8);let i=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});ne.prototype.readFloatLE=function(t,r){return t=t>>>0,r||Pn(t,4,this.length),gh.read(this,t,!0,23,4)};ne.prototype.readFloatBE=function(t,r){return t=t>>>0,r||Pn(t,4,this.length),gh.read(this,t,!1,23,4)};ne.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||Pn(t,8,this.length),gh.read(this,t,!0,52,8)};ne.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||Pn(t,8,this.length),gh.read(this,t,!1,52,8)};function Ji(e,t,r,n,i,o){if(!ne.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}ne.prototype.writeUintLE=ne.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ji(this,t,r,n,a,0)}let o=1,s=0;for(this[r]=t&255;++s<n&&(o*=256);)this[r+s]=t/o&255;return r+n};ne.prototype.writeUintBE=ne.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ji(this,t,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=t&255;--o>=0&&(s*=256);)this[r+o]=t/s&255;return r+n};ne.prototype.writeUint8=ne.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,1,255,0),this[r]=t&255,r+1};ne.prototype.writeUint16LE=ne.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};ne.prototype.writeUint16BE=ne.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};ne.prototype.writeUint32LE=ne.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};ne.prototype.writeUint32BE=ne.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function hC(e,t,r,n,i){bC(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,r}function pC(e,t,r,n,i){bC(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o=o>>8,e[r+6]=o,o=o>>8,e[r+5]=o,o=o>>8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s=s>>8,e[r+2]=s,s=s>>8,e[r+1]=s,s=s>>8,e[r]=s,r+8}ne.prototype.writeBigUInt64LE=Iu(function(t,r=0){return hC(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});ne.prototype.writeBigUInt64BE=Iu(function(t,r=0){return pC(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});ne.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Ji(this,t,r,n,c-1,-c)}let o=0,s=1,a=0;for(this[r]=t&255;++o<n&&(s*=256);)t<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};ne.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Ji(this,t,r,n,c-1,-c)}let o=n-1,s=1,a=0;for(this[r+o]=t&255;--o>=0&&(s*=256);)t<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};ne.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};ne.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};ne.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};ne.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};ne.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Ji(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};ne.prototype.writeBigInt64LE=Iu(function(t,r=0){return hC(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});ne.prototype.writeBigInt64BE=Iu(function(t,r=0){return pC(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function yC(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function mC(e,t,r,n,i){return t=+t,r=r>>>0,i||yC(e,t,r,4,34028234663852886e22,-34028234663852886e22),gh.write(e,t,r,n,23,4),r+4}ne.prototype.writeFloatLE=function(t,r,n){return mC(this,t,r,!0,n)};ne.prototype.writeFloatBE=function(t,r,n){return mC(this,t,r,!1,n)};function gC(e,t,r,n,i){return t=+t,r=r>>>0,i||yC(e,t,r,8,17976931348623157e292,-17976931348623157e292),gh.write(e,t,r,n,52,8),r+8}ne.prototype.writeDoubleLE=function(t,r,n){return gC(this,t,r,!0,n)};ne.prototype.writeDoubleBE=function(t,r,n){return gC(this,t,r,!1,n)};ne.prototype.copy=function(t,r,n,i){if(!ne.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);let o=i-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),r),o};ne.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!ne.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(t.length===1){let s=t.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let o;if(typeof t=="number")for(o=r;o<n;++o)this[o]=t;else{let s=ne.isBuffer(t)?t:ne.from(t,i),a=s.length;if(a===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var mh={};function a3(e,t,r){mh[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}a3("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);a3("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);a3("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=aC(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=aC(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);function aC(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function HJ(e,t,r){bh(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&Iy(t,e.length-(r+1))}function bC(e,t,r,n,i,o){if(e>r||e<t){let s=typeof t=="bigint"?"n":"",a;throw o>3?t===0||t===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${t}${s} and <= ${r}${s}`,new mh.ERR_OUT_OF_RANGE("value",a,e)}HJ(n,i,o)}function bh(e,t){if(typeof e!="number")throw new mh.ERR_INVALID_ARG_TYPE(t,"number",e)}function Iy(e,t,r){throw Math.floor(e)!==e?(bh(e,r),new mh.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new mh.ERR_BUFFER_OUT_OF_BOUNDS:new mh.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var WJ=/[^+/0-9A-Za-z-_]/g;function zJ(e){if(e=e.split("=")[0],e=e.trim().replace(WJ,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function i3(e,t){t=t||1/0;let r,n=e.length,i=null,o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function jJ(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function GJ(e,t){let r,n,i,o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function xC(e){return t3.toByteArray(zJ(e))}function mx(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Aa(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function c3(e){return e!==e}var $J=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Iu(e){return typeof BigInt>"u"?YJ:e}function YJ(){throw new Error("BigInt not supported")}});var bx=K(Bi=>{"use strict";p();y();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.output=Bi.exists=Bi.hash=Bi.bytes=Bi.bool=Bi.number=void 0;function gx(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}Bi.number=gx;function wC(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}Bi.bool=wC;function u3(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}Bi.bytes=u3;function vC(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gx(e.outputLen),gx(e.blockLen)}Bi.hash=vC;function AC(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Bi.exists=AC;function SC(e,t){u3(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Bi.output=SC;var JJ={number:gx,bool:wC,bytes:u3,hash:vC,exists:AC,output:SC};Bi.default=JJ});var EC=K(xx=>{"use strict";p();y();Object.defineProperty(xx,"__esModule",{value:!0});xx.crypto=void 0;xx.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var ku=K(yt=>{"use strict";p();y();Object.defineProperty(yt,"__esModule",{value:!0});yt.randomBytes=yt.wrapConstructorWithOpts=yt.wrapConstructor=yt.checkOpts=yt.Hash=yt.concatBytes=yt.toBytes=yt.utf8ToBytes=yt.asyncLoop=yt.nextTick=yt.hexToBytes=yt.bytesToHex=yt.isLE=yt.rotr=yt.createView=yt.u32=yt.u8=void 0;var wx=EC(),ZJ=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);yt.u8=ZJ;var QJ=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));yt.u32=QJ;var XJ=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);yt.createView=XJ;var eZ=(e,t)=>e<<32-t|e>>>t;yt.rotr=eZ;yt.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!yt.isLE)throw new Error("Non little-endian hardware is not supported");var tZ=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function rZ(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=tZ[e[r]];return t}yt.bytesToHex=rZ;function nZ(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}yt.hexToBytes=nZ;var iZ=async()=>{};yt.nextTick=iZ;async function oZ(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,yt.nextTick)(),n+=o)}}yt.asyncLoop=oZ;function IC(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}yt.utf8ToBytes=IC;function l3(e){if(typeof e=="string"&&(e=IC(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}yt.toBytes=l3;function sZ(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}yt.concatBytes=sZ;var f3=class{clone(){return this._cloneInto()}};yt.Hash=f3;var aZ=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function cZ(e,t){if(t!==void 0&&(typeof t!="object"||!aZ(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}yt.checkOpts=cZ;function uZ(e){let t=n=>e().update(l3(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}yt.wrapConstructor=uZ;function fZ(e){let t=(n,i)=>e(i).update(l3(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}yt.wrapConstructorWithOpts=fZ;function lZ(e=32){if(wx.crypto.web)return wx.crypto.web.getRandomValues(new Uint8Array(e));if(wx.crypto.node)return new Uint8Array(wx.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}yt.randomBytes=lZ});var Py=K(vx=>{"use strict";p();y();Object.defineProperty(vx,"__esModule",{value:!0});vx.SHA2=void 0;var d3=bx(),Ty=ku();function dZ(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var h3=class extends Ty.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Ty.createView)(this.buffer)}update(t){d3.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,Ty.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,Ty.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){d3.default.exists(this),d3.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;dZ(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,Ty.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};vx.SHA2=h3});var m3=K(Fo=>{"use strict";p();y();Object.defineProperty(Fo,"__esModule",{value:!0});Fo.add=Fo.toBig=Fo.split=Fo.fromBig=void 0;var Ax=BigInt(2**32-1),p3=BigInt(32);function y3(e,t=!1){return t?{h:Number(e&Ax),l:Number(e>>p3&Ax)}:{h:Number(e>>p3&Ax)|0,l:Number(e&Ax)|0}}Fo.fromBig=y3;function kC(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=y3(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}Fo.split=kC;var hZ=(e,t)=>BigInt(e>>>0)<<p3|BigInt(t>>>0);Fo.toBig=hZ;var pZ=(e,t,r)=>e>>>r,yZ=(e,t,r)=>e<<32-r|t>>>r,mZ=(e,t,r)=>e>>>r|t<<32-r,gZ=(e,t,r)=>e<<32-r|t>>>r,bZ=(e,t,r)=>e<<64-r|t>>>r-32,xZ=(e,t,r)=>e>>>r-32|t<<64-r,wZ=(e,t)=>t,vZ=(e,t)=>e,AZ=(e,t,r)=>e<<r|t>>>32-r,SZ=(e,t,r)=>t<<r|e>>>32-r,EZ=(e,t,r)=>t<<r-32|e>>>64-r,IZ=(e,t,r)=>e<<r-32|t>>>64-r;function TC(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}Fo.add=TC;var kZ=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),TZ=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,PZ=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),_Z=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,BZ=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),CZ=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,MZ={fromBig:y3,split:kC,toBig:Fo.toBig,shrSH:pZ,shrSL:yZ,rotrSH:mZ,rotrSL:gZ,rotrBH:bZ,rotrBL:xZ,rotr32H:wZ,rotr32L:vZ,rotlSH:AZ,rotlSL:SZ,rotlBH:EZ,rotlBL:IZ,add:TC,add3L:kZ,add3H:TZ,add4L:PZ,add4H:_Z,add5H:CZ,add5L:BZ};Fo.default=MZ});var PC=K(Vo=>{"use strict";p();y();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.sha384=Vo.sha512_256=Vo.sha512_224=Vo.sha512=Vo.SHA512=void 0;var RZ=Py(),lt=m3(),Sx=ku(),[OZ,NZ]=lt.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Tu=new Uint32Array(80),Pu=new Uint32Array(80),Tl=class extends RZ.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:l,Fl:g,Gh:x,Gl:A,Hh:E,Hl:C}=this;return[t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,C]}set(t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,C){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=l|0,this.Fl=g|0,this.Gh=x|0,this.Gl=A|0,this.Hh=E|0,this.Hl=C|0}process(t,r){for(let R=0;R<16;R++,r+=4)Tu[R]=t.getUint32(r),Pu[R]=t.getUint32(r+=4);for(let R=16;R<80;R++){let V=Tu[R-15]|0,q=Pu[R-15]|0,W=lt.default.rotrSH(V,q,1)^lt.default.rotrSH(V,q,8)^lt.default.shrSH(V,q,7),G=lt.default.rotrSL(V,q,1)^lt.default.rotrSL(V,q,8)^lt.default.shrSL(V,q,7),z=Tu[R-2]|0,ee=Pu[R-2]|0,_=lt.default.rotrSH(z,ee,19)^lt.default.rotrBH(z,ee,61)^lt.default.shrSH(z,ee,6),f=lt.default.rotrSL(z,ee,19)^lt.default.rotrBL(z,ee,61)^lt.default.shrSL(z,ee,6),m=lt.default.add4L(G,f,Pu[R-7],Pu[R-16]),b=lt.default.add4H(m,W,_,Tu[R-7],Tu[R-16]);Tu[R]=b|0,Pu[R]=m|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:l,El:g,Fh:x,Fl:A,Gh:E,Gl:C,Hh:M,Hl:N}=this;for(let R=0;R<80;R++){let V=lt.default.rotrSH(l,g,14)^lt.default.rotrSH(l,g,18)^lt.default.rotrBH(l,g,41),q=lt.default.rotrSL(l,g,14)^lt.default.rotrSL(l,g,18)^lt.default.rotrBL(l,g,41),W=l&x^~l&E,G=g&A^~g&C,z=lt.default.add5L(N,q,G,NZ[R],Pu[R]),ee=lt.default.add5H(z,M,V,W,OZ[R],Tu[R]),_=z|0,f=lt.default.rotrSH(n,i,28)^lt.default.rotrBH(n,i,34)^lt.default.rotrBH(n,i,39),m=lt.default.rotrSL(n,i,28)^lt.default.rotrBL(n,i,34)^lt.default.rotrBL(n,i,39),b=n&o^n&a^o&a,v=i&s^i&c^s&c;M=E|0,N=C|0,E=x|0,C=A|0,x=l|0,A=g|0,{h:l,l:g}=lt.default.add(u|0,h|0,ee|0,_|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let w=lt.default.add3L(_,m,v);n=lt.default.add3H(w,ee,f,b),i=w|0}({h:n,l:i}=lt.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=lt.default.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=lt.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=lt.default.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:l,l:g}=lt.default.add(this.Eh|0,this.El|0,l|0,g|0),{h:x,l:A}=lt.default.add(this.Fh|0,this.Fl|0,x|0,A|0),{h:E,l:C}=lt.default.add(this.Gh|0,this.Gl|0,E|0,C|0),{h:M,l:N}=lt.default.add(this.Hh|0,this.Hl|0,M|0,N|0),this.set(n,i,o,s,a,c,u,h,l,g,x,A,E,C,M,N)}roundClean(){Tu.fill(0),Pu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Vo.SHA512=Tl;var g3=class extends Tl{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},b3=class extends Tl{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},x3=class extends Tl{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Vo.sha512=(0,Sx.wrapConstructor)(()=>new Tl);Vo.sha512_224=(0,Sx.wrapConstructor)(()=>new g3);Vo.sha512_256=(0,Sx.wrapConstructor)(()=>new b3);Vo.sha384=(0,Sx.wrapConstructor)(()=>new x3)});var qC=K(Tt=>{"use strict";p();y();Object.defineProperty(Tt,"__esModule",{value:!0});Tt.utils=Tt.curve25519=Tt.getSharedSecret=Tt.sync=Tt.verify=Tt.sign=Tt.getPublicKey=Tt.Signature=Tt.Point=Tt.RistrettoPoint=Tt.ExtendedPoint=Tt.CURVE=void 0;var UZ=wy(),qr=BigInt(0),gt=BigInt(1),Cu=BigInt(2),DZ=BigInt(8),_C=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),Gt=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:_C,n:_C,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});Tt.CURVE=Gt;var OC=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),_y=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),D8e=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),LZ=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),KZ=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),FZ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),VZ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),tn=class e{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof vr))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(vr.ZERO)?e.ZERO:new e(t.x,t.y,gt,oe(t.x*t.y))}static toAffineBatch(t){let r=WZ(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){CC(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=oe(r*a),u=oe(o*i),h=oe(n*a),l=oe(s*i);return c===u&&h===l}negate(){return new e(oe(-this.x),this.y,this.z,oe(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=Gt,o=oe(t*t),s=oe(r*r),a=oe(Cu*oe(n*n)),c=oe(i*o),u=t+r,h=oe(oe(u*u)-o-s),l=c+s,g=l-a,x=c-s,A=oe(h*g),E=oe(l*x),C=oe(h*x),M=oe(g*l);return new e(A,E,M,C)}add(t){CC(t);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=t,h=oe((n-r)*(a+s)),l=oe((n+r)*(a-s)),g=oe(l-h);if(g===qr)return this.double();let x=oe(i*Cu*u),A=oe(o*Cu*c),E=A+x,C=l+h,M=A-x,N=oe(E*g),R=oe(C*M),V=oe(E*M),q=oe(g*C);return new e(N,R,q,V)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=vr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&S3.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),S3.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=gt);let E=x,C=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(BC(M,i[E])):o=o.add(BC(N,i[C]))}return e.normalizeZ([o,s])[0]}multiply(t,r){return this.wNAF(Ah(t,Gt.l),r)}multiplyUnsafe(t){let r=Ah(t,Gt.l,!1),n=e.BASE,i=e.ZERO;if(r===qr)return i;if(this.equals(i)||r===gt)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>qr;)r&gt&&(o=o.add(s)),s=s.double(),r>>=gt;return o}isSmallOrder(){return this.multiplyUnsafe(Gt.h).equals(e.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(Gt.l/Cu).double();return Gt.l%Cu&&(t=t.add(this)),t.equals(e.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?DZ:kx(i));let s=oe(r*t),a=oe(n*t),c=oe(i*t);if(o)return vr.ZERO;if(c!==gt)throw new Error("invZ was invalid");return new vr(s,a)}fromRistrettoBytes(){v3()}toRistrettoBytes(){v3()}fromRistrettoHash(){v3()}};Tt.ExtendedPoint=tn;tn.BASE=new tn(Gt.Gx,Gt.Gy,gt,oe(Gt.Gx*Gt.Gy));tn.ZERO=new tn(qr,gt,gt,qr);function BC(e,t){let r=t.negate();return e?r:t}function CC(e){if(!(e instanceof tn))throw new TypeError("ExtendedPoint expected")}function w3(e){if(!(e instanceof Mu))throw new TypeError("RistrettoPoint expected")}function v3(){throw new Error("Legacy method: switch to RistrettoPoint")}var Mu=class e{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=Gt,n=oe(_y*t*t),i=oe((n+gt)*FZ),o=BigInt(-1),s=oe((o-r*n)*oe(n+r)),{isValid:a,value:c}=I3(i,s),u=oe(c*t);Bu(u)||(u=oe(-u)),a||(c=u),a||(o=n);let h=oe(o*(n-gt)*VZ-s),l=c*c,g=oe((c+c)*s),x=oe(h*LZ),A=oe(gt-l),E=oe(gt+l);return new tn(oe(g*E),oe(A*x),oe(x*E),oe(g*A))}static hashToCurve(t){t=Fs(t,64);let r=A3(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=A3(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new e(n.add(o))}static fromHex(t){t=Fs(t,32);let{a:r,d:n}=Gt,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=A3(t);if(!zZ(wh(o),t)||Bu(o))throw new Error(i);let s=oe(o*o),a=oe(gt+r*s),c=oe(gt-r*s),u=oe(a*a),h=oe(c*c),l=oe(r*n*u-h),{isValid:g,value:x}=RC(oe(l*h)),A=oe(x*c),E=oe(x*A*l),C=oe((o+o)*A);Bu(C)&&(C=oe(-C));let M=oe(a*E),N=oe(C*M);if(!g||Bu(N)||M===qr)throw new Error(i);return new e(new tn(C,M,gt,N))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,o=oe(oe(n+r)*oe(n-r)),s=oe(t*r),a=oe(s*s),{value:c}=RC(oe(o*a)),u=oe(c*o),h=oe(c*s),l=oe(u*h*i),g;if(Bu(i*l)){let A=oe(r*_y),E=oe(t*_y);t=A,r=E,g=oe(u*KZ)}else g=h;Bu(t*l)&&(r=oe(-r));let x=oe((n-r)*g);return Bu(x)&&(x=oe(-x)),wh(x)}toHex(){return Cy(this.toRawBytes())}toString(){return this.toHex()}equals(t){w3(t);let r=this.ep,n=t.ep,i=oe(r.x*n.y)===oe(r.y*n.x),o=oe(r.y*n.y)===oe(r.x*n.x);return i||o}add(t){return w3(t),new e(this.ep.add(t.ep))}subtract(t){return w3(t),new e(this.ep.subtract(t.ep))}multiply(t){return new e(this.ep.multiply(t))}multiplyUnsafe(t){return new e(this.ep.multiplyUnsafe(t))}};Tt.RistrettoPoint=Mu;Mu.BASE=new Mu(tn.BASE);Mu.ZERO=new Mu(tn.ZERO);var S3=new WeakMap,vr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,S3.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=Gt;t=Fs(t,32);let o=t.slice();o[31]=t[31]&-129;let s=_l(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=OC)throw new Error("Expected 0 < hex < 2**256");let a=oe(s*s),c=oe(a-gt),u=oe(n*a+gt),{isValid:h,value:l}=I3(c,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let g=(l&gt)===gt;return(t[31]&128)!==0!==g&&(l=oe(-l)),new e(l,s)}static async fromPrivateKey(t){return(await My(t)).point}toRawBytes(){let t=wh(this.y);return t[31]|=this.x&gt?128:0,t}toHex(){return Cy(this.toRawBytes())}toX25519(){let{y:t}=this,r=oe((gt+t)*kx(gt-t));return wh(r)}isTorsionFree(){return tn.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(oe(-this.x),this.y)}add(t){return tn.fromAffine(this).add(tn.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return tn.fromAffine(this).multiply(t,this).toAffine()}};Tt.Point=vr;vr.BASE=new vr(Gt.Gx,Gt.Gy);vr.ZERO=new vr(qr,gt);var Pl=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Fs(t,64),n=vr.fromHex(r.slice(0,32),!1),i=_l(r.slice(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof vr))throw new Error("Expected Point instance");return Ah(r,Gt.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(wh(this.s),32),t}toHex(){return Cy(this.toRawBytes())}};Tt.Signature=Pl;function MC(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var qZ=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Cy(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=qZ[e[r]];return t}function E3(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function NC(e){let r=e.toString(16).padStart(64,"0");return E3(r)}function wh(e){return NC(e).reverse()}function Bu(e){return(oe(e)&gt)===gt}function _l(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Cy(Uint8Array.from(e).reverse()))}var HZ=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function A3(e){return oe(_l(e)&HZ)}function oe(e,t=Gt.P){let r=e%t;return r>=qr?r:t+r}function kx(e,t=Gt.P){if(e===qr||t<=qr)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=oe(e,t),n=t,i=qr,o=gt,s=gt,a=qr;for(;r!==qr;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==gt)throw new Error("invert: does not exist");return oe(i,t)}function WZ(e,t=Gt.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===qr?o:(r[a]=o,oe(o*s,t)),gt),i=kx(n,t);return e.reduceRight((o,s,a)=>s===qr?o:(r[a]=oe(o*r[a],t),oe(o*s,t)),i),r}function Ks(e,t){let{P:r}=Gt,n=e;for(;t-- >qr;)n*=n,n%=r;return n}function UC(e){let{P:t}=Gt,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=e*e%t*e%t,u=Ks(c,Cu)*c%t,h=Ks(u,gt)*e%t,l=Ks(h,r)*h%t,g=Ks(l,n)*l%t,x=Ks(g,i)*g%t,A=Ks(x,o)*x%t,E=Ks(A,s)*A%t,C=Ks(E,s)*A%t,M=Ks(C,n)*l%t;return{pow_p_5_8:Ks(M,Cu)*e%t,b2:c}}function I3(e,t){let r=oe(t*t*t),n=oe(r*r*t),i=UC(e*n).pow_p_5_8,o=oe(e*r*i),s=oe(t*o*o),a=o,c=oe(o*_y),u=s===e,h=s===oe(-e),l=s===oe(-e*_y);return u&&(o=a),(h||l)&&(o=c),Bu(o)&&(o=oe(-o)),{isValid:u||h,value:o}}function RC(e){return I3(gt,e)}function vh(e){return oe(_l(e),Gt.l)}function zZ(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Fs(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):E3(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function Ah(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(qr<e)return e}else if(qr<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function DC(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function jZ(e){return _l(DC(Fs(e,32)))}function LC(e){if(e=typeof e=="bigint"||typeof e=="number"?NC(Ah(e,OC)):Fs(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function KC(e){let t=DC(e.slice(0,32)),r=e.slice(32,64),n=vh(t),i=vr.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}var By;function Ix(...e){if(typeof By!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return By(...e)}async function My(e){return KC(await Tt.utils.sha512(LC(e)))}function k3(e){return KC(Ix(LC(e)))}async function GZ(e){return(await My(e)).pointBytes}Tt.getPublicKey=GZ;function $Z(e){return k3(e).pointBytes}async function YZ(e,t){e=Fs(e);let{prefix:r,scalar:n,pointBytes:i}=await My(t),o=vh(await Tt.utils.sha512(r,e)),s=vr.BASE.multiply(o),a=vh(await Tt.utils.sha512(s.toRawBytes(),i,e)),c=oe(o+a*n,Gt.l);return new Pl(s,c).toRawBytes()}Tt.sign=YZ;function JZ(e,t){e=Fs(e);let{prefix:r,scalar:n,pointBytes:i}=k3(t),o=vh(Ix(r,e)),s=vr.BASE.multiply(o),a=vh(Ix(s.toRawBytes(),i,e)),c=oe(o+a*n,Gt.l);return new Pl(s,c).toRawBytes()}function FC(e,t,r){t=Fs(t),r instanceof vr||(r=vr.fromHex(r,!1));let{r:n,s:i}=e instanceof Pl?e.assertValidity():Pl.fromHex(e),o=tn.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:t}}function VC(e,t,r,n){let i=vh(n),o=tn.fromAffine(e).multiplyUnsafe(i);return tn.fromAffine(t).add(o).subtract(r).multiplyUnsafe(Gt.h).equals(tn.ZERO)}async function ZZ(e,t,r){let{r:n,SB:i,msg:o,pub:s}=FC(e,t,r),a=await Tt.utils.sha512(n.toRawBytes(),s.toRawBytes(),o);return VC(s,n,i,a)}Tt.verify=ZZ;function QZ(e,t,r){let{r:n,SB:i,msg:o,pub:s}=FC(e,t,r),a=Ix(n.toRawBytes(),s.toRawBytes(),o);return VC(s,n,i,a)}Tt.sync={getExtendedPublicKey:k3,getPublicKey:$Z,sign:JZ,verify:QZ};async function XZ(e,t){let{head:r}=await My(e),n=vr.fromHex(t).toX25519();return Tt.curve25519.scalarMult(r,n)}Tt.getSharedSecret=XZ;vr.BASE._setWindowSize(8);function Ex(e,t,r){let n=oe(e*(t-r));return t=oe(t-n),r=oe(r+n),[t,r]}function eQ(e,t){let{P:r}=Gt,n=Ah(e,r),i=Ah(t,r),o=BigInt(121665),s=n,a=gt,c=qr,u=n,h=gt,l=qr,g;for(let C=BigInt(254);C>=qr;C--){let M=i>>C&gt;l^=M,g=Ex(l,a,u),a=g[0],u=g[1],g=Ex(l,c,h),c=g[0],h=g[1],l=M;let N=a+c,R=oe(N*N),V=a-c,q=oe(V*V),W=R-q,G=u+h,z=u-h,ee=oe(z*N),_=oe(G*V),f=ee+_,m=ee-_;u=oe(f*f),h=oe(s*oe(m*m)),a=oe(R*q),c=oe(W*(R+oe(o*W)))}g=Ex(l,a,u),a=g[0],u=g[1],g=Ex(l,c,h),c=g[0],h=g[1];let{pow_p_5_8:x,b2:A}=UC(c),E=oe(Ks(x,BigInt(3))*A);return oe(a*E)}function tQ(e){return wh(oe(e,Gt.P))}function rQ(e){let t=Fs(e,32);return t[31]&=127,_l(t)}Tt.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(e,t){let r=rQ(t),n=jZ(e),i=eQ(r,n);if(i===qr)throw new Error("Invalid private or public key received");return tQ(i)},scalarMultBase(e){return Tt.curve25519.scalarMult(e,Tt.curve25519.BASE_POINT_U)}};var _u={node:UZ,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};Tt.utils={bytesToHex:Cy,hexToBytes:E3,concatBytes:MC,getExtendedPublicKey:My,mod:oe,invert:kx,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=Fs(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return oe(_l(e),Gt.l-gt)+gt},randomBytes:(e=32)=>{if(_u.web)return _u.web.getRandomValues(new Uint8Array(e));if(_u.node){let{randomBytes:t}=_u.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Tt.utils.randomBytes(32),sha512:async(...e)=>{let t=MC(...e);if(_u.web){let r=await _u.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(_u.node)return Uint8Array.from(_u.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=vr.BASE){let r=t.equals(vr.BASE)?t:new vr(t.x,t.y);return r._setWindowSize(e),r.multiply(Cu),r},sha512Sync:void 0};Object.defineProperties(Tt.utils,{sha512Sync:{configurable:!1,get(){return By},set(e){By||(By=e)}}})});var Px=K(Sh=>{"use strict";p();y();Object.defineProperty(Sh,"__esModule",{value:!0});Sh.sha224=Sh.sha256=void 0;var nQ=Py(),qo=ku(),iQ=(e,t,r)=>e&t^~e&r,oQ=(e,t,r)=>e&t^e&r^t&r,sQ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ru=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ou=new Uint32Array(64),Tx=class extends nQ.SHA2{constructor(){super(64,32,8,!1),this.A=Ru[0]|0,this.B=Ru[1]|0,this.C=Ru[2]|0,this.D=Ru[3]|0,this.E=Ru[4]|0,this.F=Ru[5]|0,this.G=Ru[6]|0,this.H=Ru[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)Ou[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=Ou[l-15],x=Ou[l-2],A=(0,qo.rotr)(g,7)^(0,qo.rotr)(g,18)^g>>>3,E=(0,qo.rotr)(x,17)^(0,qo.rotr)(x,19)^x>>>10;Ou[l]=E+Ou[l-7]+A+Ou[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=(0,qo.rotr)(a,6)^(0,qo.rotr)(a,11)^(0,qo.rotr)(a,25),x=h+g+iQ(a,c,u)+sQ[l]+Ou[l]|0,E=((0,qo.rotr)(n,2)^(0,qo.rotr)(n,13)^(0,qo.rotr)(n,22))+oQ(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Ou.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},T3=class extends Tx{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Sh.sha256=(0,qo.wrapConstructor)(()=>new Tx);Sh.sha224=(0,qo.wrapConstructor)(()=>new T3)});var HC=K(B3=>{"use strict";p();y();function Pc(e,t,r){return t<=e&&e<=r}function Rx(e){if(e===void 0)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function aQ(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=o&1023,c=s&1023;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function cQ(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var _x=-1;function _3(e){this.tokens=[].slice.call(e)}_3.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():_x},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var Eh=-1;function P3(e,t){if(e)throw TypeError("Decoder error");return t||65533}var Bx="utf-8";function Cx(e,t){if(!(this instanceof Cx))return new Cx(e,t);if(e=e!==void 0?String(e).toLowerCase():Bx,e!==Bx)throw new Error("Encoding not supported. Only utf-8 is supported");t=Rx(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Cx.prototype={decode:function(t,r){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),r=Rx(r),this._streaming||(this._decoder=new uQ({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var i=new _3(n),o=[],s;!i.endOfStream()&&(s=this._decoder.handler(i,i.read()),s!==Eh);)s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));if(!this._streaming){do{if(s=this._decoder.handler(i,i.read()),s===Eh)break;s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s))}while(!i.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),cQ(o)}};function Mx(e,t){if(!(this instanceof Mx))return new Mx(e,t);if(e=e!==void 0?String(e).toLowerCase():Bx,e!==Bx)throw new Error("Encoding not supported. Only utf-8 is supported");t=Rx(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Mx.prototype={encode:function(t,r){t=t?String(t):"",r=Rx(r),this._streaming||(this._encoder=new fQ(this._options)),this._streaming=!!r.stream;for(var n=[],i=new _3(aQ(t)),o;!i.endOfStream()&&(o=this._encoder.handler(i,i.read()),o!==Eh);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(i,i.read()),o!==Eh;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function uQ(e){var t=e.fatal,r=0,n=0,i=0,o=128,s=191;this.handler=function(a,c){if(c===_x&&i!==0)return i=0,P3(t);if(c===_x)return Eh;if(i===0){if(Pc(c,0,127))return c;if(Pc(c,194,223))i=1,r=c-192;else if(Pc(c,224,239))c===224&&(o=160),c===237&&(s=159),i=2,r=c-224;else if(Pc(c,240,244))c===240&&(o=144),c===244&&(s=143),i=3,r=c-240;else return P3(t);return r=r<<6*i,null}if(!Pc(c,o,s))return r=i=n=0,o=128,s=191,a.prepend(c),P3(t);if(o=128,s=191,n+=1,r+=c-128<<6*(i-n),n!==i)return null;var u=r;return r=i=n=0,u}}function fQ(e){var t=e.fatal;this.handler=function(r,n){if(n===_x)return Eh;if(Pc(n,0,127))return n;var i,o;Pc(n,128,2047)?(i=1,o=192):Pc(n,2048,65535)?(i=2,o=224):Pc(n,65536,1114111)&&(i=3,o=240);for(var s=[(n>>6*i)+o];i>0;){var a=n>>6*(i-1);s.push(128|a&63),i-=1}return s}}B3.TextEncoder=Mx;B3.TextDecoder=Cx});var $C=K(Zt=>{"use strict";p();y();var lQ=Zt&&Zt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dQ=Zt&&Zt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Sa=Zt&&Zt.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},hQ=Zt&&Zt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&lQ(t,e,r);return dQ(t,e),t},WC=Zt&&Zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.deserializeUnchecked=Zt.deserialize=Zt.serialize=Zt.BinaryReader=Zt.BinaryWriter=Zt.BorshError=Zt.baseDecode=Zt.baseEncode=void 0;var Nu=WC(fx()),zC=WC(Us()),pQ=hQ(HC()),yQ=typeof TextDecoder!="function"?pQ.TextDecoder:TextDecoder,mQ=new yQ("utf-8",{fatal:!0});function gQ(e){return typeof e=="string"&&(e=Buffer.from(e,"utf8")),zC.default.encode(Buffer.from(e))}Zt.baseEncode=gQ;function bQ(e){return Buffer.from(zC.default.decode(e))}Zt.baseDecode=bQ;var C3=1024,jn=class extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};Zt.BorshError=jn;var Ox=class{constructor(){this.buf=Buffer.alloc(C3),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(C3)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Nu.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Nu.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Nu.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Nu.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(C3)]),this.length+=t.length}writeString(t){this.maybeResize();let r=Buffer.from(t,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,r){this.maybeResize(),this.writeU32(t.length);for(let n of t)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}};Zt.BinaryWriter=Ox;function Ea(e,t,r){let n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(o){if(o instanceof RangeError){let s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new jn("Reached the end of buffer when deserializing")}throw o}}}var Ci=class{constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new Nu.default(t,"le")}readU128(){let t=this.readBuffer(16);return new Nu.default(t,"le")}readU256(){let t=this.readBuffer(32);return new Nu.default(t,"le")}readU512(){let t=this.readBuffer(64);return new Nu.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new jn(`Expected buffer length ${t} isn't within bounds`);let r=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,r}readString(){let t=this.readU32(),r=this.readBuffer(t);try{return mQ.decode(r)}catch(n){throw new jn(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(t());return n}};Sa([Ea],Ci.prototype,"readU8",null);Sa([Ea],Ci.prototype,"readU16",null);Sa([Ea],Ci.prototype,"readU32",null);Sa([Ea],Ci.prototype,"readU64",null);Sa([Ea],Ci.prototype,"readU128",null);Sa([Ea],Ci.prototype,"readU256",null);Sa([Ea],Ci.prototype,"readU512",null);Sa([Ea],Ci.prototype,"readString",null);Sa([Ea],Ci.prototype,"readFixedArray",null);Sa([Ea],Ci.prototype,"readArray",null);Zt.BinaryReader=Ci;function jC(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Bl(e,t,r,n,i){try{if(typeof n=="string")i[`write${jC(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new jn(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new jn(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let o=0;o<n[1];o++)Bl(e,null,r[o],n[0],i)}else i.writeArray(r,o=>{Bl(e,t,o,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),Bl(e,t,r,n.type,i));break}case"map":{i.writeU32(r.size),r.forEach((o,s)=>{Bl(e,t,s,n.key,i),Bl(e,t,o,n.value,i)});break}default:throw new jn(`FieldType ${n} unrecognized`)}else GC(e,r,i)}catch(o){throw o instanceof jn&&o.addToFieldPath(t),o}}function GC(e,t,r){if(typeof t.borshSerialize=="function"){t.borshSerialize(r);return}let n=e.get(t.constructor);if(!n)throw new jn(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,o])=>{Bl(e,i,t[i],o,r)});else if(n.kind==="enum"){let i=t[n.field];for(let o=0;o<n.values.length;++o){let[s,a]=n.values[o];if(s===i){r.writeU8(o),Bl(e,s,t[s],a,r);break}}}else throw new jn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function xQ(e,t,r=Ox){let n=new r;return GC(e,t,n),n.toArray()}Zt.serialize=xQ;function Cl(e,t,r,n){try{if(typeof r=="string")return n[`read${jC(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){let i=[];for(let o=0;o<r[1];o++)i.push(Cl(e,null,r[0],n));return i}else return n.readArray(()=>Cl(e,t,r[0],n))}if(r.kind==="option")return n.readU8()?Cl(e,t,r.type,n):void 0;if(r.kind==="map"){let i=new Map,o=n.readU32();for(let s=0;s<o;s++){let a=Cl(e,t,r.key,n),c=Cl(e,t,r.value,n);i.set(a,c)}return i}return M3(e,r,n)}catch(i){throw i instanceof jn&&i.addToFieldPath(t),i}}function M3(e,t,r){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new jn(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){let i={};for(let[o,s]of e.get(t).fields)i[o]=Cl(e,o,s,r);return new t(i)}if(n.kind==="enum"){let i=r.readU8();if(i>=n.values.length)throw new jn(`Enum index: ${i} is out of range`);let[o,s]=n.values[i],a=Cl(e,o,s,r);return new t({[o]:a})}throw new jn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function wQ(e,t,r,n=Ci){let i=new n(r),o=M3(e,t,i);if(i.offset<r.length)throw new jn(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o}Zt.deserialize=wQ;function vQ(e,t,r,n=Ci){let i=new n(r);return M3(e,t,i)}Zt.deserializeUnchecked=vQ});var Ly=K(Q=>{"use strict";p();y();Object.defineProperty(Q,"__esModule",{value:!0});Q.s16=Q.s8=Q.nu64be=Q.u48be=Q.u40be=Q.u32be=Q.u24be=Q.u16be=Q.nu64=Q.u48=Q.u40=Q.u32=Q.u24=Q.u16=Q.u8=Q.offset=Q.greedy=Q.Constant=Q.UTF8=Q.CString=Q.Blob=Q.Boolean=Q.BitField=Q.BitStructure=Q.VariantLayout=Q.Union=Q.UnionLayoutDiscriminator=Q.UnionDiscriminator=Q.Structure=Q.Sequence=Q.DoubleBE=Q.Double=Q.FloatBE=Q.Float=Q.NearInt64BE=Q.NearInt64=Q.NearUInt64BE=Q.NearUInt64=Q.IntBE=Q.Int=Q.UIntBE=Q.UInt=Q.OffsetLayout=Q.GreedyCount=Q.ExternalLayout=Q.bindConstructorLayout=Q.nameWithProperty=Q.Layout=Q.uint8ArrayToBuffer=Q.checkUint8Array=void 0;Q.constant=Q.utf8=Q.cstr=Q.blob=Q.unionLayoutDiscriminator=Q.union=Q.seq=Q.bits=Q.struct=Q.f64be=Q.f64=Q.f32be=Q.f32=Q.ns64be=Q.s48be=Q.s40be=Q.s32be=Q.s24be=Q.s16be=Q.ns64=Q.s48=Q.s40=Q.s32=Q.s24=void 0;var O3=en();function Th(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Q.checkUint8Array=Th;function Ut(e){return Th(e),O3.Buffer.from(e.buffer,e.byteOffset,e.length)}Q.uint8ArrayToBuffer=Ut;var Ht=class{constructor(t,r){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=r}makeDestinationObject(){return{}}getSpan(t,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=t,r}fromArray(t){}};Q.Layout=Ht;function N3(e,t){return t.property?e+"["+t.property+"]":e}Q.nameWithProperty=N3;function AQ(e,t){if(typeof e!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Ht))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(r,n){return t.encode(this,r,n)},writable:!0}),Object.defineProperty(e,"decode",{value(r,n){return t.decode(r,n)},writable:!0})}Q.bindConstructorLayout=AQ;var li=class extends Ht{isCount(){throw new Error("ExternalLayout is abstract")}};Q.ExternalLayout=li;var Nx=class extends li{constructor(t=1,r){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=t}isCount(){return!0}decode(t,r=0){Th(t);let n=t.length-r;return Math.floor(n/this.elementSpan)}encode(t,r,n){return 0}};Q.GreedyCount=Nx;var Ry=class extends li{constructor(t,r=0,n){if(!(t instanceof Ht))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=r}isCount(){return this.layout instanceof Zi||this.layout instanceof ho}decode(t,r=0){return this.layout.decode(t,r+this.offset)}encode(t,r,n=0){return this.layout.encode(t,r,n+this.offset)}};Q.OffsetLayout=Ry;var Zi=class extends Ht{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Ut(t).readUIntLE(r,this.span)}encode(t,r,n=0){return Ut(r).writeUIntLE(t,n,this.span),this.span}};Q.UInt=Zi;var ho=class extends Ht{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Ut(t).readUIntBE(r,this.span)}encode(t,r,n=0){return Ut(r).writeUIntBE(t,n,this.span),this.span}};Q.UIntBE=ho;var _c=class extends Ht{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Ut(t).readIntLE(r,this.span)}encode(t,r,n=0){return Ut(r).writeIntLE(t,n,this.span),this.span}};Q.Int=_c;var Uu=class extends Ht{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Ut(t).readIntBE(r,this.span)}encode(t,r,n=0){return Ut(r).writeIntBE(t,n,this.span),this.span}};Q.IntBE=Uu;var R3=Math.pow(2,32);function Qx(e){let t=Math.floor(e/R3),r=e-t*R3;return{hi32:t,lo32:r}}function Xx(e,t){return e*R3+t}var Ux=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){let n=Ut(t),i=n.readUInt32LE(r),o=n.readUInt32LE(r+4);return Xx(o,i)}encode(t,r,n=0){let i=Qx(t),o=Ut(r);return o.writeUInt32LE(i.lo32,n),o.writeUInt32LE(i.hi32,n+4),8}};Q.NearUInt64=Ux;var Dx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){let n=Ut(t),i=n.readUInt32BE(r),o=n.readUInt32BE(r+4);return Xx(i,o)}encode(t,r,n=0){let i=Qx(t),o=Ut(r);return o.writeUInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};Q.NearUInt64BE=Dx;var Lx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){let n=Ut(t),i=n.readUInt32LE(r),o=n.readInt32LE(r+4);return Xx(o,i)}encode(t,r,n=0){let i=Qx(t),o=Ut(r);return o.writeUInt32LE(i.lo32,n),o.writeInt32LE(i.hi32,n+4),8}};Q.NearInt64=Lx;var Kx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){let n=Ut(t),i=n.readInt32BE(r),o=n.readUInt32BE(r+4);return Xx(i,o)}encode(t,r,n=0){let i=Qx(t),o=Ut(r);return o.writeInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};Q.NearInt64BE=Kx;var Fx=class extends Ht{constructor(t){super(4,t)}decode(t,r=0){return Ut(t).readFloatLE(r)}encode(t,r,n=0){return Ut(r).writeFloatLE(t,n),4}};Q.Float=Fx;var Vx=class extends Ht{constructor(t){super(4,t)}decode(t,r=0){return Ut(t).readFloatBE(r)}encode(t,r,n=0){return Ut(r).writeFloatBE(t,n),4}};Q.FloatBE=Vx;var qx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){return Ut(t).readDoubleLE(r)}encode(t,r,n=0){return Ut(r).writeDoubleLE(t,n),8}};Q.Double=qx;var Hx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){return Ut(t).readDoubleBE(r)}encode(t,r,n=0){return Ut(r).writeDoubleBE(t,n),8}};Q.DoubleBE=Hx;var Wx=class extends Ht{constructor(t,r,n){if(!(t instanceof Ht))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof li&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(r instanceof li)&&0<t.span&&(i=r*t.span),super(i,n),this.elementLayout=t,this.count=r}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof li&&(i=i.decode(t,r)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let o=0;for(;o<i;)n+=this.elementLayout.getSpan(t,r+n),++o}return n}decode(t,r=0){let n=[],i=0,o=this.count;for(o instanceof li&&(o=o.decode(t,r));i<o;)n.push(this.elementLayout.decode(t,r)),r+=this.elementLayout.getSpan(t,r),i+=1;return n}encode(t,r,n=0){let i=this.elementLayout,o=t.reduce((s,a)=>s+i.encode(a,r,n+s),0);return this.count instanceof li&&this.count.encode(t.length,r,n),o}};Q.Sequence=Wx;var zx=class extends Ht{constructor(t,r,n){if(!(Array.isArray(t)&&t.reduce((o,s)=>o&&s instanceof Ht,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(let o of t)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,r),this.fields=t,this.decodePrefixes=!!n}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,o)=>{let s=o.getSpan(t,r);return r+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,r=0){Th(t);let n=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(t,r)),r+=i.getSpan(t,r),this.decodePrefixes&&t.length===r)break;return n}encode(t,r,n=0){let i=n,o=0,s=0;for(let a of this.fields){let c=a.span;if(s=0<c?c:0,a.property!==void 0){let u=t[a.property];u!==void 0&&(s=a.encode(u,r,n),0>c&&(c=a.getSpan(r,n)))}o=n,n+=c}return o+s-i}fromArray(t){let r=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<t.length&&(r[n.property]=t.shift());return r}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===t)return r}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let r=0;for(let n of this.fields){if(n.property===t)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}};Q.Structure=zx;var Oy=class{constructor(t){this.property=t}decode(t,r){throw new Error("UnionDiscriminator is abstract")}encode(t,r,n){throw new Error("UnionDiscriminator is abstract")}};Q.UnionDiscriminator=Oy;var kh=class extends Oy{constructor(t,r){if(!(t instanceof li&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||t.property||"variant"),this.layout=t}decode(t,r){return this.layout.decode(t,r)}encode(t,r,n){return this.layout.encode(t,r,n)}};Q.UnionLayoutDiscriminator=kh;var Ny=class extends Ht{constructor(t,r,n){let i;if(t instanceof Zi||t instanceof ho)i=new kh(new Ry(t));else if(t instanceof li&&t.isCount())i=new kh(t);else if(t instanceof Oy)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof Ht))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let o=-1;r&&(o=r.span,0<=o&&(t instanceof Zi||t instanceof ho)&&(o+=i.layout.span)),super(o,n),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof Zi||t instanceof ho,this.defaultLayout=r,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return s(a)},this.configGetSourceVariant=function(a){s=a.bind(this)}}getSpan(t,r=0){if(0<=this.span)return this.span;let n=this.getVariant(t,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,r)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let r=this.registry[t[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(t,r.property)))return r}else for(let r in this.registry){let n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,r=0){let n,i=this.discriminator,o=i.decode(t,r),s=this.registry[o];if(s===void 0){let a=this.defaultLayout,c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),n=this.makeDestinationObject(),n[i.property]=o,n[a.property]=a.decode(t,r+c)}else n=s.decode(t,r);return n}encode(t,r,n=0){let i=this.getSourceVariant(t);if(i===void 0){let o=this.discriminator,s=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=o.layout.span),o.encode(t[o.property],r,n),a+s.encode(t[s.property],r,n+a)}return i.encode(t,r,n)}addVariant(t,r,n){let i=new jx(this,t,r,n);return this.registry[t]=i,i}getVariant(t,r=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,r):n=t,this.registry[n]}};Q.Union=Ny;var jx=class extends Ht{constructor(t,r,n,i){if(!(t instanceof Ny))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof Ht))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=n?n.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,i),this.union=t,this.variant=r,this.layout=n||null}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,r+n)),n+i}decode(t,r=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(t,r))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,r+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,r,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let o=i;if(this.layout&&(this.layout.encode(t[this.property],r,n+i),o+=this.layout.getSpan(r,n+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};Q.VariantLayout=jx;function Ih(e){return 0>e&&(e+=4294967296),e}var Uy=class extends Ht{constructor(t,r,n){if(!(t instanceof Zi||t instanceof ho))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!r,this.fields=[];let i=0;this._packedSetValue=function(o){return i=Ih(o),this},this._packedGetValue=function(){return i}}decode(t,r=0){let n=this.makeDestinationObject(),i=this.word.decode(t,r);this._packedSetValue(i);for(let o of this.fields)o.property!==void 0&&(n[o.property]=o.decode(t));return n}encode(t,r,n=0){let i=this.word.decode(r,n);this._packedSetValue(i);for(let o of this.fields)if(o.property!==void 0){let s=t[o.property];s!==void 0&&o.encode(s)}return this.word.encode(this._packedGetValue(),r,n)}addField(t,r){let n=new Dy(this,t,r);return this.fields.push(n),n}addBoolean(t){let r=new Gx(this,t);return this.fields.push(r),r}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===t)return r}};Q.BitStructure=Uy;var Dy=class{constructor(t,r,n){if(!(t instanceof Uy))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");let i=8*t.span,o=t.fields.reduce((s,a)=>s+a.bits,0);if(r+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-r),this.wordMask=Ih(this.valueMask<<this.start),this.property=n}decode(t,r){let n=this.container._packedGetValue();return Ih(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Ih(t&this.valueMask))throw new TypeError(N3("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let r=this.container._packedGetValue(),n=Ih(t<<this.start);this.container._packedSetValue(Ih(r&~this.wordMask)|n)}};Q.BitField=Dy;var Gx=class extends Dy{constructor(t,r){super(t,1,r)}decode(t,r){return!!super.decode(t,r)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};Q.Boolean=Gx;var $x=class extends Ht{constructor(t,r){if(!(t instanceof li&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof li||(n=t),super(n,r),this.length=t}getSpan(t,r){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),n}decode(t,r=0){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),Ut(t).slice(r,r+n)}encode(t,r,n){let i=this.length;if(this.length instanceof li&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(N3("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>r.length)throw new RangeError("encoding overruns Uint8Array");let o=Ut(t);return Ut(r).write(o.toString("hex"),n,i,"hex"),this.length instanceof li&&this.length.encode(i,r,n),i}};Q.Blob=$x;var Yx=class extends Ht{constructor(t){super(-1,t)}getSpan(t,r=0){Th(t);let n=r;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-r}decode(t,r=0){let n=this.getSpan(t,r);return Ut(t).slice(r,r+n-1).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));let i=O3.Buffer.from(t,"utf8"),o=i.length;if(n+o>r.length)throw new RangeError("encoding overruns Buffer");let s=Ut(r);return i.copy(s,n),s[n+o]=0,o+1}};Q.CString=Yx;var Jx=class extends Ht{constructor(t,r){if(typeof t=="string"&&r===void 0&&(r=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=t}getSpan(t,r=0){return Th(t),t.length-r}decode(t,r=0){let n=this.getSpan(t,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Ut(t).slice(r,r+n).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));let i=O3.Buffer.from(t,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>r.length)throw new RangeError("encoding overruns Buffer");return i.copy(Ut(r),n),o}};Q.UTF8=Jx;var Zx=class extends Ht{constructor(t,r){super(0,r),this.value=t}decode(t,r){return this.value}encode(t,r,n){return 0}};Q.Constant=Zx;Q.greedy=(e,t)=>new Nx(e,t);Q.offset=(e,t,r)=>new Ry(e,t,r);Q.u8=e=>new Zi(1,e);Q.u16=e=>new Zi(2,e);Q.u24=e=>new Zi(3,e);Q.u32=e=>new Zi(4,e);Q.u40=e=>new Zi(5,e);Q.u48=e=>new Zi(6,e);Q.nu64=e=>new Ux(e);Q.u16be=e=>new ho(2,e);Q.u24be=e=>new ho(3,e);Q.u32be=e=>new ho(4,e);Q.u40be=e=>new ho(5,e);Q.u48be=e=>new ho(6,e);Q.nu64be=e=>new Dx(e);Q.s8=e=>new _c(1,e);Q.s16=e=>new _c(2,e);Q.s24=e=>new _c(3,e);Q.s32=e=>new _c(4,e);Q.s40=e=>new _c(5,e);Q.s48=e=>new _c(6,e);Q.ns64=e=>new Lx(e);Q.s16be=e=>new Uu(2,e);Q.s24be=e=>new Uu(3,e);Q.s32be=e=>new Uu(4,e);Q.s40be=e=>new Uu(5,e);Q.s48be=e=>new Uu(6,e);Q.ns64be=e=>new Kx(e);Q.f32=e=>new Fx(e);Q.f32be=e=>new Vx(e);Q.f64=e=>new qx(e);Q.f64be=e=>new Hx(e);Q.struct=(e,t,r)=>new zx(e,t,r);Q.bits=(e,t,r)=>new Uy(e,t,r);Q.seq=(e,t,r)=>new Wx(e,t,r);Q.union=(e,t,r)=>new Ny(e,t,r);Q.unionLayoutDiscriminator=(e,t)=>new kh(e,t);Q.blob=(e,t)=>new $x(e,t);Q.cstr=e=>new Yx(e);Q.utf8=(e,t)=>new Jx(e,t);Q.constant=(e,t)=>new Zx(e,t)});var U3=K(Ph=>{"use strict";p();y();Object.defineProperty(Ph,"__esModule",{value:!0});var ew;function SQ(e){{let t=Buffer.from(e);t.reverse();let r=t.toString("hex");return r.length===0?BigInt(0):BigInt(`0x${r}`)}return ew.toBigInt(e,!1)}Ph.toBigIntLE=SQ;function EQ(e){{let t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return ew.toBigInt(e,!0)}Ph.toBigIntBE=EQ;function IQ(e,t){{let r=e.toString(16),n=Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}return ew.fromBigInt(e,Buffer.allocUnsafe(t),!1)}Ph.toBufferLE=IQ;function kQ(e,t){{let r=e.toString(16);return Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex")}return ew.fromBigInt(e,Buffer.allocUnsafe(t),!0)}Ph.toBufferBE=kQ});var r7=K(Te=>{"use strict";p();y();Object.defineProperty(Te,"__esModule",{value:!0});var tw=class extends TypeError{constructor(t,r){let n,{message:i,...o}=t,{path:s}=t,a=s.length===0?i:"At path: "+s.join(".")+" -- "+i;super(a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var c;return(c=n)!=null?c:n=[t,...r()]}}};function TQ(e){return Vs(e)&&typeof e[Symbol.iterator]=="function"}function Vs(e){return typeof e=="object"&&e!=null}function YC(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function dn(e){return typeof e=="string"?JSON.stringify(e):""+e}function PQ(e){let{done:t,value:r}=e.next();return t?void 0:r}function _Q(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});let{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+dn(n)+"`"}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:c}}function*D3(e,t,r,n){TQ(e)||(e=[e]);for(let i of e){let o=_Q(i,t,r,n);o&&(yield o)}}function*L3(e,t,r={}){let{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(e=t.coercer(e,a),s&&t.type!=="type"&&Vs(t.schema)&&Vs(e)&&!Array.isArray(e)))for(let u in e)t.schema[u]===void 0&&delete e[u];let c=!0;for(let u of t.validator(e,a))c=!1,yield[u,void 0];for(let[u,h,l]of t.entries(e,a)){let g=L3(h,l,{path:u===void 0?n:[...n,u],branch:u===void 0?i:[...i,h],coerce:o,mask:s});for(let x of g)x[0]?(c=!1,yield[x[0],void 0]):o&&(h=x[1],u===void 0?e=h:e instanceof Map?e.set(u,h):e instanceof Set?e.add(h):Vs(e)&&(e[u]=h))}if(c)for(let u of t.refiner(e,a))c=!1,yield[u,void 0];c&&(yield[void 0,e])}var Rr=class{constructor(t){let{type:r,schema:n,validator:i,refiner:o,coercer:s=c=>c,entries:a=function*(){}}=t;this.type=r,this.schema=n,this.entries=a,this.coercer=s,i?this.validator=(c,u)=>{let h=i(c,u);return D3(h,u,this,c)}:this.validator=()=>[],o?this.refiner=(c,u)=>{let h=o(c,u);return D3(h,u,this,c)}:this.refiner=()=>[]}assert(t){return JC(t,this)}create(t){return ZC(t,this)}is(t){return K3(t,this)}mask(t){return QC(t,this)}validate(t,r={}){return _h(t,this,r)}};function JC(e,t){let r=_h(e,t);if(r[0])throw r[0]}function ZC(e,t){let r=_h(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function QC(e,t){let r=_h(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function K3(e,t){return!_h(e,t)[0]}function _h(e,t,r={}){let n=L3(e,t,r),i=PQ(n);return i[0]?[new tw(i[0],function*(){for(let s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function BQ(...e){let t=e.map(n=>n.schema),r=Object.assign({},...t);return Ky(r)}function po(e,t){return new Rr({type:e,schema:null,validator:t})}function CQ(e,t){return new Rr({...e,refiner:(r,n)=>r===void 0||e.refiner(r,n),validator(r,n){return r===void 0?!0:(t(r,n),e.validator(r,n))}})}function MQ(e){return new Rr({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)}})}function RQ(e){let t;return new Rr({type:"lazy",schema:null,*entries(r,n){var i;(i=t)!=null||(t=e()),yield*t.entries(r,n)},validator(r,n){var i;return(i=t)!=null||(t=e()),t.validator(r,n)},coercer(r,n){var i;return(i=t)!=null||(t=e()),t.coercer(r,n)}})}function OQ(e,t){let{schema:r}=e,n={...r};for(let i of t)delete n[i];return Ky(n)}function NQ(e){let t=e instanceof Rr?{...e.schema}:{...e};for(let r in t)t[r]=XC(t[r]);return Ky(t)}function UQ(e,t){let{schema:r}=e,n={};for(let i of t)n[i]=r[i];return Ky(n)}function DQ(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),po(e,t)}function LQ(){return po("any",()=>!0)}function KQ(e){return new Rr({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+dn(t)}})}function FQ(){return po("boolean",e=>typeof e=="boolean")}function VQ(){return po("date",e=>e instanceof Date&&!isNaN(e.getTime())||"Expected a valid `Date` object, but received: "+dn(e))}function qQ(e){let t={},r=e.map(n=>dn(n)).join();for(let n of e)t[n]=n;return new Rr({type:"enums",schema:t,validator(n){return e.includes(n)||"Expected one of `"+r+"`, but received: "+dn(n)}})}function HQ(){return po("func",e=>typeof e=="function"||"Expected a function, but received: "+dn(e))}function WQ(e){return po("instance",t=>t instanceof e||"Expected a `"+e.name+"` instance, but received: "+dn(t))}function zQ(){return po("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||"Expected an integer, but received: "+dn(e))}function jQ(e){return new Rr({type:"intersection",schema:null,*entries(t,r){for(let n of e)yield*n.entries(t,r)},*validator(t,r){for(let n of e)yield*n.validator(t,r)},*refiner(t,r){for(let n of e)yield*n.refiner(t,r)}})}function GQ(e){let t=dn(e),r=typeof e;return new Rr({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||"Expected the literal `"+t+"`, but received: "+dn(n)}})}function $Q(e,t){return new Rr({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(let[n,i]of r.entries())yield[n,n,e],yield[n,i,t]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||"Expected a `Map` object, but received: "+dn(r)}})}function F3(){return po("never",()=>!1)}function YQ(e){return new Rr({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function JQ(){return po("number",e=>typeof e=="number"&&!isNaN(e)||"Expected a number, but received: "+dn(e))}function Ky(e){let t=e?Object.keys(e):[],r=F3();return new Rr({type:"object",schema:e||null,*entries(n){if(e&&Vs(n)){let i=new Set(Object.keys(n));for(let o of t)i.delete(o),yield[o,n[o],e[o]];for(let o of i)yield[o,n[o],r]}},validator(n){return Vs(n)||"Expected an object, but received: "+dn(n)},coercer(n){return Vs(n)?{...n}:n}})}function XC(e){return new Rr({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function ZQ(e,t){return new Rr({type:"record",schema:null,*entries(r){if(Vs(r))for(let n in r){let i=r[n];yield[n,n,e],yield[n,i,t]}},validator(r){return Vs(r)||"Expected an object, but received: "+dn(r)}})}function QQ(){return po("regexp",e=>e instanceof RegExp)}function XQ(e){return new Rr({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(let r of t)yield[r,r,e]},coercer(t){return t instanceof Set?new Set(t):t},validator(t){return t instanceof Set||"Expected a `Set` object, but received: "+dn(t)}})}function e7(){return po("string",e=>typeof e=="string"||"Expected a string, but received: "+dn(e))}function eX(e){let t=F3();return new Rr({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator(r){return Array.isArray(r)||"Expected an array, but received: "+dn(r)}})}function tX(e){let t=Object.keys(e);return new Rr({type:"type",schema:e,*entries(r){if(Vs(r))for(let n of t)yield[n,r[n],e[n]]},validator(r){return Vs(r)||"Expected an object, but received: "+dn(r)}})}function rX(e){let t=e.map(r=>r.type).join(" | ");return new Rr({type:"union",schema:null,validator(r,n){let i=[];for(let o of e){let[...s]=L3(r,o,n),[a]=s;if(a[0])for(let[c]of s)c&&i.push(c);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+dn(r),...i]}})}function t7(){return po("unknown",()=>!0)}function V3(e,t,r){return new Rr({...e,coercer:(n,i)=>K3(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function nX(e,t,r={}){return V3(e,t7(),n=>{let i=typeof t=="function"?t():t;if(n===void 0)return i;if(!r.strict&&YC(n)&&YC(i)){let o={...n},s=!1;for(let a in i)o[a]===void 0&&(o[a]=i[a],s=!0);if(s)return o}return n})}function iX(e){return V3(e,e7(),t=>t.trim())}function oX(e){let t="Expected an empty "+e.type;return Bh(e,"empty",r=>{if(r instanceof Map||r instanceof Set){let{size:n}=r;return n===0||t+" but received one with a size of `"+n+"`"}else{let{length:n}=r;return n===0||t+" but received one with a length of `"+n+"`"}})}function sX(e,t,r={}){let{exclusive:n}=r;return Bh(e,"max",i=>n?i<t:i<=t||"Expected a "+e.type+" greater than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function aX(e,t,r={}){let{exclusive:n}=r;return Bh(e,"min",i=>n?i>t:i>=t||"Expected a "+e.type+" greater than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function cX(e,t){return Bh(e,"pattern",r=>t.test(r)||"Expected a "+e.type+" matching `/"+t.source+'/` but received "'+r+'"')}function uX(e,t,r=t){let n="Expected a "+e.type,i=t===r?"of `"+t+"`":"between `"+t+"` and `"+r+"`";return Bh(e,"size",o=>{if(typeof o=="number"||o instanceof Date)return t<=o&&o<=r||n+" "+i+" but received `"+o+"`";if(o instanceof Map||o instanceof Set){let{size:s}=o;return t<=s&&s<=r||n+" with a size "+i+" but received one with a size of `"+s+"`"}else{let{length:s}=o;return t<=s&&s<=r||n+" with a length "+i+" but received one with a length of `"+s+"`"}})}function Bh(e,t,r){return new Rr({...e,*refiner(n,i){yield*e.refiner(n,i);let o=r(n,i),s=D3(o,i,e,n);for(let a of s)yield{...a,refinement:t}}})}Te.Struct=Rr;Te.StructError=tw;Te.any=LQ;Te.array=KQ;Te.assert=JC;Te.assign=BQ;Te.boolean=FQ;Te.coerce=V3;Te.create=ZC;Te.date=VQ;Te.defaulted=nX;Te.define=po;Te.deprecated=CQ;Te.dynamic=MQ;Te.empty=oX;Te.enums=qQ;Te.func=HQ;Te.instance=WQ;Te.integer=zQ;Te.intersection=jQ;Te.is=K3;Te.lazy=RQ;Te.literal=GQ;Te.map=$Q;Te.mask=QC;Te.max=sX;Te.min=aX;Te.never=F3;Te.nullable=YQ;Te.number=JQ;Te.object=Ky;Te.omit=OQ;Te.optional=XC;Te.partial=NQ;Te.pattern=cX;Te.pick=UQ;Te.record=ZQ;Te.refine=Bh;Te.regexp=QQ;Te.set=XQ;Te.size=uX;Te.string=e7;Te.struct=DQ;Te.trimmed=iX;Te.tuple=eX;Te.type=tX;Te.union=rX;Te.unknown=t7;Te.validate=_h});var H3=K(q3=>{"use strict";p();y();Object.defineProperty(q3,"__esModule",{value:!0});q3.default=lX;var rw,fX=new Uint8Array(16);function lX(){if(!rw&&(rw=typeof self.crypto<"u"&&self.crypto.getRandomValues&&self.crypto.getRandomValues.bind(self.crypto),!rw))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rw(fX)}});var n7=K(nw=>{"use strict";p();y();Object.defineProperty(nw,"__esModule",{value:!0});nw.default=void 0;var dX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;nw.default=dX});var Fy=K(iw=>{"use strict";p();y();Object.defineProperty(iw,"__esModule",{value:!0});iw.default=void 0;var hX=pX(n7());function pX(e){return e&&e.__esModule?e:{default:e}}function yX(e){return typeof e=="string"&&hX.default.test(e)}var mX=yX;iw.default=mX});var qy=K(Vy=>{"use strict";p();y();Object.defineProperty(Vy,"__esModule",{value:!0});Vy.default=void 0;Vy.unsafeStringify=i7;var gX=bX(Fy());function bX(e){return e&&e.__esModule?e:{default:e}}var Gn=[];for(let e=0;e<256;++e)Gn.push((e+256).toString(16).slice(1));function i7(e,t=0){return Gn[e[t+0]]+Gn[e[t+1]]+Gn[e[t+2]]+Gn[e[t+3]]+"-"+Gn[e[t+4]]+Gn[e[t+5]]+"-"+Gn[e[t+6]]+Gn[e[t+7]]+"-"+Gn[e[t+8]]+Gn[e[t+9]]+"-"+Gn[e[t+10]]+Gn[e[t+11]]+Gn[e[t+12]]+Gn[e[t+13]]+Gn[e[t+14]]+Gn[e[t+15]]}function xX(e,t=0){let r=i7(e,t);if(!(0,gX.default)(r))throw TypeError("Stringified UUID is invalid");return r}var wX=xX;Vy.default=wX});var s7=K(ow=>{"use strict";p();y();Object.defineProperty(ow,"__esModule",{value:!0});ow.default=void 0;var vX=SX(H3()),AX=qy();function SX(e){return e&&e.__esModule?e:{default:e}}var o7,W3,z3=0,j3=0;function EX(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let o=e.node||o7,s=e.clockseq!==void 0?e.clockseq:W3;if(o==null||s==null){let g=e.random||(e.rng||vX.default)();o==null&&(o=o7=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),s==null&&(s=W3=(g[6]<<8|g[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:j3+1,u=a-z3+(c-j3)/1e4;if(u<0&&e.clockseq===void 0&&(s=s+1&16383),(u<0||a>z3)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");z3=a,j3=c,W3=s,a+=122192928e5;let h=((a&268435455)*1e4+c)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=h&255;let l=a/4294967296*1e4&268435455;i[n++]=l>>>8&255,i[n++]=l&255,i[n++]=l>>>24&15|16,i[n++]=l>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return t||(0,AX.unsafeStringify)(i)}var IX=EX;ow.default=IX});var G3=K(sw=>{"use strict";p();y();Object.defineProperty(sw,"__esModule",{value:!0});sw.default=void 0;var kX=TX(Fy());function TX(e){return e&&e.__esModule?e:{default:e}}function PX(e){if(!(0,kX.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var _X=PX;sw.default=_X});var $3=K(Ml=>{"use strict";p();y();Object.defineProperty(Ml,"__esModule",{value:!0});Ml.URL=Ml.DNS=void 0;Ml.default=OX;var BX=qy(),CX=MX(G3());function MX(e){return e&&e.__esModule?e:{default:e}}function RX(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var a7="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ml.DNS=a7;var c7="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ml.URL=c7;function OX(e,t,r){function n(i,o,s,a){var c;if(typeof i=="string"&&(i=RX(i)),typeof o=="string"&&(o=(0,CX.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,s){a=a||0;for(let h=0;h<16;++h)s[a+h]=u[h];return s}return(0,BX.unsafeStringify)(u)}try{n.name=e}catch{}return n.DNS=a7,n.URL=c7,n}});var f7=K(cw=>{"use strict";p();y();Object.defineProperty(cw,"__esModule",{value:!0});cw.default=void 0;function NX(e){if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return UX(DX(LX(e),e.length*8))}function UX(e){let t=[],r=e.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){let o=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(s)}return t}function u7(e){return(e+64>>>9<<4)+14+1}function DX(e,t){e[t>>5]|=128<<t%32,e[u7(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let s=0;s<e.length;s+=16){let a=r,c=n,u=i,h=o;r=di(r,n,i,o,e[s],7,-680876936),o=di(o,r,n,i,e[s+1],12,-389564586),i=di(i,o,r,n,e[s+2],17,606105819),n=di(n,i,o,r,e[s+3],22,-1044525330),r=di(r,n,i,o,e[s+4],7,-176418897),o=di(o,r,n,i,e[s+5],12,1200080426),i=di(i,o,r,n,e[s+6],17,-1473231341),n=di(n,i,o,r,e[s+7],22,-45705983),r=di(r,n,i,o,e[s+8],7,1770035416),o=di(o,r,n,i,e[s+9],12,-1958414417),i=di(i,o,r,n,e[s+10],17,-42063),n=di(n,i,o,r,e[s+11],22,-1990404162),r=di(r,n,i,o,e[s+12],7,1804603682),o=di(o,r,n,i,e[s+13],12,-40341101),i=di(i,o,r,n,e[s+14],17,-1502002290),n=di(n,i,o,r,e[s+15],22,1236535329),r=hi(r,n,i,o,e[s+1],5,-165796510),o=hi(o,r,n,i,e[s+6],9,-1069501632),i=hi(i,o,r,n,e[s+11],14,643717713),n=hi(n,i,o,r,e[s],20,-373897302),r=hi(r,n,i,o,e[s+5],5,-701558691),o=hi(o,r,n,i,e[s+10],9,38016083),i=hi(i,o,r,n,e[s+15],14,-660478335),n=hi(n,i,o,r,e[s+4],20,-405537848),r=hi(r,n,i,o,e[s+9],5,568446438),o=hi(o,r,n,i,e[s+14],9,-1019803690),i=hi(i,o,r,n,e[s+3],14,-187363961),n=hi(n,i,o,r,e[s+8],20,1163531501),r=hi(r,n,i,o,e[s+13],5,-1444681467),o=hi(o,r,n,i,e[s+2],9,-51403784),i=hi(i,o,r,n,e[s+7],14,1735328473),n=hi(n,i,o,r,e[s+12],20,-1926607734),r=pi(r,n,i,o,e[s+5],4,-378558),o=pi(o,r,n,i,e[s+8],11,-2022574463),i=pi(i,o,r,n,e[s+11],16,1839030562),n=pi(n,i,o,r,e[s+14],23,-35309556),r=pi(r,n,i,o,e[s+1],4,-1530992060),o=pi(o,r,n,i,e[s+4],11,1272893353),i=pi(i,o,r,n,e[s+7],16,-155497632),n=pi(n,i,o,r,e[s+10],23,-1094730640),r=pi(r,n,i,o,e[s+13],4,681279174),o=pi(o,r,n,i,e[s],11,-358537222),i=pi(i,o,r,n,e[s+3],16,-722521979),n=pi(n,i,o,r,e[s+6],23,76029189),r=pi(r,n,i,o,e[s+9],4,-640364487),o=pi(o,r,n,i,e[s+12],11,-421815835),i=pi(i,o,r,n,e[s+15],16,530742520),n=pi(n,i,o,r,e[s+2],23,-995338651),r=yi(r,n,i,o,e[s],6,-198630844),o=yi(o,r,n,i,e[s+7],10,1126891415),i=yi(i,o,r,n,e[s+14],15,-1416354905),n=yi(n,i,o,r,e[s+5],21,-57434055),r=yi(r,n,i,o,e[s+12],6,1700485571),o=yi(o,r,n,i,e[s+3],10,-1894986606),i=yi(i,o,r,n,e[s+10],15,-1051523),n=yi(n,i,o,r,e[s+1],21,-2054922799),r=yi(r,n,i,o,e[s+8],6,1873313359),o=yi(o,r,n,i,e[s+15],10,-30611744),i=yi(i,o,r,n,e[s+6],15,-1560198380),n=yi(n,i,o,r,e[s+13],21,1309151649),r=yi(r,n,i,o,e[s+4],6,-145523070),o=yi(o,r,n,i,e[s+11],10,-1120210379),i=yi(i,o,r,n,e[s+2],15,718787259),n=yi(n,i,o,r,e[s+9],21,-343485551),r=Du(r,a),n=Du(n,c),i=Du(i,u),o=Du(o,h)}return[r,n,i,o]}function LX(e){if(e.length===0)return[];let t=e.length*8,r=new Uint32Array(u7(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function Du(e,t){let r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function KX(e,t){return e<<t|e>>>32-t}function aw(e,t,r,n,i,o){return Du(KX(Du(Du(t,e),Du(n,o)),i),r)}function di(e,t,r,n,i,o,s){return aw(t&r|~t&n,e,t,i,o,s)}function hi(e,t,r,n,i,o,s){return aw(t&n|r&~n,e,t,i,o,s)}function pi(e,t,r,n,i,o,s){return aw(t^r^n,e,t,i,o,s)}function yi(e,t,r,n,i,o,s){return aw(r^(t|~n),e,t,i,o,s)}var FX=NX;cw.default=FX});var d7=K(uw=>{"use strict";p();y();Object.defineProperty(uw,"__esModule",{value:!0});uw.default=void 0;var VX=l7($3()),qX=l7(f7());function l7(e){return e&&e.__esModule?e:{default:e}}var HX=(0,VX.default)("v3",48,qX.default),WX=HX;uw.default=WX});var h7=K(fw=>{"use strict";p();y();Object.defineProperty(fw,"__esModule",{value:!0});fw.default=void 0;var zX=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),jX={randomUUID:zX};fw.default=jX});var m7=K(lw=>{"use strict";p();y();Object.defineProperty(lw,"__esModule",{value:!0});lw.default=void 0;var p7=y7(h7()),GX=y7(H3()),$X=qy();function y7(e){return e&&e.__esModule?e:{default:e}}function YX(e,t,r){if(p7.default.randomUUID&&!t&&!e)return p7.default.randomUUID();e=e||{};let n=e.random||(e.rng||GX.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,$X.unsafeStringify)(n)}var JX=YX;lw.default=JX});var g7=K(dw=>{"use strict";p();y();Object.defineProperty(dw,"__esModule",{value:!0});dw.default=void 0;function ZX(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Y3(e,t){return e<<t|e>>>32-t}function QX(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let s=unescape(encodeURIComponent(e));e=[];for(let a=0;a<s.length;++a)e.push(s.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let s=0;s<i;++s){let a=new Uint32Array(16);for(let c=0;c<16;++c)a[c]=e[s*64+c*4]<<24|e[s*64+c*4+1]<<16|e[s*64+c*4+2]<<8|e[s*64+c*4+3];o[s]=a}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let s=0;s<i;++s){let a=new Uint32Array(80);for(let x=0;x<16;++x)a[x]=o[s][x];for(let x=16;x<80;++x)a[x]=Y3(a[x-3]^a[x-8]^a[x-14]^a[x-16],1);let c=r[0],u=r[1],h=r[2],l=r[3],g=r[4];for(let x=0;x<80;++x){let A=Math.floor(x/20),E=Y3(c,5)+ZX(A,u,h,l)+g+t[A]+a[x]>>>0;g=l,l=h,h=Y3(u,30)>>>0,u=c,c=E}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var XX=QX;dw.default=XX});var x7=K(hw=>{"use strict";p();y();Object.defineProperty(hw,"__esModule",{value:!0});hw.default=void 0;var eee=b7($3()),tee=b7(g7());function b7(e){return e&&e.__esModule?e:{default:e}}var ree=(0,eee.default)("v5",80,tee.default),nee=ree;hw.default=nee});var w7=K(pw=>{"use strict";p();y();Object.defineProperty(pw,"__esModule",{value:!0});pw.default=void 0;var iee="00000000-0000-0000-0000-000000000000";pw.default=iee});var v7=K(yw=>{"use strict";p();y();Object.defineProperty(yw,"__esModule",{value:!0});yw.default=void 0;var oee=see(Fy());function see(e){return e&&e.__esModule?e:{default:e}}function aee(e){if(!(0,oee.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var cee=aee;yw.default=cee});var J3=K(qs=>{"use strict";p();y();Object.defineProperty(qs,"__esModule",{value:!0});Object.defineProperty(qs,"NIL",{enumerable:!0,get:function(){return hee.default}});Object.defineProperty(qs,"parse",{enumerable:!0,get:function(){return gee.default}});Object.defineProperty(qs,"stringify",{enumerable:!0,get:function(){return mee.default}});Object.defineProperty(qs,"v1",{enumerable:!0,get:function(){return uee.default}});Object.defineProperty(qs,"v3",{enumerable:!0,get:function(){return fee.default}});Object.defineProperty(qs,"v4",{enumerable:!0,get:function(){return lee.default}});Object.defineProperty(qs,"v5",{enumerable:!0,get:function(){return dee.default}});Object.defineProperty(qs,"validate",{enumerable:!0,get:function(){return yee.default}});Object.defineProperty(qs,"version",{enumerable:!0,get:function(){return pee.default}});var uee=Bc(s7()),fee=Bc(d7()),lee=Bc(m7()),dee=Bc(x7()),hee=Bc(w7()),pee=Bc(v7()),yee=Bc(Fy()),mee=Bc(qy()),gee=Bc(G3());function Bc(e){return e&&e.__esModule?e:{default:e}}});var S7=K((XIe,A7)=>{"use strict";p();y();var bee=J3().v4,xee=function(e,t,r,n){if(typeof e!="string")throw new TypeError(e+" must be a string");n=n||{};let i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");let o={method:e};if(i===2&&(o.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(typeof r>"u"){let s=typeof n.generator=="function"?n.generator:function(){return bee()};o.id=s(o,n)}else i===2&&r===null?n.notificationIdNull&&(o.id=null):o.id=r;return o};A7.exports=xee});var I7=K((r6e,E7)=>{"use strict";p();y();var wee=J3().v4,vee=S7(),Hy=function(e,t){if(!(this instanceof Hy))return new Hy(e,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return wee()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=e};E7.exports=Hy;Hy.prototype.request=function(e,t,r,n){let i=this,o=null,s=Array.isArray(e)&&typeof t=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&e&&typeof e=="object"&&typeof t=="function")n=t,o=e;else{typeof r=="function"&&(n=r,r=void 0);let u=typeof n=="function";try{o=vee(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(u)return n(h);throw h}if(!u)return o}let c;try{c=JSON.stringify(o,this.options.replacer)}catch(u){return n(u)}return this.callServer(c,function(u,h){i._parseResponse(u,h,n)}),o};Hy.prototype._parseResponse=function(e,t,r){if(e){r(e);return}if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(i){return r(i)}if(r.length===3)if(Array.isArray(n)){let i=function(s){return typeof s.error<"u"},o=function(s){return!i(s)};return r(null,n.filter(i),n.filter(o))}else return r(null,n.error,n.result);r(null,n)}});var Ch=K((o6e,Cc)=>{p();y();function Z3(e){"@babel/helpers - typeof";return Cc.exports=Z3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cc.exports.__esModule=!0,Cc.exports.default=Cc.exports,Z3(e)}Cc.exports=Z3,Cc.exports.__esModule=!0,Cc.exports.default=Cc.exports});var T7=K((c6e,Mc)=>{p();y();var Aee=Ch().default;function k7(){"use strict";Mc.exports=k7=function(){return e},Mc.exports.__esModule=!0,Mc.exports.default=Mc.exports;var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(m,b,v){m[b]=v.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(m,b,v){return Object.defineProperty(m,b,{value:v,enumerable:!0,configurable:!0,writable:!0}),m[b]}try{c({},"")}catch{c=function(v,w,P){return v[w]=P}}function u(m,b,v,w){var P=b&&b.prototype instanceof g?b:g,B=Object.create(P.prototype),k=new ee(w||[]);return n(B,"_invoke",{value:q(m,v,k)}),B}function h(m,b,v){try{return{type:"normal",arg:m.call(b,v)}}catch(w){return{type:"throw",arg:w}}}e.wrap=u;var l={};function g(){}function x(){}function A(){}var E={};c(E,o,function(){return this});var C=Object.getPrototypeOf,M=C&&C(C(_([])));M&&M!==t&&r.call(M,o)&&(E=M);var N=A.prototype=g.prototype=Object.create(E);function R(m){["next","throw","return"].forEach(function(b){c(m,b,function(v){return this._invoke(b,v)})})}function V(m,b){function v(P,B,k,d){var S=h(m[P],m,B);if(S.type!=="throw"){var F=S.arg,U=F.value;return U&&Aee(U)=="object"&&r.call(U,"__await")?b.resolve(U.__await).then(function(D){v("next",D,k,d)},function(D){v("throw",D,k,d)}):b.resolve(U).then(function(D){F.value=D,k(F)},function(D){return v("throw",D,k,d)})}d(S.arg)}var w;n(this,"_invoke",{value:function(B,k){function d(){return new b(function(S,F){v(B,k,S,F)})}return w=w?w.then(d,d):d()}})}function q(m,b,v){var w="suspendedStart";return function(P,B){if(w==="executing")throw new Error("Generator is already running");if(w==="completed"){if(P==="throw")throw B;return f()}for(v.method=P,v.arg=B;;){var k=v.delegate;if(k){var d=W(k,v);if(d){if(d===l)continue;return d}}if(v.method==="next")v.sent=v._sent=v.arg;else if(v.method==="throw"){if(w==="suspendedStart")throw w="completed",v.arg;v.dispatchException(v.arg)}else v.method==="return"&&v.abrupt("return",v.arg);w="executing";var S=h(m,b,v);if(S.type==="normal"){if(w=v.done?"completed":"suspendedYield",S.arg===l)continue;return{value:S.arg,done:v.done}}S.type==="throw"&&(w="completed",v.method="throw",v.arg=S.arg)}}}function W(m,b){var v=b.method,w=m.iterator[v];if(w===void 0)return b.delegate=null,v==="throw"&&m.iterator.return&&(b.method="return",b.arg=void 0,W(m,b),b.method==="throw")||v!=="return"&&(b.method="throw",b.arg=new TypeError("The iterator does not provide a '"+v+"' method")),l;var P=h(w,m.iterator,b.arg);if(P.type==="throw")return b.method="throw",b.arg=P.arg,b.delegate=null,l;var B=P.arg;return B?B.done?(b[m.resultName]=B.value,b.next=m.nextLoc,b.method!=="return"&&(b.method="next",b.arg=void 0),b.delegate=null,l):B:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,l)}function G(m){var b={tryLoc:m[0]};1 in m&&(b.catchLoc=m[1]),2 in m&&(b.finallyLoc=m[2],b.afterLoc=m[3]),this.tryEntries.push(b)}function z(m){var b=m.completion||{};b.type="normal",delete b.arg,m.completion=b}function ee(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(G,this),this.reset(!0)}function _(m){if(m){var b=m[o];if(b)return b.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var v=-1,w=function P(){for(;++v<m.length;)if(r.call(m,v))return P.value=m[v],P.done=!1,P;return P.value=void 0,P.done=!0,P};return w.next=w}}return{next:f}}function f(){return{value:void 0,done:!0}}return x.prototype=A,n(N,"constructor",{value:A,configurable:!0}),n(A,"constructor",{value:x,configurable:!0}),x.displayName=c(A,a,"GeneratorFunction"),e.isGeneratorFunction=function(m){var b=typeof m=="function"&&m.constructor;return!!b&&(b===x||(b.displayName||b.name)==="GeneratorFunction")},e.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,A):(m.__proto__=A,c(m,a,"GeneratorFunction")),m.prototype=Object.create(N),m},e.awrap=function(m){return{__await:m}},R(V.prototype),c(V.prototype,s,function(){return this}),e.AsyncIterator=V,e.async=function(m,b,v,w,P){P===void 0&&(P=Promise);var B=new V(u(m,b,v,w),P);return e.isGeneratorFunction(b)?B:B.next().then(function(k){return k.done?k.value:B.next()})},R(N),c(N,a,"Generator"),c(N,o,function(){return this}),c(N,"toString",function(){return"[object Generator]"}),e.keys=function(m){var b=Object(m),v=[];for(var w in b)v.push(w);return v.reverse(),function P(){for(;v.length;){var B=v.pop();if(B in b)return P.value=B,P.done=!1,P}return P.done=!0,P}},e.values=_,ee.prototype={constructor:ee,reset:function(b){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!b)for(var v in this)v.charAt(0)==="t"&&r.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=void 0)},stop:function(){this.done=!0;var b=this.tryEntries[0].completion;if(b.type==="throw")throw b.arg;return this.rval},dispatchException:function(b){if(this.done)throw b;var v=this;function w(F,U){return k.type="throw",k.arg=b,v.next=F,U&&(v.method="next",v.arg=void 0),!!U}for(var P=this.tryEntries.length-1;P>=0;--P){var B=this.tryEntries[P],k=B.completion;if(B.tryLoc==="root")return w("end");if(B.tryLoc<=this.prev){var d=r.call(B,"catchLoc"),S=r.call(B,"finallyLoc");if(d&&S){if(this.prev<B.catchLoc)return w(B.catchLoc,!0);if(this.prev<B.finallyLoc)return w(B.finallyLoc)}else if(d){if(this.prev<B.catchLoc)return w(B.catchLoc,!0)}else{if(!S)throw new Error("try statement without catch or finally");if(this.prev<B.finallyLoc)return w(B.finallyLoc)}}}},abrupt:function(b,v){for(var w=this.tryEntries.length-1;w>=0;--w){var P=this.tryEntries[w];if(P.tryLoc<=this.prev&&r.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var B=P;break}}B&&(b==="break"||b==="continue")&&B.tryLoc<=v&&v<=B.finallyLoc&&(B=null);var k=B?B.completion:{};return k.type=b,k.arg=v,B?(this.method="next",this.next=B.finallyLoc,l):this.complete(k)},complete:function(b,v){if(b.type==="throw")throw b.arg;return b.type==="break"||b.type==="continue"?this.next=b.arg:b.type==="return"?(this.rval=this.arg=b.arg,this.method="return",this.next="end"):b.type==="normal"&&v&&(this.next=v),l},finish:function(b){for(var v=this.tryEntries.length-1;v>=0;--v){var w=this.tryEntries[v];if(w.finallyLoc===b)return this.complete(w.completion,w.afterLoc),z(w),l}},catch:function(b){for(var v=this.tryEntries.length-1;v>=0;--v){var w=this.tryEntries[v];if(w.tryLoc===b){var P=w.completion;if(P.type==="throw"){var B=P.arg;z(w)}return B}}throw new Error("illegal catch attempt")},delegateYield:function(b,v,w){return this.delegate={iterator:_(b),resultName:v,nextLoc:w},this.method==="next"&&(this.arg=void 0),l}},e}Mc.exports=k7,Mc.exports.__esModule=!0,Mc.exports.default=Mc.exports});var _7=K((l6e,P7)=>{p();y();var mw=T7()();P7.exports=mw;try{regeneratorRuntime=mw}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=mw:Function("r","regeneratorRuntime = r")(mw)}});var C7=K((p6e,Wy)=>{p();y();function B7(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(u){r(u);return}a.done?t(c):Promise.resolve(c).then(n,i)}function See(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function s(c){B7(o,n,i,s,a,"next",c)}function a(c){B7(o,n,i,s,a,"throw",c)}s(void 0)})}}Wy.exports=See,Wy.exports.__esModule=!0,Wy.exports.default=Wy.exports});var Q3=K((g6e,zy)=>{p();y();function Eee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}zy.exports=Eee,zy.exports.__esModule=!0,zy.exports.default=zy.exports});var R7=K((w6e,jy)=>{p();y();var M7=Ch().default;function Iee(e,t){if(M7(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(M7(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}jy.exports=Iee,jy.exports.__esModule=!0,jy.exports.default=jy.exports});var O7=K((S6e,Gy)=>{p();y();var kee=Ch().default,Tee=R7();function Pee(e){var t=Tee(e,"string");return kee(t)==="symbol"?t:String(t)}Gy.exports=Pee,Gy.exports.__esModule=!0,Gy.exports.default=Gy.exports});var X3=K((k6e,$y)=>{p();y();var _ee=O7();function N7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_ee(n.key),n)}}function Bee(e,t,r){return t&&N7(e.prototype,t),r&&N7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}$y.exports=Bee,$y.exports.__esModule=!0,$y.exports.default=$y.exports});var U7=K((_6e,Rc)=>{p();y();function e8(e,t){return Rc.exports=e8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Rc.exports.__esModule=!0,Rc.exports.default=Rc.exports,e8(e,t)}Rc.exports=e8,Rc.exports.__esModule=!0,Rc.exports.default=Rc.exports});var t8=K((M6e,Yy)=>{p();y();var Cee=U7();function Mee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cee(e,t)}Yy.exports=Mee,Yy.exports.__esModule=!0,Yy.exports.default=Yy.exports});var D7=K((N6e,Jy)=>{p();y();function Ree(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Jy.exports=Ree,Jy.exports.__esModule=!0,Jy.exports.default=Jy.exports});var r8=K((L6e,Zy)=>{p();y();var Oee=Ch().default,Nee=D7();function Uee(e,t){if(t&&(Oee(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nee(e)}Zy.exports=Uee,Zy.exports.__esModule=!0,Zy.exports.default=Zy.exports});var i8=K((V6e,Oc)=>{p();y();function n8(e){return Oc.exports=n8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oc.exports.__esModule=!0,Oc.exports.default=Oc.exports,n8(e)}Oc.exports=n8,Oc.exports.__esModule=!0,Oc.exports.default=Oc.exports});var K7=K(bw=>{"use strict";p();y();var Ku=NB();Object.defineProperty(bw,"__esModule",{value:!0});bw.default=void 0;var Lu=Ku(_7()),gw=Ku(C7()),Dee=Ku(Ch()),Lee=Ku(Q3()),Kee=Ku(X3()),Fee=Ku(t8()),Vee=Ku(r8()),L7=Ku(i8()),qee=UB();function Hee(e){var t=Wee();return function(){var n=(0,L7.default)(e),i;if(t){var o=(0,L7.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,Vee.default)(this,i)}}function Wee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var zee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},jee=function(e){(0,Fee.default)(r,e);var t=Hee(r);function r(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;(0,Lee.default)(this,r);var c=s.autoconnect,u=c===void 0?!0:c,h=s.reconnect,l=h===void 0?!0:h,g=s.reconnect_interval,x=g===void 0?1e3:g,A=s.max_reconnects,E=A===void 0?5:A,C=zee(s,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return i=t.call(this),i.webSocketFactory=n,i.queue={},i.rpc_id=0,i.address=o,i.autoconnect=u,i.ready=!1,i.reconnect=l,i.reconnect_timer_id=void 0,i.reconnect_interval=x,i.max_reconnects=E,i.rest_options=C,i.current_reconnects=0,i.generate_request_id=a||function(){return++i.rpc_id},i.autoconnect&&i._connect(i.address,Object.assign({autoconnect:i.autoconnect,reconnect:i.reconnect,reconnect_interval:i.reconnect_interval,max_reconnects:i.max_reconnects},i.rest_options)),i}return(0,Kee.default)(r,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(i,o,s,a){var c=this;return!a&&(0,Dee.default)(s)==="object"&&(a=s,s=null),new Promise(function(u,h){if(!c.ready)return h(new Error("socket not ready"));var l=c.generate_request_id(i,o),g={jsonrpc:"2.0",method:i,params:o||null,id:l};c.socket.send(JSON.stringify(g),a,function(x){if(x)return h(x);c.queue[l]={promise:[u,h]},s&&(c.queue[l].timeout=setTimeout(function(){delete c.queue[l],h(new Error("reply timeout"))},s))})})}},{key:"login",value:function(){var n=(0,gw.default)(Lu.default.mark(function o(s){var a;return Lu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.call("rpc.login",s);case 2:if(a=u.sent,a){u.next=5;break}throw new Error("authentication failed");case 5:return u.abrupt("return",a);case 6:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"listMethods",value:function(){var n=(0,gw.default)(Lu.default.mark(function o(){return Lu.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.call("__listMethods");case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"notify",value:function(i,o){var s=this;return new Promise(function(a,c){if(!s.ready)return c(new Error("socket not ready"));var u={jsonrpc:"2.0",method:i,params:o||null};s.socket.send(JSON.stringify(u),function(h){if(h)return c(h);a()})})}},{key:"subscribe",value:function(){var n=(0,gw.default)(Lu.default.mark(function o(s){var a;return Lu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.on",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed subscribing to an event '"+s+"' with: "+a[s]);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"unsubscribe",value:function(){var n=(0,gw.default)(Lu.default.mark(function o(s){var a;return Lu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.off",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed unsubscribing from an event with: "+a);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"close",value:function(i,o){this.socket.close(i||1e3,o)}},{key:"_connect",value:function(i,o){var s=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(i,o),this.socket.addEventListener("open",function(){s.ready=!0,s.emit("open"),s.current_reconnects=0}),this.socket.addEventListener("message",function(a){var c=a.data;c instanceof ArrayBuffer&&(c=Buffer.from(c).toString());try{c=JSON.parse(c)}catch{return}if(c.notification&&s.listeners(c.notification).length){if(!Object.keys(c.params).length)return s.emit(c.notification);var u=[c.notification];if(c.params.constructor===Object)u.push(c.params);else for(var h=0;h<c.params.length;h++)u.push(c.params[h]);return Promise.resolve().then(function(){s.emit.apply(s,u)})}if(!s.queue[c.id])return c.method&&c.params?Promise.resolve().then(function(){s.emit(c.method,c.params)}):void 0;"error"in c=="result"in c&&s.queue[c.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),s.queue[c.id].timeout&&clearTimeout(s.queue[c.id].timeout),c.error?s.queue[c.id].promise[1](c.error):s.queue[c.id].promise[0](c.result),delete s.queue[c.id]}),this.socket.addEventListener("error",function(a){return s.emit("error",a)}),this.socket.addEventListener("close",function(a){var c=a.code,u=a.reason;s.ready&&setTimeout(function(){return s.emit("close",c,u)},0),s.ready=!1,s.socket=void 0,c!==1e3&&(s.current_reconnects++,s.reconnect&&(s.max_reconnects>s.current_reconnects||s.max_reconnects===0)&&(s.reconnect_timer_id=setTimeout(function(){return s._connect(i,o)},s.reconnect_interval)))})}}]),r}(qee.EventEmitter);bw.default=jee});var V7=K(o8=>{"use strict";p();y();var Qy=NB();Object.defineProperty(o8,"__esModule",{value:!0});o8.default=tte;var Gee=Qy(Q3()),$ee=Qy(X3()),Yee=Qy(t8()),Jee=Qy(r8()),F7=Qy(i8()),Zee=UB();function Qee(e){var t=Xee();return function(){var n=(0,F7.default)(e),i;if(t){var o=(0,F7.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,Jee.default)(this,i)}}function Xee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ete=function(e){(0,Yee.default)(r,e);var t=Qee(r);function r(n,i,o){var s;return(0,Gee.default)(this,r),s=t.call(this),s.socket=new self.WebSocket(n,o),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(a){return s.emit("message",a.data)},s.socket.onerror=function(a){return s.emit("error",a)},s.socket.onclose=function(a){s.emit("close",a.code,a.reason)},s}return(0,$ee.default)(r,[{key:"send",value:function(i,o,s){var a=s||o;try{this.socket.send(i),a()}catch(c){a(c)}}},{key:"close",value:function(i,o){this.socket.close(i,o)}},{key:"addEventListener",value:function(i,o,s){this.socket.addEventListener(i,o,s)}}]),r}(Zee.EventEmitter);function tte(e,t){return new ete(e,t)}});var Y7=K(sr=>{"use strict";p();y();Object.defineProperty(sr,"__esModule",{value:!0});sr.shake256=sr.shake128=sr.keccak_512=sr.keccak_384=sr.keccak_256=sr.keccak_224=sr.sha3_512=sr.sha3_384=sr.sha3_256=sr.sha3_224=sr.Keccak=sr.keccakP=void 0;var Mh=bx(),tm=m3(),em=ku(),[W7,z7,j7]=[[],[],[]],rte=BigInt(0),Xy=BigInt(1),nte=BigInt(2),ite=BigInt(7),ote=BigInt(256),ste=BigInt(113);for(let e=0,t=Xy,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],W7.push(2*(5*n+r)),z7.push((e+1)*(e+2)/2%64);let i=rte;for(let o=0;o<7;o++)t=(t<<Xy^(t>>ite)*ste)%ote,t&nte&&(i^=Xy<<(Xy<<BigInt(o))-Xy);j7.push(i)}var[ate,cte]=tm.default.split(j7,!0),q7=(e,t,r)=>r>32?tm.default.rotlBH(e,t,r):tm.default.rotlSH(e,t,r),H7=(e,t,r)=>r>32?tm.default.rotlBL(e,t,r):tm.default.rotlSL(e,t,r);function G7(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],h=r[c+1],l=q7(u,h,1)^r[a],g=H7(u,h,1)^r[a+1];for(let x=0;x<50;x+=10)e[s+x]^=l,e[s+x+1]^=g}let i=e[2],o=e[3];for(let s=0;s<24;s++){let a=z7[s],c=q7(i,o,a),u=H7(i,o,a),h=W7[s];i=e[h],o=e[h+1],e[h]=c,e[h+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=ate[n],e[1]^=cte[n]}r.fill(0)}sr.keccakP=G7;var rm=class e extends em.Hash{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Mh.default.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,em.u32)(this.state)}keccak(){G7(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Mh.default.exists(this);let{blockLen:r,state:n}=this;t=(0,em.toBytes)(t);let i=t.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Mh.default.exists(this,!1),Mh.default.bytes(t),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Mh.default.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Mh.default.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new e(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}};sr.Keccak=rm;var Fu=(e,t,r)=>(0,em.wrapConstructor)(()=>new rm(t,e,r));sr.sha3_224=Fu(6,144,224/8);sr.sha3_256=Fu(6,136,256/8);sr.sha3_384=Fu(6,104,384/8);sr.sha3_512=Fu(6,72,512/8);sr.keccak_224=Fu(1,144,224/8);sr.keccak_256=Fu(1,136,256/8);sr.keccak_384=Fu(1,104,384/8);sr.keccak_512=Fu(1,72,512/8);var $7=(e,t,r)=>(0,em.wrapConstructorWithOpts)((n={})=>new rm(t,e,n.dkLen===void 0?r:n.dkLen,!0));sr.shake128=$7(31,168,128/8);sr.shake256=$7(31,136,256/8)});var Z7=K(nm=>{"use strict";p();y();Object.defineProperty(nm,"__esModule",{value:!0});nm.hmac=void 0;var xw=bx(),J7=ku(),ww=class extends J7.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,xw.default.hash(t);let n=(0,J7.toBytes)(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return xw.default.exists(this),this.iHash.update(t),this}digestInto(t){xw.default.exists(this),xw.default.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},ute=(e,t,r)=>new ww(e,t).update(r).digest();nm.hmac=ute;nm.hmac.create=(e,t)=>new ww(e,t)});var u8=K(St=>{"use strict";p();y();Object.defineProperty(St,"__esModule",{value:!0});St.utils=St.schnorr=St.verify=St.signSync=St.sign=St.getSharedSecret=St.recoverPublicKey=St.getPublicKey=St.Signature=St.Point=St.CURVE=void 0;var fte=wy(),Pt=BigInt(0),lr=BigInt(1),Hu=BigInt(2),om=BigInt(3),Q7=BigInt(8),Qt=Object.freeze({a:Pt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:lr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});St.CURVE=Qt;var X7=(e,t)=>(e+t/Hu)/t,vw={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=Qt,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-lr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=X7(o*e,t),c=X7(-n*e,t),u=me(e-a*r-c*i,t),h=me(-a*n-c*o,t),l=u>s,g=h>s;if(l&&(u=t-u),g&&(h=t-h),u>s||h>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:g,k2:h}}},Hs=32,Ol=32,s9=32,kw=Hs+1,Tw=2*Hs+1;function e9(e){let{a:t,b:r}=Qt,n=me(e*e),i=me(n*e);return me(i+t*e+r)}var Aw=Qt.a===Pt,am=class extends Error{constructor(t){super(t)}};function t9(e){if(!(e instanceof Mi))throw new TypeError("JacobianPoint expected")}var Mi=class e{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof ar))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(ar.ZERO)?e.ZERO:new e(t.x,t.y,lr)}static toAffineBatch(t){let r=yte(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return e.toAffineBatch(t).map(e.fromAffine)}equals(t){t9(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=me(i*i),u=me(a*a),h=me(r*u),l=me(o*c),g=me(me(n*a)*u),x=me(me(s*i)*c);return h===l&&g===x}negate(){return new e(this.x,me(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=me(t*t),o=me(r*r),s=me(o*o),a=t+o,c=me(Hu*(me(a*a)-i-s)),u=me(om*i),h=me(u*u),l=me(h-Hu*c),g=me(u*(c-l)-Q7*s),x=me(Hu*r*n);return new e(l,g,x)}add(t){t9(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t;if(o===Pt||s===Pt)return this;if(r===Pt||n===Pt)return t;let c=me(i*i),u=me(a*a),h=me(r*u),l=me(o*c),g=me(me(n*a)*u),x=me(me(s*i)*c),A=me(l-h),E=me(x-g);if(A===Pt)return E===Pt?this.double():e.ZERO;let C=me(A*A),M=me(A*C),N=me(h*C),R=me(E*E-M-Hu*N),V=me(E*(N-R)-g*M),q=me(i*a*A);return new e(R,V,q)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=e.ZERO;if(typeof t=="bigint"&&t===Pt)return r;let n=i9(t);if(n===lr)return this;if(!Aw){let l=r,g=this;for(;n>Pt;)n&lr&&(l=l.add(g)),g=g.double(),n>>=lr;return l}let{k1neg:i,k1:o,k2neg:s,k2:a}=vw.splitScalar(n),c=r,u=r,h=this;for(;o>Pt||a>Pt;)o&lr&&(c=c.add(h)),a&lr&&(u=u.add(h)),h=h.double(),o>>=lr,a>>=lr;return i&&(c=c.negate()),s&&(u=u.negate()),u=new e(me(u.x*vw.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=Aw?128/t+1:256/t+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=ar.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&s8.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),s8.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+(Aw?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=lr);let E=x,C=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(Sw(M,i[E])):o=o.add(Sw(N,i[C]))}return{p:o,f:s}}multiply(t,r){let n=i9(t),i,o;if(Aw){let{k1neg:s,k1:a,k2neg:c,k2:u}=vw.splitScalar(n),{p:h,f:l}=this.wNAF(a,r),{p:g,f:x}=this.wNAF(u,r);h=Sw(s,h),g=Sw(c,g),g=new e(me(g.x*vw.beta),g.y,g.z),i=h.add(g),o=l.add(x)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return e.normalizeZ([i,o])[0]}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?Q7:Lh(i));let s=t,a=me(s*s),c=me(a*s),u=me(r*a),h=me(n*c),l=me(i*s);if(o)return ar.ZERO;if(l!==lr)throw new Error("invZ was invalid");return new ar(u,h)}};Mi.BASE=new Mi(Qt.Gx,Qt.Gy,lr);Mi.ZERO=new Mi(Pt,lr,Pt);function Sw(e,t){let r=t.negate();return e?r:t}var s8=new WeakMap,ar=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,s8.delete(this)}hasEvenY(){return this.y%Hu===Pt}static fromCompressedHex(t){let r=t.length===32,n=mo(r?t:t.subarray(1));if(!Iw(n))throw new Error("Point is not on curve");let i=e9(n),o=pte(i),s=(o&lr)===lr;r?s&&(o=me(-o)):(t[0]&1)===1!==s&&(o=me(-o));let a=new e(n,o);return a.assertValidity(),a}static fromUncompressedHex(t){let r=mo(t.subarray(1,Hs+1)),n=mo(t.subarray(Hs+1,Hs*2+1)),i=new e(r,n);return i.assertValidity(),i}static fromHex(t){let r=Ia(t),n=r.length,i=r[0];if(n===Hs)return this.fromCompressedHex(r);if(n===kw&&(i===2||i===3))return this.fromCompressedHex(r);if(n===Tw&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${kw} compressed bytes or ${Tw} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return e.BASE.multiply(Nl(t))}static fromSignature(t,r,n){let{r:i,s:o}=c9(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=a8(Ia(t)),{n:a}=Qt,c=n===2||n===3?i+a:i,u=Lh(c,a),h=me(-s*u,a),l=me(o*u,a),g=n&1?"03":"02",x=e.fromHex(g+Wu(c)),A=e.BASE.multiplyAndAddUnsafe(x,h,l);if(!A)throw new Error("Cannot recover signature: point at infinify");return A.assertValidity(),A}toRawBytes(t=!1){return zu(this.toHex(t))}toHex(t=!1){let r=Wu(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${Wu(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!Iw(r)||!Iw(n))throw new Error(t);let i=me(n*n),o=e9(r);if(me(i-o)!==Pt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(this.x,me(-this.y))}double(){return Mi.fromAffine(this).double().toAffine()}add(t){return Mi.fromAffine(this).add(Mi.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Mi.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=Mi.fromAffine(this),o=r===Pt||r===lr||this!==e.BASE?i.multiplyUnsafe(r):i.multiply(r),s=Mi.fromAffine(t).multiplyUnsafe(n),a=o.add(s);return a.equals(Mi.ZERO)?void 0:a.toAffine()}};St.Point=ar;ar.BASE=new ar(Qt.Gx,Qt.Gy);ar.ZERO=new ar(Pt,Pt);function r9(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function n9(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${Oh(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:mo(r),left:e.subarray(t+2)}}function lte(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${Oh(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=n9(e.subarray(2)),{data:n,left:i}=n9(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Oh(i)}`);return{r:t,s:n}}var Rl=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?Oh(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new e(Pw(i.slice(0,64)),Pw(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=lte(r?t:zu(t));return new e(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!Uh(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Uh(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=Qt.n>>lr;return this.s>t}normalizeS(){return this.hasHighS()?new e(this.r,me(-this.s,Qt.n)):this}toDERRawBytes(){return zu(this.toDERHex())}toDERHex(){let t=r9(im(this.s)),r=r9(im(this.r)),n=t.length/2,i=r.length/2,o=im(n),s=im(i);return`30${im(i+n+4)}02${s}${r}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return zu(this.toCompactHex())}toCompactHex(){return Wu(this.r)+Wu(this.s)}};St.Signature=Rl;function qu(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var dte=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Oh(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=dte[e[r]];return t}var hte=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Wu(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(Pt<=e&&e<hte))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Nh(e){let t=zu(Wu(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function im(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Pw(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function zu(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function mo(e){return Pw(Oh(e))}function Ia(e){return e instanceof Uint8Array?Uint8Array.from(e):zu(e)}function i9(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&Uh(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function me(e,t=Qt.P){let r=e%t;return r>=Pt?r:t+r}function Ho(e,t){let{P:r}=Qt,n=e;for(;t-- >Pt;)n*=n,n%=r;return n}function pte(e){let{P:t}=Qt,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=Ho(u,om)*u%t,l=Ho(h,om)*u%t,g=Ho(l,Hu)*c%t,x=Ho(g,n)*g%t,A=Ho(x,i)*x%t,E=Ho(A,s)*A%t,C=Ho(E,a)*E%t,M=Ho(C,s)*A%t,N=Ho(M,om)*u%t,R=Ho(N,o)*x%t,V=Ho(R,r)*c%t,q=Ho(V,Hu);if(q*q%t!==e)throw new Error("Cannot find square root");return q}function Lh(e,t=Qt.P){if(e===Pt||t<=Pt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=me(e,t),n=t,i=Pt,o=lr,s=lr,a=Pt;for(;r!==Pt;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==lr)throw new Error("invert: does not exist");return me(i,t)}function yte(e,t=Qt.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Pt?o:(r[a]=o,me(o*s,t)),lr),i=Lh(n,t);return e.reduceRight((o,s,a)=>s===Pt?o:(r[a]=me(o*r[a],t),me(o*s,t)),i),r}function mte(e){let t=e.length*8-Ol*8,r=mo(e);return t>0?r>>BigInt(t):r}function a8(e,t=!1){let r=mte(e);if(t)return r;let{n}=Qt;return r>=n?r-n:r}var Rh,sm,_w=class{constructor(t,r){if(this.hashLen=t,this.qByteLen=r,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return St.utils.hmacSha256(this.k,...t)}hmacSync(...t){return sm(this.k,...t)}checkSync(){if(typeof sm!="function")throw new am("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return qu(...r)}generateSync(){this.checkSync(),this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return qu(...r)}};function Uh(e){return Pt<e&&e<Qt.n}function Iw(e){return Pt<e&&e<Qt.P}function a9(e,t,r,n=!0){let{n:i}=Qt,o=a8(e,!0);if(!Uh(o))return;let s=Lh(o,i),a=ar.BASE.multiply(o),c=me(a.x,i);if(c===Pt)return;let u=me(s*me(t+r*c,i),i);if(u===Pt)return;let h=new Rl(c,u),l=(a.x===h.r?0:2)|Number(a.y&lr);return n&&h.hasHighS()&&(h=h.normalizeS(),l^=1),{sig:h,recovery:l}}function Nl(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*Ol)throw new Error("Expected 32 bytes of private key");t=Pw(e)}else if(e instanceof Uint8Array){if(e.length!==Ol)throw new Error("Expected 32 bytes of private key");t=mo(e)}else throw new TypeError("Expected valid private key");if(!Uh(t))throw new Error("Expected private key: 0 < key < n");return t}function c8(e){return e instanceof ar?(e.assertValidity(),e):ar.fromHex(e)}function c9(e){if(e instanceof Rl)return e.assertValidity(),e;try{return Rl.fromDER(e)}catch{return Rl.fromCompact(e)}}function gte(e,t=!1){return ar.fromPrivateKey(e).toRawBytes(t)}St.getPublicKey=gte;function bte(e,t,r,n=!1){return ar.fromSignature(e,t,r).toRawBytes(n)}St.recoverPublicKey=bte;function o9(e){let t=e instanceof Uint8Array,r=typeof e=="string",n=(t||r)&&e.length;return t?n===kw||n===Tw:r?n===kw*2||n===Tw*2:e instanceof ar}function xte(e,t,r=!1){if(o9(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!o9(t))throw new TypeError("getSharedSecret: second arg must be public key");let n=c8(t);return n.assertValidity(),n.multiply(Nl(e)).toRawBytes(r)}St.getSharedSecret=xte;function u9(e){let t=e.length>Hs?e.slice(0,Hs):e;return mo(t)}function wte(e){let t=u9(e),r=me(t,Qt.n);return f9(r<Pt?t:r)}function f9(e){return Nh(e)}function l9(e,t,r){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);let n=Ia(e),i=Nl(t),o=[f9(i),wte(n)];if(r!=null){r===!0&&(r=St.utils.randomBytes(Hs));let c=Ia(r);if(c.length!==Hs)throw new Error(`sign: Expected ${Hs} bytes of extra data`);o.push(c)}let s=qu(...o),a=u9(n);return{seed:s,m:a,d:i}}function d9(e,t){let{sig:r,recovery:n}=e,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}async function vte(e,t,r={}){let{seed:n,m:i,d:o}=l9(e,t,r.extraEntropy),s=new _w(s9,Ol);await s.reseed(n);let a;for(;!(a=a9(await s.generate(),i,o,r.canonical));)await s.reseed();return d9(a,r)}St.sign=vte;function Ate(e,t,r={}){let{seed:n,m:i,d:o}=l9(e,t,r.extraEntropy),s=new _w(s9,Ol);s.reseedSync(n);let a;for(;!(a=a9(s.generateSync(),i,o,r.canonical));)s.reseedSync();return d9(a,r)}St.signSync=Ate;var Ste={strict:!0};function Ete(e,t,r,n=Ste){let i;try{i=c9(e),t=Ia(t)}catch{return!1}let{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;let a=a8(t),c;try{c=c8(r)}catch{return!1}let{n:u}=Qt,h=Lh(s,u),l=me(a*h,u),g=me(o*h,u),x=ar.BASE.multiplyAndAddUnsafe(c,l,g);return x?me(x.x,u)===o:!1}St.verify=Ete;function Bw(e){return me(mo(e),Qt.n)}var Dh=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Ia(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=mo(r.subarray(0,32)),i=mo(r.subarray(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!Iw(t)||!Uh(r))throw new Error("Invalid signature")}toHex(){return Wu(this.r)+Wu(this.s)}toRawBytes(){return zu(this.toHex())}};function Ite(e){return ar.fromPrivateKey(e).toRawX()}var Cw=class{constructor(t,r,n=St.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=Ia(t);let{x:i,scalar:o}=this.getScalar(Nl(r));if(this.px=i,this.d=o,this.rand=Ia(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){let r=ar.fromPrivateKey(t),n=r.hasEvenY()?t:Qt.n-t;return{point:r,scalar:n,x:r.toRawX()}}initNonce(t,r){return Nh(t^mo(r))}finalizeNonce(t){let r=me(mo(t),Qt.n);if(r===Pt)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(t,r,n,i){return new Dh(t.x,me(r+n*i,Qt.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:t,d:r,px:n,rand:i}=this,o=St.utils.taggedHash,s=this.initNonce(r,await o(Vu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(Vu.nonce,s,n,t)),h=Bw(await o(Vu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return await y9(l,t,n)||this.error(),l}calcSync(){let{m:t,d:r,px:n,rand:i}=this,o=St.utils.taggedHashSync,s=this.initNonce(r,o(Vu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(Vu.nonce,s,n,t)),h=Bw(o(Vu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return m9(l,t,n)||this.error(),l}};async function kte(e,t,r){return new Cw(e,t,r).calc()}function Tte(e,t,r){return new Cw(e,t,r).calcSync()}function h9(e,t,r){let n=e instanceof Dh,i=n?e:Dh.fromHex(e);return n&&i.assertValidity(),{...i,m:Ia(t),P:c8(r)}}function p9(e,t,r,n){let i=ar.BASE.multiplyAndAddUnsafe(t,Nl(r),me(-n,Qt.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function y9(e,t,r){try{let{r:n,s:i,m:o,P:s}=h9(e,t,r),a=Bw(await St.utils.taggedHash(Vu.challenge,Nh(n),s.toRawX(),o));return p9(n,s,i,a)}catch{return!1}}function m9(e,t,r){try{let{r:n,s:i,m:o,P:s}=h9(e,t,r),a=Bw(St.utils.taggedHashSync(Vu.challenge,Nh(n),s.toRawX(),o));return p9(n,s,i,a)}catch(n){if(n instanceof am)throw n;return!1}}St.schnorr={Signature:Dh,getPublicKey:Ite,sign:kte,verify:y9,signSync:Tte,verifySync:m9};ar.BASE._setWindowSize(8);var yo={node:fte,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Vu={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},Ew={};St.utils={bytesToHex:Oh,hexToBytes:zu,concatBytes:qu,mod:me,invert:Lh,isValidPrivateKey(e){try{return Nl(e),!0}catch{return!1}},_bigintTo32Bytes:Nh,_normalizePrivateKey:Nl,hashToPrivateKey:e=>{e=Ia(e);let t=Ol+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=me(mo(e),Qt.n-lr)+lr;return Nh(r)},randomBytes:(e=32)=>{if(yo.web)return yo.web.getRandomValues(new Uint8Array(e));if(yo.node){let{randomBytes:t}=yo.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>St.utils.hashToPrivateKey(St.utils.randomBytes(Ol+8)),precompute(e=8,t=ar.BASE){let r=t===ar.BASE?t:new ar(t.x,t.y);return r._setWindowSize(e),r.multiply(om),r},sha256:async(...e)=>{if(yo.web){let t=await yo.web.subtle.digest("SHA-256",qu(...e));return new Uint8Array(t)}else if(yo.node){let{createHash:t}=yo.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(yo.web){let r=await yo.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=qu(...t),i=await yo.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(yo.node){let{createHmac:r}=yo.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=Ew[e];if(r===void 0){let n=await St.utils.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=qu(n,n),Ew[e]=r}return St.utils.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof Rh!="function")throw new am("sha256Sync is undefined, you need to set it");let r=Ew[e];if(r===void 0){let n=Rh(Uint8Array.from(e,i=>i.charCodeAt(0)));r=qu(n,n),Ew[e]=r}return Rh(r,...t)},_JacobianPoint:Mi};Object.defineProperties(St.utils,{sha256Sync:{configurable:!1,get(){return Rh},set(e){Rh||(Rh=e)}},hmacSha256Sync:{configurable:!1,get(){return sm},set(e){sm||(sm=e)}}})});var Jw=K(he=>{"use strict";p();y();Object.defineProperty(he,"__esModule",{value:!0});var Pe=ky(),Pte=PC(),_te=qC(),Bte=fx(),Cte=Us(),m8=Px(),f8=$C(),O9=Ly(),g8=U3(),I=r7(),Mte=I7(),Rte=K7(),Ote=V7(),g9=Y7(),Nte=Z7(),Ute=u8();function wm(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function U8(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var $u=U8(_te),b9=wm(Bte),$n=wm(Cte),H=U8(O9),Dte=wm(Mte),Lte=wm(Rte),Kte=wm(Ote),jw=U8(Ute);$u.utils.sha512Sync=(...e)=>Pte.sha512($u.utils.concatBytes(...e));var Fte=$u.utils.randomPrivateKey,x9=()=>{let e=$u.utils.randomPrivateKey(),t=Uw(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},Uw=$u.sync.getPublicKey;function w9(e){try{return $u.Point.fromHex(e,!0),!0}catch{return!1}}var D8=(e,t)=>$u.sync.sign(e,t.slice(0,32)),Vte=$u.sync.verify,dt=e=>Pe.Buffer.isBuffer(e)?e:e instanceof Uint8Array?Pe.Buffer.from(e.buffer,e.byteOffset,e.byteLength):Pe.Buffer.from(e),lm=class{constructor(t){Object.assign(this,t)}encode(){return Pe.Buffer.from(f8.serialize(fm,this))}static decode(t){return f8.deserialize(fm,this,t)}static decodeUnchecked(t){return f8.deserializeUnchecked(fm,this,t)}},b8=class extends lm{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(r=>{this.enum=r})}},fm=new Map,N9,U9=32,_a=32;function qte(e){return e._bn!==void 0}var v9=1;N9=Symbol.toStringTag;var ye=class e extends lm{constructor(t){if(super({}),this._bn=void 0,qte(t))this._bn=t._bn;else{if(typeof t=="string"){let r=$n.default.decode(t);if(r.length!=_a)throw new Error("Invalid public key input");this._bn=new b9.default(r)}else this._bn=new b9.default(t);if(this._bn.byteLength()>_a)throw new Error("Invalid public key input")}}static unique(){let t=new e(v9);return v9+=1,new e(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return $n.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike(Pe.Buffer);if(t.length===_a)return t;let r=Pe.Buffer.alloc(32);return t.copy(r,32-t.length),r}get[N9](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,r,n){let i=Pe.Buffer.concat([t.toBuffer(),Pe.Buffer.from(r),n.toBuffer()]),o=m8.sha256(i);return new e(o)}static createProgramAddressSync(t,r){let n=Pe.Buffer.alloc(0);t.forEach(function(o){if(o.length>U9)throw new TypeError("Max seed length exceeded");n=Pe.Buffer.concat([n,dt(o)])}),n=Pe.Buffer.concat([n,r.toBuffer(),Pe.Buffer.from("ProgramDerivedAddress")]);let i=m8.sha256(n);if(w9(i))throw new Error("Invalid seeds, address must fall off the curve");return new e(i)}static async createProgramAddress(t,r){return this.createProgramAddressSync(t,r)}static findProgramAddressSync(t,r){let n=255,i;for(;n!=0;){try{let o=t.concat(Pe.Buffer.from([n]));i=this.createProgramAddressSync(o,r)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,r){return this.findProgramAddressSync(t,r)}static isOnCurve(t){let r=new e(t);return w9(r.toBytes())}};ye.default=new ye("11111111111111111111111111111111");fm.set(ye,{kind:"struct",fields:[["_bn","u256"]]});var x8=class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){let r=dt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=r.slice(32,64),this._secretKey=r.slice(0,32)}else this._secretKey=dt(Fte()),this._publicKey=dt(Uw(this._secretKey))}get publicKey(){return new ye(this._publicKey)}get secretKey(){return Pe.Buffer.concat([this._secretKey,this._publicKey],64)}},Hte=new ye("BPFLoader1111111111111111111111111111111111"),Gu=1232,Gw=127,dm=64,hm=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(hm.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var pm=class extends Error{constructor(t,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(pm.prototype,"name",{value:"TransactionExpiredTimeoutError"});var ju=class extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}};Object.defineProperty(ju.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Ll=class{constructor(t,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let r of this.keySegments()){if(t<r.length)return r[t];t-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((o,s)=>{n.set(o.toBase58(),s)});let i=o=>{let s=n.get(o.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return t.map(o=>({programIdIndex:i(o.programId),accountKeyIndexes:o.keys.map(s=>i(s.pubkey)),data:o.data}))}},bt=(e="publicKey")=>H.blob(32,e),Wte=(e="signature")=>H.blob(64,e),Dl=(e="string")=>{let t=H.struct([H.u32("length"),H.u32("lengthPadding"),H.blob(H.offset(H.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(o,s)=>r(o,s).chars.toString(),i.encode=(o,s,a)=>{let c={chars:Pe.Buffer.from(o,"utf8")};return n(c,s,a)},i.alloc=o=>H.u32().span+H.u32().span+Pe.Buffer.from(o,"utf8").length,i},zte=(e="authorized")=>H.struct([bt("staker"),bt("withdrawer")],e),jte=(e="lockup")=>H.struct([H.ns64("unixTimestamp"),H.ns64("epoch"),bt("custodian")],e),Gte=(e="voteInit")=>H.struct([bt("nodePubkey"),bt("authorizedVoter"),bt("authorizedWithdrawer"),H.u8("commission")],e),$te=(e="voteAuthorizeWithSeedArgs")=>H.struct([H.u32("voteAuthorizationType"),bt("currentAuthorityDerivedKeyOwnerPubkey"),Dl("currentAuthorityDerivedKeySeed"),bt("newAuthorized")],e);function D9(e,t){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){let o=t[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return D9({layout:i},t[i.property]);return 0},n=0;return e.layout.fields.forEach(i=>{n+=r(i)}),n}function Qi(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(n&127)<<r*7,r+=1,!(n&128))break}return t}function go(e,t){let r=t;for(;;){let n=r&127;if(r>>=7,r==0){e.push(n);break}else n|=128,e.push(n)}}function Dt(e,t){if(!e)throw new Error(t||"Assertion failed")}var Dw=class e{constructor(t,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}static compile(t,r){let n=new Map,i=s=>{let a=s.toBase58(),c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},o=i(r);o.isSigner=!0,o.isWritable=!0;for(let s of t){i(s.programId).isInvoked=!0;for(let a of s.keys){let c=i(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new e(r,n)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];Dt(t.length<=256,"Max static account keys length exceeded");let r=t.filter(([,c])=>c.isSigner&&c.isWritable),n=t.filter(([,c])=>c.isSigner&&!c.isWritable),i=t.filter(([,c])=>!c.isSigner&&c.isWritable),o=t.filter(([,c])=>!c.isSigner&&!c.isWritable),s={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:o.length};{Dt(r.length>0,"Expected at least one writable signer key");let[c]=r[0];Dt(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let a=[...r.map(([c])=>new ye(c)),...n.map(([c])=>new ye(c)),...i.map(([c])=>new ye(c)),...o.map(([c])=>new ye(c))];return[s,a]}extractTableLookup(t){let[r,n]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[i,o]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(r.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:r,readonlyIndexes:i},{writable:n,readonly:o}]}drainKeysFoundInLookupTable(t,r){let n=new Array,i=new Array;for(let[o,s]of this.keyMetaMap.entries())if(r(s)){let a=new ye(o),c=t.findIndex(u=>u.equals(a));c>=0&&(Dt(c<256,"Max lookup table index exceeded"),n.push(c),i.push(a),this.keyMetaMap.delete(o))}return[n,i]}},L9="Reached end of buffer unexpectedly";function Ta(e){if(e.length===0)throw new Error(L9);return e.shift()}function Xi(e,...t){let[r]=t;if(t.length===2?r+(t[1]??0)>e.length:r>=e.length)throw new Error(L9);return e.splice(...t)}var Ba=class e{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(r=>new ye(r)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:$n.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ll(this.staticAccountKeys)}static compile(t){let r=Dw.compile(t.instructions,t.payerKey),[n,i]=r.getMessageComponents(),s=new Ll(i).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:$n.default.encode(a.data)}));return new e({header:n,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let r=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let n=t-r,o=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<o}else{let n=r-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,r)=>!this.isProgramId(r))}serialize(){let t=this.accountKeys.length,r=[];go(r,t);let n=this.instructions.map(l=>{let{accounts:g,programIdIndex:x}=l,A=Array.from($n.default.decode(l.data)),E=[];go(E,g.length);let C=[];return go(C,A.length),{programIdIndex:x,keyIndicesCount:Pe.Buffer.from(E),keyIndices:g,dataLength:Pe.Buffer.from(C),data:A}}),i=[];go(i,n.length);let o=Pe.Buffer.alloc(Gu);Pe.Buffer.from(i).copy(o);let s=i.length;n.forEach(l=>{let x=H.struct([H.u8("programIdIndex"),H.blob(l.keyIndicesCount.length,"keyIndicesCount"),H.seq(H.u8("keyIndex"),l.keyIndices.length,"keyIndices"),H.blob(l.dataLength.length,"dataLength"),H.seq(H.u8("userdatum"),l.data.length,"data")]).encode(l,o,s);s+=x}),o=o.slice(0,s);let a=H.struct([H.blob(1,"numRequiredSignatures"),H.blob(1,"numReadonlySignedAccounts"),H.blob(1,"numReadonlyUnsignedAccounts"),H.blob(r.length,"keyCount"),H.seq(bt("key"),t,"keys"),bt("recentBlockhash")]),c={numRequiredSignatures:Pe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Pe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Pe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Pe.Buffer.from(r),keys:this.accountKeys.map(l=>dt(l.toBytes())),recentBlockhash:$n.default.decode(this.recentBlockhash)},u=Pe.Buffer.alloc(2048),h=a.encode(c,u);return o.copy(u,h),u.slice(0,h+o.length)}static from(t){let r=[...t],n=Ta(r);if(n!==(n&Gw))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let i=Ta(r),o=Ta(r),s=Qi(r),a=[];for(let g=0;g<s;g++){let x=Xi(r,0,_a);a.push(new ye(Pe.Buffer.from(x)))}let c=Xi(r,0,_a),u=Qi(r),h=[];for(let g=0;g<u;g++){let x=Ta(r),A=Qi(r),E=Xi(r,0,A),C=Qi(r),M=Xi(r,0,C),N=$n.default.encode(Pe.Buffer.from(M));h.push({programIdIndex:x,accounts:E,data:N})}let l={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:$n.default.encode(Pe.Buffer.from(c)),accountKeys:a,instructions:h};return new e(l)}},Kh=class e{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let r of this.addressTableLookups)t+=r.readonlyIndexes.length+r.writableIndexes.length;return t}getAccountKeys(t){let r;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)r=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ll(this.staticAccountKeys,r)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){let i=t-n,o=this.addressTableLookups.reduce((s,a)=>s+a.writableIndexes.length,0);return i<o}else if(t>=this.header.numRequiredSignatures){let i=t-r,s=n-r-this.header.numReadonlyUnsignedAccounts;return i<s}else{let i=r-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){let r={writable:[],readonly:[]};for(let n of this.addressTableLookups){let i=t.find(o=>o.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let o of n.writableIndexes)if(o<i.state.addresses.length)r.writable.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`);for(let o of n.readonlyIndexes)if(o<i.state.addresses.length)r.readonly.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(t){let r=Dw.compile(t.instructions,t.payerKey),n=new Array,i={writable:new Array,readonly:new Array},o=t.addressLookupTableAccounts||[];for(let h of o){let l=r.extractTableLookup(h);if(l!==void 0){let[g,{writable:x,readonly:A}]=l;n.push(g),i.writable.push(...x),i.readonly.push(...A)}}let[s,a]=r.getMessageComponents(),u=new Ll(a,i).compileInstructions(t.instructions);return new e({header:s,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:u,addressTableLookups:n})}serialize(){let t=Array();go(t,this.staticAccountKeys.length);let r=this.serializeInstructions(),n=Array();go(n,this.compiledInstructions.length);let i=this.serializeAddressTableLookups(),o=Array();go(o,this.addressTableLookups.length);let s=H.struct([H.u8("prefix"),H.struct([H.u8("numRequiredSignatures"),H.u8("numReadonlySignedAccounts"),H.u8("numReadonlyUnsignedAccounts")],"header"),H.blob(t.length,"staticAccountKeysLength"),H.seq(bt(),this.staticAccountKeys.length,"staticAccountKeys"),bt("recentBlockhash"),H.blob(n.length,"instructionsLength"),H.blob(r.length,"serializedInstructions"),H.blob(o.length,"addressTableLookupsLength"),H.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Gu),u=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:$n.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:i},a);return a.slice(0,u)}serializeInstructions(){let t=0,r=new Uint8Array(Gu);for(let n of this.compiledInstructions){let i=Array();go(i,n.accountKeyIndexes.length);let o=Array();go(o,n.data.length);let s=H.struct([H.u8("programIdIndex"),H.blob(i.length,"encodedAccountKeyIndexesLength"),H.seq(H.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),H.blob(o.length,"encodedDataLength"),H.blob(n.data.length,"data")]);t+=s.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:n.data},r,t)}return r.slice(0,t)}serializeAddressTableLookups(){let t=0,r=new Uint8Array(Gu);for(let n of this.addressTableLookups){let i=Array();go(i,n.writableIndexes.length);let o=Array();go(o,n.readonlyIndexes.length);let s=H.struct([bt("accountKey"),H.blob(i.length,"encodedWritableIndexesLength"),H.seq(H.u8(),n.writableIndexes.length,"writableIndexes"),H.blob(o.length,"encodedReadonlyIndexesLength"),H.seq(H.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:n.readonlyIndexes},r,t)}return r.slice(0,t)}static deserialize(t){let r=[...t],n=Ta(r),i=n&Gw;Dt(n!==i,"Expected versioned message but received legacy message");let o=i;Dt(o===0,`Expected versioned message with version 0 but found version ${o}`);let s={numRequiredSignatures:Ta(r),numReadonlySignedAccounts:Ta(r),numReadonlyUnsignedAccounts:Ta(r)},a=[],c=Qi(r);for(let A=0;A<c;A++)a.push(new ye(Xi(r,0,_a)));let u=$n.default.encode(Xi(r,0,_a)),h=Qi(r),l=[];for(let A=0;A<h;A++){let E=Ta(r),C=Qi(r),M=Xi(r,0,C),N=Qi(r),R=new Uint8Array(Xi(r,0,N));l.push({programIdIndex:E,accountKeyIndexes:M,data:R})}let g=Qi(r),x=[];for(let A=0;A<g;A++){let E=new ye(Xi(r,0,_a)),C=Qi(r),M=Xi(r,0,C),N=Qi(r),R=Xi(r,0,N);x.push({accountKey:E,writableIndexes:M,readonlyIndexes:R})}return new e({header:s,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:l,addressTableLookups:x})}},L8={deserializeMessageVersion(e){let t=e[0],r=t&Gw;return r===t?"legacy":r},deserialize:e=>{let t=L8.deserializeMessageVersion(e);if(t==="legacy")return Ba.from(e);if(t===0)return Kh.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};he.TransactionStatus=void 0;(function(e){e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID"})(he.TransactionStatus||(he.TransactionStatus={}));var Yte=Pe.Buffer.alloc(dm).fill(0),Yt=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Pe.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:r,isWritable:n})=>({pubkey:t.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},$t=class e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:r,nonceInfo:n}=t;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:r,lastValidBlockHeight:n}=t;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{let{recentBlockhash:r,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new Yt(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(t=this.recentBlockhash,r=this.instructions),!t)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let E=0;E<r.length;E++)if(r[E].programId===void 0)throw new Error(`Transaction instruction index ${E} has undefined program id`);let i=[],o=[];r.forEach(E=>{E.keys.forEach(M=>{o.push({...M})});let C=E.programId.toString();i.includes(C)||i.push(C)}),i.forEach(E=>{o.push({pubkey:new ye(E),isSigner:!1,isWritable:!1})});let s=[];o.forEach(E=>{let C=E.pubkey.toString(),M=s.findIndex(N=>N.pubkey.toString()===C);M>-1?(s[M].isWritable=s[M].isWritable||E.isWritable,s[M].isSigner=s[M].isSigner||E.isSigner):s.push(E)}),s.sort(function(E,C){return E.isSigner!==C.isSigner?E.isSigner?-1:1:E.isWritable!==C.isWritable?E.isWritable?-1:1:E.pubkey.toBase58().localeCompare(C.pubkey.toBase58())});let a=s.findIndex(E=>E.pubkey.equals(n));if(a>-1){let[E]=s.splice(a,1);E.isSigner=!0,E.isWritable=!0,s.unshift(E)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let E of this.signatures){let C=s.findIndex(M=>M.pubkey.equals(E.publicKey));if(C>-1)s[C].isSigner||(s[C].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${E.publicKey.toString()}`)}let c=0,u=0,h=0,l=[],g=[];s.forEach(({pubkey:E,isSigner:C,isWritable:M})=>{C?(l.push(E.toString()),c+=1,M||(u+=1)):(g.push(E.toString()),M||(h+=1))});let x=l.concat(g),A=r.map(E=>{let{data:C,programId:M}=E;return{programIdIndex:x.indexOf(M.toString()),accounts:E.keys.map(N=>x.indexOf(N.pubkey.toString())),data:$n.default.encode(C)}});return A.forEach(E=>{Dt(E.programIdIndex>=0),E.accounts.forEach(C=>Dt(C>=0))}),new Ba({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:h},accountKeys:x,recentBlockhash:t,instructions:A})}_compile(){let t=this.compileMessage(),r=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((i,o)=>r[o].equals(i.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let r=new Set;this.signatures=t.filter(n=>{let i=n.toString();return r.has(i)?!1:(r.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of t){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}this.signatures=n.map(o=>({signature:null,publicKey:o.publicKey}));let i=this._compile();this._partialSign(i,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of t){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}let i=this._compile();this._partialSign(i,...n)}_partialSign(t,...r){let n=t.serialize();r.forEach(i=>{let o=D8(n,i.secretKey);this._addSignature(i.publicKey,dt(o))})}addSignature(t,r){this._compile(),this._addSignature(t,r)}_addSignature(t,r){Dt(r.length===64);let n=this.signatures.findIndex(i=>t.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=Pe.Buffer.from(r)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),t===void 0?!0:t)}_verifySignatures(t,r){for(let{signature:n,publicKey:i}of this.signatures)if(n===null){if(r)return!1}else if(!Vte(n,t,i.toBytes()))return!1;return!0}serialize(t){let{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(t){let{signatures:r}=this,n=[];go(n,r.length);let i=n.length+r.length*64+t.length,o=Pe.Buffer.alloc(i);return Dt(r.length<256),Pe.Buffer.from(n).copy(o,0),r.forEach(({signature:s},a)=>{s!==null&&(Dt(s.length===64,"signature has invalid length"),Pe.Buffer.from(s).copy(o,n.length+a*64))}),t.copy(o,n.length+r.length*64),Dt(o.length<=Gu,`Transaction too large: ${o.length} > ${Gu}`),o}get keys(){return Dt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Dt(this.instructions.length===1),this.instructions[0].programId}get data(){return Dt(this.instructions.length===1),this.instructions[0].data}static from(t){let r=[...t],n=Qi(r),i=[];for(let o=0;o<n;o++){let s=Xi(r,0,dm);i.push($n.default.encode(Pe.Buffer.from(s)))}return e.populate(Ba.from(r),i)}static populate(t,r=[]){let n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((i,o)=>{let s={signature:i==$n.default.encode(Yte)?null:$n.default.decode(i),publicKey:t.accountKeys[o]};n.signatures.push(s)}),t.instructions.forEach(i=>{let o=i.accounts.map(s=>{let a=t.accountKeys[s];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||t.isAccountSigner(s),isWritable:t.isAccountWritable(s)}});n.instructions.push(new Yt({keys:o,programId:t.accountKeys[i.programIdIndex],data:$n.default.decode(i.data)}))}),n._message=t,n._json=n.toJSON(),n}},w8=class e{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,r){let{header:n,compiledInstructions:i,recentBlockhash:o}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=n,u=s-a;Dt(u>0,"Message header is invalid");let h=t.staticAccountKeys.length-s-c;Dt(h>=0,"Message header is invalid");let l=t.getAccountKeys(r),g=l.get(0);if(g===void 0)throw new Error("Failed to decompile message because no account keys were found");let x=[];for(let A of i){let E=[];for(let M of A.accountKeyIndexes){let N=l.get(M);if(N===void 0)throw new Error(`Failed to find key for account key index ${M}`);let R=M<s,V;R?V=M<u:M<l.staticAccountKeys.length?V=M-s<h:V=M-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,E.push({pubkey:N,isSigner:M<n.numRequiredSignatures,isWritable:V})}let C=l.get(A.programIdIndex);if(C===void 0)throw new Error(`Failed to find program id for program id index ${A.programIdIndex}`);x.push(new Yt({programId:C,data:dt(A.data),keys:E}))}return new e({payerKey:g,instructions:x,recentBlockhash:o})}compileToLegacyMessage(){return Ba.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Kh.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}},v8=class e{get version(){return this.message.version}constructor(t,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)Dt(r.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{let n=[];for(let i=0;i<t.header.numRequiredSignatures;i++)n.push(new Uint8Array(dm));this.signatures=n}this.message=t}serialize(){let t=this.message.serialize(),r=Array();go(r,this.signatures.length);let n=H.struct([H.blob(r.length,"encodedSignaturesLength"),H.seq(Wte(),this.signatures.length,"signatures"),H.blob(t.length,"serializedMessage")]),i=new Uint8Array(2048),o=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:t},i);return i.slice(0,o)}static deserialize(t){let r=[...t],n=[],i=Qi(r);for(let s=0;s<i;s++)n.push(new Uint8Array(Xi(r,0,dm)));let o=L8.deserialize(new Uint8Array(r));return new e(o,n)}sign(t){let r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let i of t){let o=n.findIndex(s=>s.equals(i.publicKey));Dt(o>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[o]=D8(r,i.secretKey)}}addSignature(t,r){Dt(r.byteLength===64,"Signature must be 64 bytes long");let i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(t));Dt(i>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=r}},ka=new ye("SysvarC1ock11111111111111111111111111111111"),Jte=new ye("SysvarEpochSchedu1e111111111111111111111111"),Zte=new ye("Sysvar1nstructions1111111111111111111111111"),Rw=new ye("SysvarRecentB1ockHashes11111111111111111111"),Fh=new ye("SysvarRent111111111111111111111111111111111"),Qte=new ye("SysvarRewards111111111111111111111111111111"),Xte=new ye("SysvarS1otHashes111111111111111111111111111"),ere=new ye("SysvarS1otHistory11111111111111111111111111"),Ow=new ye("SysvarStakeHistory1111111111111111111111111");async function Nw(e,t,r,n){let i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await e.sendTransaction(t,r,i),s;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)s=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){let{nonceInstruction:a}=t.nonceInfo,c=a.keys[0].pubkey;s=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:t.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await e.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function Ul(e){return new Promise(t=>setTimeout(t,e))}function Rt(e,t){let r=e.layout.span>=0?e.layout.span:D9(e,t),n=Pe.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function jt(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}var K9=H.nu64("lamportsPerSignature"),F9=H.struct([H.u32("version"),H.u32("state"),bt("authorizedPubkey"),bt("nonce"),H.struct([K9],"feeCalculator")]),A8=F9.span,Lw=class e{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let r=F9.decode(dt(t),0);return new e({authorizedPubkey:new ye(r.authorizedPubkey),nonce:new ye(r.nonce).toString(),feeCalculator:r.feeCalculator})}},tre=e=>{let t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},rre=e=>t=>{let r=O9.blob(e,t),{encode:n,decode:i}=tre(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return g8.toBigIntLE(Pe.Buffer.from(c))},o.encode=(s,a,c)=>{let u=g8.toBufferLE(s,e);return n(u,a,c)},o},Vh=rre(8),S8=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(cr))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:r,space:n,programId:i}=jt(cr.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:r,space:n,programId:new ye(i)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:r}=jt(cr.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:r}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r,seed:n,programId:i}=jt(cr.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:r,seed:n,programId:new ye(i)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{space:r}=jt(cr.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:r}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:r,seed:n,space:i,programId:o}=jt(cr.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ye(r),seed:n,space:i,programId:new ye(o)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{programId:r}=jt(cr.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new ye(r)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:r,seed:n,programId:i}=jt(cr.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ye(r),seed:n,programId:new ye(i)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{base:r,seed:n,lamports:i,space:o,programId:s}=jt(cr.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new ye(r),seed:n,lamports:i,space:o,programId:new ye(s)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{authorized:r}=jt(cr.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new ye(r)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),jt(cr.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:r}=jt(cr.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:r}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:r}=jt(cr.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new ye(r)}}static checkProgramId(t){if(!t.equals(mi.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},cr=Object.freeze({Create:{index:0,layout:H.struct([H.u32("instruction"),H.ns64("lamports"),H.ns64("space"),bt("programId")])},Assign:{index:1,layout:H.struct([H.u32("instruction"),bt("programId")])},Transfer:{index:2,layout:H.struct([H.u32("instruction"),Vh("lamports")])},CreateWithSeed:{index:3,layout:H.struct([H.u32("instruction"),bt("base"),Dl("seed"),H.ns64("lamports"),H.ns64("space"),bt("programId")])},AdvanceNonceAccount:{index:4,layout:H.struct([H.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:H.struct([H.u32("instruction"),bt("authorized")])},AuthorizeNonceAccount:{index:7,layout:H.struct([H.u32("instruction"),bt("authorized")])},Allocate:{index:8,layout:H.struct([H.u32("instruction"),H.ns64("space")])},AllocateWithSeed:{index:9,layout:H.struct([H.u32("instruction"),bt("base"),Dl("seed"),H.ns64("space"),bt("programId")])},AssignWithSeed:{index:10,layout:H.struct([H.u32("instruction"),bt("base"),Dl("seed"),bt("programId")])},TransferWithSeed:{index:11,layout:H.struct([H.u32("instruction"),Vh("lamports"),Dl("seed"),bt("programId")])},UpgradeNonceAccount:{index:12,layout:H.struct([H.u32("instruction")])}}),mi=class e{constructor(){}static createAccount(t){let r=cr.Create,n=Rt(r,{lamports:t.lamports,space:t.space,programId:dt(t.programId.toBuffer())});return new Yt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let r,n;if("basePubkey"in t){let i=cr.TransferWithSeed;r=Rt(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=cr.Transfer;r=Rt(i,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Yt({keys:n,programId:this.programId,data:r})}static assign(t){let r,n;if("basePubkey"in t){let i=cr.AssignWithSeed;r=Rt(i,{base:dt(t.basePubkey.toBuffer()),seed:t.seed,programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=cr.Assign;r=Rt(i,{programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Yt({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(t){let r=cr.CreateWithSeed,n=Rt(r,{base:dt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:dt(t.programId.toBuffer())}),i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Yt({keys:i,programId:this.programId,data:n})}static createNonceAccount(t){let r=new $t;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:A8,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:A8,programId:this.programId}));let n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(t){let r=cr.InitializeNonceAccount,n=Rt(r,{authorized:dt(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Rw,isSigner:!1,isWritable:!1},{pubkey:Fh,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Yt(i)}static nonceAdvance(t){let r=cr.AdvanceNonceAccount,n=Rt(r),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Rw,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Yt(i)}static nonceWithdraw(t){let r=cr.WithdrawNonceAccount,n=Rt(r,{lamports:t.lamports});return new Yt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Rw,isSigner:!1,isWritable:!1},{pubkey:Fh,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){let r=cr.AuthorizeNonceAccount,n=Rt(r,{authorized:dt(t.newAuthorizedPubkey.toBuffer())});return new Yt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let r,n;if("basePubkey"in t){let i=cr.AllocateWithSeed;r=Rt(i,{base:dt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=cr.Allocate;r=Rt(i,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Yt({keys:n,programId:this.programId,data:r})}};mi.programId=new ye("11111111111111111111111111111111");var nre=Gu-300,qh=class e{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}static async load(t,r,n,i,o){{let l=await t.getMinimumBalanceForRentExemption(o.length),g=await t.getAccountInfo(n.publicKey,"confirmed"),x=null;if(g!==null){if(g.executable)return console.error("Program load failed, account is already executable"),!1;g.data.length!==o.length&&(x=x||new $t,x.add(mi.allocate({accountPubkey:n.publicKey,space:o.length}))),g.owner.equals(i)||(x=x||new $t,x.add(mi.assign({accountPubkey:n.publicKey,programId:i}))),g.lamports<l&&(x=x||new $t,x.add(mi.transfer({fromPubkey:r.publicKey,toPubkey:n.publicKey,lamports:l-g.lamports})))}else x=new $t().add(mi.createAccount({fromPubkey:r.publicKey,newAccountPubkey:n.publicKey,lamports:l>0?l:1,space:o.length,programId:i}));x!==null&&await Nw(t,x,[r,n],{commitment:"confirmed"})}let s=H.struct([H.u32("instruction"),H.u32("offset"),H.u32("bytesLength"),H.u32("bytesLengthPadding"),H.seq(H.u8("byte"),H.offset(H.u32(),-8),"bytes")]),a=e.chunkSize,c=0,u=o,h=[];for(;u.length>0;){let l=u.slice(0,a),g=Pe.Buffer.alloc(a+16);s.encode({instruction:0,offset:c,bytes:l,bytesLength:0,bytesLengthPadding:0},g);let x=new $t().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:g});h.push(Nw(t,x,[r,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await Ul(1e3/4),c+=a,u=u.slice(a)}await Promise.all(h);{let l=H.struct([H.u32("instruction")]),g=Pe.Buffer.alloc(l.span);l.encode({instruction:1},g);let x=new $t().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Fh,isSigner:!1,isWritable:!1}],programId:i,data:g});await Nw(t,x,[r,n],{commitment:"confirmed"})}return!0}};qh.chunkSize=nre;var ire=new ye("BPFLoader2111111111111111111111111111111111"),E8=class{static getMinNumSignatures(t){return qh.getMinNumSignatures(t)}static load(t,r,n,i,o){return qh.load(t,r,n,o,i)}},ore=Object.prototype.toString,sre=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function um(e,t){var r,n,i,o,s,a,c;if(e===!0)return"true";if(e===!1)return"false";switch(typeof e){case"object":if(e===null)return null;if(e.toJSON&&typeof e.toJSON=="function")return um(e.toJSON(),t);if(c=ore.call(e),c==="[object Array]"){for(i="[",n=e.length-1,r=0;r<n;r++)i+=um(e[r],!0)+",";return n>-1&&(i+=um(e[r],!0)),i+"]"}else if(c==="[object Object]"){for(o=sre(e).sort(),n=o.length,i="",r=0;r<n;)s=o[r],a=um(e[s],!1),a!==void 0&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),r++;return"{"+i+"}"}else return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var are=function(e){var t=um(e,!1);if(t!==void 0)return""+t},cre=are,cm=32;function l8(e){let t=0;for(;e>1;)e/=2,t++;return t}function ure(e){return e===0?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e+1)}var Kw=class{constructor(t,r,n,i,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=o}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){let r=l8(ure(t+cm+1))-l8(cm)-1,n=this.getSlotsInEpoch(r),i=t-(n-cm);return[r,i]}else{let r=t-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),i=this.firstNormalEpoch+n,o=r%this.slotsPerEpoch;return[i,o]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*cm:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+l8(cm)):this.slotsPerEpoch}},ym=class extends Error{constructor(t,r){super(t),this.logs=void 0,this.logs=r}},fre={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},we=class extends Error{constructor({code:t,message:r,data:n},i){super(i!=null?`${i}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}},lre=globalThis.fetch,I8=class extends Lte.default{constructor(t,r,n){let i=o=>{let s=Kte.default(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in s?this.underlyingSocket=s.socket:this.underlyingSocket=s,s};super(i,t,r,n),this.underlyingSocket=void 0}call(...t){let r=this.underlyingSocket?.readyState;return r===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){let r=this.underlyingSocket?.readyState;return r===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}},dre=160,hre=64,pre=dre/hre,yre=1e3/pre;function mre(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}var A9=56,mm=class{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let r=mre(gre,t),n=t.length-A9;Dt(n>=0,"lookup table is invalid"),Dt(n%32===0,"lookup table is invalid");let i=n/32,{addresses:o}=H.struct([H.seq(bt(),i,"addresses")]).decode(t.slice(A9));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new ye(r.authority[0]):void 0,addresses:o.map(s=>new ye(s))}}},gre={index:1,layout:H.struct([H.u32("typeIndex"),Vh("deactivationSlot"),H.nu64("lastExtendedSlot"),H.u8("lastExtendedStartIndex"),H.u8(),H.seq(bt(),H.offset(H.u8(),-1),"authority")])},bre=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function xre(e){let t=e.match(bre);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${e}\``);let[r,n,i,o]=t,s=e.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${s}//${n}${c}${o}`}var nn=I.coerce(I.instance(ye),I.string(),e=>new ye(e)),V9=I.tuple([I.string(),I.literal("base64")]),K8=I.coerce(I.instance(Pe.Buffer),V9,e=>Pe.Buffer.from(e[0],"base64")),q9=30*1e3;function wre(e){if(/^https?:/.test(e)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function Or(e){let t,r;if(typeof e=="string")t=e;else if(e){let{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function H9(e){return I.union([I.type({jsonrpc:I.literal("2.0"),id:I.string(),result:e}),I.type({jsonrpc:I.literal("2.0"),id:I.string(),error:I.type({code:I.unknown(),message:I.string(),data:I.optional(I.any())})})])}var vre=H9(I.unknown());function pt(e){return I.coerce(H9(e),vre,t=>"error"in t?t:{...t,result:I.create(t.result,e)})}function rn(e){return pt(I.type({context:I.type({slot:I.number()}),value:e}))}function $w(e){return I.type({context:I.type({slot:I.number()}),value:e})}function d8(e,t){return e===0?new Kh({header:t.header,staticAccountKeys:t.accountKeys.map(r=>new ye(r)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:$n.default.decode(r.data)})),addressTableLookups:t.addressTableLookups}):new Ba(t)}var Are=I.type({foundation:I.number(),foundationTerm:I.number(),initial:I.number(),taper:I.number(),terminal:I.number()}),Sre=pt(I.array(I.nullable(I.type({epoch:I.number(),effectiveSlot:I.number(),amount:I.number(),postBalance:I.number(),commission:I.optional(I.nullable(I.number()))})))),Ere=I.type({total:I.number(),validator:I.number(),foundation:I.number(),epoch:I.number()}),Ire=I.type({epoch:I.number(),slotIndex:I.number(),slotsInEpoch:I.number(),absoluteSlot:I.number(),blockHeight:I.optional(I.number()),transactionCount:I.optional(I.number())}),kre=I.type({slotsPerEpoch:I.number(),leaderScheduleSlotOffset:I.number(),warmup:I.boolean(),firstNormalEpoch:I.number(),firstNormalSlot:I.number()}),Tre=I.record(I.string(),I.array(I.number())),Fl=I.nullable(I.union([I.type({}),I.string()])),Pre=I.type({err:Fl}),_re=I.literal("receivedSignature"),Bre=I.type({"solana-core":I.string(),"feature-set":I.optional(I.number())}),S9=rn(I.type({err:I.nullable(I.union([I.type({}),I.string()])),logs:I.nullable(I.array(I.string())),accounts:I.optional(I.nullable(I.array(I.nullable(I.type({executable:I.boolean(),owner:I.string(),lamports:I.number(),data:I.array(I.string()),rentEpoch:I.optional(I.number())}))))),unitsConsumed:I.optional(I.number()),returnData:I.optional(I.nullable(I.type({programId:I.string(),data:I.tuple([I.string(),I.literal("base64")])})))})),Cre=rn(I.type({byIdentity:I.record(I.string(),I.array(I.number())),range:I.type({firstSlot:I.number(),lastSlot:I.number()})}));function Mre(e,t,r,n,i,o){let s=r||lre,a;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(h,l)=>{let g=await new Promise((x,A)=>{try{n(h,l,(E,C)=>x([E,C]))}catch(E){A(E)}});return await s(...g)}),new Dte.default(async(h,l)=>{let g={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},Cne)};try{let x=5,A,E=500;for(;c?A=await c(e,g):A=await s(e,g),!(A.status!==429||i===!0||(x-=1,x===0));)console.log(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${E}ms delay...`),await Ul(E),E*=2;let C=await A.text();A.ok?l(null,C):l(new Error(`${A.status} ${A.statusText}: ${C}`))}catch(x){x instanceof Error&&l(x)}},{})}function Rre(e){return(t,r)=>new Promise((n,i)=>{e.request(t,r,(o,s)=>{if(o){i(o);return}n(s)})})}function Ore(e){return t=>new Promise((r,n)=>{t.length===0&&r([]);let i=t.map(o=>e.request(o.methodName,o.args));e.request(i,(o,s)=>{if(o){n(o);return}r(s)})})}var Nre=pt(Are),Ure=pt(Ere),Dre=pt(Ire),Lre=pt(kre),Kre=pt(Tre),Fre=pt(I.number()),Vre=rn(I.type({total:I.number(),circulating:I.number(),nonCirculating:I.number(),nonCirculatingAccounts:I.array(nn)})),k8=I.type({amount:I.string(),uiAmount:I.nullable(I.number()),decimals:I.number(),uiAmountString:I.optional(I.string())}),qre=rn(I.array(I.type({address:nn,amount:I.string(),uiAmount:I.nullable(I.number()),decimals:I.number(),uiAmountString:I.optional(I.string())}))),Hre=rn(I.array(I.type({pubkey:nn,account:I.type({executable:I.boolean(),owner:nn,lamports:I.number(),data:K8,rentEpoch:I.number()})}))),T8=I.type({program:I.string(),parsed:I.unknown(),space:I.number()}),Wre=rn(I.array(I.type({pubkey:nn,account:I.type({executable:I.boolean(),owner:nn,lamports:I.number(),data:T8,rentEpoch:I.number()})}))),zre=rn(I.array(I.type({lamports:I.number(),address:nn}))),gm=I.type({executable:I.boolean(),owner:nn,lamports:I.number(),data:K8,rentEpoch:I.number()}),jre=I.type({pubkey:nn,account:gm}),Gre=I.coerce(I.union([I.instance(Pe.Buffer),T8]),I.union([V9,T8]),e=>Array.isArray(e)?I.create(e,K8):e),P8=I.type({executable:I.boolean(),owner:nn,lamports:I.number(),data:Gre,rentEpoch:I.number()}),$re=I.type({pubkey:nn,account:P8}),Yre=I.type({state:I.union([I.literal("active"),I.literal("inactive"),I.literal("activating"),I.literal("deactivating")]),active:I.number(),inactive:I.number()}),Jre=pt(I.array(I.type({signature:I.string(),slot:I.number(),err:Fl,memo:I.nullable(I.string()),blockTime:I.optional(I.nullable(I.number()))}))),Zre=pt(I.array(I.type({signature:I.string(),slot:I.number(),err:Fl,memo:I.nullable(I.string()),blockTime:I.optional(I.nullable(I.number()))}))),Qre=I.type({subscription:I.number(),result:$w(gm)}),Xre=I.type({pubkey:nn,account:gm}),ene=I.type({subscription:I.number(),result:$w(Xre)}),tne=I.type({parent:I.number(),slot:I.number(),root:I.number()}),rne=I.type({subscription:I.number(),result:tne}),nne=I.union([I.type({type:I.union([I.literal("firstShredReceived"),I.literal("completed"),I.literal("optimisticConfirmation"),I.literal("root")]),slot:I.number(),timestamp:I.number()}),I.type({type:I.literal("createdBank"),parent:I.number(),slot:I.number(),timestamp:I.number()}),I.type({type:I.literal("frozen"),slot:I.number(),timestamp:I.number(),stats:I.type({numTransactionEntries:I.number(),numSuccessfulTransactions:I.number(),numFailedTransactions:I.number(),maxTransactionsPerEntry:I.number()})}),I.type({type:I.literal("dead"),slot:I.number(),timestamp:I.number(),err:I.string()})]),ine=I.type({subscription:I.number(),result:nne}),one=I.type({subscription:I.number(),result:$w(I.union([Pre,_re]))}),sne=I.type({subscription:I.number(),result:I.number()}),ane=I.type({pubkey:I.string(),gossip:I.nullable(I.string()),tpu:I.nullable(I.string()),rpc:I.nullable(I.string()),version:I.nullable(I.string())}),E9=I.type({votePubkey:I.string(),nodePubkey:I.string(),activatedStake:I.number(),epochVoteAccount:I.boolean(),epochCredits:I.array(I.tuple([I.number(),I.number(),I.number()])),commission:I.number(),lastVote:I.number(),rootSlot:I.nullable(I.number())}),cne=pt(I.type({current:I.array(E9),delinquent:I.array(E9)})),une=I.union([I.literal("processed"),I.literal("confirmed"),I.literal("finalized")]),fne=I.type({slot:I.number(),confirmations:I.nullable(I.number()),err:Fl,confirmationStatus:I.optional(une)}),lne=rn(I.array(I.nullable(fne))),dne=pt(I.number()),W9=I.type({accountKey:nn,writableIndexes:I.array(I.number()),readonlyIndexes:I.array(I.number())}),F8=I.type({signatures:I.array(I.string()),message:I.type({accountKeys:I.array(I.string()),header:I.type({numRequiredSignatures:I.number(),numReadonlySignedAccounts:I.number(),numReadonlyUnsignedAccounts:I.number()}),instructions:I.array(I.type({accounts:I.array(I.number()),data:I.string(),programIdIndex:I.number()})),recentBlockhash:I.string(),addressTableLookups:I.optional(I.array(W9))})}),z9=I.type({pubkey:nn,signer:I.boolean(),writable:I.boolean(),source:I.optional(I.union([I.literal("transaction"),I.literal("lookupTable")]))}),j9=I.type({accountKeys:I.array(z9),signatures:I.array(I.string())}),G9=I.type({parsed:I.unknown(),program:I.string(),programId:nn}),$9=I.type({accounts:I.array(nn),data:I.string(),programId:nn}),hne=I.union([$9,G9]),pne=I.union([I.type({parsed:I.unknown(),program:I.string(),programId:I.string()}),I.type({accounts:I.array(I.string()),data:I.string(),programId:I.string()})]),Y9=I.coerce(hne,pne,e=>"accounts"in e?I.create(e,$9):I.create(e,G9)),J9=I.type({signatures:I.array(I.string()),message:I.type({accountKeys:I.array(z9),instructions:I.array(Y9),recentBlockhash:I.string(),addressTableLookups:I.optional(I.nullable(I.array(W9)))})}),Fw=I.type({accountIndex:I.number(),mint:I.string(),owner:I.optional(I.string()),uiTokenAmount:k8}),Z9=I.type({writable:I.array(nn),readonly:I.array(nn)}),Yw=I.type({err:Fl,fee:I.number(),innerInstructions:I.optional(I.nullable(I.array(I.type({index:I.number(),instructions:I.array(I.type({accounts:I.array(I.number()),data:I.string(),programIdIndex:I.number()}))})))),preBalances:I.array(I.number()),postBalances:I.array(I.number()),logMessages:I.optional(I.nullable(I.array(I.string()))),preTokenBalances:I.optional(I.nullable(I.array(Fw))),postTokenBalances:I.optional(I.nullable(I.array(Fw))),loadedAddresses:I.optional(Z9),computeUnitsConsumed:I.optional(I.number())}),V8=I.type({err:Fl,fee:I.number(),innerInstructions:I.optional(I.nullable(I.array(I.type({index:I.number(),instructions:I.array(Y9)})))),preBalances:I.array(I.number()),postBalances:I.array(I.number()),logMessages:I.optional(I.nullable(I.array(I.string()))),preTokenBalances:I.optional(I.nullable(I.array(Fw))),postTokenBalances:I.optional(I.nullable(I.array(Fw))),loadedAddresses:I.optional(Z9),computeUnitsConsumed:I.optional(I.number())}),zh=I.union([I.literal(0),I.literal("legacy")]),Vl=I.type({pubkey:I.string(),lamports:I.number(),postBalance:I.nullable(I.number()),rewardType:I.nullable(I.string()),commission:I.optional(I.nullable(I.number()))}),yne=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:F8,meta:I.nullable(Yw),version:I.optional(zh)})),rewards:I.optional(I.array(Vl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),mne=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),rewards:I.optional(I.array(Vl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),gne=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:j9,meta:I.nullable(Yw),version:I.optional(zh)})),rewards:I.optional(I.array(Vl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),bne=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:J9,meta:I.nullable(V8),version:I.optional(zh)})),rewards:I.optional(I.array(Vl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),xne=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:j9,meta:I.nullable(V8),version:I.optional(zh)})),rewards:I.optional(I.array(Vl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),wne=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),rewards:I.optional(I.array(Vl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),vne=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:F8,meta:I.nullable(Yw)})),rewards:I.optional(I.array(Vl)),blockTime:I.nullable(I.number())}))),I9=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),signatures:I.array(I.string()),blockTime:I.nullable(I.number())}))),h8=pt(I.nullable(I.type({slot:I.number(),meta:Yw,blockTime:I.optional(I.nullable(I.number())),transaction:F8,version:I.optional(zh)}))),Mw=pt(I.nullable(I.type({slot:I.number(),transaction:J9,meta:I.nullable(V8),blockTime:I.optional(I.nullable(I.number())),version:I.optional(zh)}))),Ane=rn(I.type({blockhash:I.string(),feeCalculator:I.type({lamportsPerSignature:I.number()})})),Sne=rn(I.type({blockhash:I.string(),lastValidBlockHeight:I.number()})),Ene=I.type({slot:I.number(),numTransactions:I.number(),numSlots:I.number(),samplePeriodSecs:I.number()}),Ine=pt(I.array(Ene)),kne=rn(I.nullable(I.type({feeCalculator:I.type({lamportsPerSignature:I.number()})}))),Tne=pt(I.string()),Pne=pt(I.string()),_ne=I.type({err:Fl,logs:I.array(I.string()),signature:I.string()}),Bne=I.type({result:$w(_ne),subscription:I.number()}),Cne={"solana-client":"js/1.73.5"},_8=class{constructor(t,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let n,i,o,s,a,c;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,o=r.fetch,s=r.fetchMiddleware,a=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=wre(t),this._rpcWsEndpoint=n||xre(t),this._rpcClient=Mre(t,i,o,s,a,c),this._rpcRequest=Rre(this._rpcClient),this._rpcBatchRequest=Ore(this._rpcClient),this._rpcWebSocket=new I8(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,r){let{commitment:n,config:i}=Or(r),o=this._buildArgs([t.toBase58()],n,void 0,i),s=await this._rpcRequest("getBalance",o),a=I.create(s,rn(I.number()));if("error"in a)throw new we(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,r){return await this.getBalanceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){let r=await this._rpcRequest("getBlockTime",[t]),n=I.create(r,pt(I.nullable(I.number())));if("error"in n)throw new we(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){let t=await this._rpcRequest("minimumLedgerSlot",[]),r=I.create(t,pt(I.number()));if("error"in r)throw new we(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){let t=await this._rpcRequest("getFirstAvailableBlock",[]),r=I.create(t,Fre);if("error"in r)throw new we(r.error,"failed to get first available block");return r.result}async getSupply(t){let r={};typeof t=="string"?r={commitment:t}:t?r={...t,commitment:t&&t.commitment||this.commitment}:r={commitment:this.commitment};let n=await this._rpcRequest("getSupply",[r]),i=I.create(n,Vre);if("error"in i)throw new we(i.error,"failed to get supply");return i.result}async getTokenSupply(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenSupply",n),o=I.create(i,rn(k8));if("error"in o)throw new we(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenAccountBalance",n),o=I.create(i,rn(k8));if("error"in o)throw new we(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(t,r,n){let{commitment:i,config:o}=Or(n),s=[t.toBase58()];"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()});let a=this._buildArgs(s,i,"base64",o),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=I.create(c,Hre);if("error"in u)throw new we(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(t,r,n){let i=[t.toBase58()];"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()});let o=this._buildArgs(i,n,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",o),a=I.create(s,Wre);if("error"in a)throw new we(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){let r={...t,commitment:t&&t.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],i=await this._rpcRequest("getLargestAccounts",n),o=I.create(i,zre);if("error"in o)throw new we(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenLargestAccounts",n),o=I.create(i,qre);if("error"in o)throw new we(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(t,r){let{commitment:n,config:i}=Or(r),o=this._buildArgs([t.toBase58()],n,"base64",i),s=await this._rpcRequest("getAccountInfo",o),a=I.create(s,rn(I.nullable(gm)));if("error"in a)throw new we(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,r){let{commitment:n,config:i}=Or(r),o=this._buildArgs([t.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getAccountInfo",o),a=I.create(s,rn(I.nullable(P8)));if("error"in a)throw new we(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,r){try{return(await this.getAccountInfoAndContext(t,r)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,r){let{commitment:n,config:i}=Or(r),o=t.map(u=>u.toBase58()),s=this._buildArgs([o],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",s),c=I.create(a,rn(I.array(I.nullable(P8))));if("error"in c)throw new we(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfoAndContext(t,r){let{commitment:n,config:i}=Or(r),o=t.map(u=>u.toBase58()),s=this._buildArgs([o],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",s),c=I.create(a,rn(I.array(I.nullable(gm))));if("error"in c)throw new we(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfo(t,r){return(await this.getMultipleAccountsInfoAndContext(t,r)).value}async getStakeActivation(t,r,n){let{commitment:i,config:o}=Or(r),s=this._buildArgs([t.toBase58()],i,void 0,{...o,epoch:n??o?.epoch}),a=await this._rpcRequest("getStakeActivation",s),c=I.create(a,pt(Yre));if("error"in c)throw new we(c.error,`failed to get Stake Activation ${t.toBase58()}`);return c.result}async getProgramAccounts(t,r){let{commitment:n,config:i}=Or(r),{encoding:o,...s}=i||{},a=this._buildArgs([t.toBase58()],n,o||"base64",s),c=await this._rpcRequest("getProgramAccounts",a),u=I.create(c,pt(I.array(jre)));if("error"in u)throw new we(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async getParsedProgramAccounts(t,r){let{commitment:n,config:i}=Or(r),o=this._buildArgs([t.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getProgramAccounts",o),a=I.create(s,pt(I.array($re)));if("error"in a)throw new we(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,r){let n;if(typeof t=="string")n=t;else{let o=t;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=$n.default.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Dt(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((r,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:r}){let n,i,o=!1,s=new Promise((c,u)=>{try{n=this.onSignature(r,(l,g)=>{n=void 0;let x={context:g,value:l};c({__type:he.TransactionStatus.PROCESSED,response:x})},t);let h=new Promise(l=>{n==null?l():i=this._onSubscriptionStateChange(n,g=>{g==="subscribed"&&l()})});(async()=>{if(await h,o)return;let l=await this.getSignatureStatus(r);if(o||l==null)return;let{context:g,value:x}=l;if(x!=null)if(x?.err)u(x.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(x.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(x.confirmationStatus==="processed"||x.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,c({__type:he.TransactionStatus.PROCESSED,response:{context:g,value:x}})}})()}catch(h){u(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:i}}){let o=!1,s=new Promise(l=>{let g=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let x=await g();if(!o){for(;x<=n;)if(await Ul(1e3),o||(x=await g(),o))return;l({__type:he.TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),u=this.getCancellationPromise(r),h;try{let l=await Promise.race([u,c,s]);if(l.__type===he.TransactionStatus.PROCESSED)h=l.response;else throw new hm(i)}finally{o=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:i,nonceValue:o,signature:s}}){let a=!1,c=new Promise(x=>{let A=o,E=null,C=async()=>{try{let{context:M,value:N}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:n});return E=M.slot,N?.nonce}catch{return A}};(async()=>{if(A=await C(),!a)for(;;){if(o!==A){x({__type:he.TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:E});return}if(await Ul(2e3),a||(A=await C(),a))return}})()}),{abortConfirmation:u,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),l=this.getCancellationPromise(r),g;try{let x=await Promise.race([l,h,c]);if(x.__type===he.TransactionStatus.PROCESSED)g=x.response;else{let A;for(;;){let E=await this.getSignatureStatus(s);if(E==null)break;if(E.context.slot<(x.slotInWhichNonceDidAdvance??n)){await Ul(400);continue}A=E;break}if(A?.value){let E=t||"finalized",{confirmationStatus:C}=A.value;switch(E){case"processed":case"recent":if(C!=="processed"&&C!=="confirmed"&&C!=="finalized")throw new ju(s);break;case"confirmed":case"single":case"singleGossip":if(C!=="confirmed"&&C!=="finalized")throw new ju(s);break;case"finalized":case"max":case"root":if(C!=="finalized")throw new ju(s);break;default:}g={context:A.context,value:{err:A.value.err}}}else throw new ju(s)}}finally{a=!0,u()}return g}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:r}){let n,i=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:he.TransactionStatus.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:r}),a;try{let c=await Promise.race([s,i]);if(c.__type===he.TransactionStatus.PROCESSED)a=c.response;else throw new pm(r,c.timeoutMs/1e3)}finally{clearTimeout(n),o()}return a}async getClusterNodes(){let t=await this._rpcRequest("getClusterNodes",[]),r=I.create(t,pt(I.array(ane)));if("error"in r)throw new we(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",r),i=I.create(n,cne);if("error"in i)throw new we(i.error,"failed to get vote accounts");return i.result}async getSlot(t){let{commitment:r,config:n}=Or(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlot",i),s=I.create(o,pt(I.number()));if("error"in s)throw new we(s.error,"failed to get slot");return s.result}async getSlotLeader(t){let{commitment:r,config:n}=Or(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlotLeader",i),s=I.create(o,pt(I.string()));if("error"in s)throw new we(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,r){let n=[t,r],i=await this._rpcRequest("getSlotLeaders",n),o=I.create(i,pt(I.array(nn)));if("error"in o)throw new we(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(t,r){let{context:n,value:i}=await this.getSignatureStatuses([t],r);Dt(i.length===1);let o=i[0];return{context:n,value:o}}async getSignatureStatuses(t,r){let n=[t];r&&n.push(r);let i=await this._rpcRequest("getSignatureStatuses",n),o=I.create(i,lne);if("error"in o)throw new we(o.error,"failed to get signature status");return o.result}async getTransactionCount(t){let{commitment:r,config:n}=Or(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getTransactionCount",i),s=I.create(o,pt(I.number()));if("error"in s)throw new we(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",r),i=I.create(n,Nre);if("error"in i)throw new we(i.error,"failed to get inflation");return i.result}async getInflationReward(t,r,n){let{commitment:i,config:o}=Or(n),s=this._buildArgs([t.map(u=>u.toBase58())],i,void 0,{...o,epoch:r??o?.epoch}),a=await this._rpcRequest("getInflationReward",s),c=I.create(a,Sre);if("error"in c)throw new we(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){let t=await this._rpcRequest("getInflationRate",[]),r=I.create(t,Ure);if("error"in r)throw new we(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(t){let{commitment:r,config:n}=Or(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getEpochInfo",i),s=I.create(o,Dre);if("error"in s)throw new we(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){let t=await this._rpcRequest("getEpochSchedule",[]),r=I.create(t,Lre);if("error"in r)throw new we(r.error,"failed to get epoch schedule");let n=r.result;return new Kw(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){let t=await this._rpcRequest("getLeaderSchedule",[]),r=I.create(t,Kre);if("error"in r)throw new we(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(t,r){let n=this._buildArgs([t],r),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),o=I.create(i,dne);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",r),i=I.create(n,Ane);if("error"in i)throw new we(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(t){let r=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=I.create(r,Ine);if("error"in n)throw new we(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,r){let n=this._buildArgs([t],r),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),o=I.create(i,kne);if("error"in o)throw new we(o.error,"failed to get fee calculator");let{context:s,value:a}=o.result;return{context:s,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,r){let n=dt(t.serialize()).toString("base64"),i=this._buildArgs([n],r),o=await this._rpcRequest("getFeeForMessage",i),s=I.create(o,rn(I.nullable(I.number())));if("error"in s)throw new we(s.error,"failed to get fee for message");if(s.result===null)throw new Error("invalid blockhash");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(t){let{commitment:r,config:n}=Or(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getLatestBlockhash",i),s=I.create(o,Sne);if("error"in s)throw new we(s.error,"failed to get latest blockhash");return s.result}async getVersion(){let t=await this._rpcRequest("getVersion",[]),r=I.create(t,pt(Bre));if("error"in r)throw new we(r.error,"failed to get version");return r.result}async getGenesisHash(){let t=await this._rpcRequest("getGenesisHash",[]),r=I.create(t,pt(I.string()));if("error"in r)throw new we(r.error,"failed to get genesis hash");return r.result}async getBlock(t,r){let{commitment:n,config:i}=Or(r),o=this._buildArgsAtLeastConfirmed([t],n,void 0,i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=I.create(s,gne);if("error"in a)throw a.error;return a.result}case"none":{let a=I.create(s,mne);if("error"in a)throw a.error;return a.result}default:{let a=I.create(s,yne);if("error"in a)throw a.error;let{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:h,version:l})=>({meta:h,transaction:{...u,message:d8(l,u.message)},version:l}))}:null}}}catch(a){throw new we(a,"failed to get confirmed block")}}async getParsedBlock(t,r){let{commitment:n,config:i}=Or(r),o=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=I.create(s,xne);if("error"in a)throw a.error;return a.result}case"none":{let a=I.create(s,wne);if("error"in a)throw a.error;return a.result}default:{let a=I.create(s,bne);if("error"in a)throw a.error;return a.result}}}catch(a){throw new we(a,"failed to get block")}}async getBlockHeight(t){let{commitment:r,config:n}=Or(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getBlockHeight",i),s=I.create(o,pt(I.number()));if("error"in s)throw new we(s.error,"failed to get block height information");return s.result}async getBlockProduction(t){let r,n;if(typeof t=="string")n=t;else if(t){let{commitment:a,...c}=t;n=a,r=c}let i=this._buildArgs([],n,"base64",r),o=await this._rpcRequest("getBlockProduction",i),s=I.create(o,Cre);if("error"in s)throw new we(s.error,"failed to get block production information");return s.result}async getTransaction(t,r){let{commitment:n,config:i}=Or(r),o=this._buildArgsAtLeastConfirmed([t],n,void 0,i),s=await this._rpcRequest("getTransaction",o),a=I.create(s,h8);if("error"in a)throw new we(a.error,"failed to get transaction");let c=a.result;return c&&{...c,transaction:{...c.transaction,message:d8(c.version,c.transaction.message)}}}async getParsedTransaction(t,r){let{commitment:n,config:i}=Or(r),o=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),s=await this._rpcRequest("getTransaction",o),a=I.create(s,Mw);if("error"in a)throw new we(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,r){let{commitment:n,config:i}=Or(r),o=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=I.create(c,Mw);if("error"in u)throw new we(u.error,"failed to get transactions");return u.result})}async getTransactions(t,r){let{commitment:n,config:i}=Or(r),o=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=I.create(c,h8);if("error"in u)throw new we(u.error,"failed to get transactions");let h=u.result;return h&&{...h,transaction:{...h.transaction,message:d8(h.version,h.transaction.message)}}})}async getConfirmedBlock(t,r){let n=this._buildArgsAtLeastConfirmed([t],r),i=await this._rpcRequest("getConfirmedBlock",n),o=I.create(i,vne);if("error"in o)throw new we(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+t+" not found");let a={...s,transactions:s.transactions.map(({transaction:c,meta:u})=>{let h=new Ba(c.message);return{meta:u,transaction:{...c,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:$t.populate(c.message,c.signatures)}))}}async getBlocks(t,r,n){let i=this._buildArgsAtLeastConfirmed(r!==void 0?[t,r]:[t],n),o=await this._rpcRequest("getBlocks",i),s=I.create(o,pt(I.array(I.number())));if("error"in s)throw new we(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),o=I.create(i,I9);if("error"in o)throw new we(o.error,"failed to get block");let s=o.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),o=I.create(i,I9);if("error"in o)throw new we(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,r){let n=this._buildArgsAtLeastConfirmed([t],r),i=await this._rpcRequest("getConfirmedTransaction",n),o=I.create(i,h8);if("error"in o)throw new we(o.error,"failed to get transaction");let s=o.result;if(!s)return s;let a=new Ba(s.transaction.message),c=s.transaction.signatures;return{...s,transaction:$t.populate(a,c)}}async getParsedConfirmedTransaction(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),o=I.create(i,Mw);if("error"in o)throw new we(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(t,r){let n=t.map(s=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([s],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(s=>{let a=I.create(s,Mw);if("error"in a)throw new we(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,r,n){let i={},o=await this.getFirstAvailableBlock();for(;!("until"in i)&&(r--,!(r<=0||r<o));)try{let c=await this.getConfirmedBlockSignatures(r,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let s=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>s));)try{let c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(t,r,n){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),s=I.create(o,Jre);if("error"in s)throw new we(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,r,n){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),o=await this._rpcRequest("getSignaturesForAddress",i),s=I.create(o,Zre);if("error"in s)throw new we(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,r){let{context:n,value:i}=await this.getAccountInfoAndContext(t,r),o=null;return i!==null&&(o=new mm({key:t,state:mm.deserialize(i.data)})),{context:n,value:o}}async getNonceAndContext(t,r){let{context:n,value:i}=await this.getAccountInfoAndContext(t,r),o=null;return i!==null&&(o=Lw.fromAccountData(i.data)),{context:n,value:o}}async getNonce(t,r){return await this.getNonceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,r){let n=await this._rpcRequest("requestAirdrop",[t.toBase58(),r]),i=I.create(n,Tne);if("error"in i)throw new we(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Ul(100);let n=Date.now()-this._blockhashInfo.lastFetch>=q9;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let i=0;i<50;i++){let o=await this.getLatestBlockhash("finalized");if(n!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await Ul(yre/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:r,config:n}=Or(t),i=this._buildArgs([],r,"base64",n),o=await this._rpcRequest("getStakeMinimumDelegation",i),s=I.create(o,rn(I.number()));if("error"in s)throw new we(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,r,n){if("message"in t){let E=t.serialize(),C=Pe.Buffer.from(E).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");let M=r||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment);let N=[C,M],R=await this._rpcRequest("simulateTransaction",N),V=I.create(R,S9);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let i;if(t instanceof $t){let A=t;i=new $t,i.feePayer=A.feePayer,i.instructions=t.instructions,i.nonceInfo=A.nonceInfo,i.signatures=A.signatures}else i=$t.populate(t),i._message=i._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");let o=r;if(i.nonceInfo&&o)i.sign(...o);else{let A=this._disableBlockhashCaching;for(;;){let E=await this._blockhashWithExpiryBlockHeight(A);if(i.lastValidBlockHeight=E.lastValidBlockHeight,i.recentBlockhash=E.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");let C=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(C)&&!this._blockhashInfo.transactionSignatures.includes(C)){this._blockhashInfo.simulatedSignatures.push(C);break}else A=!0}}let s=i._compile(),a=s.serialize(),u=i._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){let A=(Array.isArray(n)?n:s.nonProgramIds()).map(E=>E.toBase58());h.accounts={encoding:"base64",addresses:A}}o&&(h.sigVerify=!0);let l=[u,h],g=await this._rpcRequest("simulateTransaction",l),x=I.create(g,S9);if("error"in x){let A;if("data"in x.error&&(A=x.error.data.logs,A&&Array.isArray(A))){let E=`
    `,C=E+A.join(E);console.error(x.error.message,C)}throw new ym("failed to simulate transaction: "+x.error.message,A)}return x.result}async sendTransaction(t,r,n){if("version"in t){if(r&&Array.isArray(r))throw new Error("Invalid arguments");let s=t.serialize();return await this.sendRawTransaction(s,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");let i=r;if(t.nonceInfo)t.sign(...i);else{let s=this._disableBlockhashCaching;for(;;){let a=await this._blockhashWithExpiryBlockHeight(s);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");let c=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))s=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}let o=t.serialize();return await this.sendRawTransaction(o,n)}async sendRawTransaction(t,r){let n=dt(t).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(t,r){let n={encoding:"base64"},i=r&&r.skipPreflight,o=r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),o&&(n.preflightCommitment=o);let s=[t,n],a=await this._rpcRequest("sendTransaction",s),c=I.create(a,Pne);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new ym("failed to send transaction: "+c.error.message,u)}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(t,r){let n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=r,n!==r.state){let i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(r.state)}catch{}})}}_onSubscriptionStateChange(t,r){let n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};let i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(r),()=>{i.delete(r),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,r=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{let i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:s}=i;try{this._setSubscription(n,{...i,state:"subscribing"});let a=await this._rpcWebSocket.call(s,o);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${s} error for argument`,o,a.message),!r())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:s}=i;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[o])}catch(a){if(a instanceof Error&&console.error(`${s} error:`,a.message),!r())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,r){let n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(i=>{try{i(...r)}catch(o){console.error(o)}})}_wsOnAccountNotification(t){let{result:r,subscription:n}=I.create(t,Qre);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(t,r){let n=this._nextClientSubscriptionId++,i=cre([t.method,r]),o=this._subscriptionsByHash[i];return o===void 0?this._subscriptionsByHash[i]={...t,args:r,callbacks:new Set([t.callback]),state:"pending"}:o.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];let s=this._subscriptionsByHash[i];Dt(s!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),s.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,r,n){let i=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:r,subscription:n}=I.create(t,ene);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(t,r,n,i){let o=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,r,n){let i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:r,subscription:n}=I.create(t,Bne);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(t){let{result:r,subscription:n}=I.create(t,rne);this._handleServerNotification(n,[r])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:r,subscription:n}=I.create(t,ine);this._handleServerNotification(n,[r])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,r){let n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${r}' events could not be found.`)}_buildArgs(t,r,n,i){let o=r||this._commitment;if(o||n||i){let s={};n&&(s.encoding=n),o&&(s.commitment=o),i&&(s=Object.assign(s,i)),t.push(s)}return t}_buildArgsAtLeastConfirmed(t,r,n,i){let o=r||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,r,n,i)}_wsOnSignatureNotification(t){let{result:r,subscription:n}=I.create(t,one);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(t,r,n){let i=this._buildArgs([t],n||this._commitment||"finalized"),o=this._makeSubscription({callback:(s,a)=>{if(s.type==="status"){r(s.result,a);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}onSignatureWithOptions(t,r,n){let{commitment:i,...o}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},s=this._buildArgs([t],i,void 0,o),a=this._makeSubscription({callback:(c,u)=>{r(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:r,subscription:n}=I.create(t,sne);this._handleServerNotification(n,[r])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},Vw=class e{constructor(t){this._keypair=void 0,this._keypair=t??x9()}static generate(){return new e(x9())}static fromSecretKey(t,r){if(t.byteLength!==64)throw new Error("bad secret key size");let n=t.slice(32,64);if(!r||!r.skipValidation){let i=t.slice(0,32),o=Uw(i);for(let s=0;s<32;s++)if(n[s]!==o[s])throw new Error("provided secretKey is invalid")}return new e({publicKey:n,secretKey:t})}static fromSeed(t){let r=Uw(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}get publicKey(){return new ye(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Nc=Object.freeze({CreateLookupTable:{index:0,layout:H.struct([H.u32("instruction"),Vh("recentSlot"),H.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:H.struct([H.u32("instruction")])},ExtendLookupTable:{index:2,layout:H.struct([H.u32("instruction"),Vh(),H.seq(bt(),H.offset(H.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:H.struct([H.u32("instruction")])},CloseLookupTable:{index:4,layout:H.struct([H.u32("instruction")])}}),B8=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Nc))if(s.index==n){i=o;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);let{recentSlot:r}=jt(Nc.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(r)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);let{addresses:r}=jt(Nc.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:r.map(n=>new ye(n))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(bm.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},bm=class{constructor(){}static createLookupTable(t){let[r,n]=ye.findProgramAddressSync([t.authority.toBuffer(),g8.toBufferLE(BigInt(t.recentSlot),8)],this.programId),i=Nc.CreateLookupTable,o=Rt(i,{recentSlot:BigInt(t.recentSlot),bumpSeed:n}),s=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:mi.programId,isSigner:!1,isWritable:!1}];return[new Yt({programId:this.programId,keys:s,data:o}),r]}static freezeLookupTable(t){let r=Nc.FreezeLookupTable,n=Rt(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Yt({programId:this.programId,keys:i,data:n})}static extendLookupTable(t){let r=Nc.ExtendLookupTable,n=Rt(r,{addresses:t.addresses.map(o=>o.toBytes())}),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&i.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:mi.programId,isSigner:!1,isWritable:!1}),new Yt({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(t){let r=Nc.DeactivateLookupTable,n=Rt(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Yt({programId:this.programId,keys:i,data:n})}static closeLookupTable(t){let r=Nc.CloseLookupTable,n=Rt(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Yt({programId:this.programId,keys:i,data:n})}};bm.programId=new ye("AddressLookupTab1e1111111111111111111111111");var C8=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u8("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Pa))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(t){this.checkProgramId(t.programId);let{units:r,additionalFee:n}=jt(Pa.RequestUnits,t.data);return{units:r,additionalFee:n}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);let{bytes:r}=jt(Pa.RequestHeapFrame,t.data);return{bytes:r}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);let{units:r}=jt(Pa.SetComputeUnitLimit,t.data);return{units:r}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);let{microLamports:r}=jt(Pa.SetComputeUnitPrice,t.data);return{microLamports:r}}static checkProgramId(t){if(!t.equals(xm.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},Pa=Object.freeze({RequestUnits:{index:0,layout:H.struct([H.u8("instruction"),H.u32("units"),H.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:H.struct([H.u8("instruction"),H.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:H.struct([H.u8("instruction"),H.u32("units")])},SetComputeUnitPrice:{index:3,layout:H.struct([H.u8("instruction"),Vh("microLamports")])}}),xm=class{constructor(){}static requestUnits(t){let r=Pa.RequestUnits,n=Rt(r,t);return new Yt({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){let r=Pa.RequestHeapFrame,n=Rt(r,t);return new Yt({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){let r=Pa.SetComputeUnitLimit,n=Rt(r,t);return new Yt({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){let r=Pa.SetComputeUnitPrice,n=Rt(r,{microLamports:BigInt(t.microLamports)});return new Yt({keys:[],programId:this.programId,data:n})}};xm.programId=new ye("ComputeBudget111111111111111111111111111111");var k9=64,T9=32,P9=64,_9=H.struct([H.u8("numSignatures"),H.u8("padding"),H.u16("signatureOffset"),H.u16("signatureInstructionIndex"),H.u16("publicKeyOffset"),H.u16("publicKeyInstructionIndex"),H.u16("messageDataOffset"),H.u16("messageDataSize"),H.u16("messageInstructionIndex")]),qw=class e{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:r,message:n,signature:i,instructionIndex:o}=t;Dt(r.length===T9,`Public Key must be ${T9} bytes but received ${r.length} bytes`),Dt(i.length===P9,`Signature must be ${P9} bytes but received ${i.length} bytes`);let s=_9.span,a=s+r.length,c=a+i.length,u=1,h=Pe.Buffer.alloc(c+n.length),l=o??65535;return _9.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:l,publicKeyOffset:s,publicKeyInstructionIndex:l,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:l},h),h.fill(r,s),h.fill(i,a),h.fill(n,c),new Yt({keys:[],programId:e.programId,data:h})}static createInstructionWithPrivateKey(t){let{privateKey:r,message:n,instructionIndex:i}=t;Dt(r.length===k9,`Private key must be ${k9} bytes but received ${r.length} bytes`);try{let o=Vw.fromSecretKey(r),s=o.publicKey.toBytes(),a=D8(n,o.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:a,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};qw.programId=new ye("Ed25519SigVerify111111111111111111111111111");jw.utils.hmacSha256Sync=(e,...t)=>{let r=Nte.hmac.create(m8.sha256,e);return t.forEach(n=>r.update(n)),r.digest()};var Mne=(e,t)=>jw.signSync(e,t,{der:!1,recovered:!0});jw.utils.isValidPrivateKey;var Rne=jw.getPublicKey,B9=32,p8=20,C9=64,One=11,y8=H.struct([H.u8("numSignatures"),H.u16("signatureOffset"),H.u8("signatureInstructionIndex"),H.u16("ethAddressOffset"),H.u8("ethAddressInstructionIndex"),H.u16("messageDataOffset"),H.u16("messageDataSize"),H.u8("messageInstructionIndex"),H.blob(20,"ethAddress"),H.blob(64,"signature"),H.u8("recoveryId")]),Hw=class e{constructor(){}static publicKeyToEthAddress(t){Dt(t.length===C9,`Public key must be ${C9} bytes but received ${t.length} bytes`);try{return Pe.Buffer.from(g9.keccak_256(dt(t))).slice(-p8)}catch(r){throw new Error(`Error constructing Ethereum address: ${r}`)}}static createInstructionWithPublicKey(t){let{publicKey:r,message:n,signature:i,recoveryId:o,instructionIndex:s}=t;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:o,instructionIndex:s})}static createInstructionWithEthAddress(t){let{ethAddress:r,message:n,signature:i,recoveryId:o,instructionIndex:s=0}=t,a;typeof r=="string"?r.startsWith("0x")?a=Pe.Buffer.from(r.substr(2),"hex"):a=Pe.Buffer.from(r,"hex"):a=r,Dt(a.length===p8,`Address must be ${p8} bytes but received ${a.length} bytes`);let c=1+One,u=c,h=c+a.length,l=h+i.length+1,g=1,x=Pe.Buffer.alloc(y8.span+n.length);return y8.encode({numSignatures:g,signatureOffset:h,signatureInstructionIndex:s,ethAddressOffset:u,ethAddressInstructionIndex:s,messageDataOffset:l,messageDataSize:n.length,messageInstructionIndex:s,signature:dt(i),ethAddress:dt(a),recoveryId:o},x),x.fill(dt(n),y8.span),new Yt({keys:[],programId:e.programId,data:x})}static createInstructionWithPrivateKey(t){let{privateKey:r,message:n,instructionIndex:i}=t;Dt(r.length===B9,`Private key must be ${B9} bytes but received ${r.length} bytes`);try{let o=dt(r),s=Rne(o,!1).slice(1),a=Pe.Buffer.from(g9.keccak_256(dt(n))),[c,u]=Mne(a,o);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:c,recoveryId:u,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};Hw.programId=new ye("KeccakSecp256k11111111111111111111111111111");var Q9=new ye("StakeConfig11111111111111111111111111111111"),Ww=class{constructor(t,r){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=r}},Kl=class{constructor(t,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n}};Kl.default=new Kl(0,0,ye.default);var M8=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(_n))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:r,lockup:n}=jt(_n.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Ww(new ye(r.staker),new ye(r.withdrawer)),lockup:new Kl(n.unixTimestamp,n.epoch,new ye(n.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),jt(_n.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:r,stakeAuthorizationType:n}=jt(_n.Authorize,t.data),i={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ye(r),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(i.custodianPubkey=t.keys[3].pubkey),i}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{newAuthorized:r,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:o}=jt(_n.AuthorizeWithSeed,t.data),s={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:i,authorityOwner:new ye(o),newAuthorizedPubkey:new ye(r),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r}=jt(_n.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:r}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),jt(_n.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:r}=jt(_n.Withdraw,t.data),n={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:r};return t.keys.length>5&&(n.custodianPubkey=t.keys[5].pubkey),n}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),jt(_n.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Hh.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},_n=Object.freeze({Initialize:{index:0,layout:H.struct([H.u32("instruction"),zte(),jte()])},Authorize:{index:1,layout:H.struct([H.u32("instruction"),bt("newAuthorized"),H.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:H.struct([H.u32("instruction")])},Split:{index:3,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},Withdraw:{index:4,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},Deactivate:{index:5,layout:H.struct([H.u32("instruction")])},Merge:{index:7,layout:H.struct([H.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:H.struct([H.u32("instruction"),bt("newAuthorized"),H.u32("stakeAuthorizationType"),Dl("authoritySeed"),bt("authorityOwner")])}}),Nne=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Hh=class{constructor(){}static initialize(t){let{stakePubkey:r,authorized:n,lockup:i}=t,o=i||Kl.default,s=_n.Initialize,a=Rt(s,{authorized:{staker:dt(n.staker.toBuffer()),withdrawer:dt(n.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:dt(o.custodian.toBuffer())}}),c={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Fh,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new Yt(c)}static createAccountWithSeed(t){let r=new $t;r.add(mi.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=t;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static createAccount(t){let r=new $t;r.add(mi.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=t;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static delegate(t){let{stakePubkey:r,authorizedPubkey:n,votePubkey:i}=t,o=_n.Delegate,s=Rt(o);return new $t().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:ka,isSigner:!1,isWritable:!1},{pubkey:Ow,isSigner:!1,isWritable:!1},{pubkey:Q9,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){let{stakePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:s}=t,a=_n.Authorize,c=Rt(a,{newAuthorized:dt(i.toBuffer()),stakeAuthorizationType:o.index}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ka,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new $t().add({keys:u,programId:this.programId,data:c})}static authorizeWithSeed(t){let{stakePubkey:r,authorityBase:n,authoritySeed:i,authorityOwner:o,newAuthorizedPubkey:s,stakeAuthorizationType:a,custodianPubkey:c}=t,u=_n.AuthorizeWithSeed,h=Rt(u,{newAuthorized:dt(s.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:dt(o.toBuffer())}),l=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ka,isSigner:!1,isWritable:!1}];return c&&l.push({pubkey:c,isSigner:!1,isWritable:!1}),new $t().add({keys:l,programId:this.programId,data:h})}static splitInstruction(t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:o}=t,s=_n.Split,a=Rt(s,{lamports:o});return new Yt({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(t){let r=new $t;return r.add(mi.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:o,seed:s,lamports:a}=t,c=new $t;return c.add(mi.allocate({accountPubkey:i,basePubkey:o,seed:s,space:this.space,programId:this.programId})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){let{stakePubkey:r,sourceStakePubKey:n,authorizedPubkey:i}=t,o=_n.Merge,s=Rt(o);return new $t().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ka,isSigner:!1,isWritable:!1},{pubkey:Ow,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){let{stakePubkey:r,authorizedPubkey:n,toPubkey:i,lamports:o,custodianPubkey:s}=t,a=_n.Withdraw,c=Rt(a,{lamports:o}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:ka,isSigner:!1,isWritable:!1},{pubkey:Ow,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new $t().add({keys:u,programId:this.programId,data:c})}static deactivate(t){let{stakePubkey:r,authorizedPubkey:n}=t,i=_n.Deactivate,o=Rt(i);return new $t().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ka,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};Hh.programId=new ye("Stake11111111111111111111111111111111111111");Hh.space=200;var zw=class{constructor(t,r,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=r,this.authorizedWithdrawer=n,this.commission=i}},R8=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Uc))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);let{voteInit:r}=jt(Uc.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new zw(new ye(r.nodePubkey),new ye(r.authorizedVoter),new ye(r.authorizedWithdrawer),r.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:r,voteAuthorizationType:n}=jt(Uc.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ye(r),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:o}}=jt(Uc.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ye(r),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new ye(i),voteAuthorizationType:{index:o},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r}=jt(Uc.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:r,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Wh.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},Uc=Object.freeze({InitializeAccount:{index:0,layout:H.struct([H.u32("instruction"),Gte()])},Authorize:{index:1,layout:H.struct([H.u32("instruction"),bt("newAuthorized"),H.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:H.struct([H.u32("instruction"),$te()])}}),Une=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Wh=class e{constructor(){}static initializeAccount(t){let{votePubkey:r,nodePubkey:n,voteInit:i}=t,o=Uc.InitializeAccount,s=Rt(o,{voteInit:{nodePubkey:dt(i.nodePubkey.toBuffer()),authorizedVoter:dt(i.authorizedVoter.toBuffer()),authorizedWithdrawer:dt(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Fh,isSigner:!1,isWritable:!1},{pubkey:ka,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new Yt(a)}static createAccount(t){let r=new $t;return r.add(mi.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),r.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:o}=t,s=Uc.Authorize,a=Rt(s,{newAuthorized:dt(i.toBuffer()),voteAuthorizationType:o.index}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ka,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new $t().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:r,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:o,voteAuthorizationType:s,votePubkey:a}=t,c=Uc.AuthorizeWithSeed,u=Rt(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:dt(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:dt(o.toBuffer()),voteAuthorizationType:s.index}}),h=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:ka,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new $t().add({keys:h,programId:this.programId,data:u})}static withdraw(t){let{votePubkey:r,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:o}=t,s=Uc.Withdraw,a=Rt(s,{lamports:i}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new $t().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(t,r,n){if(t.lamports>r-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return e.withdraw(t)}};Wh.programId=new ye("Vote111111111111111111111111111111111111111");Wh.space=3731;var X9=new ye("Va1idator1nfo111111111111111111111111111111"),Dne=I.type({name:I.string(),website:I.optional(I.string()),details:I.optional(I.string()),keybaseUsername:I.optional(I.string())}),O8=class e{constructor(t,r){this.key=void 0,this.info=void 0,this.key=t,this.info=r}static fromConfigData(t){let r=[...t];if(Qi(r)!==2)return null;let i=[];for(let o=0;o<2;o++){let s=new ye(Xi(r,0,_a)),a=Ta(r)===1;i.push({publicKey:s,isSigner:a})}if(i[0].publicKey.equals(X9)&&i[1].isSigner){let o=Dl().decode(Pe.Buffer.from(r)),s=JSON.parse(o);return I.assert(s,Dne),new e(i[1].publicKey,s)}return null}},Lne=new ye("Vote111111111111111111111111111111111111111"),Kne=H.struct([bt("nodePubkey"),bt("authorizedWithdrawer"),H.u8("commission"),H.nu64(),H.seq(H.struct([H.nu64("slot"),H.u32("confirmationCount")]),H.offset(H.u32(),-8),"votes"),H.u8("rootSlotValid"),H.nu64("rootSlot"),H.nu64(),H.seq(H.struct([H.nu64("epoch"),bt("authorizedVoter")]),H.offset(H.u32(),-8),"authorizedVoters"),H.struct([H.seq(H.struct([bt("authorizedPubkey"),H.nu64("epochOfLastAuthorizedSwitch"),H.nu64("targetEpoch")]),32,"buf"),H.nu64("idx"),H.u8("isEmpty")],"priorVoters"),H.nu64(),H.seq(H.struct([H.nu64("epoch"),H.nu64("credits"),H.nu64("prevCredits")]),H.offset(H.u32(),-8),"epochCredits"),H.struct([H.nu64("slot"),H.nu64("timestamp")],"lastTimestamp")]),N8=class e{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){let n=Kne.decode(dt(t),4),i=n.rootSlot;return n.rootSlotValid||(i=null),new e({nodePubkey:new ye(n.nodePubkey),authorizedWithdrawer:new ye(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(Fne),priorVoters:Vne(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}};function Fne({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new ye(e)}}function M9({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new ye(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}function Vne({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map(M9),...e.slice(0,t).map(M9)]}var R9={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function qne(e,t){let r=t===!1?"http":"https";if(!e)return R9[r].devnet;let n=R9[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}async function Hne(e,t,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;let s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await e.sendRawTransaction(t,s),c=o&&o.commitment,h=(await(i?e.confirmTransaction(i,c):e.confirmTransaction(a,c))).value;if(h.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`);return a}var Wne=1e9;he.Account=x8;he.AddressLookupTableAccount=mm;he.AddressLookupTableInstruction=B8;he.AddressLookupTableProgram=bm;he.Authorized=Ww;he.BLOCKHASH_CACHE_TIMEOUT_MS=q9;he.BPF_LOADER_DEPRECATED_PROGRAM_ID=Hte;he.BPF_LOADER_PROGRAM_ID=ire;he.BpfLoader=E8;he.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Pa;he.ComputeBudgetInstruction=C8;he.ComputeBudgetProgram=xm;he.Connection=_8;he.Ed25519Program=qw;he.Enum=b8;he.EpochSchedule=Kw;he.FeeCalculatorLayout=K9;he.Keypair=Vw;he.LAMPORTS_PER_SOL=Wne;he.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Nc;he.Loader=qh;he.Lockup=Kl;he.MAX_SEED_LENGTH=U9;he.Message=Ba;he.MessageAccountKeys=Ll;he.MessageV0=Kh;he.NONCE_ACCOUNT_LENGTH=A8;he.NonceAccount=Lw;he.PACKET_DATA_SIZE=Gu;he.PUBLIC_KEY_LENGTH=_a;he.PublicKey=ye;he.SIGNATURE_LENGTH_IN_BYTES=dm;he.SOLANA_SCHEMA=fm;he.STAKE_CONFIG_ID=Q9;he.STAKE_INSTRUCTION_LAYOUTS=_n;he.SYSTEM_INSTRUCTION_LAYOUTS=cr;he.SYSVAR_CLOCK_PUBKEY=ka;he.SYSVAR_EPOCH_SCHEDULE_PUBKEY=Jte;he.SYSVAR_INSTRUCTIONS_PUBKEY=Zte;he.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=Rw;he.SYSVAR_RENT_PUBKEY=Fh;he.SYSVAR_REWARDS_PUBKEY=Qte;he.SYSVAR_SLOT_HASHES_PUBKEY=Xte;he.SYSVAR_SLOT_HISTORY_PUBKEY=ere;he.SYSVAR_STAKE_HISTORY_PUBKEY=Ow;he.Secp256k1Program=Hw;he.SendTransactionError=ym;he.SolanaJSONRPCError=we;he.SolanaJSONRPCErrorCode=fre;he.StakeAuthorizationLayout=Nne;he.StakeInstruction=M8;he.StakeProgram=Hh;he.Struct=lm;he.SystemInstruction=S8;he.SystemProgram=mi;he.Transaction=$t;he.TransactionExpiredBlockheightExceededError=hm;he.TransactionExpiredNonceInvalidError=ju;he.TransactionExpiredTimeoutError=pm;he.TransactionInstruction=Yt;he.TransactionMessage=w8;he.VALIDATOR_INFO_KEY=X9;he.VERSION_PREFIX_MASK=Gw;he.VOTE_PROGRAM_ID=Lne;he.ValidatorInfo=O8;he.VersionedMessage=L8;he.VersionedTransaction=v8;he.VoteAccount=N8;he.VoteAuthorizationLayout=Une;he.VoteInit=zw;he.VoteInstruction=R8;he.VoteProgram=Wh;he.clusterApiUrl=qne;he.sendAndConfirmRawTransaction=Hne;he.sendAndConfirmTransaction=Nw});var lR=K(P1=>{"use strict";p();y();Object.defineProperty(P1,"__esModule",{value:!0});P1.version=void 0;P1.version="properties/5.7.0"});var Go=K(on=>{"use strict";p();y();var hoe=on&&on.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},poe=on&&on.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(on,"__esModule",{value:!0});on.Description=on.deepCopy=on.shallowCopy=on.checkProperties=on.resolveProperties=on.getStatic=on.defineReadOnly=void 0;var yoe=Pi(),moe=lR(),_1=new yoe.Logger(moe.version);function dR(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}on.defineReadOnly=dR;function goe(e,t){for(var r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||typeof e.prototype!="object")break;e=Object.getPrototypeOf(e.prototype).constructor}return null}on.getStatic=goe;function boe(e){return hoe(this,void 0,void 0,function(){var t,r;return poe(this,function(n){switch(n.label){case 0:return t=Object.keys(e).map(function(i){var o=e[i];return Promise.resolve(o).then(function(s){return{key:i,value:s}})}),[4,Promise.all(t)];case 1:return r=n.sent(),[2,r.reduce(function(i,o){return i[o.key]=o.value,i},{})]}})})}on.resolveProperties=boe;function xoe(e,t){(!e||typeof e!="object")&&_1.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(function(r){t[r]||_1.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}on.checkProperties=xoe;function woe(e){var t={};for(var r in e)t[r]=e[r];return t}on.shallowCopy=woe;var voe={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function hR(e){if(e==null||voe[typeof e])return!0;if(Array.isArray(e)||typeof e=="object"){if(!Object.isFrozen(e))return!1;for(var t=Object.keys(e),r=0;r<t.length;r++){var n=null;try{n=e[t[r]]}catch{continue}if(!hR(n))return!1}return!0}return _1.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Aoe(e){if(hR(e))return e;if(Array.isArray(e))return Object.freeze(e.map(function(i){return B1(i)}));if(typeof e=="object"){var t={};for(var r in e){var n=e[r];n!==void 0&&dR(t,r,B1(n))}return t}return _1.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function B1(e){return Aoe(e)}on.deepCopy=B1;var Soe=function(){function e(t){for(var r in t)this[r]=B1(t[r])}return e}();on.Description=Soe});var wR=K(M1=>{"use strict";p();y();Object.defineProperty(M1,"__esModule",{value:!0});M1.AddressZero=void 0;M1.AddressZero="0x0000000000000000000000000000000000000000"});var vR=K(Cn=>{"use strict";p();y();Object.defineProperty(Cn,"__esModule",{value:!0});Cn.MaxInt256=Cn.MinInt256=Cn.MaxUint256=Cn.WeiPerEther=Cn.Two=Cn.One=Cn.Zero=Cn.NegativeOne=void 0;var af=hh(),Poe=af.BigNumber.from(-1);Cn.NegativeOne=Poe;var _oe=af.BigNumber.from(0);Cn.Zero=_oe;var Boe=af.BigNumber.from(1);Cn.One=Boe;var Coe=af.BigNumber.from(2);Cn.Two=Coe;var Moe=af.BigNumber.from("1000000000000000000");Cn.WeiPerEther=Moe;var Roe=af.BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");Cn.MaxUint256=Roe;var Ooe=af.BigNumber.from("-0x8000000000000000000000000000000000000000000000000000000000000000");Cn.MinInt256=Ooe;var Noe=af.BigNumber.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");Cn.MaxInt256=Noe});var AR=K(R1=>{"use strict";p();y();Object.defineProperty(R1,"__esModule",{value:!0});R1.HashZero=void 0;R1.HashZero="0x0000000000000000000000000000000000000000000000000000000000000000"});var SR=K(O1=>{"use strict";p();y();Object.defineProperty(O1,"__esModule",{value:!0});O1.EtherSymbol=void 0;O1.EtherSymbol="\u039E"});var mI=K(Er=>{"use strict";p();y();Object.defineProperty(Er,"__esModule",{value:!0});Er.EtherSymbol=Er.HashZero=Er.MaxInt256=Er.MinInt256=Er.MaxUint256=Er.WeiPerEther=Er.Two=Er.One=Er.Zero=Er.NegativeOne=Er.AddressZero=void 0;var Uoe=wR();Object.defineProperty(Er,"AddressZero",{enumerable:!0,get:function(){return Uoe.AddressZero}});var cf=vR();Object.defineProperty(Er,"NegativeOne",{enumerable:!0,get:function(){return cf.NegativeOne}});Object.defineProperty(Er,"Zero",{enumerable:!0,get:function(){return cf.Zero}});Object.defineProperty(Er,"One",{enumerable:!0,get:function(){return cf.One}});Object.defineProperty(Er,"Two",{enumerable:!0,get:function(){return cf.Two}});Object.defineProperty(Er,"WeiPerEther",{enumerable:!0,get:function(){return cf.WeiPerEther}});Object.defineProperty(Er,"MaxUint256",{enumerable:!0,get:function(){return cf.MaxUint256}});Object.defineProperty(Er,"MinInt256",{enumerable:!0,get:function(){return cf.MinInt256}});Object.defineProperty(Er,"MaxInt256",{enumerable:!0,get:function(){return cf.MaxInt256}});var Doe=AR();Object.defineProperty(Er,"HashZero",{enumerable:!0,get:function(){return Doe.HashZero}});var Loe=SR();Object.defineProperty(Er,"EtherSymbol",{enumerable:!0,get:function(){return Loe.EtherSymbol}})});var ER=K(N1=>{"use strict";p();y();Object.defineProperty(N1,"__esModule",{value:!0});N1.version=void 0;N1.version="strings/5.7.0"});var D1=K(Jr=>{"use strict";p();y();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.toUtf8CodePoints=Jr.toUtf8String=Jr._toUtf8String=Jr._toEscapedUtf8String=Jr.toUtf8Bytes=Jr.Utf8ErrorFuncs=Jr.Utf8ErrorReason=Jr.UnicodeNormalizationForm=void 0;var IR=ln(),Koe=Pi(),Foe=ER(),kR=new Koe.Logger(Foe.version),U1;(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(U1=Jr.UnicodeNormalizationForm||(Jr.UnicodeNormalizationForm={}));var Yo;(function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"})(Yo=Jr.Utf8ErrorReason||(Jr.Utf8ErrorReason={}));function Voe(e,t,r,n,i){return kR.throwArgumentError("invalid codepoint at offset "+t+"; "+e,"bytes",r)}function TR(e,t,r,n,i){if(e===Yo.BAD_PREFIX||e===Yo.UNEXPECTED_CONTINUE){for(var o=0,s=t+1;s<r.length&&r[s]>>6===2;s++)o++;return o}return e===Yo.OVERRUN?r.length-t-1:0}function qoe(e,t,r,n,i){return e===Yo.OVERLONG?(n.push(i),0):(n.push(65533),TR(e,t,r,n,i))}Jr.Utf8ErrorFuncs=Object.freeze({error:Voe,ignore:TR,replace:qoe});function bI(e,t){t==null&&(t=Jr.Utf8ErrorFuncs.error),e=(0,IR.arrayify)(e);for(var r=[],n=0;n<e.length;){var i=e[n++];if(!(i>>7)){r.push(i);continue}var o=null,s=null;if((i&224)===192)o=1,s=127;else if((i&240)===224)o=2,s=2047;else if((i&248)===240)o=3,s=65535;else{(i&192)===128?n+=t(Yo.UNEXPECTED_CONTINUE,n-1,e,r):n+=t(Yo.BAD_PREFIX,n-1,e,r);continue}if(n-1+o>=e.length){n+=t(Yo.OVERRUN,n-1,e,r);continue}for(var a=i&(1<<8-o-1)-1,c=0;c<o;c++){var u=e[n];if((u&192)!=128){n+=t(Yo.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|u&63,n++}if(a!==null){if(a>1114111){n+=t(Yo.OUT_OF_RANGE,n-1-o,e,r,a);continue}if(a>=55296&&a<=57343){n+=t(Yo.UTF16_SURROGATE,n-1-o,e,r,a);continue}if(a<=s){n+=t(Yo.OVERLONG,n-1-o,e,r,a);continue}r.push(a)}}return r}function PR(e,t){t===void 0&&(t=U1.current),t!=U1.current&&(kR.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;var o=e.charCodeAt(n);if(n>=e.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");var s=65536+((i&1023)<<10)+(o&1023);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return(0,IR.arrayify)(r)}Jr.toUtf8Bytes=PR;function gI(e){var t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function Hoe(e,t){return'"'+bI(e,t).map(function(r){if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?gI(r):(r-=65536,gI((r>>10&1023)+55296)+gI((r&1023)+56320))}).join("")+'"'}Jr._toEscapedUtf8String=Hoe;function _R(e){return e.map(function(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))}).join("")}Jr._toUtf8String=_R;function Woe(e,t){return _R(bI(e,t))}Jr.toUtf8String=Woe;function zoe(e,t){return t===void 0&&(t=U1.current),bI(PR(e,t))}Jr.toUtf8CodePoints=zoe});var CR=K(rp=>{"use strict";p();y();Object.defineProperty(rp,"__esModule",{value:!0});rp.parseBytes32String=rp.formatBytes32String=void 0;var joe=mI(),xI=ln(),BR=D1();function Goe(e){var t=(0,BR.toUtf8Bytes)(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return(0,xI.hexlify)((0,xI.concat)([t,joe.HashZero]).slice(0,32))}rp.formatBytes32String=Goe;function $oe(e){var t=(0,xI.arrayify)(e);if(t.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(t[31]!==0)throw new Error("invalid bytes32 string - no null terminator");for(var r=31;t[r-1]===0;)r--;return(0,BR.toUtf8String)(t.slice(0,r))}rp.parseBytes32String=$oe});var UR=K(Oa=>{"use strict";p();y();Object.defineProperty(Oa,"__esModule",{value:!0});Oa.nameprep=Oa._nameprepTableC=Oa._nameprepTableB2=Oa._nameprepTableA1=void 0;var Fm=D1();function Yoe(e){if(e.length%4!==0)throw new Error("bad data");for(var t=[],r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t}function wI(e,t){t||(t=function(i){return[parseInt(i,16)]});var r=0,n={};return e.split(",").forEach(function(i){var o=i.split(":");r+=parseInt(o[0],16),n[r]=t(o[1])}),n}function MR(e){var t=0;return e.split(",").map(function(r){var n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");var i=t+parseInt(n[0],16);return t=parseInt(n[1],16),{l:i,h:t}})}function vI(e,t){for(var r=0,n=0;n<t.length;n++){var i=t[n];if(r+=i.l,e>=r&&e<=r+i.h&&(e-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(e-r)!==-1)continue;return i}}return null}var Joe=MR("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Zoe="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(function(e){return parseInt(e,16)}),Qoe=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Xoe=wI("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),ese=wI("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),tse=wI("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",Yoe),rse=MR("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function nse(e){return e.reduce(function(t,r){return r.forEach(function(n){t.push(n)}),t},[])}function RR(e){return!!vI(e,Joe)}Oa._nameprepTableA1=RR;function OR(e){var t=vI(e,Qoe);if(t)return[e+t.s];var r=Xoe[e];if(r)return r;var n=ese[e];if(n)return[e+n[0]];var i=tse[e];return i||null}Oa._nameprepTableB2=OR;function NR(e){return!!vI(e,rse)}Oa._nameprepTableC=NR;function ise(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();var t=(0,Fm.toUtf8CodePoints)(e);t=nse(t.map(function(n){if(Zoe.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];var i=OR(n);return i||[n]})),t=(0,Fm.toUtf8CodePoints)((0,Fm._toUtf8String)(t),Fm.UnicodeNormalizationForm.NFKC),t.forEach(function(n){if(NR(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),t.forEach(function(n){if(RR(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});var r=(0,Fm._toUtf8String)(t);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}Oa.nameprep=ise});var uf=K(Hr=>{"use strict";p();y();Object.defineProperty(Hr,"__esModule",{value:!0});Hr.nameprep=Hr.parseBytes32String=Hr.formatBytes32String=Hr.UnicodeNormalizationForm=Hr.Utf8ErrorReason=Hr.Utf8ErrorFuncs=Hr.toUtf8String=Hr.toUtf8CodePoints=Hr.toUtf8Bytes=Hr._toEscapedUtf8String=void 0;var DR=CR();Object.defineProperty(Hr,"formatBytes32String",{enumerable:!0,get:function(){return DR.formatBytes32String}});Object.defineProperty(Hr,"parseBytes32String",{enumerable:!0,get:function(){return DR.parseBytes32String}});var ose=UR();Object.defineProperty(Hr,"nameprep",{enumerable:!0,get:function(){return ose.nameprep}});var zl=D1();Object.defineProperty(Hr,"_toEscapedUtf8String",{enumerable:!0,get:function(){return zl._toEscapedUtf8String}});Object.defineProperty(Hr,"toUtf8Bytes",{enumerable:!0,get:function(){return zl.toUtf8Bytes}});Object.defineProperty(Hr,"toUtf8CodePoints",{enumerable:!0,get:function(){return zl.toUtf8CodePoints}});Object.defineProperty(Hr,"toUtf8String",{enumerable:!0,get:function(){return zl.toUtf8String}});Object.defineProperty(Hr,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return zl.UnicodeNormalizationForm}});Object.defineProperty(Hr,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return zl.Utf8ErrorFuncs}});Object.defineProperty(Hr,"Utf8ErrorReason",{enumerable:!0,get:function(){return zl.Utf8ErrorReason}})});var AI=K(L1=>{"use strict";p();y();Object.defineProperty(L1,"__esModule",{value:!0});L1.id=void 0;var sse=wu(),ase=uf();function cse(e){return(0,sse.keccak256)((0,ase.toUtf8Bytes)(e))}L1.id=cse});var SI=K(K1=>{"use strict";p();y();Object.defineProperty(K1,"__esModule",{value:!0});K1.version=void 0;K1.version="hash/5.7.0"});var KR=K(np=>{"use strict";p();y();Object.defineProperty(np,"__esModule",{value:!0});np.encode=np.decode=void 0;var LR=ln();function use(e){e=atob(e);for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return(0,LR.arrayify)(t)}np.decode=use;function fse(e){e=(0,LR.arrayify)(e);for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}np.encode=fse});var VR=K(ip=>{"use strict";p();y();Object.defineProperty(ip,"__esModule",{value:!0});ip.encode=ip.decode=void 0;var FR=KR();Object.defineProperty(ip,"decode",{enumerable:!0,get:function(){return FR.decode}});Object.defineProperty(ip,"encode",{enumerable:!0,get:function(){return FR.encode}})});var II=K(Mn=>{"use strict";p();y();Object.defineProperty(Mn,"__esModule",{value:!0});Mn.read_emoji_trie=Mn.read_zero_terminated_array=Mn.read_mapped_map=Mn.read_member_array=Mn.signed=Mn.read_compressed_payload=Mn.read_payload=Mn.decode_arithmetic=void 0;function HR(e,t){t==null&&(t=1);var r=[],n=r.forEach,i=function(o,s){n.call(o,function(a){s>0&&Array.isArray(a)?i(a,s-1):r.push(a)})};return i(e,t),r}function lse(e){for(var t={},r=0;r<e.length;r++){var n=e[r];t[n[0]]=n[1]}return t}function WR(e){var t=0;function r(){return e[t++]<<8|e[t++]}for(var n=r(),i=1,o=[0,1],s=1;s<n;s++)o.push(i+=r());var a=r(),c=t;t+=a;var u=0,h=0;function l(){return u==0&&(h=h<<8|e[t++],u=8),h>>--u&1}for(var g=31,x=Math.pow(2,g),A=x>>>1,E=A>>1,C=x-1,M=0,s=0;s<g;s++)M=M<<1|l();for(var N=[],R=0,V=x;;){for(var q=Math.floor(((M-R+1)*i-1)/V),W=0,G=n;G-W>1;){var z=W+G>>>1;q<o[z]?G=z:W=z}if(W==0)break;N.push(W);for(var ee=R+Math.floor(V*o[W]/i),_=R+Math.floor(V*o[W+1]/i)-1;!((ee^_)&A);)M=M<<1&C|l(),ee=ee<<1&C,_=_<<1&C|1;for(;ee&~_&E;)M=M&A|M<<1&C>>>1|l(),ee=ee<<1^A,_=(_^A)<<1|A|1;R=ee,V=1+_-ee}var f=n-4;return N.map(function(m){switch(m-f){case 3:return f+65792+(e[c++]<<16|e[c++]<<8|e[c++]);case 2:return f+256+(e[c++]<<8|e[c++]);case 1:return f+e[c++];default:return m-1}})}Mn.decode_arithmetic=WR;function zR(e){var t=0;return function(){return e[t++]}}Mn.read_payload=zR;function dse(e){return zR(WR(e))}Mn.read_compressed_payload=dse;function jR(e){return e&1?~e>>1:e>>1}Mn.signed=jR;function hse(e,t){for(var r=Array(e),n=0;n<e;n++)r[n]=1+t();return r}function qR(e,t){for(var r=Array(e),n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function pse(e,t){for(var r=Array(e),n=0,i=0;n<e;n++)r[n]=i+=jR(t());return r}function EI(e,t){for(var r=qR(e(),e),n=e(),i=qR(n,e),o=hse(n,e),s=0;s<n;s++)for(var a=0;a<o[s];a++)r.push(i[s]+a);return t?r.map(function(c){return t[c]}):r}Mn.read_member_array=EI;function yse(e){for(var t=[];;){var r=e();if(r==0)break;t.push(mse(r,e))}for(;;){var r=e()-1;if(r<0)break;t.push(gse(r,e))}return lse(HR(t))}Mn.read_mapped_map=yse;function GR(e){for(var t=[];;){var r=e();if(r==0)break;t.push(r)}return t}Mn.read_zero_terminated_array=GR;function $R(e,t,r){for(var n=Array(e).fill(void 0).map(function(){return[]}),i=0;i<t;i++)pse(e,r).forEach(function(o,s){return n[s].push(o)});return n}function mse(e,t){var r=1+t(),n=t(),i=GR(t),o=$R(i.length,1+e,t);return HR(o.map(function(s,a){var c=s[0],u=s.slice(1);return Array(i[a]).fill(void 0).map(function(h,l){var g=l*n;return[c+l*r,u.map(function(x){return x+g})]})}))}function gse(e,t){var r=1+t(),n=$R(r,1+e,t);return n.map(function(i){return[i[0],i.slice(1)]})}function bse(e){var t=EI(e).sort(function(n,i){return n-i});return r();function r(){for(var n=[];;){var i=EI(e,t);if(i.length==0)break;n.push({set:new Set(i),node:r()})}n.sort(function(h,l){return l.set.size-h.set.size});var o=e(),s=o%3;o=o/3|0;var a=!!(o&1);o>>=1;var c=o==1,u=o==2;return{branches:n,valid:s,fe0f:a,save:c,check:u}}}Mn.read_emoji_trie=bse});var YR=K(F1=>{"use strict";p();y();Object.defineProperty(F1,"__esModule",{value:!0});F1.getData=void 0;var xse=VR(),wse=II();function vse(){return(0,wse.read_compressed_payload)((0,xse.decode)("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}F1.getData=vse});var XR=K(op=>{"use strict";p();y();Object.defineProperty(op,"__esModule",{value:!0});op.ens_normalize=op.ens_normalize_post_check=void 0;var Ase=uf(),Sse=YR(),V1=(0,Sse.getData)(),q1=II(),Ese=new Set((0,q1.read_member_array)(V1)),Ise=new Set((0,q1.read_member_array)(V1)),kse=(0,q1.read_mapped_map)(V1),Tse=(0,q1.read_emoji_trie)(V1),JR=45,ZR=95;function QR(e){return(0,Ase.toUtf8CodePoints)(e)}function Pse(e){return e.filter(function(t){return t!=65039})}function kI(e){for(var t=0,r=e.split(".");t<r.length;t++){var n=r[t],i=QR(n);try{for(var o=i.lastIndexOf(ZR)-1;o>=0;o--)if(i[o]!==ZR)throw new Error("underscore only allowed at start");if(i.length>=4&&i.every(function(s){return s<128})&&i[2]===JR&&i[3]===JR)throw new Error("invalid label extension")}catch(s){throw new Error('Invalid label "'+n+'": '+s.message)}}return e}op.ens_normalize_post_check=kI;function _se(e){return kI(Bse(e,Pse))}op.ens_normalize=_se;function Bse(e,t){for(var r=QR(e).reverse(),n=[];r.length;){var i=Mse(r);if(i){n.push.apply(n,t(i));continue}var o=r.pop();if(Ese.has(o)){n.push(o);continue}if(!Ise.has(o)){var s=kse[o];if(s){n.push.apply(n,s);continue}throw new Error("Disallowed codepoint: 0x"+o.toString(16).toUpperCase())}}return kI(Cse(String.fromCodePoint.apply(String,n)))}function Cse(e){return e.normalize("NFC")}function Mse(e,t){var r,n=Tse,i,o,s=[],a=e.length;t&&(t.length=0);for(var c=function(){var h=e[--a];if(n=(r=n.branches.find(function(l){return l.set.has(h)}))===null||r===void 0?void 0:r.node,!n)return"break";if(n.save)o=h;else if(n.check&&h===o)return"break";s.push(h),n.fe0f&&(s.push(65039),a>0&&e[a-1]==65039&&a--),n.valid&&(i=s.slice(),n.valid==2&&i.splice(1,1),t&&t.push.apply(t,e.slice(a).reverse()),e.length=a)};a;){var u=c();if(u==="break")break}return i}});var TI=K(Na=>{"use strict";p();y();Object.defineProperty(Na,"__esModule",{value:!0});Na.dnsEncode=Na.namehash=Na.isValidName=Na.ensNormalize=void 0;var H1=ln(),rO=uf(),eO=wu(),Rse=Pi(),Ose=SI(),Nse=new Rse.Logger(Ose.version),Use=XR(),nO=new Uint8Array(32);nO.fill(0);function tO(e){if(e.length===0)throw new Error("invalid ENS name; empty component");return e}function W1(e){var t=(0,rO.toUtf8Bytes)((0,Use.ens_normalize)(e)),r=[];if(e.length===0)return r;for(var n=0,i=0;i<t.length;i++){var o=t[i];o===46&&(r.push(tO(t.slice(n,i))),n=i+1)}if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(tO(t.slice(n))),r}function Dse(e){return W1(e).map(function(t){return(0,rO.toUtf8String)(t)}).join(".")}Na.ensNormalize=Dse;function Lse(e){try{return W1(e).length!==0}catch{}return!1}Na.isValidName=Lse;function Kse(e){typeof e!="string"&&Nse.throwArgumentError("invalid ENS name; not a string","name",e);for(var t=nO,r=W1(e);r.length;)t=(0,eO.keccak256)((0,H1.concat)([t,(0,eO.keccak256)(r.pop())]));return(0,H1.hexlify)(t)}Na.namehash=Kse;function Fse(e){return(0,H1.hexlify)((0,H1.concat)(W1(e).map(function(t){if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");var r=new Uint8Array(t.length+1);return r.set(t,1),r[0]=r.length-1,r})))+"00"}Na.dnsEncode=Fse});var iO=K(jl=>{"use strict";p();y();Object.defineProperty(jl,"__esModule",{value:!0});jl.hashMessage=jl.messagePrefix=void 0;var Vse=ln(),qse=wu(),PI=uf();jl.messagePrefix=`Ethereum Signed Message:
`;function Hse(e){return typeof e=="string"&&(e=(0,PI.toUtf8Bytes)(e)),(0,qse.keccak256)((0,Vse.concat)([(0,PI.toUtf8Bytes)(jl.messagePrefix),(0,PI.toUtf8Bytes)(String(e.length)),e]))}jl.hashMessage=Hse});var hO=K(ff=>{"use strict";p();y();var Wse=ff&&ff.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},zse=ff&&ff.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ff,"__esModule",{value:!0});ff.TypedDataEncoder=void 0;var cO=vy(),$l=hh(),Jn=ln(),sp=wu(),Gl=Go(),jse=Pi(),Gse=SI(),Nr=new jse.Logger(Gse.version),uO=AI(),fO=new Uint8Array(32);fO.fill(0);var $se=$l.BigNumber.from(-1),lO=$l.BigNumber.from(0),dO=$l.BigNumber.from(1),Yse=$l.BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Jse(e){var t=(0,Jn.arrayify)(e),r=t.length%32;return r?(0,Jn.hexConcat)([t,fO.slice(r)]):(0,Jn.hexlify)(t)}var Zse=(0,Jn.hexZeroPad)(dO.toHexString(),32),Qse=(0,Jn.hexZeroPad)(lO.toHexString(),32),oO={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},_I=["name","version","chainId","verifyingContract","salt"];function sO(e){return function(t){return typeof t!="string"&&Nr.throwArgumentError("invalid domain value for "+JSON.stringify(e),"domain."+e,t),t}}var Xse={name:sO("name"),version:sO("version"),chainId:function(e){try{return $l.BigNumber.from(e).toString()}catch{}return Nr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return(0,cO.getAddress)(e).toLowerCase()}catch{}return Nr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{var t=(0,Jn.arrayify)(e);if(t.length!==32)throw new Error("bad length");return(0,Jn.hexlify)(t)}catch{}return Nr.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function BI(e){{var t=e.match(/^(u?)int(\d*)$/);if(t){var r=t[1]==="",n=parseInt(t[2]||"256");(n%8!==0||n>256||t[2]&&t[2]!==String(n))&&Nr.throwArgumentError("invalid numeric width","type",e);var i=Yse.mask(r?n-1:n),o=r?i.add(dO).mul($se):lO;return function(a){var c=$l.BigNumber.from(a);return(c.lt(o)||c.gt(i))&&Nr.throwArgumentError("value out-of-bounds for "+e,"value",a),(0,Jn.hexZeroPad)(c.toTwos(256).toHexString(),32)}}}{var t=e.match(/^bytes(\d+)$/);if(t){var s=parseInt(t[1]);return(s===0||s>32||t[1]!==String(s))&&Nr.throwArgumentError("invalid bytes width","type",e),function(c){var u=(0,Jn.arrayify)(c);return u.length!==s&&Nr.throwArgumentError("invalid length for "+e,"value",c),Jse(c)}}}switch(e){case"address":return function(a){return(0,Jn.hexZeroPad)((0,cO.getAddress)(a),32)};case"bool":return function(a){return a?Zse:Qse};case"bytes":return function(a){return(0,sp.keccak256)(a)};case"string":return function(a){return(0,uO.id)(a)}}return null}function aO(e,t){return e+"("+t.map(function(r){var n=r.name,i=r.type;return i+" "+n}).join(",")+")"}var eae=function(){function e(t){(0,Gl.defineReadOnly)(this,"types",Object.freeze((0,Gl.deepCopy)(t))),(0,Gl.defineReadOnly)(this,"_encoderCache",{}),(0,Gl.defineReadOnly)(this,"_types",{});var r={},n={},i={};Object.keys(t).forEach(function(l){r[l]={},n[l]=[],i[l]={}});var o=function(l){var g={};t[l].forEach(function(x){g[x.name]&&Nr.throwArgumentError("duplicate variable name "+JSON.stringify(x.name)+" in "+JSON.stringify(l),"types",t),g[x.name]=!0;var A=x.type.match(/^([^\x5b]*)(\x5b|$)/)[1];A===l&&Nr.throwArgumentError("circular type reference to "+JSON.stringify(A),"types",t);var E=BI(A);E||(n[A]||Nr.throwArgumentError("unknown type "+JSON.stringify(A),"types",t),n[A].push(l),r[l][A]=!0)})};for(var s in t)o(s);var a=Object.keys(n).filter(function(l){return n[l].length===0});a.length===0?Nr.throwArgumentError("missing primary type","types",t):a.length>1&&Nr.throwArgumentError("ambiguous primary types or unused types: "+a.map(function(l){return JSON.stringify(l)}).join(", "),"types",t),(0,Gl.defineReadOnly)(this,"primaryType",a[0]);function c(l,g){g[l]&&Nr.throwArgumentError("circular type reference to "+JSON.stringify(l),"types",t),g[l]=!0,Object.keys(r[l]).forEach(function(x){n[x]&&(c(x,g),Object.keys(g).forEach(function(A){i[A][x]=!0}))}),delete g[l]}c(this.primaryType,{});for(var u in i){var h=Object.keys(i[u]);h.sort(),this._types[u]=aO(u,t[u])+h.map(function(l){return aO(l,t[l])}).join("")}}return e.prototype.getEncoder=function(t){var r=this._encoderCache[t];return r||(r=this._encoderCache[t]=this._getEncoder(t)),r},e.prototype._getEncoder=function(t){var r=this;{var n=BI(t);if(n)return n}var i=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){var o=i[1],s=this.getEncoder(o),a=parseInt(i[3]);return function(h){a>=0&&h.length!==a&&Nr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",h);var l=h.map(s);return r._types[o]&&(l=l.map(sp.keccak256)),(0,sp.keccak256)((0,Jn.hexConcat)(l))}}var c=this.types[t];if(c){var u=(0,uO.id)(this._types[t]);return function(h){var l=c.map(function(g){var x=g.name,A=g.type,E=r.getEncoder(A)(h[x]);return r._types[A]?(0,sp.keccak256)(E):E});return l.unshift(u),(0,Jn.hexConcat)(l)}}return Nr.throwArgumentError("unknown type: "+t,"type",t)},e.prototype.encodeType=function(t){var r=this._types[t];return r||Nr.throwArgumentError("unknown type: "+JSON.stringify(t),"name",t),r},e.prototype.encodeData=function(t,r){return this.getEncoder(t)(r)},e.prototype.hashStruct=function(t,r){return(0,sp.keccak256)(this.encodeData(t,r))},e.prototype.encode=function(t){return this.encodeData(this.primaryType,t)},e.prototype.hash=function(t){return this.hashStruct(this.primaryType,t)},e.prototype._visit=function(t,r,n){var i=this;{var o=BI(t);if(o)return n(t,r)}var s=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s){var a=s[1],c=parseInt(s[3]);return c>=0&&r.length!==c&&Nr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(function(h){return i._visit(a,h,n)})}var u=this.types[t];return u?u.reduce(function(h,l){var g=l.name,x=l.type;return h[g]=i._visit(x,r[g],n),h},{}):Nr.throwArgumentError("unknown type: "+t,"type",t)},e.prototype.visit=function(t,r){return this._visit(this.primaryType,t,r)},e.from=function(t){return new e(t)},e.getPrimaryType=function(t){return e.from(t).primaryType},e.hashStruct=function(t,r,n){return e.from(r).hashStruct(t,n)},e.hashDomain=function(t){var r=[];for(var n in t){var i=oO[n];i||Nr.throwArgumentError("invalid typed-data domain key: "+JSON.stringify(n),"domain",t),r.push({name:n,type:i})}return r.sort(function(o,s){return _I.indexOf(o.name)-_I.indexOf(s.name)}),e.hashStruct("EIP712Domain",{EIP712Domain:r},t)},e.encode=function(t,r,n){return(0,Jn.hexConcat)(["0x1901",e.hashDomain(t),e.from(r).hash(n)])},e.hash=function(t,r,n){return(0,sp.keccak256)(e.encode(t,r,n))},e.resolveNames=function(t,r,n,i){return Wse(this,void 0,void 0,function(){var o,s,a,c,u,h,l,g;return zse(this,function(x){switch(x.label){case 0:t=(0,Gl.shallowCopy)(t),o={},t.verifyingContract&&!(0,Jn.isHexString)(t.verifyingContract,20)&&(o[t.verifyingContract]="0x"),s=e.from(r),s.visit(n,function(A,E){return A==="address"&&!(0,Jn.isHexString)(E,20)&&(o[E]="0x"),E}),a=[];for(c in o)a.push(c);u=0,x.label=1;case 1:return u<a.length?(h=a[u],l=o,g=h,[4,i(h)]):[3,4];case 2:l[g]=x.sent(),x.label=3;case 3:return u++,[3,1];case 4:return t.verifyingContract&&o[t.verifyingContract]&&(t.verifyingContract=o[t.verifyingContract]),n=s.visit(n,function(A,E){return A==="address"&&o[E]?o[E]:E}),[2,{domain:t,value:n}]}})})},e.getPayload=function(t,r,n){e.hashDomain(t);var i={},o=[];_I.forEach(function(c){var u=t[c];u!=null&&(i[c]=Xse[c](u),o.push({name:c,type:oO[c]}))});var s=e.from(r),a=(0,Gl.shallowCopy)(r);return a.EIP712Domain?Nr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=o,s.encode(n),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(n,function(c,u){if(c.match(/^bytes(\d*)/))return(0,Jn.hexlify)((0,Jn.arrayify)(u));if(c.match(/^u?int/))return $l.BigNumber.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&Nr.throwArgumentError("invalid string","value",u),u}return Nr.throwArgumentError("unsupported type","type",c)})}},e}();ff.TypedDataEncoder=eae});var MI=K(Rn=>{"use strict";p();y();Object.defineProperty(Rn,"__esModule",{value:!0});Rn._TypedDataEncoder=Rn.hashMessage=Rn.messagePrefix=Rn.ensNormalize=Rn.isValidName=Rn.namehash=Rn.dnsEncode=Rn.id=void 0;var tae=AI();Object.defineProperty(Rn,"id",{enumerable:!0,get:function(){return tae.id}});var CI=TI();Object.defineProperty(Rn,"dnsEncode",{enumerable:!0,get:function(){return CI.dnsEncode}});Object.defineProperty(Rn,"isValidName",{enumerable:!0,get:function(){return CI.isValidName}});Object.defineProperty(Rn,"namehash",{enumerable:!0,get:function(){return CI.namehash}});var pO=iO();Object.defineProperty(Rn,"hashMessage",{enumerable:!0,get:function(){return pO.hashMessage}});Object.defineProperty(Rn,"messagePrefix",{enumerable:!0,get:function(){return pO.messagePrefix}});var rae=TI();Object.defineProperty(Rn,"ensNormalize",{enumerable:!0,get:function(){return rae.ensNormalize}});var nae=hO();Object.defineProperty(Rn,"_TypedDataEncoder",{enumerable:!0,get:function(){return nae.TypedDataEncoder}})});var NI=K(qm=>{"use strict";p();y();Object.defineProperty(qm,"__esModule",{value:!0});qm.SupportedAlgorithm=void 0;var iae;(function(e){e.sha256="sha256",e.sha512="sha512"})(iae=qm.SupportedAlgorithm||(qm.SupportedAlgorithm={}))});var yO=K(j1=>{"use strict";p();y();Object.defineProperty(j1,"__esModule",{value:!0});j1.version=void 0;j1.version="sha2/5.7.0"});var gO=K(Jo=>{"use strict";p();y();var oae=Jo&&Jo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.computeHmac=Jo.sha512=Jo.sha256=Jo.ripemd160=void 0;var Hm=oae(RB()),Wm=ln(),sae=NI(),mO=Pi(),aae=yO(),cae=new mO.Logger(aae.version);function uae(e){return"0x"+Hm.default.ripemd160().update((0,Wm.arrayify)(e)).digest("hex")}Jo.ripemd160=uae;function fae(e){return"0x"+Hm.default.sha256().update((0,Wm.arrayify)(e)).digest("hex")}Jo.sha256=fae;function lae(e){return"0x"+Hm.default.sha512().update((0,Wm.arrayify)(e)).digest("hex")}Jo.sha512=lae;function dae(e,t,r){return sae.SupportedAlgorithm[e]||cae.throwError("unsupported algorithm "+e,mO.Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Hm.default.hmac(Hm.default[e],(0,Wm.arrayify)(t)).update((0,Wm.arrayify)(r)).digest("hex")}Jo.computeHmac=dae});var UI=K(Zo=>{"use strict";p();y();Object.defineProperty(Zo,"__esModule",{value:!0});Zo.SupportedAlgorithm=Zo.sha512=Zo.sha256=Zo.ripemd160=Zo.computeHmac=void 0;var G1=gO();Object.defineProperty(Zo,"computeHmac",{enumerable:!0,get:function(){return G1.computeHmac}});Object.defineProperty(Zo,"ripemd160",{enumerable:!0,get:function(){return G1.ripemd160}});Object.defineProperty(Zo,"sha256",{enumerable:!0,get:function(){return G1.sha256}});Object.defineProperty(Zo,"sha512",{enumerable:!0,get:function(){return G1.sha512}});var hae=NI();Object.defineProperty(Zo,"SupportedAlgorithm",{enumerable:!0,get:function(){return hae.SupportedAlgorithm}})});var a6=K((s6,zO)=>{"use strict";p();y();(function(e){function t(d){return parseInt(d)===d}function r(d){if(!t(d.length))return!1;for(var S=0;S<d.length;S++)if(!t(d[S])||d[S]<0||d[S]>255)return!1;return!0}function n(d,S){if(d.buffer&&ArrayBuffer.isView(d)&&d.name==="Uint8Array")return S&&(d.slice?d=d.slice():d=Array.prototype.slice.call(d)),d;if(Array.isArray(d)){if(!r(d))throw new Error("Array contains invalid value: "+d);return new Uint8Array(d)}if(t(d.length)&&r(d))return new Uint8Array(d);throw new Error("unsupported array-like object")}function i(d){return new Uint8Array(d)}function o(d,S,F,U,D){(U!=null||D!=null)&&(d.slice?d=d.slice(U,D):d=Array.prototype.slice.call(d,U,D)),S.set(d,F)}var s=function(){function d(F){var U=[],D=0;for(F=encodeURI(F);D<F.length;){var J=F.charCodeAt(D++);J===37?(U.push(parseInt(F.substr(D,2),16)),D+=2):U.push(J)}return n(U)}function S(F){for(var U=[],D=0;D<F.length;){var J=F[D];J<128?(U.push(String.fromCharCode(J)),D++):J>191&&J<224?(U.push(String.fromCharCode((J&31)<<6|F[D+1]&63)),D+=2):(U.push(String.fromCharCode((J&15)<<12|(F[D+1]&63)<<6|F[D+2]&63)),D+=3)}return U.join("")}return{toBytes:d,fromBytes:S}}(),a=function(){function d(U){for(var D=[],J=0;J<U.length;J+=2)D.push(parseInt(U.substr(J,2),16));return D}var S="0123456789abcdef";function F(U){for(var D=[],J=0;J<U.length;J++){var ue=U[J];D.push(S[(ue&240)>>4]+S[ue&15])}return D.join("")}return{toBytes:d,fromBytes:F}}(),c={16:10,24:12,32:14},u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],l=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],g=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],x=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],A=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],E=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],C=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],M=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],N=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],R=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],V=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],q=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],W=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],G=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function z(d){for(var S=[],F=0;F<d.length;F+=4)S.push(d[F]<<24|d[F+1]<<16|d[F+2]<<8|d[F+3]);return S}var ee=function(d){if(!(this instanceof ee))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(d,!0)}),this._prepare()};ee.prototype._prepare=function(){var d=c[this.key.length];if(d==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var S=0;S<=d;S++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var F=(d+1)*4,U=this.key.length/4,D=z(this.key),J,S=0;S<U;S++)J=S>>2,this._Ke[J][S%4]=D[S],this._Kd[d-J][S%4]=D[S];for(var ue=0,fe=U,j;fe<F;){if(j=D[U-1],D[0]^=h[j>>16&255]<<24^h[j>>8&255]<<16^h[j&255]<<8^h[j>>24&255]^u[ue]<<24,ue+=1,U!=8)for(var S=1;S<U;S++)D[S]^=D[S-1];else{for(var S=1;S<U/2;S++)D[S]^=D[S-1];j=D[U/2-1],D[U/2]^=h[j&255]^h[j>>8&255]<<8^h[j>>16&255]<<16^h[j>>24&255]<<24;for(var S=U/2+1;S<U;S++)D[S]^=D[S-1]}for(var S=0,se,L;S<U&&fe<F;)se=fe>>2,L=fe%4,this._Ke[se][L]=D[S],this._Kd[d-se][L]=D[S++],fe++}for(var se=1;se<d;se++)for(var L=0;L<4;L++)j=this._Kd[se][L],this._Kd[se][L]=V[j>>24&255]^q[j>>16&255]^W[j>>8&255]^G[j&255]},ee.prototype.encrypt=function(d){if(d.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var S=this._Ke.length-1,F=[0,0,0,0],U=z(d),D=0;D<4;D++)U[D]^=this._Ke[0][D];for(var J=1;J<S;J++){for(var D=0;D<4;D++)F[D]=g[U[D]>>24&255]^x[U[(D+1)%4]>>16&255]^A[U[(D+2)%4]>>8&255]^E[U[(D+3)%4]&255]^this._Ke[J][D];U=F.slice()}for(var ue=i(16),fe,D=0;D<4;D++)fe=this._Ke[S][D],ue[4*D]=(h[U[D]>>24&255]^fe>>24)&255,ue[4*D+1]=(h[U[(D+1)%4]>>16&255]^fe>>16)&255,ue[4*D+2]=(h[U[(D+2)%4]>>8&255]^fe>>8)&255,ue[4*D+3]=(h[U[(D+3)%4]&255]^fe)&255;return ue},ee.prototype.decrypt=function(d){if(d.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var S=this._Kd.length-1,F=[0,0,0,0],U=z(d),D=0;D<4;D++)U[D]^=this._Kd[0][D];for(var J=1;J<S;J++){for(var D=0;D<4;D++)F[D]=C[U[D]>>24&255]^M[U[(D+3)%4]>>16&255]^N[U[(D+2)%4]>>8&255]^R[U[(D+1)%4]&255]^this._Kd[J][D];U=F.slice()}for(var ue=i(16),fe,D=0;D<4;D++)fe=this._Kd[S][D],ue[4*D]=(l[U[D]>>24&255]^fe>>24)&255,ue[4*D+1]=(l[U[(D+3)%4]>>16&255]^fe>>16)&255,ue[4*D+2]=(l[U[(D+2)%4]>>8&255]^fe>>8)&255,ue[4*D+3]=(l[U[(D+1)%4]&255]^fe)&255;return ue};var _=function(d){if(!(this instanceof _))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ee(d)};_.prototype.encrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16)o(d,F,0,U,U+16),F=this._aes.encrypt(F),o(F,S,U);return S},_.prototype.decrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16)o(d,F,0,U,U+16),F=this._aes.decrypt(F),o(F,S,U);return S};var f=function(d,S){if(!(this instanceof f))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!S)S=i(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=n(S,!0),this._aes=new ee(d)};f.prototype.encrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16){o(d,F,0,U,U+16);for(var D=0;D<16;D++)F[D]^=this._lastCipherblock[D];this._lastCipherblock=this._aes.encrypt(F),o(this._lastCipherblock,S,U)}return S},f.prototype.decrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16){o(d,F,0,U,U+16),F=this._aes.decrypt(F);for(var D=0;D<16;D++)S[U+D]=F[D]^this._lastCipherblock[D];o(d,this._lastCipherblock,0,U,U+16)}return S};var m=function(d,S,F){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!S)S=i(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");F||(F=1),this.segmentSize=F,this._shiftRegister=n(S,!0),this._aes=new ee(d)};m.prototype.encrypt=function(d){if(d.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var S=n(d,!0),F,U=0;U<S.length;U+=this.segmentSize){F=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)S[U+D]^=F[D];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(S,this._shiftRegister,16-this.segmentSize,U,U+this.segmentSize)}return S},m.prototype.decrypt=function(d){if(d.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var S=n(d,!0),F,U=0;U<S.length;U+=this.segmentSize){F=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)S[U+D]^=F[D];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(d,this._shiftRegister,16-this.segmentSize,U,U+this.segmentSize)}return S};var b=function(d,S){if(!(this instanceof b))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!S)S=i(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=n(S,!0),this._lastPrecipherIndex=16,this._aes=new ee(d)};b.prototype.encrypt=function(d){for(var S=n(d,!0),F=0;F<S.length;F++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),S[F]^=this._lastPrecipher[this._lastPrecipherIndex++];return S},b.prototype.decrypt=b.prototype.encrypt;var v=function(d){if(!(this instanceof v))throw Error("Counter must be instanitated with `new`");d!==0&&!d&&(d=1),typeof d=="number"?(this._counter=i(16),this.setValue(d)):this.setBytes(d)};v.prototype.setValue=function(d){if(typeof d!="number"||parseInt(d)!=d)throw new Error("invalid counter value (must be an integer)");for(var S=15;S>=0;--S)this._counter[S]=d%256,d=d>>8},v.prototype.setBytes=function(d){if(d=n(d,!0),d.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=d},v.prototype.increment=function(){for(var d=15;d>=0;d--)if(this._counter[d]===255)this._counter[d]=0;else{this._counter[d]++;break}};var w=function(d,S){if(!(this instanceof w))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",S instanceof v||(S=new v(S)),this._counter=S,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ee(d)};w.prototype.encrypt=function(d){for(var S=n(d,!0),F=0;F<S.length;F++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),S[F]^=this._remainingCounter[this._remainingCounterIndex++];return S},w.prototype.decrypt=w.prototype.encrypt;function P(d){d=n(d,!0);var S=16-d.length%16,F=i(d.length+S);o(d,F);for(var U=d.length;U<F.length;U++)F[U]=S;return F}function B(d){if(d=n(d,!0),d.length<16)throw new Error("PKCS#7 invalid length");var S=d[d.length-1];if(S>16)throw new Error("PKCS#7 padding byte out of range");for(var F=d.length-S,U=0;U<S;U++)if(d[F+U]!==S)throw new Error("PKCS#7 invalid padding byte");var D=i(F);return o(d,D,0,0,F),D}var k={AES:ee,Counter:v,ModeOfOperation:{ecb:_,cbc:f,cfb:m,ofb:b,ctr:w},utils:{hex:a,utf8:s},padding:{pkcs7:{pad:P,strip:B}},_arrayTest:{coerceArray:n,createArray:i,copyArray:o}};typeof s6<"u"?zO.exports=k:typeof define=="function"&&define.amd?define(k):(e.aesjs&&(k._aesjs=e.aesjs),e.aesjs=k)})(s6)});var XO=K((p6,QO)=>{"use strict";p();y();(function(e){function r(x){let A=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),E=1779033703,C=3144134277,M=1013904242,N=2773480762,R=1359893119,V=2600822924,q=528734635,W=1541459225,G=new Uint32Array(64);function z(w){let P=0,B=w.length;for(;B>=64;){let k=E,d=C,S=M,F=N,U=R,D=V,J=q,ue=W,fe,j,se,L,Y;for(j=0;j<16;j++)se=P+j*4,G[j]=(w[se]&255)<<24|(w[se+1]&255)<<16|(w[se+2]&255)<<8|w[se+3]&255;for(j=16;j<64;j++)fe=G[j-2],L=(fe>>>17|fe<<15)^(fe>>>19|fe<<13)^fe>>>10,fe=G[j-15],Y=(fe>>>7|fe<<25)^(fe>>>18|fe<<14)^fe>>>3,G[j]=(L+G[j-7]|0)+(Y+G[j-16]|0)|0;for(j=0;j<64;j++)L=(((U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7))+(U&D^~U&J)|0)+(ue+(A[j]+G[j]|0)|0)|0,Y=((k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10))+(k&d^k&S^d&S)|0,ue=J,J=D,D=U,U=F+L|0,F=S,S=d,d=k,k=L+Y|0;E=E+k|0,C=C+d|0,M=M+S|0,N=N+F|0,R=R+U|0,V=V+D|0,q=q+J|0,W=W+ue|0,P+=64,B-=64}}z(x);let ee,_=x.length%64,f=x.length/536870912|0,m=x.length<<3,b=_<56?56:120,v=x.slice(x.length-_,x.length);for(v.push(128),ee=_+1;ee<b;ee++)v.push(0);return v.push(f>>>24&255),v.push(f>>>16&255),v.push(f>>>8&255),v.push(f>>>0&255),v.push(m>>>24&255),v.push(m>>>16&255),v.push(m>>>8&255),v.push(m>>>0&255),z(v),[E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,M>>>24&255,M>>>16&255,M>>>8&255,M>>>0&255,N>>>24&255,N>>>16&255,N>>>8&255,N>>>0&255,R>>>24&255,R>>>16&255,R>>>8&255,R>>>0&255,V>>>24&255,V>>>16&255,V>>>8&255,V>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,W>>>24&255,W>>>16&255,W>>>8&255,W>>>0&255]}function n(x,A,E){x=x.length<=64?x:r(x);let C=64+A.length+4,M=new Array(C),N=new Array(64),R,V=[];for(R=0;R<64;R++)M[R]=54;for(R=0;R<x.length;R++)M[R]^=x[R];for(R=0;R<A.length;R++)M[64+R]=A[R];for(R=C-4;R<C;R++)M[R]=0;for(R=0;R<64;R++)N[R]=92;for(R=0;R<x.length;R++)N[R]^=x[R];function q(){for(let W=C-1;W>=C-4;W--){if(M[W]++,M[W]<=255)return;M[W]=0}}for(;E>=32;)q(),V=V.concat(r(N.concat(r(M)))),E-=32;return E>0&&(q(),V=V.concat(r(N.concat(r(M))).slice(0,E))),V}function i(x,A,E,C,M){let N;for(c(x,(2*E-1)*16,M,0,16),N=0;N<2*E;N++)a(x,N*16,M,16),s(M,C),c(M,0,x,A+N*16,16);for(N=0;N<E;N++)c(x,A+N*2*16,x,N*16,16);for(N=0;N<E;N++)c(x,A+(N*2+1)*16,x,(N+E)*16,16)}function o(x,A){return x<<A|x>>>32-A}function s(x,A){c(x,0,A,0,16);for(let E=8;E>0;E-=2)A[4]^=o(A[0]+A[12],7),A[8]^=o(A[4]+A[0],9),A[12]^=o(A[8]+A[4],13),A[0]^=o(A[12]+A[8],18),A[9]^=o(A[5]+A[1],7),A[13]^=o(A[9]+A[5],9),A[1]^=o(A[13]+A[9],13),A[5]^=o(A[1]+A[13],18),A[14]^=o(A[10]+A[6],7),A[2]^=o(A[14]+A[10],9),A[6]^=o(A[2]+A[14],13),A[10]^=o(A[6]+A[2],18),A[3]^=o(A[15]+A[11],7),A[7]^=o(A[3]+A[15],9),A[11]^=o(A[7]+A[3],13),A[15]^=o(A[11]+A[7],18),A[1]^=o(A[0]+A[3],7),A[2]^=o(A[1]+A[0],9),A[3]^=o(A[2]+A[1],13),A[0]^=o(A[3]+A[2],18),A[6]^=o(A[5]+A[4],7),A[7]^=o(A[6]+A[5],9),A[4]^=o(A[7]+A[6],13),A[5]^=o(A[4]+A[7],18),A[11]^=o(A[10]+A[9],7),A[8]^=o(A[11]+A[10],9),A[9]^=o(A[8]+A[11],13),A[10]^=o(A[9]+A[8],18),A[12]^=o(A[15]+A[14],7),A[13]^=o(A[12]+A[15],9),A[14]^=o(A[13]+A[12],13),A[15]^=o(A[14]+A[13],18);for(let E=0;E<16;++E)x[E]+=A[E]}function a(x,A,E,C){for(let M=0;M<C;M++)E[M]^=x[A+M]}function c(x,A,E,C,M){for(;M--;)E[C++]=x[A++]}function u(x){if(!x||typeof x.length!="number")return!1;for(let A=0;A<x.length;A++){let E=x[A];if(typeof E!="number"||E%1||E<0||E>=256)return!1}return!0}function h(x,A){if(typeof x!="number"||x%1)throw new Error("invalid "+A);return x}function l(x,A,E,C,M,N,R){if(E=h(E,"N"),C=h(C,"r"),M=h(M,"p"),N=h(N,"dkLen"),E===0||E&E-1)throw new Error("N must be power of 2");if(E>2147483647/128/C)throw new Error("N too large");if(C>2147483647/128/M)throw new Error("r too large");if(!u(x))throw new Error("password must be an array or buffer");if(x=Array.prototype.slice.call(x),!u(A))throw new Error("salt must be an array or buffer");A=Array.prototype.slice.call(A);let V=n(x,A,M*128*C),q=new Uint32Array(M*32*C);for(let U=0;U<q.length;U++){let D=U*4;q[U]=(V[D+3]&255)<<24|(V[D+2]&255)<<16|(V[D+1]&255)<<8|(V[D+0]&255)<<0}let W=new Uint32Array(64*C),G=new Uint32Array(32*C*E),z=32*C,ee=new Uint32Array(16),_=new Uint32Array(16),f=M*E*2,m=0,b=null,v=!1,w=0,P=0,B,k,d=R?parseInt(1e3/C):4294967295,S=typeof setImmediate<"u"?setImmediate:setTimeout,F=function(){if(v)return R(new Error("cancelled"),m/f);let U;switch(w){case 0:k=P*32*C,c(q,k,W,0,z),w=1,B=0;case 1:U=E-B,U>d&&(U=d);for(let J=0;J<U;J++)c(W,0,G,(B+J)*z,z),i(W,z,C,ee,_);if(B+=U,m+=U,R){let J=parseInt(1e3*m/f);if(J!==b){if(v=R(null,m/f),v)break;b=J}}if(B<E)break;B=0,w=2;case 2:U=E-B,U>d&&(U=d);for(let J=0;J<U;J++){let ue=(2*C-1)*16,fe=W[ue]&E-1;a(G,fe*z,W,z),i(W,z,C,ee,_)}if(B+=U,m+=U,R){let J=parseInt(1e3*m/f);if(J!==b){if(v=R(null,m/f),v)break;b=J}}if(B<E)break;if(c(W,0,q,k,z),P++,P<M){w=0;break}V=[];for(let J=0;J<q.length;J++)V.push(q[J]>>0&255),V.push(q[J]>>8&255),V.push(q[J]>>16&255),V.push(q[J]>>24&255);let D=n(x,V,N);return R&&R(null,1,D),D}R&&S(F)};if(!R)for(;;){let U=F();if(U!=null)return U}F()}let g={scrypt:function(x,A,E,C,M,N,R){return new Promise(function(V,q){let W=0;R&&R(0),l(x,A,E,C,M,N,function(G,z,ee){if(G)q(G);else if(ee)R&&W!==1&&R(1),V(new Uint8Array(ee));else if(R&&z!==W)return W=z,R(z)})})},syncScrypt:function(x,A,E,C,M,N){return new Uint8Array(l(x,A,E,C,M,N))}};typeof p6<"u"?QO.exports=g:typeof define=="function"&&define.amd?define(g):e&&(e.scrypt&&(e._scrypt=e.scrypt),e.scrypt=g)})(p6)});var dN=K((MCe,lN)=>{"use strict";p();y();function Wae(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function h(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var A=0,E=0,C=0,M=x.length;C!==M&&x[C]===0;)C++,A++;for(var N=(M-C)*u+1>>>0,R=new Uint8Array(N);C!==M;){for(var V=x[C],q=0,W=N-1;(V!==0||q<E)&&W!==-1;W--,q++)V+=256*R[W]>>>0,R[W]=V%s>>>0,V=V/s>>>0;if(V!==0)throw new Error("Non-zero carry");E=q,C++}for(var G=N-E;G!==N&&R[G]===0;)G++;for(var z=a.repeat(A);G<N;++G)z+=e.charAt(R[G]);return z}function l(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var A=0,E=0,C=0;x[A]===a;)E++,A++;for(var M=(x.length-A)*c+1>>>0,N=new Uint8Array(M);x[A];){var R=t[x.charCodeAt(A)];if(R===255)return;for(var V=0,q=M-1;(R!==0||V<C)&&q!==-1;q--,V++)R+=s*N[q]>>>0,N[q]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");C=V,A++}for(var W=M-C;W!==M&&N[W]===0;)W++;for(var G=new Uint8Array(E+(M-W)),z=E;W!==M;)G[z++]=N[W++];return G}function g(x){var A=l(x);if(A)return A;throw new Error("Non-base"+s+" character")}return{encode:h,decodeUnsafe:l,decode:g}}lN.exports=Wae});var pN=K((NCe,hN)=>{p();y();var zae=dN(),jae="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";hN.exports=zae(jae)});var mN=K((LCe,yN)=>{"use strict";p();y();var I6=pN();yN.exports=function(e){function t(o){var s=Uint8Array.from(o),a=e(s),c=s.length+4,u=new Uint8Array(c);return u.set(s,0),u.set(a.subarray(0,4),s.length),I6.encode(u,c)}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=e(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=I6.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=I6.decode(o),a=r(s,e);if(!a)throw new Error("Invalid checksum");return a}return{encode:t,decode:i,decodeUnsafe:n}}});var mp=K((VCe,bN)=>{"use strict";p();y();var{sha256:gN}=Px(),Gae=mN();function $ae(e){return gN(gN(e))}bN.exports=Gae($ae)});var wN=K((WCe,xN)=>{"use strict";p();y();var k6=Us(),Yae=PB().Buffer;xN.exports=function(e){function t(o){var s=e(o);return k6.encode(Yae.concat([o,s],o.length+4))}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=e(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=k6.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=k6.decode(o),a=r(s,e);if(!a)throw new Error("Invalid checksum");return a}return{encode:t,decode:i,decodeUnsafe:n}}});var SN=K((GCe,AN)=>{"use strict";p();y();var vN=CB(),Jae=wN();function Zae(e){var t=vN("sha256").update(e).digest();return vN("sha256").update(t).digest()}AN.exports=Jae(Zae)});var dv=K((JCe,IN)=>{p();y();var T6=SN();function EN(e,t){if(t!==void 0&&e[0]!==t)throw new Error("Invalid network version");if(e.length===33)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(e.length!==34)throw new Error("Invalid WIF length");if(e[33]!==1)throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function P6(e,t,r){var n=new Buffer(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}function Qae(e,t){return EN(T6.decode(e),t)}function Xae(e,t,r){return typeof e=="number"?T6.encode(P6(e,t,r)):T6.encode(P6(e.version,e.privateKey,e.compressed))}IN.exports={decode:Qae,decodeRaw:EN,encode:Xae,encodeRaw:P6}});var C6=K(Oi=>{"use strict";p();y();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.output=Oi.exists=Oi.hash=Oi.bytes=Oi.bool=Oi.number=void 0;function yv(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}Oi.number=yv;function MN(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}Oi.bool=MN;function B6(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}Oi.bytes=B6;function RN(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");yv(e.outputLen),yv(e.blockLen)}Oi.hash=RN;function ON(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Oi.exists=ON;function NN(e,t){B6(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Oi.output=NN;var ice={number:yv,bool:MN,bytes:B6,hash:RN,exists:ON,output:NN};Oi.default=ice});var UN=K(mv=>{"use strict";p();y();Object.defineProperty(mv,"__esModule",{value:!0});mv.crypto=void 0;mv.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var bv=K(ht=>{"use strict";p();y();Object.defineProperty(ht,"__esModule",{value:!0});ht.randomBytes=ht.wrapXOFConstructorWithOpts=ht.wrapConstructorWithOpts=ht.wrapConstructor=ht.checkOpts=ht.Hash=ht.concatBytes=ht.toBytes=ht.utf8ToBytes=ht.asyncLoop=ht.nextTick=ht.hexToBytes=ht.bytesToHex=ht.isLE=ht.rotr=ht.createView=ht.u32=ht.u8=void 0;var M6=UN(),O6=e=>e instanceof Uint8Array,oce=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);ht.u8=oce;var sce=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));ht.u32=sce;var ace=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);ht.createView=ace;var cce=(e,t)=>e<<32-t|e>>>t;ht.rotr=cce;ht.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ht.isLE)throw new Error("Non little-endian hardware is not supported");var uce=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function fce(e){if(!O6(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=uce[e[r]];return t}ht.bytesToHex=fce;function lce(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}ht.hexToBytes=lce;var dce=async()=>{};ht.nextTick=dce;async function hce(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,ht.nextTick)(),n+=o)}}ht.asyncLoop=hce;function DN(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}ht.utf8ToBytes=DN;function gv(e){if(typeof e=="string"&&(e=DN(e)),!O6(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}ht.toBytes=gv;function pce(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!O6(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}ht.concatBytes=pce;var R6=class{clone(){return this._cloneInto()}};ht.Hash=R6;var yce=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function mce(e,t){if(t!==void 0&&(typeof t!="object"||!yce(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}ht.checkOpts=mce;function gce(e){let t=n=>e().update(gv(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}ht.wrapConstructor=gce;function bce(e){let t=(n,i)=>e(i).update(gv(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}ht.wrapConstructorWithOpts=bce;function xce(e){let t=(n,i)=>e(i).update(gv(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}ht.wrapXOFConstructorWithOpts=xce;function wce(e=32){if(M6.crypto&&typeof M6.crypto.getRandomValues=="function")return M6.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}ht.randomBytes=wce});var KN=K(ed=>{"use strict";p();y();Object.defineProperty(ed,"__esModule",{value:!0});ed.hmac=ed.HMAC=void 0;var xv=C6(),LN=bv(),Qm=class extends LN.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,xv.default.hash(t);let n=(0,LN.toBytes)(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return xv.default.exists(this),this.iHash.update(t),this}digestInto(t){xv.default.exists(this),xv.default.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};ed.HMAC=Qm;var vce=(e,t,r)=>new Qm(e,t).update(r).digest();ed.hmac=vce;ed.hmac.create=(e,t)=>new Qm(e,t)});var FN=K(wv=>{"use strict";p();y();Object.defineProperty(wv,"__esModule",{value:!0});wv.SHA2=void 0;var N6=C6(),Xm=bv();function Ace(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var U6=class extends Xm.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Xm.createView)(this.buffer)}update(t){N6.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,Xm.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,Xm.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){N6.default.exists(this),N6.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;Ace(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,Xm.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};wv.SHA2=U6});var VN=K(gp=>{"use strict";p();y();Object.defineProperty(gp,"__esModule",{value:!0});gp.sha224=gp.sha256=void 0;var Sce=FN(),ns=bv(),Ece=(e,t,r)=>e&t^~e&r,Ice=(e,t,r)=>e&t^e&r^t&r,kce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bf=new Uint32Array(64),vv=class extends Sce.SHA2{constructor(){super(64,32,8,!1),this.A=gf[0]|0,this.B=gf[1]|0,this.C=gf[2]|0,this.D=gf[3]|0,this.E=gf[4]|0,this.F=gf[5]|0,this.G=gf[6]|0,this.H=gf[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)bf[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=bf[l-15],x=bf[l-2],A=(0,ns.rotr)(g,7)^(0,ns.rotr)(g,18)^g>>>3,E=(0,ns.rotr)(x,17)^(0,ns.rotr)(x,19)^x>>>10;bf[l]=E+bf[l-7]+A+bf[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=(0,ns.rotr)(a,6)^(0,ns.rotr)(a,11)^(0,ns.rotr)(a,25),x=h+g+Ece(a,c,u)+kce[l]+bf[l]|0,E=((0,ns.rotr)(n,2)^(0,ns.rotr)(n,13)^(0,ns.rotr)(n,22))+Ice(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){bf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},D6=class extends vv{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};gp.sha256=(0,ns.wrapConstructor)(()=>new vv);gp.sha224=(0,ns.wrapConstructor)(()=>new D6)});var Sv=K(sn=>{"use strict";p();y();var Tce=u8(),Pce=KN(),qN=VN();function _ce(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var Wt=_ce(Tce);Wt.utils.hmacSha256Sync=(e,...t)=>Pce.hmac(qN.sha256,e,Wt.utils.concatBytes(...t));Wt.utils.sha256Sync=(...e)=>qN.sha256(Wt.utils.concatBytes(...e));var F6=Wt.utils._normalizePrivateKey,Bce=32,Cce=32,L6=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),Mce=32;function K6(e,t){for(let r=0;r<32;++r)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function eg(e){return!(!(e instanceof Uint8Array)||e.length!==Cce||K6(e,L6)>=0)}function HN(e){return e instanceof Uint8Array&&e.length===64&&K6(e.subarray(0,32),L6)<0&&K6(e.subarray(32,64),L6)<0}function Av(e){return e instanceof Uint8Array&&e.length===Bce}function WN(e){return e===void 0||e instanceof Uint8Array&&e.length===Mce}function zN(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Rce(e){return zN(Wt.utils.bytesToHex(e))}function V6(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>=0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private scalar");t=zN(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private scalar");t=Rce(e)}else throw new TypeError("Expected valid private scalar");if(t<0)throw new Error("Expected private scalar >= 0");return t}var Oce=(e,t)=>{let r=F6(e),n=V6(t),i=Wt.utils._bigintTo32Bytes(Wt.utils.mod(r+n,Wt.CURVE.n));return Wt.utils.isValidPrivateKey(i)?i:null},Nce=(e,t)=>{let r=F6(e),n=V6(t),i=Wt.utils._bigintTo32Bytes(Wt.utils.mod(r-n,Wt.CURVE.n));return Wt.utils.isValidPrivateKey(i)?i:null},Uce=e=>{let t=F6(e),r=Wt.utils._bigintTo32Bytes(Wt.CURVE.n-t);return Wt.utils.isValidPrivateKey(r)?r:null},jN=(e,t,r)=>{let n=Wt.Point.fromHex(e),i=V6(t),o=Wt.Point.BASE.multiplyAndAddUnsafe(n,i,1n);if(!o)throw new Error("Tweaked point at infinity");return o.toRawBytes(r)},Dce=(e,t,r)=>{let n=Wt.Point.fromHex(e),i=typeof t=="string"?t:Wt.utils.bytesToHex(t),o=BigInt(`0x${i}`);return n.multiply(o).toRawBytes(r)};function tg(e,t){return e===void 0?t!==void 0?GN(t):!0:!!e}function td(e){try{return e()}catch{return null}}function q6(e,t){if(e.length===32!==t)return!1;try{return!!Wt.Point.fromHex(e)}catch{return!1}}function xf(e){return q6(e,!1)}function GN(e){return q6(e,!1)&&e.length===33}function wf(e){return Wt.utils.isValidPrivateKey(e)}function H6(e){return q6(e,!0)}function Lce(e,t){if(!H6(e))throw new Error("Expected Point");if(!eg(t))throw new Error("Expected Tweak");return td(()=>{let r=jN(e,t,!0);return{parity:r[0]%2===1?1:0,xOnlyPubkey:r.slice(1)}})}function $N(e){if(!xf(e))throw new Error("Expected Point");return e.slice(1,33)}function YN(e,t){if(!wf(e))throw new Error("Expected Private");return td(()=>Wt.getPublicKey(e,tg(t)))}function Kce(e){if(!wf(e))throw new Error("Expected Private");return $N(YN(e))}function Fce(e,t){if(!xf(e))throw new Error("Expected Point");return Wt.Point.fromHex(e).toRawBytes(tg(t,e))}function Vce(e,t,r){if(!xf(e))throw new Error("Expected Point");if(!eg(t))throw new Error("Expected Tweak");return td(()=>Dce(e,t,tg(r,e)))}function qce(e,t,r){if(!xf(e)||!xf(t))throw new Error("Expected Point");return td(()=>{let n=Wt.Point.fromHex(e),i=Wt.Point.fromHex(t);return n.equals(i.negate())?null:n.add(i).toRawBytes(tg(r,e))})}function Hce(e,t,r){if(!xf(e))throw new Error("Expected Point");if(!eg(t))throw new Error("Expected Tweak");return td(()=>jN(e,t,tg(r,e)))}function Wce(e,t){if(wf(e)===!1)throw new Error("Expected Private");if(eg(t)===!1)throw new Error("Expected Tweak");return td(()=>Oce(e,t))}function zce(e,t){if(wf(e)===!1)throw new Error("Expected Private");if(eg(t)===!1)throw new Error("Expected Tweak");return td(()=>Nce(e,t))}function jce(e){if(wf(e)===!1)throw new Error("Expected Private");return Uce(e)}function Gce(e,t,r){if(!wf(t))throw new Error("Expected Private");if(!Av(e))throw new Error("Expected Scalar");if(!WN(r))throw new Error("Expected Extra Data (32 bytes)");return Wt.signSync(e,t,{der:!1,extraEntropy:r})}function $ce(e,t,r=Buffer.alloc(32,0)){if(!wf(t))throw new Error("Expected Private");if(!Av(e))throw new Error("Expected Scalar");if(!WN(r))throw new Error("Expected Extra Data (32 bytes)");return Wt.schnorr.signSync(e,t,r)}function Yce(e,t,r,n){if(!xf(t))throw new Error("Expected Point");if(!HN(r))throw new Error("Expected Signature");if(!Av(e))throw new Error("Expected Scalar");return Wt.verify(r,e,t,{strict:n})}function Jce(e,t,r){if(!H6(t))throw new Error("Expected Point");if(!HN(r))throw new Error("Expected Signature");if(!Av(e))throw new Error("Expected Scalar");return Wt.schnorr.verifySync(r,e,t)}sn.isPoint=xf;sn.isPointCompressed=GN;sn.isPrivate=wf;sn.isXOnlyPoint=H6;sn.pointAdd=qce;sn.pointAddScalar=Hce;sn.pointCompress=Fce;sn.pointFromScalar=YN;sn.pointMultiply=Vce;sn.privateAdd=Wce;sn.privateNegate=jce;sn.privateSub=zce;sn.sign=Gce;sn.signSchnorr=$ce;sn.verify=Yce;sn.verifySchnorr=Jce;sn.xOnlyPointAddTweak=Lce;sn.xOnlyPointFromPoint=$N;sn.xOnlyPointFromScalar=Kce});var is=K(Af=>{"use strict";p();y();Object.defineProperty(Af,"__esModule",{value:!0});Af.testnet=Af.regtest=Af.bitcoin=void 0;Af.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Af.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};Af.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var z6=K(Sf=>{"use strict";p();y();Object.defineProperty(Sf,"__esModule",{value:!0});Sf.encode=Sf.decode=Sf.check=void 0;function oue(e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return!1;let t=e[3];if(t===0||5+t>=e.length||e[4+t]!==2)return!1;let r=e[5+t];return!(r===0||6+t+r!==e.length||e[4]&128||t>1&&e[4]===0&&!(e[5]&128)||e[t+6]&128||r>1&&e[t+6]===0&&!(e[t+7]&128))}Sf.check=oue;function sue(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(e[0]!==48)throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(e[2]!==2)throw new Error("Expected DER integer");let t=e[3];if(t===0)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(e[4+t]!==2)throw new Error("Expected DER integer (2)");let r=e[5+t];if(r===0)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(e[4]&128)throw new Error("R value is negative");if(t>1&&e[4]===0&&!(e[5]&128))throw new Error("R value excessively padded");if(e[t+6]&128)throw new Error("S value is negative");if(r>1&&e[t+6]===0&&!(e[t+7]&128))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}Sf.decode=sue;function aue(e,t){let r=e.length,n=t.length;if(r===0)throw new Error("R length is zero");if(n===0)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(e[0]&128)throw new Error("R value is negative");if(t[0]&128)throw new Error("S value is negative");if(r>1&&e[0]===0&&!(e[1]&128))throw new Error("R value excessively padded");if(n>1&&t[0]===0&&!(t[1]&128))throw new Error("S value excessively padded");let i=Buffer.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i}Sf.encode=aue});var Iv=K(bp=>{"use strict";p();y();Object.defineProperty(bp,"__esModule",{value:!0});bp.REVERSE_OPS=bp.OPS=void 0;var j6={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};bp.OPS=j6;var rU={};bp.REVERSE_OPS=rU;for(let e of Object.keys(j6)){let t=j6[e];rU[t]=e}});var iU=K(If=>{"use strict";p();y();Object.defineProperty(If,"__esModule",{value:!0});If.decode=If.encode=If.encodingLength=void 0;var Ef=Iv();function nU(e){return e<Ef.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}If.encodingLength=nU;function cue(e,t,r){let n=nU(t);return n===1?e.writeUInt8(t,r):n===2?(e.writeUInt8(Ef.OPS.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):n===3?(e.writeUInt8(Ef.OPS.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(Ef.OPS.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n}If.encode=cue;function uue(e,t){let r=e.readUInt8(t),n,i;if(r<Ef.OPS.OP_PUSHDATA1)n=r,i=1;else if(r===Ef.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;n=e.readUInt8(t+1),i=2}else if(r===Ef.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;n=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(r!==Ef.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=e.readUInt32LE(t+1),i=5}return{opcode:r,number:n,size:i}}If.decode=uue});var oU=K(xp=>{"use strict";p();y();Object.defineProperty(xp,"__esModule",{value:!0});xp.encode=xp.decode=void 0;function fue(e,t,r){t=t||4,r=r===void 0?!0:r;let n=e.length;if(n===0)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&!(e[n-1]&127)&&(n<=1||!(e[n-2]&128)))throw new Error("Non-minimally encoded script number");if(n===5){let o=e.readUInt32LE(0),s=e.readUInt8(4);return s&128?-((s&-129)*4294967296+o):s*4294967296+o}let i=0;for(let o=0;o<n;++o)i|=e[o]<<8*o;return e[n-1]&128?-(i&~(128<<8*(n-1))):i}xp.decode=fue;function lue(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function due(e){let t=Math.abs(e),r=lue(t),n=Buffer.allocUnsafe(r),i=e<0;for(let o=0;o<r;++o)n.writeUInt8(t&255,o),t>>=8;return n[r-1]&128?n.writeUInt8(i?128:0,r-1):i&&(n[r-1]|=128),n}xp.encode=due});var kv=K((d9e,sU)=>{p();y();var ng={Array:function(e){return e!=null&&e.constructor===Array},Boolean:function(e){return typeof e=="boolean"},Function:function(e){return typeof e=="function"},Nil:function(e){return e==null},Number:function(e){return typeof e=="number"},Object:function(e){return typeof e=="object"},String:function(e){return typeof e=="string"},"":function(){return!0}};ng.Null=ng.Nil;for(G6 in ng)ng[G6].toJSON=function(e){return e}.bind(null,G6);var G6;sU.exports=ng});var J6=K((y9e,uU)=>{p();y();var rd=kv();function aU(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function $6(e){return rd.Nil(e)?"":aU(e.constructor)}function hue(e){return rd.Function(e)?"":rd.String(e)?JSON.stringify(e):e&&rd.Object(e)?"":e}function Y6(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function Tv(e){return rd.Function(e)?e.toJSON?e.toJSON():aU(e):rd.Array(e)?"Array":e&&rd.Object(e)?"Object":e!==void 0?e:""}function cU(e,t,r){var n=hue(t);return"Expected "+Tv(e)+", got"+(r!==""?" "+r:"")+(n!==""?" "+n:"")}function Hc(e,t,r){r=r||$6(t),this.message=cU(e,t,r),Y6(this,Hc),this.__type=e,this.__value=t,this.__valueTypeName=r}Hc.prototype=Object.create(Error.prototype);Hc.prototype.constructor=Hc;function pue(e,t,r,n,i){var o='" of type ';return t==="key"&&(o='" with key type '),cU('property "'+Tv(r)+o+Tv(e),n,i)}function wp(e,t,r,n,i){e?(i=i||$6(n),this.message=pue(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',Y6(this,Hc),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}wp.prototype=Object.create(Error.prototype);wp.prototype.constructor=Hc;function yue(e,t){return new Hc(e,{},t)}function mue(e,t,r){return e instanceof wp?(t=t+"."+e.__property,e=new wp(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof Hc&&(e=new wp(e.__type,t,r,e.__value,e.__valueTypeName)),Y6(e),e}uU.exports={TfTypeError:Hc,TfPropertyTypeError:wp,tfCustomError:yue,tfSubError:mue,tfJSON:Tv,getValueTypeName:$6}});var hU=K((b9e,dU)=>{p();y();var ek=kv(),gue=J6();function fU(e){return Buffer.isBuffer(e)}function lU(e){return typeof e=="string"&&/^([0-9a-f]{2})+$/i.test(e)}function Pv(e,t){var r=e.toJSON();function n(i){if(!e(i))return!1;if(i.length===t)return!0;throw gue.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+i.length+")")}return n.toJSON=function(){return r},n}var bue=Pv.bind(null,ek.Array),xue=Pv.bind(null,fU),wue=Pv.bind(null,lU),vue=Pv.bind(null,ek.String);function Aue(e,t,r){r=r||ek.Number;function n(i,o){return r(i,o)&&i>e&&i<t}return n.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},n}var Q6=Math.pow(2,53)-1;function Sue(e){return typeof e=="number"&&isFinite(e)}function Eue(e){return e<<24>>24===e}function Iue(e){return e<<16>>16===e}function kue(e){return(e|0)===e}function Tue(e){return typeof e=="number"&&e>=-Q6&&e<=Q6&&Math.floor(e)===e}function Pue(e){return(e&255)===e}function _ue(e){return(e&65535)===e}function Bue(e){return e>>>0===e}function Cue(e){return typeof e=="number"&&e>=0&&e<=Q6&&Math.floor(e)===e}var X6={ArrayN:bue,Buffer:fU,BufferN:xue,Finite:Sue,Hex:lU,HexN:wue,Int8:Eue,Int16:Iue,Int32:kue,Int53:Tue,Range:Aue,StringN:vue,UInt8:Pue,UInt16:_ue,UInt32:Bue,UInt53:Cue};for(Z6 in X6)X6[Z6].toJSON=function(e){return e}.bind(null,Z6);var Z6;dU.exports=X6});var tk=K((v9e,gU)=>{p();y();var og=J6(),Xn=kv(),Wc=og.tfJSON,yU=og.TfTypeError,mU=og.TfPropertyTypeError,ig=og.tfSubError,Mue=og.getValueTypeName,zc={arrayOf:function(t,r){t=Fa(t),r=r||{};function n(i,o){return!Xn.Array(i)||Xn.Nil(i)||r.minLength!==void 0&&i.length<r.minLength||r.maxLength!==void 0&&i.length>r.maxLength||r.length!==void 0&&i.length!==r.length?!1:i.every(function(s,a){try{return Ni(t,s,o)}catch(c){throw ig(c,a)}})}return n.toJSON=function(){var i="["+Wc(t)+"]";return r.length!==void 0?i+="{"+r.length+"}":(r.minLength!==void 0||r.maxLength!==void 0)&&(i+="{"+(r.minLength===void 0?0:r.minLength)+","+(r.maxLength===void 0?1/0:r.maxLength)+"}"),i},n},maybe:function e(t){t=Fa(t);function r(n,i){return Xn.Nil(n)||t(n,i,e)}return r.toJSON=function(){return"?"+Wc(t)},r},map:function(t,r){t=Fa(t),r&&(r=Fa(r));function n(i,o){if(!Xn.Object(i)||Xn.Nil(i))return!1;for(var s in i){try{r&&Ni(r,s,o)}catch(c){throw ig(c,s,"key")}try{var a=i[s];Ni(t,a,o)}catch(c){throw ig(c,s)}}return!0}return r?n.toJSON=function(){return"{"+Wc(r)+": "+Wc(t)+"}"}:n.toJSON=function(){return"{"+Wc(t)+"}"},n},object:function(t){var r={};for(var n in t)r[n]=Fa(t[n]);function i(o,s){if(!Xn.Object(o)||Xn.Nil(o))return!1;var a;try{for(a in r){var c=r[a],u=o[a];Ni(c,u,s)}}catch(h){throw ig(h,a)}if(s){for(a in o)if(!r[a])throw new mU(void 0,a)}return!0}return i.toJSON=function(){return Wc(r)},i},anyOf:function(){var t=[].slice.call(arguments).map(Fa);function r(n,i){return t.some(function(o){try{return Ni(o,n,i)}catch{return!1}})}return r.toJSON=function(){return t.map(Wc).join("|")},r},allOf:function(){var t=[].slice.call(arguments).map(Fa);function r(n,i){return t.every(function(o){try{return Ni(o,n,i)}catch{return!1}})}return r.toJSON=function(){return t.map(Wc).join(" & ")},r},quacksLike:function(t){function r(n){return t===Mue(n)}return r.toJSON=function(){return t},r},tuple:function(){var t=[].slice.call(arguments).map(Fa);function r(n,i){return Xn.Nil(n)||Xn.Nil(n.length)||i&&n.length!==t.length?!1:t.every(function(o,s){try{return Ni(o,n[s],i)}catch(a){throw ig(a,s)}})}return r.toJSON=function(){return"("+t.map(Wc).join(", ")+")"},r},value:function(t){function r(n){return n===t}return r.toJSON=function(){return t},r}};zc.oneOf=zc.anyOf;function Fa(e){if(Xn.String(e))return e[0]==="?"?zc.maybe(e.slice(1)):Xn[e]||zc.quacksLike(e);if(e&&Xn.Object(e)){if(Xn.Array(e)){if(e.length!==1)throw new TypeError("Expected compile() parameter of type Array of length 1");return zc.arrayOf(e[0])}return zc.object(e)}else if(Xn.Function(e))return e;return zc.value(e)}function Ni(e,t,r,n){if(Xn.Function(e)){if(e(t,r))return!0;throw new yU(n||e,t)}return Ni(Fa(e),t,r)}for(jc in Xn)Ni[jc]=Xn[jc];var jc;for(jc in zc)Ni[jc]=zc[jc];var pU=hU();for(jc in pU)Ni[jc]=pU[jc];Ni.compile=Fa;Ni.TfTypeError=yU;Ni.TfPropertyTypeError=mU;gU.exports=Ni});var ei=K(de=>{"use strict";p();y();Object.defineProperty(de,"__esModule",{value:!0});de.oneOf=de.Null=de.BufferN=de.Function=de.UInt32=de.UInt8=de.tuple=de.maybe=de.Hex=de.Buffer=de.String=de.Boolean=de.Array=de.Number=de.Hash256bit=de.Hash160bit=de.Buffer256bit=de.isTaptree=de.isTapleaf=de.TAPLEAF_VERSION_MASK=de.Network=de.ECPoint=de.Satoshi=de.Signer=de.BIP32Path=de.UInt31=de.isPoint=de.typeforce=void 0;var _v=en();de.typeforce=tk();var bU=_v.Buffer.alloc(32,0),xU=_v.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function Rue(e){if(!_v.Buffer.isBuffer(e)||e.length<33)return!1;let t=e[0],r=e.slice(1,33);if(r.compare(bU)===0||r.compare(xU)>=0)return!1;if((t===2||t===3)&&e.length===33)return!0;let n=e.slice(33);return n.compare(bU)===0||n.compare(xU)>=0?!1:t===4&&e.length===65}de.isPoint=Rue;var Oue=Math.pow(2,31)-1;function Nue(e){return de.typeforce.UInt32(e)&&e<=Oue}de.UInt31=Nue;function wU(e){return de.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}de.BIP32Path=wU;wU.toJSON=()=>"BIP32 derivation path";function Uue(e){return(de.typeforce.Buffer(e.publicKey)||typeof e.getPublicKey=="function")&&typeof e.sign=="function"}de.Signer=Uue;var Due=21*1e14;function Lue(e){return de.typeforce.UInt53(e)&&e<=Due}de.Satoshi=Lue;de.ECPoint=de.typeforce.quacksLike("Point");de.Network=de.typeforce.compile({messagePrefix:de.typeforce.oneOf(de.typeforce.Buffer,de.typeforce.String),bip32:{public:de.typeforce.UInt32,private:de.typeforce.UInt32},pubKeyHash:de.typeforce.UInt8,scriptHash:de.typeforce.UInt8,wif:de.typeforce.UInt8});de.TAPLEAF_VERSION_MASK=254;function vU(e){return!e||!("output"in e)||!_v.Buffer.isBuffer(e.output)?!1:e.version!==void 0?(e.version&de.TAPLEAF_VERSION_MASK)===e.version:!0}de.isTapleaf=vU;function AU(e){return(0,de.Array)(e)?e.length!==2?!1:e.every(t=>AU(t)):vU(e)}de.isTaptree=AU;de.Buffer256bit=de.typeforce.BufferN(32);de.Hash160bit=de.typeforce.BufferN(20);de.Hash256bit=de.typeforce.BufferN(32);de.Number=de.typeforce.Number;de.Array=de.typeforce.Array;de.Boolean=de.typeforce.Boolean;de.String=de.typeforce.String;de.Buffer=de.typeforce.Buffer;de.Hex=de.typeforce.Hex;de.maybe=de.typeforce.maybe;de.tuple=de.typeforce.tuple;de.UInt8=de.typeforce.UInt8;de.UInt32=de.typeforce.UInt32;de.Function=de.typeforce.Function;de.BufferN=de.typeforce.BufferN;de.Null=de.typeforce.Null;de.oneOf=de.typeforce.oneOf});var TU=K(Ap=>{"use strict";p();y();Object.defineProperty(Ap,"__esModule",{value:!0});Ap.encode=Ap.decode=void 0;var{Buffer:vp}=en(),kU=z6(),rk=ei(),{typeforce:Kue}=rk,SU=vp.alloc(1,0);function EU(e){let t=0;for(;e[t]===0;)++t;return t===e.length?SU:(e=e.slice(t),e[0]&128?vp.concat([SU,e],1+e.length):e)}function IU(e){e[0]===0&&(e=e.slice(1));let t=vp.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}function Fue(e){let t=e.readUInt8(e.length-1),r=t&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=kU.decode(e.slice(0,-1)),i=IU(n.r),o=IU(n.s);return{signature:vp.concat([i,o],64),hashType:t}}Ap.decode=Fue;function Vue(e,t){Kue({signature:rk.BufferN(64),hashType:rk.UInt8},{signature:e,hashType:t});let r=t&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=vp.allocUnsafe(1);n.writeUInt8(t,0);let i=EU(e.slice(0,32)),o=EU(e.slice(32,64));return vp.concat([kU.encode(i,o),n])}Ap.encode=Vue});var Ui=K(Xt=>{"use strict";p();y();Object.defineProperty(Xt,"__esModule",{value:!0});Xt.signature=Xt.number=Xt.isCanonicalScriptSignature=Xt.isDefinedHashType=Xt.isCanonicalPubKey=Xt.toStack=Xt.fromASM=Xt.toASM=Xt.decompile=Xt.compile=Xt.countNonPushOnlyOPs=Xt.isPushOnly=Xt.OPS=void 0;var que=z6(),ro=Iv();Object.defineProperty(Xt,"OPS",{enumerable:!0,get:function(){return ro.OPS}});var nk=iU(),PU=oU(),Hue=TU(),Va=ei(),{typeforce:sg}=Va,_U=ro.OPS.OP_RESERVED;function Wue(e){return Va.Number(e)&&(e===ro.OPS.OP_0||e>=ro.OPS.OP_1&&e<=ro.OPS.OP_16||e===ro.OPS.OP_1NEGATE)}function BU(e){return Va.Buffer(e)||Wue(e)}function CU(e){return Va.Array(e)&&e.every(BU)}Xt.isPushOnly=CU;function zue(e){return e.length-e.filter(BU).length}Xt.countNonPushOnlyOPs=zue;function Bv(e){if(e.length===0)return ro.OPS.OP_0;if(e.length===1){if(e[0]>=1&&e[0]<=16)return _U+e[0];if(e[0]===129)return ro.OPS.OP_1NEGATE}}function MU(e){return Buffer.isBuffer(e)}function jue(e){return Va.Array(e)}function Cv(e){return Buffer.isBuffer(e)}function RU(e){if(MU(e))return e;sg(Va.Array,e);let t=e.reduce((i,o)=>Cv(o)?o.length===1&&Bv(o)!==void 0?i+1:i+nk.encodingLength(o.length)+o.length:i+1,0),r=Buffer.allocUnsafe(t),n=0;if(e.forEach(i=>{if(Cv(i)){let o=Bv(i);if(o!==void 0){r.writeUInt8(o,n),n+=1;return}n+=nk.encode(r,i.length,n),i.copy(r,n),n+=i.length}else r.writeUInt8(i,n),n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}Xt.compile=RU;function ik(e){if(jue(e))return e;sg(Va.Buffer,e);let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>ro.OPS.OP_0&&n<=ro.OPS.OP_PUSHDATA4){let i=nk.decode(e,r);if(i===null||(r+=i.size,r+i.number>e.length))return null;let o=e.slice(r,r+i.number);r+=i.number;let s=Bv(o);s!==void 0?t.push(s):t.push(o)}else t.push(n),r+=1}return t}Xt.decompile=ik;function Gue(e){return MU(e)&&(e=ik(e)),e.map(t=>{if(Cv(t)){let r=Bv(t);if(r===void 0)return t.toString("hex");t=r}return ro.REVERSE_OPS[t]}).join(" ")}Xt.toASM=Gue;function $ue(e){return sg(Va.String,e),RU(e.split(" ").map(t=>ro.OPS[t]!==void 0?ro.OPS[t]:(sg(Va.Hex,t),Buffer.from(t,"hex"))))}Xt.fromASM=$ue;function Yue(e){return e=ik(e),sg(CU,e),e.map(t=>Cv(t)?t:t===ro.OPS.OP_0?Buffer.allocUnsafe(0):PU.encode(t-_U))}Xt.toStack=Yue;function Jue(e){return Va.isPoint(e)}Xt.isCanonicalPubKey=Jue;function OU(e){let t=e&-129;return t>0&&t<4}Xt.isDefinedHashType=OU;function Zue(e){return!Buffer.isBuffer(e)||!OU(e[e.length-1])?!1:que.check(e.slice(0,-1))}Xt.isCanonicalScriptSignature=Zue;Xt.number=PU;Xt.signature=Hue});var Gc=K(Sp=>{"use strict";p();y();Object.defineProperty(Sp,"__esModule",{value:!0});Sp.value=Sp.prop=void 0;function Que(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let n=r.call(this);return this[t]=n,n},set(n){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:n,writable:!0})}})}Sp.prop=Que;function Xue(e){let t;return()=>(t!==void 0||(t=e()),t)}Sp.value=Xue});var DU=K(Rv=>{"use strict";p();y();Object.defineProperty(Rv,"__esModule",{value:!0});Rv.p2data=void 0;var efe=is(),Mv=Ui(),$c=ei(),NU=Gc(),UU=Mv.OPS;function tfe(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function rfe(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,$c.typeforce)({network:$c.typeforce.maybe($c.typeforce.Object),output:$c.typeforce.maybe($c.typeforce.Buffer),data:$c.typeforce.maybe($c.typeforce.arrayOf($c.typeforce.Buffer))},e);let n={name:"embed",network:e.network||efe.bitcoin};if(NU.prop(n,"output",()=>{if(e.data)return Mv.compile([UU.OP_RETURN].concat(e.data))}),NU.prop(n,"data",()=>{if(e.output)return Mv.decompile(e.output).slice(1)}),t.validate&&e.output){let i=Mv.decompile(e.output);if(i[0]!==UU.OP_RETURN)throw new TypeError("Output is invalid");if(!i.slice(1).every($c.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!tfe(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}Rv.p2data=rfe});var KU=K(Nv=>{"use strict";p();y();Object.defineProperty(Nv,"__esModule",{value:!0});Nv.p2ms=void 0;var nfe=is(),Ep=Ui(),pn=ei(),kf=Gc(),Ip=Ep.OPS,Ov=Ip.OP_RESERVED;function LU(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function ife(e,t){if(!e.input&&!e.output&&!(e.pubkeys&&e.m!==void 0)&&!e.signatures)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{});function r(c){return Ep.isCanonicalScriptSignature(c)||(t.allowIncomplete&&c===Ip.OP_0)!==void 0}(0,pn.typeforce)({network:pn.typeforce.maybe(pn.typeforce.Object),m:pn.typeforce.maybe(pn.typeforce.Number),n:pn.typeforce.maybe(pn.typeforce.Number),output:pn.typeforce.maybe(pn.typeforce.Buffer),pubkeys:pn.typeforce.maybe(pn.typeforce.arrayOf(pn.isPoint)),signatures:pn.typeforce.maybe(pn.typeforce.arrayOf(r)),input:pn.typeforce.maybe(pn.typeforce.Buffer)},e);let i={network:e.network||nfe.bitcoin},o=[],s=!1;function a(c){s||(s=!0,o=Ep.decompile(c),i.m=o[0]-Ov,i.n=o[o.length-2]-Ov,i.pubkeys=o.slice(1,-2))}if(kf.prop(i,"output",()=>{if(e.m&&i.n&&e.pubkeys)return Ep.compile([].concat(Ov+e.m,e.pubkeys,Ov+i.n,Ip.OP_CHECKMULTISIG))}),kf.prop(i,"m",()=>{if(i.output)return a(i.output),i.m}),kf.prop(i,"n",()=>{if(i.pubkeys)return i.pubkeys.length}),kf.prop(i,"pubkeys",()=>{if(e.output)return a(e.output),i.pubkeys}),kf.prop(i,"signatures",()=>{if(e.input)return Ep.decompile(e.input).slice(1)}),kf.prop(i,"input",()=>{if(e.signatures)return Ep.compile([Ip.OP_0].concat(e.signatures))}),kf.prop(i,"witness",()=>{if(i.input)return[]}),kf.prop(i,"name",()=>{if(!(!i.m||!i.n))return`p2ms(${i.m} of ${i.n})`}),t.validate){if(e.output){if(a(e.output),!pn.typeforce.Number(o[0]))throw new TypeError("Output is invalid");if(!pn.typeforce.Number(o[o.length-2]))throw new TypeError("Output is invalid");if(o[o.length-1]!==Ip.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(i.m<=0||i.n>16||i.m>i.n||i.n!==o.length-3)throw new TypeError("Output is invalid");if(!i.pubkeys.every(c=>(0,pn.isPoint)(c)))throw new TypeError("Output is invalid");if(e.m!==void 0&&e.m!==i.m)throw new TypeError("m mismatch");if(e.n!==void 0&&e.n!==i.n)throw new TypeError("n mismatch");if(e.pubkeys&&!LU(e.pubkeys,i.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(e.n!==void 0&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(i.n=e.pubkeys.length,i.n<i.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<i.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>i.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==Ip.OP_0)throw new TypeError("Input is invalid");if(i.signatures.length===0||!i.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!LU(e.signatures,i.signatures))throw new TypeError("Signature mismatch");if(e.m!==void 0&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(i,e)}Nv.p2ms=ife});var VU=K(Uv=>{"use strict";p();y();Object.defineProperty(Uv,"__esModule",{value:!0});Uv.p2pk=void 0;var ofe=is(),Tp=Ui(),Ys=ei(),kp=Gc(),FU=Tp.OPS;function sfe(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Ys.typeforce)({network:Ys.typeforce.maybe(Ys.typeforce.Object),output:Ys.typeforce.maybe(Ys.typeforce.Buffer),pubkey:Ys.typeforce.maybe(Ys.isPoint),signature:Ys.typeforce.maybe(Tp.isCanonicalScriptSignature),input:Ys.typeforce.maybe(Ys.typeforce.Buffer)},e);let r=kp.value(()=>Tp.decompile(e.input)),i={name:"p2pk",network:e.network||ofe.bitcoin};if(kp.prop(i,"output",()=>{if(e.pubkey)return Tp.compile([e.pubkey,FU.OP_CHECKSIG])}),kp.prop(i,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),kp.prop(i,"signature",()=>{if(e.input)return r()[0]}),kp.prop(i,"input",()=>{if(e.signature)return Tp.compile([e.signature])}),kp.prop(i,"witness",()=>{if(i.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==FU.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,Ys.isPoint)(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(r().length!==1)throw new TypeError("Input is invalid");if(!Tp.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}Uv.p2pk=sfe});var zU=K(Pp=>{"use strict";p();y();Object.defineProperty(Pp,"__esModule",{value:!0});Pp.ripemd160=Pp.RIPEMD160=void 0;var afe=Py(),cfe=ku(),ufe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),HU=Uint8Array.from({length:16},(e,t)=>t),ffe=HU.map(e=>(9*e+5)%16),ok=[HU],sk=[ffe];for(let e=0;e<4;e++)for(let t of[ok,sk])t.push(t[e].map(r=>ufe[r]));var WU=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),lfe=ok.map((e,t)=>e.map(r=>WU[t][r])),dfe=sk.map((e,t)=>e.map(r=>WU[t][r])),hfe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),pfe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Dv=(e,t)=>e<<t|e>>>32-t;function qU(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var Lv=new Uint32Array(16),Kv=class extends afe.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let x=0;x<16;x++,r+=4)Lv[x]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,c=a,u=this.h3|0,h=u,l=this.h4|0,g=l;for(let x=0;x<5;x++){let A=4-x,E=hfe[x],C=pfe[x],M=ok[x],N=sk[x],R=lfe[x],V=dfe[x];for(let q=0;q<16;q++){let W=Dv(n+qU(x,o,a,u)+Lv[M[q]]+E,R[q])+l|0;n=l,l=u,u=Dv(a,10)|0,a=o,o=W}for(let q=0;q<16;q++){let W=Dv(i+qU(A,s,c,h)+Lv[N[q]]+C,V[q])+g|0;i=g,g=h,h=Dv(c,10)|0,c=s,s=W}}this.set(this.h1+a+h|0,this.h2+u+g|0,this.h3+l+i|0,this.h4+n+s|0,this.h0+o+c|0)}roundClean(){Lv.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};Pp.RIPEMD160=Kv;Pp.ripemd160=(0,cfe.wrapConstructor)(()=>new Kv)});var jU=K(Fv=>{"use strict";p();y();Object.defineProperty(Fv,"__esModule",{value:!0});Fv.sha1=void 0;var yfe=Py(),mfe=ku(),ak=(e,t)=>e<<t|e>>>32-t>>>0,gfe=(e,t,r)=>e&t^~e&r,bfe=(e,t,r)=>e&t^e&r^t&r,ag=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),Tf=new Uint32Array(80),ck=class extends yfe.SHA2{constructor(){super(64,20,8,!1),this.A=ag[0]|0,this.B=ag[1]|0,this.C=ag[2]|0,this.D=ag[3]|0,this.E=ag[4]|0}get(){let{A:t,B:r,C:n,D:i,E:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0}process(t,r){for(let c=0;c<16;c++,r+=4)Tf[c]=t.getUint32(r,!1);for(let c=16;c<80;c++)Tf[c]=ak(Tf[c-3]^Tf[c-8]^Tf[c-14]^Tf[c-16],1);let{A:n,B:i,C:o,D:s,E:a}=this;for(let c=0;c<80;c++){let u,h;c<20?(u=gfe(i,o,s),h=1518500249):c<40?(u=i^o^s,h=1859775393):c<60?(u=bfe(i,o,s),h=2400959708):(u=i^o^s,h=3395469782);let l=ak(n,5)+u+a+h+Tf[c]|0;a=s,s=o,o=ak(i,30),i=n,n=l}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,this.set(n,i,o,s,a)}roundClean(){Tf.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}};Fv.sha1=(0,mfe.wrapConstructor)(()=>new ck)});var qa=K(yn=>{"use strict";p();y();Object.defineProperty(yn,"__esModule",{value:!0});yn.taggedHash=yn.TAGGED_HASH_PREFIXES=yn.TAGS=yn.hash256=yn.hash160=yn.sha256=yn.sha1=yn.ripemd160=void 0;var{Buffer:Di}=en(),GU=zU(),xfe=jU(),Vv=Px();function wfe(e){return Di.from((0,GU.ripemd160)(Uint8Array.from(e)))}yn.ripemd160=wfe;function vfe(e){return Di.from((0,xfe.sha1)(Uint8Array.from(e)))}yn.sha1=vfe;function $U(e){return Di.from((0,Vv.sha256)(Uint8Array.from(e)))}yn.sha256=$U;function Afe(e){return Di.from((0,GU.ripemd160)((0,Vv.sha256)(Uint8Array.from(e))))}yn.hash160=Afe;function Sfe(e){return Di.from((0,Vv.sha256)((0,Vv.sha256)(Uint8Array.from(e))))}yn.hash256=Sfe;yn.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"];yn.TAGGED_HASH_PREFIXES={"BIP0340/challenge":Di.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":Di.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":Di.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:Di.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:Di.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:Di.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:Di.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":Di.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":Di.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])};function Efe(e,t){return $U(Di.concat([yn.TAGGED_HASH_PREFIXES[e],t]))}yn.taggedHash=Efe});var JU=K(qv=>{"use strict";p();y();Object.defineProperty(qv,"__esModule",{value:!0});qv.p2pkh=void 0;var uk=qa(),Ife=is(),_p=Ui(),Li=ei(),Yc=Gc(),YU=mp(),Pf=_p.OPS;function kfe(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Li.typeforce)({network:Li.typeforce.maybe(Li.typeforce.Object),address:Li.typeforce.maybe(Li.typeforce.String),hash:Li.typeforce.maybe(Li.typeforce.BufferN(20)),output:Li.typeforce.maybe(Li.typeforce.BufferN(25)),pubkey:Li.typeforce.maybe(Li.isPoint),signature:Li.typeforce.maybe(_p.isCanonicalScriptSignature),input:Li.typeforce.maybe(Li.typeforce.Buffer)},e);let r=Yc.value(()=>{let s=Buffer.from(YU.decode(e.address)),a=s.readUInt8(0),c=s.slice(1);return{version:a,hash:c}}),n=Yc.value(()=>_p.decompile(e.input)),i=e.network||Ife.bitcoin,o={name:"p2pkh",network:i};if(Yc.prop(o,"address",()=>{if(!o.hash)return;let s=Buffer.allocUnsafe(21);return s.writeUInt8(i.pubKeyHash,0),o.hash.copy(s,1),YU.encode(s)}),Yc.prop(o,"hash",()=>{if(e.output)return e.output.slice(3,23);if(e.address)return r().hash;if(e.pubkey||o.pubkey)return uk.hash160(e.pubkey||o.pubkey)}),Yc.prop(o,"output",()=>{if(o.hash)return _p.compile([Pf.OP_DUP,Pf.OP_HASH160,o.hash,Pf.OP_EQUALVERIFY,Pf.OP_CHECKSIG])}),Yc.prop(o,"pubkey",()=>{if(e.input)return n()[1]}),Yc.prop(o,"signature",()=>{if(e.input)return n()[0]}),Yc.prop(o,"input",()=>{if(e.pubkey&&e.signature)return _p.compile([e.signature,e.pubkey])}),Yc.prop(o,"witness",()=>{if(o.input)return[]}),t.validate){let s=Buffer.from([]);if(e.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(r().hash.length!==20)throw new TypeError("Invalid address");s=r().hash}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==25||e.output[0]!==Pf.OP_DUP||e.output[1]!==Pf.OP_HASH160||e.output[2]!==20||e.output[23]!==Pf.OP_EQUALVERIFY||e.output[24]!==Pf.OP_CHECKSIG)throw new TypeError("Output is invalid");let a=e.output.slice(3,23);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.pubkey){let a=uk.hash160(e.pubkey);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.input){let a=n();if(a.length!==2)throw new TypeError("Input is invalid");if(!_p.isCanonicalScriptSignature(a[0]))throw new TypeError("Input has invalid signature");if(!(0,Li.isPoint)(a[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(a[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(a[1]))throw new TypeError("Pubkey mismatch");let c=uk.hash160(a[1]);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)}qv.p2pkh=kfe});var XU=K(Hv=>{"use strict";p();y();Object.defineProperty(Hv,"__esModule",{value:!0});Hv.p2sh=void 0;var ZU=qa(),Tfe=is(),Wa=Ui(),Ir=ei(),Ha=Gc(),QU=mp(),cg=Wa.OPS;function Pfe(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function _fe(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Ir.typeforce)({network:Ir.typeforce.maybe(Ir.typeforce.Object),address:Ir.typeforce.maybe(Ir.typeforce.String),hash:Ir.typeforce.maybe(Ir.typeforce.BufferN(20)),output:Ir.typeforce.maybe(Ir.typeforce.BufferN(23)),redeem:Ir.typeforce.maybe({network:Ir.typeforce.maybe(Ir.typeforce.Object),output:Ir.typeforce.maybe(Ir.typeforce.Buffer),input:Ir.typeforce.maybe(Ir.typeforce.Buffer),witness:Ir.typeforce.maybe(Ir.typeforce.arrayOf(Ir.typeforce.Buffer))}),input:Ir.typeforce.maybe(Ir.typeforce.Buffer),witness:Ir.typeforce.maybe(Ir.typeforce.arrayOf(Ir.typeforce.Buffer))},e);let r=e.network;r||(r=e.redeem&&e.redeem.network||Tfe.bitcoin);let n={network:r},i=Ha.value(()=>{let a=Buffer.from(QU.decode(e.address)),c=a.readUInt8(0),u=a.slice(1);return{version:c,hash:u}}),o=Ha.value(()=>Wa.decompile(e.input)),s=Ha.value(()=>{let a=o(),c=a[a.length-1];return{network:r,output:c===cg.OP_FALSE?Buffer.from([]):c,input:Wa.compile(a.slice(0,-1)),witness:e.witness||[]}});if(Ha.prop(n,"address",()=>{if(!n.hash)return;let a=Buffer.allocUnsafe(21);return a.writeUInt8(n.network.scriptHash,0),n.hash.copy(a,1),QU.encode(a)}),Ha.prop(n,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return i().hash;if(n.redeem&&n.redeem.output)return ZU.hash160(n.redeem.output)}),Ha.prop(n,"output",()=>{if(n.hash)return Wa.compile([cg.OP_HASH160,n.hash,cg.OP_EQUAL])}),Ha.prop(n,"redeem",()=>{if(e.input)return s()}),Ha.prop(n,"input",()=>{if(!(!e.redeem||!e.redeem.input||!e.redeem.output))return Wa.compile([].concat(Wa.decompile(e.redeem.input),e.redeem.output))}),Ha.prop(n,"witness",()=>{if(n.redeem&&n.redeem.witness)return n.redeem.witness;if(n.input)return[]}),Ha.prop(n,"name",()=>{let a=["p2sh"];return n.redeem!==void 0&&n.redeem.name!==void 0&&a.push(n.redeem.name),a.join("-")}),t.validate){let a=Buffer.from([]);if(e.address){if(i().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(i().hash.length!==20)throw new TypeError("Invalid address");a=i().hash}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(e.output.length!==23||e.output[0]!==cg.OP_HASH160||e.output[1]!==20||e.output[22]!==cg.OP_EQUAL)throw new TypeError("Output is invalid");let u=e.output.slice(2,22);if(a.length>0&&!a.equals(u))throw new TypeError("Hash mismatch");a=u}let c=u=>{if(u.output){let h=Wa.decompile(u.output);if(!h||h.length<1)throw new TypeError("Redeem.output too short");if(u.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(Wa.countNonPushOnlyOPs(h)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let l=ZU.hash160(u.output);if(a.length>0&&!a.equals(l))throw new TypeError("Hash mismatch");a=l}if(u.input){let h=u.input.length>0,l=u.witness&&u.witness.length>0;if(!h&&!l)throw new TypeError("Empty input");if(h&&l)throw new TypeError("Input and witness provided");if(h){let g=Wa.decompile(u.input);if(!Wa.isPushOnly(g))throw new TypeError("Non push-only scriptSig")}}};if(e.input){let u=o();if(!u||u.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(s().output))throw new TypeError("Input is invalid");c(s())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw new TypeError("Network mismatch");if(e.input){let u=s();if(e.redeem.output&&!e.redeem.output.equals(u.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(u.input))throw new TypeError("Redeem.input mismatch")}c(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!Pfe(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)}Hv.p2sh=_fe});var ug=K(Cp=>{"use strict";p();y();Object.defineProperty(Cp,"__esModule",{value:!0});Cp.bech32m=Cp.bech32=void 0;var Wv="qpzry9x8gf2tvdw0s3jn54khce6mua7l",tD={};for(let e=0;e<Wv.length;e++){let t=Wv.charAt(e);tD[t]=e}function Bp(e){let t=e>>25;return(e&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function eD(e){let t=1;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=Bp(t)^n>>5}t=Bp(t);for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);t=Bp(t)^n&31}return t}function fk(e,t,r,n){let i=0,o=0,s=(1<<r)-1,a=[];for(let c=0;c<e.length;++c)for(i=i<<t|e[c],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function Bfe(e){return fk(e,8,5,!0)}function Cfe(e){let t=fk(e,5,8,!1);if(Array.isArray(t))return t}function Mfe(e){let t=fk(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function rD(e){let t;e==="bech32"?t=1:t=734539939;function r(s,a,c){if(c=c||90,s.length+7+a.length>c)throw new TypeError("Exceeds length limit");s=s.toLowerCase();let u=eD(s);if(typeof u=="string")throw new Error(u);let h=s+"1";for(let l=0;l<a.length;++l){let g=a[l];if(g>>5)throw new Error("Non 5-bit word");u=Bp(u)^g,h+=Wv.charAt(g)}for(let l=0;l<6;++l)u=Bp(u);u^=t;for(let l=0;l<6;++l){let g=u>>(5-l)*5&31;h+=Wv.charAt(g)}return h}function n(s,a){if(a=a||90,s.length<8)return s+" too short";if(s.length>a)return"Exceeds length limit";let c=s.toLowerCase(),u=s.toUpperCase();if(s!==c&&s!==u)return"Mixed-case string "+s;s=c;let h=s.lastIndexOf("1");if(h===-1)return"No separator character for "+s;if(h===0)return"Missing prefix for "+s;let l=s.slice(0,h),g=s.slice(h+1);if(g.length<6)return"Data too short";let x=eD(l);if(typeof x=="string")return x;let A=[];for(let E=0;E<g.length;++E){let C=g.charAt(E),M=tD[C];if(M===void 0)return"Unknown character "+C;x=Bp(x)^M,!(E+6>=g.length)&&A.push(M)}return x!==t?"Invalid checksum for "+s:{prefix:l,words:A}}function i(s,a){let c=n(s,a);if(typeof c=="object")return c}function o(s,a){let c=n(s,a);if(typeof c=="object")return c;throw new Error(c)}return{decodeUnsafe:i,decode:o,encode:r,toWords:Bfe,fromWordsUnsafe:Cfe,fromWords:Mfe}}Cp.bech32=rD("bech32");Cp.bech32m=rD("bech32m")});var iD=K(Gv=>{"use strict";p();y();Object.defineProperty(Gv,"__esModule",{value:!0});Gv.p2wpkh=void 0;var{Buffer:dk}=en(),lk=qa(),Rfe=is(),jv=Ui(),mn=ei(),_f=Gc(),zv=ug(),nD=jv.OPS,Ofe=dk.alloc(0);function Nfe(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,mn.typeforce)({address:mn.typeforce.maybe(mn.typeforce.String),hash:mn.typeforce.maybe(mn.typeforce.BufferN(20)),input:mn.typeforce.maybe(mn.typeforce.BufferN(0)),network:mn.typeforce.maybe(mn.typeforce.Object),output:mn.typeforce.maybe(mn.typeforce.BufferN(22)),pubkey:mn.typeforce.maybe(mn.isPoint),signature:mn.typeforce.maybe(jv.isCanonicalScriptSignature),witness:mn.typeforce.maybe(mn.typeforce.arrayOf(mn.typeforce.Buffer))},e);let r=_f.value(()=>{let o=zv.bech32.decode(e.address),s=o.words.shift(),a=zv.bech32.fromWords(o.words);return{version:s,prefix:o.prefix,data:dk.from(a)}}),n=e.network||Rfe.bitcoin,i={name:"p2wpkh",network:n};if(_f.prop(i,"address",()=>{if(!i.hash)return;let o=zv.bech32.toWords(i.hash);return o.unshift(0),zv.bech32.encode(n.bech32,o)}),_f.prop(i,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return r().data;if(e.pubkey||i.pubkey)return lk.hash160(e.pubkey||i.pubkey)}),_f.prop(i,"output",()=>{if(i.hash)return jv.compile([nD.OP_0,i.hash])}),_f.prop(i,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.witness)return e.witness[1]}),_f.prop(i,"signature",()=>{if(e.witness)return e.witness[0]}),_f.prop(i,"input",()=>{if(i.witness)return Ofe}),_f.prop(i,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let o=dk.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==20)throw new TypeError("Invalid address data");o=r().data}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(e.output.length!==22||e.output[0]!==nD.OP_0||e.output[1]!==20)throw new TypeError("Output is invalid");if(o.length>0&&!o.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");o=e.output.slice(2)}if(e.pubkey){let s=lk.hash160(e.pubkey);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch");if(o=s,!(0,mn.isPoint)(e.pubkey)||e.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(e.witness.length!==2)throw new TypeError("Witness is invalid");if(!jv.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,mn.isPoint)(e.witness[1])||e.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");let s=lk.hash160(e.witness[1]);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)}Gv.p2wpkh=Nfe});var aD=K(Zv=>{"use strict";p();y();Object.defineProperty(Zv,"__esModule",{value:!0});Zv.p2wsh=void 0;var{Buffer:Jv}=en(),oD=qa(),Ufe=is(),Zc=Ui(),pr=ei(),Jc=Gc(),$v=ug(),sD=Zc.OPS,hk=Jv.alloc(0);function Dfe(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function Yv(e){return!!(Jv.isBuffer(e)&&e.length===65&&e[0]===4&&(0,pr.isPoint)(e))}function Lfe(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,pr.typeforce)({network:pr.typeforce.maybe(pr.typeforce.Object),address:pr.typeforce.maybe(pr.typeforce.String),hash:pr.typeforce.maybe(pr.typeforce.BufferN(32)),output:pr.typeforce.maybe(pr.typeforce.BufferN(34)),redeem:pr.typeforce.maybe({input:pr.typeforce.maybe(pr.typeforce.Buffer),network:pr.typeforce.maybe(pr.typeforce.Object),output:pr.typeforce.maybe(pr.typeforce.Buffer),witness:pr.typeforce.maybe(pr.typeforce.arrayOf(pr.typeforce.Buffer))}),input:pr.typeforce.maybe(pr.typeforce.BufferN(0)),witness:pr.typeforce.maybe(pr.typeforce.arrayOf(pr.typeforce.Buffer))},e);let r=Jc.value(()=>{let s=$v.bech32.decode(e.address),a=s.words.shift(),c=$v.bech32.fromWords(s.words);return{version:a,prefix:s.prefix,data:Jv.from(c)}}),n=Jc.value(()=>Zc.decompile(e.redeem.input)),i=e.network;i||(i=e.redeem&&e.redeem.network||Ufe.bitcoin);let o={network:i};if(Jc.prop(o,"address",()=>{if(!o.hash)return;let s=$v.bech32.toWords(o.hash);return s.unshift(0),$v.bech32.encode(i.bech32,s)}),Jc.prop(o,"hash",()=>{if(e.output)return e.output.slice(2);if(e.address)return r().data;if(o.redeem&&o.redeem.output)return oD.sha256(o.redeem.output)}),Jc.prop(o,"output",()=>{if(o.hash)return Zc.compile([sD.OP_0,o.hash])}),Jc.prop(o,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:hk,witness:e.witness.slice(0,-1)}}),Jc.prop(o,"input",()=>{if(o.witness)return hk}),Jc.prop(o,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let s=Zc.toStack(n());return o.redeem=Object.assign({witness:s},e.redeem),o.redeem.input=hk,[].concat(s,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),Jc.prop(o,"name",()=>{let s=["p2wsh"];return o.redeem!==void 0&&o.redeem.name!==void 0&&s.push(o.redeem.name),s.join("-")}),t.validate){let s=Jv.from([]);if(e.address){if(r().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");s=r().data}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==34||e.output[0]!==sD.OP_0||e.output[1]!==32)throw new TypeError("Output is invalid");let a=e.output.slice(2);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){let a=Zc.decompile(e.redeem.output);if(!a||a.length<1)throw new TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(Zc.countNonPushOnlyOPs(a)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let c=oD.sha256(e.redeem.output);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch");s=c}if(e.redeem.input&&!Zc.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!Dfe(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(Yv)||e.redeem.output&&(Zc.decompile(e.redeem.output)||[]).some(Yv))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let a=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(a))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(Yv)||(Zc.decompile(a)||[]).some(Yv))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,e)}Zv.p2wsh=Lfe});var Qv=K(Mp=>{"use strict";p();y();Object.defineProperty(Mp,"__esModule",{value:!0});Mp.getEccLib=Mp.initEccLib=void 0;var fg={};function Kfe(e){e?e!==fg.eccLib&&(Vfe(e),fg.eccLib=e):fg.eccLib=e}Mp.initEccLib=Kfe;function Ffe(){if(!fg.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return fg.eccLib}Mp.getEccLib=Ffe;var Qc=e=>Buffer.from(e,"hex");function Vfe(e){os(typeof e.isXOnlyPoint=="function"),os(e.isXOnlyPoint(Qc("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),os(e.isXOnlyPoint(Qc("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),os(e.isXOnlyPoint(Qc("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),os(e.isXOnlyPoint(Qc("0000000000000000000000000000000000000000000000000000000000000001"))),os(!e.isXOnlyPoint(Qc("0000000000000000000000000000000000000000000000000000000000000000"))),os(!e.isXOnlyPoint(Qc("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),os(typeof e.xOnlyPointAddTweak=="function"),qfe.forEach(t=>{let r=e.xOnlyPointAddTweak(Qc(t.pubkey),Qc(t.tweak));t.result===null?os(r===null):(os(r!==null),os(r.parity===t.parity),os(Buffer.from(r.xOnlyPubkey).equals(Qc(t.result))))})}function os(e){if(!e)throw new Error("ecc library invalid")}var qfe=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]});var mk=K((bMe,uD)=>{"use strict";p();y();var pk=PB().Buffer,Hfe=9007199254740991;function yk(e){if(e<0||e>Hfe||e%1!==0)throw new RangeError("value out of range")}function lg(e,t,r){if(yk(e),t||(t=pk.allocUnsafe(cD(e))),!pk.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),lg.bytes=1):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),lg.bytes=3):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),lg.bytes=5):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),lg.bytes=9),t}function dg(e,t){if(!pk.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);var r=e.readUInt8(t);if(r<253)return dg.bytes=1,r;if(r===253)return dg.bytes=3,e.readUInt16LE(t+1);if(r===254)return dg.bytes=5,e.readUInt32LE(t+1);dg.bytes=9;var n=e.readUInt32LE(t+1),i=e.readUInt32LE(t+5),o=i*4294967296+n;return yk(o),o}function cD(e){return yk(e),e<253?1:e<=65535?3:e<=4294967295?5:9}uD.exports={encode:lg,decode:dg,encodingLength:cD}});var pg=K(vi=>{"use strict";p();y();Object.defineProperty(vi,"__esModule",{value:!0});vi.BufferReader=vi.BufferWriter=vi.cloneBuffer=vi.reverseBuffer=vi.writeUInt64LE=vi.readUInt64LE=vi.varuint=void 0;var nd=ei(),{typeforce:fD}=nd,hg=mk();vi.varuint=hg;function lD(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function dD(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,lD(n+r,9007199254740991),n+r}vi.readUInt64LE=dD;function hD(e,t,r){return lD(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}vi.writeUInt64LE=hD;function Wfe(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}vi.reverseBuffer=Wfe;function zfe(e){let t=Buffer.allocUnsafe(e.length);return e.copy(t),t}vi.cloneBuffer=zfe;var gk=class e{static withCapacity(t){return new e(Buffer.alloc(t))}constructor(t,r=0){this.buffer=t,this.offset=r,fD(nd.tuple(nd.Buffer,nd.UInt32),[t,r])}writeUInt8(t){this.offset=this.buffer.writeUInt8(t,this.offset)}writeInt32(t){this.offset=this.buffer.writeInt32LE(t,this.offset)}writeUInt32(t){this.offset=this.buffer.writeUInt32LE(t,this.offset)}writeUInt64(t){this.offset=hD(this.buffer,t,this.offset)}writeVarInt(t){hg.encode(t,this.buffer,this.offset),this.offset+=hg.encode.bytes}writeSlice(t){if(this.buffer.length<this.offset+t.length)throw new Error("Cannot write slice out of bounds");this.offset+=t.copy(this.buffer,this.offset)}writeVarSlice(t){this.writeVarInt(t.length),this.writeSlice(t)}writeVector(t){this.writeVarInt(t.length),t.forEach(r=>this.writeVarSlice(r))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}};vi.BufferWriter=gk;var bk=class{constructor(t,r=0){this.buffer=t,this.offset=r,fD(nd.tuple(nd.Buffer,nd.UInt32),[t,r])}readUInt8(){let t=this.buffer.readUInt8(this.offset);return this.offset++,t}readInt32(){let t=this.buffer.readInt32LE(this.offset);return this.offset+=4,t}readUInt32(){let t=this.buffer.readUInt32LE(this.offset);return this.offset+=4,t}readUInt64(){let t=dD(this.buffer,this.offset);return this.offset+=8,t}readVarInt(){let t=hg.decode(this.buffer,this.offset);return this.offset+=hg.decode.bytes,t}readSlice(t){if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let t=this.readVarInt(),r=[];for(let n=0;n<t;n++)r.push(this.readVarSlice());return r}};vi.BufferReader=bk});var Xv=K(gn=>{"use strict";p();y();Object.defineProperty(gn,"__esModule",{value:!0});gn.tweakKey=gn.tapTweakHash=gn.tapleafHash=gn.findScriptPath=gn.toHashTree=gn.rootHashFromPath=gn.MAX_TAPTREE_DEPTH=gn.LEAF_VERSION_TAPSCRIPT=void 0;var Bf=en(),jfe=Qv(),Ak=qa(),pD=pg(),Gfe=ei();gn.LEAF_VERSION_TAPSCRIPT=192;gn.MAX_TAPTREE_DEPTH=128;var $fe=e=>"left"in e&&"right"in e;function Yfe(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let r=(e.length-33)/32,n=t;for(let i=0;i<r;i++){let o=e.slice(33+32*i,65+32*i);n.compare(o)<0?n=vk(n,o):n=vk(o,n)}return n}gn.rootHashFromPath=Yfe;function xk(e){if((0,Gfe.isTapleaf)(e))return{hash:yD(e)};let t=[xk(e[0]),xk(e[1])];t.sort((i,o)=>i.hash.compare(o.hash));let[r,n]=t;return{hash:vk(r.hash,n.hash),left:r,right:n}}gn.toHashTree=xk;function wk(e,t){if($fe(e)){let r=wk(e.left,t);if(r!==void 0)return[...r,e.right.hash];let n=wk(e.right,t);if(n!==void 0)return[...n,e.left.hash]}else if(e.hash.equals(t))return[]}gn.findScriptPath=wk;function yD(e){let t=e.version||gn.LEAF_VERSION_TAPSCRIPT;return Ak.taggedHash("TapLeaf",Bf.Buffer.concat([Bf.Buffer.from([t]),Zfe(e.output)]))}gn.tapleafHash=yD;function mD(e,t){return Ak.taggedHash("TapTweak",Bf.Buffer.concat(t?[e,t]:[e]))}gn.tapTweakHash=mD;function Jfe(e,t){if(!Bf.Buffer.isBuffer(e)||e.length!==32||t&&t.length!==32)return null;let r=mD(e,t),n=(0,jfe.getEccLib)().xOnlyPointAddTweak(e,r);return!n||n.xOnlyPubkey===null?null:{parity:n.parity,x:Bf.Buffer.from(n.xOnlyPubkey)}}gn.tweakKey=Jfe;function vk(e,t){return Ak.taggedHash("TapBranch",Bf.Buffer.concat([e,t]))}function Zfe(e){let t=pD.varuint.encodingLength(e.length),r=Bf.Buffer.allocUnsafe(t);return pD.varuint.encode(e.length,r),Bf.Buffer.concat([r,e])}});var wD=K(rA=>{"use strict";p();y();Object.defineProperty(rA,"__esModule",{value:!0});rA.p2tr=void 0;var eA=en(),Qfe=is(),Sk=Ui(),xt=ei(),gD=Qv(),no=Xv(),ss=Gc(),tA=ug(),bD=Sk.OPS,xD=1,Xfe=80;function ele(e,t){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,xt.typeforce)({address:xt.typeforce.maybe(xt.typeforce.String),input:xt.typeforce.maybe(xt.typeforce.BufferN(0)),network:xt.typeforce.maybe(xt.typeforce.Object),output:xt.typeforce.maybe(xt.typeforce.BufferN(34)),internalPubkey:xt.typeforce.maybe(xt.typeforce.BufferN(32)),hash:xt.typeforce.maybe(xt.typeforce.BufferN(32)),pubkey:xt.typeforce.maybe(xt.typeforce.BufferN(32)),signature:xt.typeforce.maybe(xt.typeforce.anyOf(xt.typeforce.BufferN(64),xt.typeforce.BufferN(65))),witness:xt.typeforce.maybe(xt.typeforce.arrayOf(xt.typeforce.Buffer)),scriptTree:xt.typeforce.maybe(xt.isTaptree),redeem:xt.typeforce.maybe({output:xt.typeforce.maybe(xt.typeforce.Buffer),redeemVersion:xt.typeforce.maybe(xt.typeforce.Number),witness:xt.typeforce.maybe(xt.typeforce.arrayOf(xt.typeforce.Buffer))}),redeemVersion:xt.typeforce.maybe(xt.typeforce.Number)},e);let r=ss.value(()=>{let a=tA.bech32m.decode(e.address),c=a.words.shift(),u=tA.bech32m.fromWords(a.words);return{version:c,prefix:a.prefix,data:eA.Buffer.from(u)}}),n=ss.value(()=>{if(!(!e.witness||!e.witness.length))return e.witness.length>=2&&e.witness[e.witness.length-1][0]===Xfe?e.witness.slice(0,-1):e.witness.slice()}),i=ss.value(()=>{if(e.scriptTree)return(0,no.toHashTree)(e.scriptTree);if(e.hash)return{hash:e.hash}}),o=e.network||Qfe.bitcoin,s={name:"p2tr",network:o};if(ss.prop(s,"address",()=>{if(!s.pubkey)return;let a=tA.bech32m.toWords(s.pubkey);return a.unshift(xD),tA.bech32m.encode(o.bech32,a)}),ss.prop(s,"hash",()=>{let a=i();if(a)return a.hash;let c=n();if(c&&c.length>1){let u=c[c.length-1],h=u[0]&xt.TAPLEAF_VERSION_MASK,l=c[c.length-2],g=(0,no.tapleafHash)({output:l,version:h});return(0,no.rootHashFromPath)(u,g)}return null}),ss.prop(s,"output",()=>{if(s.pubkey)return Sk.compile([bD.OP_1,s.pubkey])}),ss.prop(s,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&e.redeem.redeemVersion!==void 0&&e.redeem.redeemVersion!==null?e.redeem.redeemVersion:no.LEAF_VERSION_TAPSCRIPT),ss.prop(s,"redeem",()=>{let a=n();if(!(!a||a.length<2))return{output:a[a.length-2],witness:a.slice(0,-2),redeemVersion:a[a.length-1][0]&xt.TAPLEAF_VERSION_MASK}}),ss.prop(s,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return r().data;if(s.internalPubkey){let a=(0,no.tweakKey)(s.internalPubkey,s.hash);if(a)return a.x}}),ss.prop(s,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let a=n();if(a&&a.length>1)return a[a.length-1].slice(1,33)}),ss.prop(s,"signature",()=>{if(e.signature)return e.signature;let a=n();if(!(!a||a.length!==1))return a[0]}),ss.prop(s,"witness",()=>{if(e.witness)return e.witness;let a=i();if(a&&e.redeem&&e.redeem.output&&e.internalPubkey){let c=(0,no.tapleafHash)({output:e.redeem.output,version:s.redeemVersion}),u=(0,no.findScriptPath)(a,c);if(!u)return;let h=(0,no.tweakKey)(e.internalPubkey,a.hash);if(!h)return;let l=eA.Buffer.concat([eA.Buffer.from([s.redeemVersion|h.parity]),e.internalPubkey].concat(u));return[e.redeem.output,l]}if(e.signature)return[e.signature]}),t.validate){let a=eA.Buffer.from([]);if(e.address){if(o&&o.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==xD)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");a=r().data}if(e.pubkey){if(a.length>0&&!a.equals(e.pubkey))throw new TypeError("Pubkey mismatch");a=e.pubkey}if(e.output){if(e.output.length!==34||e.output[0]!==bD.OP_1||e.output[1]!==32)throw new TypeError("Output is invalid");if(a.length>0&&!a.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");a=e.output.slice(2)}if(e.internalPubkey){let h=(0,no.tweakKey)(e.internalPubkey,s.hash);if(a.length>0&&!a.equals(h.x))throw new TypeError("Pubkey mismatch");a=h.x}if(a&&a.length&&!(0,gD.getEccLib)().isXOnlyPoint(a))throw new TypeError("Invalid pubkey for p2tr");let c=i();if(e.hash&&c&&!e.hash.equals(c.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&c){let h=(0,no.tapleafHash)({output:e.redeem.output,version:s.redeemVersion});if(!(0,no.findScriptPath)(c,h))throw new TypeError("Redeem script not in tree")}let u=n();if(e.redeem&&s.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==s.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(Sk.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(s.redeem.output&&!e.redeem.output.equals(s.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&s.redeem.witness&&!tle(e.redeem.witness,s.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(u&&u.length)if(u.length===1){if(e.signature&&!e.signature.equals(u[0]))throw new TypeError("Signature mismatch")}else{let h=u[u.length-1];if(h.length<33)throw new TypeError(`The control-block length is too small. Got ${h.length}, expected min 33.`);if((h.length-33)%32!==0)throw new TypeError(`The control-block length of ${h.length} is incorrect!`);let l=(h.length-33)/32;if(l>128)throw new TypeError(`The script path is too long. Got ${l}, expected max 128.`);let g=h.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(g))throw new TypeError("Internal pubkey mismatch");if(!(0,gD.getEccLib)().isXOnlyPoint(g))throw new TypeError("Invalid internalPubkey for p2tr witness");let x=h[0]&xt.TAPLEAF_VERSION_MASK,A=u[u.length-2],E=(0,no.tapleafHash)({output:A,version:x}),C=(0,no.rootHashFromPath)(h,E),M=(0,no.tweakKey)(g,C);if(!M)throw new TypeError("Invalid outputKey for p2tr witness");if(a.length&&!a.equals(M.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(M.parity!==(h[0]&1))throw new Error("Incorrect parity")}}return Object.assign(s,e)}rA.p2tr=ele;function tle(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}});var Rp=K(Nn=>{"use strict";p();y();Object.defineProperty(Nn,"__esModule",{value:!0});Nn.p2tr=Nn.p2wsh=Nn.p2wpkh=Nn.p2sh=Nn.p2pkh=Nn.p2pk=Nn.p2ms=Nn.embed=void 0;var rle=DU();Object.defineProperty(Nn,"embed",{enumerable:!0,get:function(){return rle.p2data}});var nle=KU();Object.defineProperty(Nn,"p2ms",{enumerable:!0,get:function(){return nle.p2ms}});var ile=VU();Object.defineProperty(Nn,"p2pk",{enumerable:!0,get:function(){return ile.p2pk}});var ole=JU();Object.defineProperty(Nn,"p2pkh",{enumerable:!0,get:function(){return ole.p2pkh}});var sle=XU();Object.defineProperty(Nn,"p2sh",{enumerable:!0,get:function(){return sle.p2sh}});var ale=iD();Object.defineProperty(Nn,"p2wpkh",{enumerable:!0,get:function(){return ale.p2wpkh}});var cle=aD();Object.defineProperty(Nn,"p2wsh",{enumerable:!0,get:function(){return cle.p2wsh}});var ule=wD();Object.defineProperty(Nn,"p2tr",{enumerable:!0,get:function(){return ule.p2tr}})});var Ek=K(io=>{"use strict";p();y();Object.defineProperty(io,"__esModule",{value:!0});io.toOutputScript=io.fromOutputScript=io.toBech32=io.toBase58Check=io.fromBech32=io.fromBase58Check=void 0;var vD=is(),za=Rp(),AD=Ui(),nA=ei(),Op=ug(),SD=mp(),ED=40,ID=2,kD=16,TD=2,PD=80,_D="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function fle(e,t){let r=e.slice(2);if(r.length<ID||r.length>ED)throw new TypeError("Invalid program length for segwit address");let n=e[0]-PD;if(n<TD||n>kD)throw new TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw new TypeError("Invalid script for segwit address");return console.warn(_D),MD(r,n,t.bech32)}function BD(e){let t=Buffer.from(SD.decode(e));if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");let r=t.readUInt8(0),n=t.slice(1);return{version:r,hash:n}}io.fromBase58Check=BD;function CD(e){let t,r;try{t=Op.bech32.decode(e)}catch{}if(t){if(r=t.words[0],r!==0)throw new TypeError(e+" uses wrong encoding")}else if(t=Op.bech32m.decode(e),r=t.words[0],r===0)throw new TypeError(e+" uses wrong encoding");let n=Op.bech32.fromWords(t.words.slice(1));return{version:r,prefix:t.prefix,data:Buffer.from(n)}}io.fromBech32=CD;function lle(e,t){(0,nA.typeforce)((0,nA.tuple)(nA.Hash160bit,nA.UInt8),arguments);let r=Buffer.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),SD.encode(r)}io.toBase58Check=lle;function MD(e,t,r){let n=Op.bech32.toWords(e);return n.unshift(t),t===0?Op.bech32.encode(r,n):Op.bech32m.encode(r,n)}io.toBech32=MD;function dle(e,t){t=t||vD.bitcoin;try{return za.p2pkh({output:e,network:t}).address}catch{}try{return za.p2sh({output:e,network:t}).address}catch{}try{return za.p2wpkh({output:e,network:t}).address}catch{}try{return za.p2wsh({output:e,network:t}).address}catch{}try{return za.p2tr({output:e,network:t}).address}catch{}try{return fle(e,t)}catch{}throw new Error(AD.toASM(e)+" has no matching Address")}io.fromOutputScript=dle;function hle(e,t){t=t||vD.bitcoin;let r,n;try{r=BD(e)}catch{}if(r){if(r.version===t.pubKeyHash)return za.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return za.p2sh({hash:r.hash}).output}else{try{n=CD(e)}catch{}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(n.version===0){if(n.data.length===20)return za.p2wpkh({hash:n.data}).output;if(n.data.length===32)return za.p2wsh({hash:n.data}).output}else if(n.version===1){if(n.data.length===32)return za.p2tr({pubkey:n.data}).output}else if(n.version>=TD&&n.version<=kD&&n.data.length>=ID&&n.data.length<=ED)return console.warn(_D),AD.compile([n.version+PD,n.data])}}throw new Error(e+" has no matching Script")}io.toOutputScript=hle});var RD=K(iA=>{"use strict";p();y();Object.defineProperty(iA,"__esModule",{value:!0});iA.fastMerkleRoot=void 0;function ple(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if(typeof t!="function")throw TypeError("Expected digest Function");let r=e.length,n=e.concat();for(;r>1;){let i=0;for(let o=0;o<r;o+=2,++i){let s=n[o],a=o+1===r?s:n[o+1],c=Buffer.concat([s,a]);n[i]=t(c)}r=i}return n[0]}iA.fastMerkleRoot=ple});var Np=K(oA=>{"use strict";p();y();Object.defineProperty(oA,"__esModule",{value:!0});oA.Transaction=void 0;var{Buffer:Ai}=en(),an=pg(),Ki=qa(),OD=Ui(),yle=Ui(),Nt=ei(),{typeforce:ja}=Nt;function Ga(e){let t=e.length;return an.varuint.encodingLength(t)+t}function mle(e){let t=e.length;return an.varuint.encodingLength(t)+e.reduce((r,n)=>r+Ga(n),0)}var Cf=Ai.allocUnsafe(0),ND=[],Ik=Ai.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),UD=Ai.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),gle=Ai.from("ffffffffffffffff","hex"),ble={script:Cf,valueBuffer:gle};function xle(e){return e.value!==void 0}var So=class e{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(t,r){let n=new an.BufferReader(t),i=new e;i.version=n.readInt32();let o=n.readUInt8(),s=n.readUInt8(),a=!1;o===e.ADVANCED_TRANSACTION_MARKER&&s===e.ADVANCED_TRANSACTION_FLAG?a=!0:n.offset-=2;let c=n.readVarInt();for(let h=0;h<c;++h)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:ND});let u=n.readVarInt();for(let h=0;h<u;++h)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(a){for(let h=0;h<c;++h)i.ins[h].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==t.length)throw new Error("Transaction has unexpected data");return i}static fromHex(t){return e.fromBuffer(Ai.from(t,"hex"),!1)}static isCoinbaseHash(t){ja(Nt.Hash256bit,t);for(let r=0;r<32;++r)if(t[r]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&e.isCoinbaseHash(this.ins[0].hash)}addInput(t,r,n,i){return ja(Nt.tuple(Nt.Hash256bit,Nt.UInt32,Nt.maybe(Nt.UInt32),Nt.maybe(Nt.Buffer)),arguments),Nt.Null(n)&&(n=e.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:r,script:i||Cf,sequence:n,witness:ND})-1}addOutput(t,r){return ja(Nt.tuple(Nt.Buffer,Nt.Satoshi),arguments),this.outs.push({script:t,value:r})-1}hasWitnesses(){return this.ins.some(t=>t.witness.length!==0)}weight(){let t=this.byteLength(!1),r=this.byteLength(!0);return t*3+r}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(t=!0){let r=t&&this.hasWitnesses();return(r?10:8)+an.varuint.encodingLength(this.ins.length)+an.varuint.encodingLength(this.outs.length)+this.ins.reduce((n,i)=>n+40+Ga(i.script),0)+this.outs.reduce((n,i)=>n+8+Ga(i.script),0)+(r?this.ins.reduce((n,i)=>n+mle(i.witness),0):0)}clone(){let t=new e;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map(r=>({hash:r.hash,index:r.index,script:r.script,sequence:r.sequence,witness:r.witness})),t.outs=this.outs.map(r=>({script:r.script,value:r.value})),t}hashForSignature(t,r,n){if(ja(Nt.tuple(Nt.UInt32,Nt.Buffer,Nt.Number),arguments),t>=this.ins.length)return UD;let i=OD.compile(OD.decompile(r).filter(a=>a!==yle.OPS.OP_CODESEPARATOR)),o=this.clone();if((n&31)===e.SIGHASH_NONE)o.outs=[],o.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)});else if((n&31)===e.SIGHASH_SINGLE){if(t>=this.outs.length)return UD;o.outs.length=t+1;for(let a=0;a<t;a++)o.outs[a]=ble;o.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)})}n&e.SIGHASH_ANYONECANPAY?(o.ins=[o.ins[t]],o.ins[0].script=i):(o.ins.forEach(a=>{a.script=Cf}),o.ins[t].script=i);let s=Ai.allocUnsafe(o.byteLength(!1)+4);return s.writeInt32LE(n,s.length-4),o.__toBuffer(s,0,!1),Ki.hash256(s)}hashForWitnessV1(t,r,n,i,o,s){if(ja(Nt.tuple(Nt.UInt32,ja.arrayOf(Nt.Buffer),ja.arrayOf(Nt.Satoshi),Nt.UInt32),arguments),n.length!==this.ins.length||r.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");let a=i===e.SIGHASH_DEFAULT?e.SIGHASH_ALL:i&e.SIGHASH_OUTPUT_MASK,u=(i&e.SIGHASH_INPUT_MASK)===e.SIGHASH_ANYONECANPAY,h=a===e.SIGHASH_NONE,l=a===e.SIGHASH_SINGLE,g=Cf,x=Cf,A=Cf,E=Cf,C=Cf;if(!u){let V=an.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(q=>{V.writeSlice(q.hash),V.writeUInt32(q.index)}),g=Ki.sha256(V.end()),V=an.BufferWriter.withCapacity(8*this.ins.length),n.forEach(q=>V.writeUInt64(q)),x=Ki.sha256(V.end()),V=an.BufferWriter.withCapacity(r.map(Ga).reduce((q,W)=>q+W)),r.forEach(q=>V.writeVarSlice(q)),A=Ki.sha256(V.end()),V=an.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(q=>V.writeUInt32(q.sequence)),E=Ki.sha256(V.end())}if(h||l){if(l&&t<this.outs.length){let V=this.outs[t],q=an.BufferWriter.withCapacity(8+Ga(V.script));q.writeUInt64(V.value),q.writeVarSlice(V.script),C=Ki.sha256(q.end())}}else{let V=this.outs.map(W=>8+Ga(W.script)).reduce((W,G)=>W+G),q=an.BufferWriter.withCapacity(V);this.outs.forEach(W=>{q.writeUInt64(W.value),q.writeVarSlice(W.script)}),C=Ki.sha256(q.end())}let M=(o?2:0)+(s?1:0),N=174-(u?49:0)-(h?32:0)+(s?32:0)+(o?37:0),R=an.BufferWriter.withCapacity(N);if(R.writeUInt8(i),R.writeInt32(this.version),R.writeUInt32(this.locktime),R.writeSlice(g),R.writeSlice(x),R.writeSlice(A),R.writeSlice(E),h||l||R.writeSlice(C),R.writeUInt8(M),u){let V=this.ins[t];R.writeSlice(V.hash),R.writeUInt32(V.index),R.writeUInt64(n[t]),R.writeVarSlice(r[t]),R.writeUInt32(V.sequence)}else R.writeUInt32(t);if(s){let V=an.BufferWriter.withCapacity(Ga(s));V.writeVarSlice(s),R.writeSlice(Ki.sha256(V.end()))}return l&&R.writeSlice(C),o&&(R.writeSlice(o),R.writeUInt8(0),R.writeUInt32(4294967295)),Ki.taggedHash("TapSighash",Ai.concat([Ai.from([0]),R.end()]))}hashForWitnessV0(t,r,n,i){ja(Nt.tuple(Nt.UInt32,Nt.Buffer,Nt.Satoshi,Nt.UInt32),arguments);let o=Ai.from([]),s,a=Ik,c=Ik,u=Ik;if(i&e.SIGHASH_ANYONECANPAY||(o=Ai.allocUnsafe(36*this.ins.length),s=new an.BufferWriter(o,0),this.ins.forEach(l=>{s.writeSlice(l.hash),s.writeUInt32(l.index)}),c=Ki.hash256(o)),!(i&e.SIGHASH_ANYONECANPAY)&&(i&31)!==e.SIGHASH_SINGLE&&(i&31)!==e.SIGHASH_NONE&&(o=Ai.allocUnsafe(4*this.ins.length),s=new an.BufferWriter(o,0),this.ins.forEach(l=>{s.writeUInt32(l.sequence)}),u=Ki.hash256(o)),(i&31)!==e.SIGHASH_SINGLE&&(i&31)!==e.SIGHASH_NONE){let l=this.outs.reduce((g,x)=>g+8+Ga(x.script),0);o=Ai.allocUnsafe(l),s=new an.BufferWriter(o,0),this.outs.forEach(g=>{s.writeUInt64(g.value),s.writeVarSlice(g.script)}),a=Ki.hash256(o)}else if((i&31)===e.SIGHASH_SINGLE&&t<this.outs.length){let l=this.outs[t];o=Ai.allocUnsafe(8+Ga(l.script)),s=new an.BufferWriter(o,0),s.writeUInt64(l.value),s.writeVarSlice(l.script),a=Ki.hash256(o)}o=Ai.allocUnsafe(156+Ga(r)),s=new an.BufferWriter(o,0);let h=this.ins[t];return s.writeInt32(this.version),s.writeSlice(c),s.writeSlice(u),s.writeSlice(h.hash),s.writeUInt32(h.index),s.writeVarSlice(r),s.writeUInt64(n),s.writeUInt32(h.sequence),s.writeSlice(a),s.writeUInt32(this.locktime),s.writeUInt32(i),Ki.hash256(o)}getHash(t){return t&&this.isCoinbase()?Ai.alloc(32,0):Ki.hash256(this.__toBuffer(void 0,void 0,t))}getId(){return(0,an.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(t,r){return this.__toBuffer(t,r,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(t,r){ja(Nt.tuple(Nt.Number,Nt.Buffer),arguments),this.ins[t].script=r}setWitness(t,r){ja(Nt.tuple(Nt.Number,[Nt.Buffer]),arguments),this.ins[t].witness=r}__toBuffer(t,r,n=!1){t||(t=Ai.allocUnsafe(this.byteLength(n)));let i=new an.BufferWriter(t,r||0);i.writeInt32(this.version);let o=n&&this.hasWitnesses();return o&&(i.writeUInt8(e.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(e.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach(s=>{i.writeSlice(s.hash),i.writeUInt32(s.index),i.writeVarSlice(s.script),i.writeUInt32(s.sequence)}),i.writeVarInt(this.outs.length),this.outs.forEach(s=>{xle(s)?i.writeUInt64(s.value):i.writeSlice(s.valueBuffer),i.writeVarSlice(s.script)}),o&&this.ins.forEach(s=>{i.writeVector(s.witness)}),i.writeUInt32(this.locktime),r!==void 0?t.slice(r,i.offset):t}};oA.Transaction=So;So.DEFAULT_SEQUENCE=4294967295;So.SIGHASH_DEFAULT=0;So.SIGHASH_ALL=1;So.SIGHASH_NONE=2;So.SIGHASH_SINGLE=3;So.SIGHASH_ANYONECANPAY=128;So.SIGHASH_OUTPUT_MASK=3;So.SIGHASH_INPUT_MASK=128;So.ADVANCED_TRANSACTION_MARKER=0;So.ADVANCED_TRANSACTION_FLAG=1});var FD=K(sA=>{"use strict";p();y();Object.defineProperty(sA,"__esModule",{value:!0});sA.Block=void 0;var id=pg(),kk=qa(),wle=RD(),vle=Np(),KD=ei(),{typeforce:Ale}=KD,Tk=new TypeError("Cannot compute merkle root for zero transactions"),DD=new TypeError("Cannot compute witness commit for non-segwit block"),Pk=class e{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(t){if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");let r=new id.BufferReader(t),n=new e;if(n.version=r.readInt32(),n.prevHash=r.readSlice(32),n.merkleRoot=r.readSlice(32),n.timestamp=r.readUInt32(),n.bits=r.readUInt32(),n.nonce=r.readUInt32(),t.length===80)return n;let i=()=>{let a=vle.Transaction.fromBuffer(r.buffer.slice(r.offset),!0);return r.offset+=a.byteLength(),a},o=r.readVarInt();n.transactions=[];for(let a=0;a<o;++a){let c=i();n.transactions.push(c)}let s=n.getWitnessCommit();return s&&(n.witnessCommit=s),n}static fromHex(t){return e.fromBuffer(Buffer.from(t,"hex"))}static calculateTarget(t){let r=((t&4278190080)>>24)-3,n=t&8388607,i=Buffer.alloc(32,0);return i.writeUIntBE(n,29-r,3),i}static calculateMerkleRoot(t,r){if(Ale([{getHash:KD.Function}],t),t.length===0)throw Tk;if(r&&!LD(t))throw DD;let n=t.map(o=>o.getHash(r)),i=(0,wle.fastMerkleRoot)(n,kk.hash256);return r?kk.hash256(Buffer.concat([i,t[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!LD(this.transactions))return null;let t=this.transactions[0].outs.filter(n=>n.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex"))).map(n=>n.script.slice(6,38));if(t.length===0)return null;let r=t[t.length-1];return r instanceof Buffer&&r.length===32?r:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&this.witnessCommit.length===32||this.getWitnessCommit()!==null}hasWitness(){return Sle(this.transactions)}weight(){let t=this.byteLength(!1,!1),r=this.byteLength(!1,!0);return t*3+r}byteLength(t,r=!0){return t||!this.transactions?80:80+id.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((n,i)=>n+i.byteLength(r),0)}getHash(){return kk.hash256(this.toBuffer(!0))}getId(){return(0,id.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){let t=new Date(0);return t.setUTCSeconds(this.timestamp),t}toBuffer(t){let r=Buffer.allocUnsafe(this.byteLength(t)),n=new id.BufferWriter(r);return n.writeInt32(this.version),n.writeSlice(this.prevHash),n.writeSlice(this.merkleRoot),n.writeUInt32(this.timestamp),n.writeUInt32(this.bits),n.writeUInt32(this.nonce),t||!this.transactions||(id.varuint.encode(this.transactions.length,r,n.offset),n.offset+=id.varuint.encode.bytes,this.transactions.forEach(i=>{let o=i.byteLength();i.toBuffer(r,n.offset),n.offset+=o})),r}toHex(t){return this.toBuffer(t).toString("hex")}checkTxRoots(){let t=this.hasWitnessCommit();return!t&&this.hasWitness()?!1:this.__checkMerkleRoot()&&(t?this.__checkWitnessCommit():!0)}checkProofOfWork(){let t=(0,id.reverseBuffer)(this.getHash()),r=e.calculateTarget(this.bits);return t.compare(r)<=0}__checkMerkleRoot(){if(!this.transactions)throw Tk;let t=e.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare(t)===0}__checkWitnessCommit(){if(!this.transactions)throw Tk;if(!this.hasWitnessCommit())throw DD;let t=e.calculateMerkleRoot(this.transactions,!0);return this.witnessCommit.compare(t)===0}};sA.Block=Pk;function LD(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}function Sle(e){return e instanceof Array&&e.some(t=>typeof t=="object"&&t.ins instanceof Array&&t.ins.some(r=>typeof r=="object"&&r.witness instanceof Array&&r.witness.length>0))}});var Un=K(Js=>{"use strict";p();y();Object.defineProperty(Js,"__esModule",{value:!0});var Ele;(function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"})(Ele=Js.GlobalTypes||(Js.GlobalTypes={}));Js.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"];var Ile;(function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"})(Ile=Js.InputTypes||(Js.InputTypes={}));Js.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"];var kle;(function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"})(kle=Js.OutputTypes||(Js.OutputTypes={}));Js.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]});var qD=K(od=>{"use strict";p();y();Object.defineProperty(od,"__esModule",{value:!0});var VD=Un(),Tle=e=>[...Array(e).keys()];function Ple(e){if(e.key[0]!==VD.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(e.key.length!==79||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");let t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(let n of Tle(e.value.length/4-1)){let i=e.value.readUInt32LE(n*4+4),o=!!(i&2147483648),s=i&2147483647;r.path+="/"+s.toString(10)+(o?"'":"")}return r}od.decode=Ple;function _le(e){let t=Buffer.from([VD.GlobalTypes.GLOBAL_XPUB]),r=Buffer.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=Buffer.allocUnsafe(n.length*4);e.masterFingerprint.copy(i,0);let o=4;return n.slice(1).forEach(s=>{let a=s.slice(-1)==="'",c=2147483647&parseInt(a?s.slice(0,-1):s,10);a&&(c+=2147483648),i.writeUInt32LE(c,o),o+=4}),{key:r,value:i}}od.encode=_le;od.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";function Ble(e){let t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return Buffer.isBuffer(t)&&t.length===78&&[2,3].indexOf(t[45])>-1&&Buffer.isBuffer(r)&&r.length===4&&typeof n=="string"&&!!n.match(/^m(\/\d+'?)*$/)}od.check=Ble;function Cle(e,t,r){let n=t.extendedPubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.extendedPubkey.equals(t.extendedPubkey)).length===0)}od.canAddToArray=Cle});var HD=K(_k=>{"use strict";p();y();Object.defineProperty(_k,"__esModule",{value:!0});var Mle=Un();function Rle(e){return{key:Buffer.from([Mle.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}_k.encode=Rle});var zD=K(sd=>{"use strict";p();y();Object.defineProperty(sd,"__esModule",{value:!0});var WD=Un();function Ole(e){if(e.key[0]!==WD.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value}sd.decode=Ole;function Nle(e){return{key:Buffer.from([WD.InputTypes.FINAL_SCRIPTSIG]),value:e}}sd.encode=Nle;sd.expected="Buffer";function Ule(e){return Buffer.isBuffer(e)}sd.check=Ule;function Dle(e,t){return!!e&&!!t&&e.finalScriptSig===void 0}sd.canAdd=Dle});var GD=K(ad=>{"use strict";p();y();Object.defineProperty(ad,"__esModule",{value:!0});var jD=Un();function Lle(e){if(e.key[0]!==jD.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value}ad.decode=Lle;function Kle(e){return{key:Buffer.from([jD.InputTypes.FINAL_SCRIPTWITNESS]),value:e}}ad.encode=Kle;ad.expected="Buffer";function Fle(e){return Buffer.isBuffer(e)}ad.check=Fle;function Vle(e,t){return!!e&&!!t&&e.finalScriptWitness===void 0}ad.canAdd=Vle});var YD=K(cd=>{"use strict";p();y();Object.defineProperty(cd,"__esModule",{value:!0});var $D=Un();function qle(e){if(e.key[0]!==$D.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value}cd.decode=qle;function Hle(e){return{key:Buffer.from([$D.InputTypes.NON_WITNESS_UTXO]),value:e}}cd.encode=Hle;cd.expected="Buffer";function Wle(e){return Buffer.isBuffer(e)}cd.check=Wle;function zle(e,t){return!!e&&!!t&&e.nonWitnessUtxo===void 0}cd.canAdd=zle});var ZD=K(ud=>{"use strict";p();y();Object.defineProperty(ud,"__esModule",{value:!0});var JD=Un();function jle(e){if(e.key[0]!==JD.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(!(e.key.length===34||e.key.length===66)||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}}ud.decode=jle;function Gle(e){let t=Buffer.from([JD.InputTypes.PARTIAL_SIG]);return{key:Buffer.concat([t,e.pubkey]),value:e.signature}}ud.encode=Gle;ud.expected="{ pubkey: Buffer; signature: Buffer; }";function $le(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&Yle(e.signature)}ud.check=$le;function Yle(e){if(!Buffer.isBuffer(e)||e.length<9||e[0]!==48||e.length!==e[1]+3||e[2]!==2)return!1;let t=e[3];if(t>33||t<1||e[3+t+1]!==2)return!1;let r=e[3+t+2];return!(r>33||r<1||e.length!==3+t+2+r+2)}function Jle(e,t,r){let n=t.pubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)).length===0)}ud.canAddToArray=Jle});var XD=K(fd=>{"use strict";p();y();Object.defineProperty(fd,"__esModule",{value:!0});var QD=Un();function Zle(e){if(e.key[0]!==QD.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")}fd.decode=Zle;function Qle(e){return{key:Buffer.from([QD.InputTypes.POR_COMMITMENT]),value:Buffer.from(e,"utf8")}}fd.encode=Qle;fd.expected="string";function Xle(e){return typeof e=="string"}fd.check=Xle;function ede(e,t){return!!e&&!!t&&e.porCommitment===void 0}fd.canAdd=ede});var tL=K(ld=>{"use strict";p();y();Object.defineProperty(ld,"__esModule",{value:!0});var eL=Un();function tde(e){if(e.key[0]!==eL.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)}ld.decode=tde;function rde(e){let t=Buffer.from([eL.InputTypes.SIGHASH_TYPE]),r=Buffer.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}}ld.encode=rde;ld.expected="number";function nde(e){return typeof e=="number"}ld.check=nde;function ide(e,t){return!!e&&!!t&&e.sighashType===void 0}ld.canAdd=ide});var iL=K(dd=>{"use strict";p();y();Object.defineProperty(dd,"__esModule",{value:!0});var rL=Un();function ode(e){if(e.key[0]!==rL.InputTypes.TAP_KEY_SIG||e.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!nL(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value}dd.decode=ode;function sde(e){return{key:Buffer.from([rL.InputTypes.TAP_KEY_SIG]),value:e}}dd.encode=sde;dd.expected="Buffer";function nL(e){return Buffer.isBuffer(e)&&(e.length===64||e.length===65)}dd.check=nL;function ade(e,t){return!!e&&!!t&&e.tapKeySig===void 0}dd.canAdd=ade});var sL=K(hd=>{"use strict";p();y();Object.defineProperty(hd,"__esModule",{value:!0});var oL=Un();function cde(e){if(e.key[0]!==oL.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));let t=e.value[e.value.length-1];if((e.key[1]&254)!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));let r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}}hd.decode=cde;function ude(e){let t=Buffer.from([oL.InputTypes.TAP_LEAF_SCRIPT]),r=Buffer.from([e.leafVersion]);return{key:Buffer.concat([t,e.controlBlock]),value:Buffer.concat([e.script,r])}}hd.encode=ude;hd.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }";function fde(e){return Buffer.isBuffer(e.controlBlock)&&(e.controlBlock.length-1)%32===0&&(e.controlBlock[0]&254)===e.leafVersion&&Buffer.isBuffer(e.script)}hd.check=fde;function lde(e,t,r){let n=t.controlBlock.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.controlBlock.equals(t.controlBlock)).length===0)}hd.canAddToArray=lde});var uL=K(pd=>{"use strict";p();y();Object.defineProperty(pd,"__esModule",{value:!0});var aL=Un();function dde(e){if(e.key[0]!==aL.InputTypes.TAP_MERKLE_ROOT||e.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!cL(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value}pd.decode=dde;function hde(e){return{key:Buffer.from([aL.InputTypes.TAP_MERKLE_ROOT]),value:e}}pd.encode=hde;pd.expected="Buffer";function cL(e){return Buffer.isBuffer(e)&&e.length===32}pd.check=cL;function pde(e,t){return!!e&&!!t&&e.tapMerkleRoot===void 0}pd.canAdd=pde});var lL=K(yd=>{"use strict";p();y();Object.defineProperty(yd,"__esModule",{value:!0});var fL=Un();function yde(e){if(e.key[0]!==fL.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(e.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(e.value.length!==64&&e.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));let t=e.key.slice(1,33),r=e.key.slice(33);return{pubkey:t,leafHash:r,signature:e.value}}yd.decode=yde;function mde(e){let t=Buffer.from([fL.InputTypes.TAP_SCRIPT_SIG]);return{key:Buffer.concat([t,e.pubkey,e.leafHash]),value:e.signature}}yd.encode=mde;yd.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }";function gde(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.leafHash)&&Buffer.isBuffer(e.signature)&&e.pubkey.length===32&&e.leafHash.length===32&&(e.signature.length===64||e.signature.length===65)}yd.check=gde;function bde(e,t,r){let n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)&&i.leafHash.equals(t.leafHash)).length===0)}yd.canAddToArray=bde});var Mf=K(gg=>{"use strict";p();y();Object.defineProperty(gg,"__esModule",{value:!0});var xde=9007199254740991;function Bk(e){if(e<0||e>xde||e%1!==0)throw new RangeError("value out of range")}function yg(e,t,r){if(Bk(e),t||(t=Buffer.allocUnsafe(dL(e))),!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),Object.assign(yg,{bytes:1})):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),Object.assign(yg,{bytes:3})):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),Object.assign(yg,{bytes:5})):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),Object.assign(yg,{bytes:9})),t}gg.encode=yg;function mg(e,t){if(!Buffer.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);let r=e.readUInt8(t);if(r<253)return Object.assign(mg,{bytes:1}),r;if(r===253)return Object.assign(mg,{bytes:3}),e.readUInt16LE(t+1);if(r===254)return Object.assign(mg,{bytes:5}),e.readUInt32LE(t+1);{Object.assign(mg,{bytes:9});let n=e.readUInt32LE(t+1),o=e.readUInt32LE(t+5)*4294967296+n;return Bk(o),o}}gg.decode=mg;function dL(e){return Bk(e),e<253?1:e<=65535?3:e<=4294967295?5:9}gg.encodingLength=dL});var cA=K(Rf=>{"use strict";p();y();Object.defineProperty(Rf,"__esModule",{value:!0});var aA=Mf();Rf.range=e=>[...Array(e).keys()];function wde(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}Rf.reverseBuffer=wde;function vde(e){let t=e.map(hL);return t.push(Buffer.from([0])),Buffer.concat(t)}Rf.keyValsToBuffer=vde;function hL(e){let t=e.key.length,r=e.value.length,n=aA.encodingLength(t),i=aA.encodingLength(r),o=Buffer.allocUnsafe(n+t+i+r);return aA.encode(t,o,0),e.key.copy(o,n),aA.encode(r,o,n+t),e.value.copy(o,n+t+i),o}Rf.keyValToBuffer=hL;function pL(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function Ade(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,pL(n+r,9007199254740991),n+r}Rf.readUInt64LE=Ade;function Sde(e,t,r){return pL(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}Rf.writeUInt64LE=Sde});var gL=K(md=>{"use strict";p();y();Object.defineProperty(md,"__esModule",{value:!0});var yL=Un(),mL=cA(),uA=Mf();function Ede(e){if(e.key[0]!==yL.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));let t=mL.readUInt64LE(e.value,0),r=8,n=uA.decode(e.value,r);r+=uA.encodingLength(n);let i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}}md.decode=Ede;function Ide(e){let{script:t,value:r}=e,n=uA.encodingLength(t.length),i=Buffer.allocUnsafe(8+n+t.length);return mL.writeUInt64LE(i,r,0),uA.encode(t.length,i,8),t.copy(i,8+n),{key:Buffer.from([yL.InputTypes.WITNESS_UTXO]),value:i}}md.encode=Ide;md.expected="{ script: Buffer; value: number; }";function kde(e){return Buffer.isBuffer(e.script)&&typeof e.value=="number"}md.check=kde;function Tde(e,t){return!!e&&!!t&&e.witnessUtxo===void 0}md.canAdd=Tde});var xL=K(gd=>{"use strict";p();y();Object.defineProperty(gd,"__esModule",{value:!0});var bL=Un(),Ck=Mf();function Pde(e){if(e.key[0]!==bL.OutputTypes.TAP_TREE||e.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0,r=[];for(;t<e.value.length;){let n=e.value[t++],i=e.value[t++],o=Ck.decode(e.value,t);t+=Ck.encodingLength(o),r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+o)}),t+=o}return{leaves:r}}gd.decode=Pde;function _de(e){let t=Buffer.from([bL.OutputTypes.TAP_TREE]),r=[].concat(...e.leaves.map(n=>[Buffer.of(n.depth,n.leafVersion),Ck.encode(n.script.length),n.script]));return{key:t,value:Buffer.concat(r)}}gd.encode=_de;gd.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }";function Bde(e){return Array.isArray(e.leaves)&&e.leaves.every(t=>t.depth>=0&&t.depth<=128&&(t.leafVersion&254)===t.leafVersion&&Buffer.isBuffer(t.script))}gd.check=Bde;function Cde(e,t){return!!e&&!!t&&e.tapTree===void 0}gd.canAdd=Cde});var Rk=K(Mk=>{"use strict";p();y();Object.defineProperty(Mk,"__esModule",{value:!0});var Mde=e=>[...Array(e).keys()],Rde=e=>e.length===33&&[2,3].includes(e[0])||e.length===65&&e[0]===4;function Ode(e,t=Rde){function r(a){if(a.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+a.key.toString("hex"));let c=a.key.slice(1);if(!t(c))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+a.key.toString("hex"));if(a.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");let u={masterFingerprint:a.value.slice(0,4),pubkey:c,path:"m"};for(let h of Mde(a.value.length/4-1)){let l=a.value.readUInt32LE(h*4+4),g=!!(l&2147483648),x=l&2147483647;u.path+="/"+x.toString(10)+(g?"'":"")}return u}function n(a){let c=Buffer.from([e]),u=Buffer.concat([c,a.pubkey]),h=a.path.split("/"),l=Buffer.allocUnsafe(h.length*4);a.masterFingerprint.copy(l,0);let g=4;return h.slice(1).forEach(x=>{let A=x.slice(-1)==="'",E=2147483647&parseInt(A?x.slice(0,-1):x,10);A&&(E+=2147483648),l.writeUInt32LE(E,g),g+=4}),{key:u,value:l}}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";function o(a){return Buffer.isBuffer(a.pubkey)&&Buffer.isBuffer(a.masterFingerprint)&&typeof a.path=="string"&&t(a.pubkey)&&a.masterFingerprint.length===4}function s(a,c,u){let h=c.pubkey.toString("hex");return u.has(h)?!1:(u.add(h),a.filter(l=>l.pubkey.equals(c.pubkey)).length===0)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:s}}Mk.makeConverter=Ode});var wL=K(Ok=>{"use strict";p();y();Object.defineProperty(Ok,"__esModule",{value:!0});function Nde(e){return t;function t(r){let n;if(e.includes(r.key[0])&&(n=r.key.slice(1),!(n.length===33||n.length===65)||![2,3,4].includes(n[0])))throw new Error("Format Error: invalid pubkey in key 0x"+r.key.toString("hex"));return n}}Ok.makeChecker=Nde});var vL=K(Nk=>{"use strict";p();y();Object.defineProperty(Nk,"__esModule",{value:!0});function Ude(e){function t(s){if(s.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.redeemScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}Nk.makeConverter=Ude});var AL=K(Uk=>{"use strict";p();y();Object.defineProperty(Uk,"__esModule",{value:!0});var fA=Mf(),Dde=Rk(),Lde=e=>e.length===32;function Kde(e){let t=Dde.makeConverter(e,Lde);function r(s){let a=fA.decode(s.value),c=fA.encodingLength(a),u=t.decode({key:s.key,value:s.value.slice(c+a*32)}),h=new Array(a);for(let l=0,g=c;l<a;l++,g+=32)h[l]=s.value.slice(g,g+32);return Object.assign({},u,{leafHashes:h})}function n(s){let a=t.encode(s),c=fA.encodingLength(s.leafHashes.length),u=Buffer.allocUnsafe(c);fA.encode(s.leafHashes.length,u);let h=Buffer.concat([u,...s.leafHashes,a.value]);return Object.assign({},a,{value:h})}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }";function o(s){return Array.isArray(s.leafHashes)&&s.leafHashes.every(a=>Buffer.isBuffer(a)&&a.length===32)&&t.check(s)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:t.canAddToArray}}Uk.makeConverter=Kde});var SL=K(Dk=>{"use strict";p();y();Object.defineProperty(Dk,"__esModule",{value:!0});function Fde(e){function t(s){if(s.key[0]!==e||s.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+s.key.toString("hex"));if(s.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)&&s.length===32}function o(s,a){return!!s&&!!a&&s.tapInternalKey===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}Dk.makeConverter=Fde});var EL=K(Lk=>{"use strict";p();y();Object.defineProperty(Lk,"__esModule",{value:!0});function Vde(e){function t(s){if(s.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.witnessScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}Lk.makeConverter=Vde});var lA=K(bg=>{"use strict";p();y();Object.defineProperty(bg,"__esModule",{value:!0});var Eo=Un(),qde=qD(),Hde=HD(),Wde=zD(),zde=GD(),jde=YD(),Gde=ZD(),$de=XD(),Yde=tL(),Jde=iL(),Zde=sL(),Qde=uL(),Xde=lL(),ehe=gL(),the=xL(),IL=Rk(),Kk=wL(),kL=vL(),TL=AL(),PL=SL(),_L=EL(),rhe={unsignedTx:Hde,globalXpub:qde,checkPubkey:Kk.makeChecker([])};bg.globals=rhe;var nhe={nonWitnessUtxo:jde,partialSig:Gde,sighashType:Yde,finalScriptSig:Wde,finalScriptWitness:zde,porCommitment:$de,witnessUtxo:ehe,bip32Derivation:IL.makeConverter(Eo.InputTypes.BIP32_DERIVATION),redeemScript:kL.makeConverter(Eo.InputTypes.REDEEM_SCRIPT),witnessScript:_L.makeConverter(Eo.InputTypes.WITNESS_SCRIPT),checkPubkey:Kk.makeChecker([Eo.InputTypes.PARTIAL_SIG,Eo.InputTypes.BIP32_DERIVATION]),tapKeySig:Jde,tapScriptSig:Xde,tapLeafScript:Zde,tapBip32Derivation:TL.makeConverter(Eo.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:PL.makeConverter(Eo.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:Qde};bg.inputs=nhe;var ihe={bip32Derivation:IL.makeConverter(Eo.OutputTypes.BIP32_DERIVATION),redeemScript:kL.makeConverter(Eo.OutputTypes.REDEEM_SCRIPT),witnessScript:_L.makeConverter(Eo.OutputTypes.WITNESS_SCRIPT),checkPubkey:Kk.makeChecker([Eo.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:TL.makeConverter(Eo.OutputTypes.TAP_BIP32_DERIVATION),tapTree:the,tapInternalKey:PL.makeConverter(Eo.OutputTypes.TAP_INTERNAL_KEY)};bg.outputs=ihe});var ML=K(xg=>{"use strict";p();y();Object.defineProperty(xg,"__esModule",{value:!0});var yr=lA(),dA=cA(),BL=Mf(),ft=Un();function ohe(e,t){let r=0;function n(){let C=BL.decode(e,r);r+=BL.encodingLength(C);let M=e.slice(r,r+C);return r+=C,M}function i(){let C=e.readUInt32BE(r);return r+=4,C}function o(){let C=e.readUInt8(r);return r+=1,C}function s(){let C=n(),M=n();return{key:C,value:M}}function a(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");let C=e.readUInt8(r)===0;return C&&r++,C}if(i()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(o()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");let c=[],u={};for(;!a();){let C=s(),M=C.key.toString("hex");if(u[M])throw new Error("Format Error: Keys must be unique for global keymap: key "+M);u[M]=1,c.push(C)}let h=c.filter(C=>C.key[0]===ft.GlobalTypes.UNSIGNED_TX);if(h.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");let l=t(h[0].value),{inputCount:g,outputCount:x}=l.getInputOutputCounts(),A=[],E=[];for(let C of dA.range(g)){let M={},N=[];for(;!a();){let R=s(),V=R.key.toString("hex");if(M[V])throw new Error("Format Error: Keys must be unique for each input: input index "+C+" key "+V);M[V]=1,N.push(R)}A.push(N)}for(let C of dA.range(x)){let M={},N=[];for(;!a();){let R=s(),V=R.key.toString("hex");if(M[V])throw new Error("Format Error: Keys must be unique for each output: output index "+C+" key "+V);M[V]=1,N.push(R)}E.push(N)}return CL(l,{globalMapKeyVals:c,inputKeyVals:A,outputKeyVals:E})}xg.psbtFromBuffer=ohe;function ti(e,t,r){if(!t.equals(Buffer.from([r])))throw new Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}xg.checkKeyBuffer=ti;function CL(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:n}){let i={unsignedTx:e},o=0;for(let h of t)switch(h.key[0]){case ft.GlobalTypes.UNSIGNED_TX:if(ti("global",h.key,ft.GlobalTypes.UNSIGNED_TX),o>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");o++;break;case ft.GlobalTypes.GLOBAL_XPUB:i.globalXpub===void 0&&(i.globalXpub=[]),i.globalXpub.push(yr.globals.globalXpub.decode(h));break;default:i.unknownKeyVals||(i.unknownKeyVals=[]),i.unknownKeyVals.push(h)}let s=r.length,a=n.length,c=[],u=[];for(let h of dA.range(s)){let l={};for(let g of r[h])switch(yr.inputs.checkPubkey(g),g.key[0]){case ft.InputTypes.NON_WITNESS_UTXO:if(ti("input",g.key,ft.InputTypes.NON_WITNESS_UTXO),l.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");l.nonWitnessUtxo=yr.inputs.nonWitnessUtxo.decode(g);break;case ft.InputTypes.WITNESS_UTXO:if(ti("input",g.key,ft.InputTypes.WITNESS_UTXO),l.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");l.witnessUtxo=yr.inputs.witnessUtxo.decode(g);break;case ft.InputTypes.PARTIAL_SIG:l.partialSig===void 0&&(l.partialSig=[]),l.partialSig.push(yr.inputs.partialSig.decode(g));break;case ft.InputTypes.SIGHASH_TYPE:if(ti("input",g.key,ft.InputTypes.SIGHASH_TYPE),l.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");l.sighashType=yr.inputs.sighashType.decode(g);break;case ft.InputTypes.REDEEM_SCRIPT:if(ti("input",g.key,ft.InputTypes.REDEEM_SCRIPT),l.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");l.redeemScript=yr.inputs.redeemScript.decode(g);break;case ft.InputTypes.WITNESS_SCRIPT:if(ti("input",g.key,ft.InputTypes.WITNESS_SCRIPT),l.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");l.witnessScript=yr.inputs.witnessScript.decode(g);break;case ft.InputTypes.BIP32_DERIVATION:l.bip32Derivation===void 0&&(l.bip32Derivation=[]),l.bip32Derivation.push(yr.inputs.bip32Derivation.decode(g));break;case ft.InputTypes.FINAL_SCRIPTSIG:ti("input",g.key,ft.InputTypes.FINAL_SCRIPTSIG),l.finalScriptSig=yr.inputs.finalScriptSig.decode(g);break;case ft.InputTypes.FINAL_SCRIPTWITNESS:ti("input",g.key,ft.InputTypes.FINAL_SCRIPTWITNESS),l.finalScriptWitness=yr.inputs.finalScriptWitness.decode(g);break;case ft.InputTypes.POR_COMMITMENT:ti("input",g.key,ft.InputTypes.POR_COMMITMENT),l.porCommitment=yr.inputs.porCommitment.decode(g);break;case ft.InputTypes.TAP_KEY_SIG:ti("input",g.key,ft.InputTypes.TAP_KEY_SIG),l.tapKeySig=yr.inputs.tapKeySig.decode(g);break;case ft.InputTypes.TAP_SCRIPT_SIG:l.tapScriptSig===void 0&&(l.tapScriptSig=[]),l.tapScriptSig.push(yr.inputs.tapScriptSig.decode(g));break;case ft.InputTypes.TAP_LEAF_SCRIPT:l.tapLeafScript===void 0&&(l.tapLeafScript=[]),l.tapLeafScript.push(yr.inputs.tapLeafScript.decode(g));break;case ft.InputTypes.TAP_BIP32_DERIVATION:l.tapBip32Derivation===void 0&&(l.tapBip32Derivation=[]),l.tapBip32Derivation.push(yr.inputs.tapBip32Derivation.decode(g));break;case ft.InputTypes.TAP_INTERNAL_KEY:ti("input",g.key,ft.InputTypes.TAP_INTERNAL_KEY),l.tapInternalKey=yr.inputs.tapInternalKey.decode(g);break;case ft.InputTypes.TAP_MERKLE_ROOT:ti("input",g.key,ft.InputTypes.TAP_MERKLE_ROOT),l.tapMerkleRoot=yr.inputs.tapMerkleRoot.decode(g);break;default:l.unknownKeyVals||(l.unknownKeyVals=[]),l.unknownKeyVals.push(g)}c.push(l)}for(let h of dA.range(a)){let l={};for(let g of n[h])switch(yr.outputs.checkPubkey(g),g.key[0]){case ft.OutputTypes.REDEEM_SCRIPT:if(ti("output",g.key,ft.OutputTypes.REDEEM_SCRIPT),l.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");l.redeemScript=yr.outputs.redeemScript.decode(g);break;case ft.OutputTypes.WITNESS_SCRIPT:if(ti("output",g.key,ft.OutputTypes.WITNESS_SCRIPT),l.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");l.witnessScript=yr.outputs.witnessScript.decode(g);break;case ft.OutputTypes.BIP32_DERIVATION:l.bip32Derivation===void 0&&(l.bip32Derivation=[]),l.bip32Derivation.push(yr.outputs.bip32Derivation.decode(g));break;case ft.OutputTypes.TAP_INTERNAL_KEY:ti("output",g.key,ft.OutputTypes.TAP_INTERNAL_KEY),l.tapInternalKey=yr.outputs.tapInternalKey.decode(g);break;case ft.OutputTypes.TAP_TREE:ti("output",g.key,ft.OutputTypes.TAP_TREE),l.tapTree=yr.outputs.tapTree.decode(g);break;case ft.OutputTypes.TAP_BIP32_DERIVATION:l.tapBip32Derivation===void 0&&(l.tapBip32Derivation=[]),l.tapBip32Derivation.push(yr.outputs.tapBip32Derivation.decode(g));break;default:l.unknownKeyVals||(l.unknownKeyVals=[]),l.unknownKeyVals.push(g)}u.push(l)}return{globalMap:i,inputs:c,outputs:u}}xg.psbtFromKeyVals=CL});var NL=K(hA=>{"use strict";p();y();Object.defineProperty(hA,"__esModule",{value:!0});var Fk=lA(),RL=cA();function she({globalMap:e,inputs:t,outputs:r}){let{globalKeyVals:n,inputKeyVals:i,outputKeyVals:o}=OL({globalMap:e,inputs:t,outputs:r}),s=RL.keyValsToBuffer(n),a=l=>l.length===0?[Buffer.from([0])]:l.map(RL.keyValsToBuffer),c=a(i),u=a(o),h=Buffer.allocUnsafe(5);return h.writeUIntBE(482972169471,0,5),Buffer.concat([h,s].concat(c,u))}hA.psbtToBuffer=she;var ahe=(e,t)=>e.key.compare(t.key);function Vk(e,t){let r=new Set,n=Object.entries(e).reduce((o,[s,a])=>{if(s==="unknownKeyVals")return o;let c=t[s];if(c===void 0)return o;let u=(Array.isArray(a)?a:[a]).map(c.encode);return u.map(l=>l.key.toString("hex")).forEach(l=>{if(r.has(l))throw new Error("Serialize Error: Duplicate key: "+l);r.add(l)}),o.concat(u)},[]),i=e.unknownKeyVals?e.unknownKeyVals.filter(o=>!r.has(o.key.toString("hex"))):[];return n.concat(i).sort(ahe)}function OL({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:Vk(e,Fk.globals),inputKeyVals:t.map(n=>Vk(n,Fk.inputs)),outputKeyVals:r.map(n=>Vk(n,Fk.outputs))}}hA.psbtToKeyVals=OL});var qk=K(pA=>{"use strict";p();y();function UL(e){for(var t in e)pA.hasOwnProperty(t)||(pA[t]=e[t])}Object.defineProperty(pA,"__esModule",{value:!0});UL(ML());UL(NL())});var LL=K(zk=>{"use strict";p();y();Object.defineProperty(zk,"__esModule",{value:!0});var Hk=qk();function che(e){let t=e[0],r=Hk.psbtToKeyVals(t),n=e.slice(1);if(n.length===0)throw new Error("Combine: Nothing to combine");let i=DL(t);if(i===void 0)throw new Error("Combine: Self missing transaction");let o=Up(r.globalKeyVals),s=r.inputKeyVals.map(Up),a=r.outputKeyVals.map(Up);for(let c of n){let u=DL(c);if(u===void 0||!u.toBuffer().equals(i.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");let h=Hk.psbtToKeyVals(c);Up(h.globalKeyVals).forEach(Wk(o,r.globalKeyVals,h.globalKeyVals)),h.inputKeyVals.map(Up).forEach((A,E)=>A.forEach(Wk(s[E],r.inputKeyVals[E],h.inputKeyVals[E]))),h.outputKeyVals.map(Up).forEach((A,E)=>A.forEach(Wk(a[E],r.outputKeyVals[E],h.outputKeyVals[E])))}return Hk.psbtFromKeyVals(i,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}zk.combine=che;function Wk(e,t,r){return n=>{if(e.has(n))return;let i=r.filter(o=>o.key.toString("hex")===n)[0];t.push(i),e.add(n)}}function DL(e){return e.globalMap.unsignedTx}function Up(e){let t=new Set;return e.forEach(r=>{let n=r.key.toString("hex");if(t.has(n))throw new Error("Combine: KeyValue Map keys should be unique");t.add(n)}),t}});var Gk=K(Si=>{"use strict";p();y();Object.defineProperty(Si,"__esModule",{value:!0});var uhe=lA();function FL(e,t){let r=e[t];if(r===void 0)throw new Error(`No input #${t}`);return r}Si.checkForInput=FL;function VL(e,t){let r=e[t];if(r===void 0)throw new Error(`No output #${t}`);return r}Si.checkForOutput=VL;function fhe(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&t.filter(n=>n.key.equals(e.key)).length!==0)throw new Error(`Duplicate Key: ${e.key.toString("hex")}`)}Si.checkHasKey=fhe;function lhe(e){let t=0;return Object.keys(e).forEach(r=>{Number(isNaN(Number(r)))&&t++}),t}Si.getEnumLength=lhe;function dhe(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){let n=!!t.redeemScript,i=!!t.witnessScript,o=!n||!!t.finalScriptSig,s=!i||!!t.finalScriptWitness,a=!!t.finalScriptSig||!!t.finalScriptWitness;r=o&&s&&a}if(r===!1)throw new Error(`Input #${e} has too much or too little data to clean`)}Si.inputCheckUncleanFinalized=dhe;function KL(e,t,r,n){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function jk(e){return(t,r)=>{for(let n of Object.keys(t)){let i=t[n],{canAdd:o,canAddToArray:s,check:a,expected:c}=uhe[e+"s"][n]||{},u=!!s;if(a)if(u){if(!Array.isArray(i)||r[n]&&!Array.isArray(r[n]))throw new Error(`Key type ${n} must be an array`);i.every(a)||KL(e,n,c,i);let h=r[n]||[],l=new Set;if(!i.every(g=>s(h,g,l)))throw new Error("Can not add duplicate data to array");r[n]=h.concat(i)}else{if(a(i)||KL(e,n,c,i),!o(r,i))throw new Error(`Can not add duplicate data to ${e}`);r[n]=i}}}}Si.updateGlobal=jk("global");Si.updateInput=jk("input");Si.updateOutput=jk("output");function hhe(e,t){let r=e.length-1,n=FL(e,r);Si.updateInput(t,n)}Si.addInputAttributes=hhe;function phe(e,t){let r=e.length-1,n=VL(e,r);Si.updateOutput(t,n)}Si.addOutputAttributes=phe;function yhe(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t}Si.defaultVersionSetter=yhe;function mhe(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}Si.defaultLocktimeSetter=mhe});var HL=K(Jk=>{"use strict";p();y();Object.defineProperty(Jk,"__esModule",{value:!0});var ghe=LL(),qL=qk(),$k=Un(),ri=Gk(),Yk=class{constructor(t){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:t}}static fromBase64(t,r){let n=Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r){let n=Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r){let n=qL.psbtFromBuffer(t,r),i=new this(n.globalMap.unsignedTx);return Object.assign(i,n),i}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return qL.psbtToBuffer(this)}updateGlobal(t){return ri.updateGlobal(t,this.globalMap),this}updateInput(t,r){let n=ri.checkForInput(this.inputs,t);return ri.updateInput(r,n),this}updateOutput(t,r){let n=ri.checkForOutput(this.outputs,t);return ri.updateOutput(r,n),this}addUnknownKeyValToGlobal(t){return ri.checkHasKey(t,this.globalMap.unknownKeyVals,ri.getEnumLength($k.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(t),this}addUnknownKeyValToInput(t,r){let n=ri.checkForInput(this.inputs,t);return ri.checkHasKey(r,n.unknownKeyVals,ri.getEnumLength($k.InputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addUnknownKeyValToOutput(t,r){let n=ri.checkForOutput(this.outputs,t);return ri.checkHasKey(r,n.unknownKeyVals,ri.getEnumLength($k.OutputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addInput(t){this.globalMap.unsignedTx.addInput(t),this.inputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToInput(n,i)),ri.addInputAttributes(this.inputs,t),this}addOutput(t){this.globalMap.unsignedTx.addOutput(t),this.outputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToOutput(n,i)),ri.addOutputAttributes(this.outputs,t),this}clearFinalizedInput(t){let r=ri.checkForInput(this.inputs,t);ri.inputCheckUncleanFinalized(t,r);for(let n of Object.keys(r))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(n)||delete r[n];return this}combine(...t){let r=ghe.combine([this].concat(t));return Object.assign(this,r),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};Jk.Psbt=Yk});var mA=K(ur=>{"use strict";p();y();Object.defineProperty(ur,"__esModule",{value:!0});ur.signatureBlocksAction=ur.checkInputForSig=ur.pubkeyInScript=ur.pubkeyPositionInScript=ur.witnessStackToScriptWitness=ur.isP2TR=ur.isP2SHScript=ur.isP2WSHScript=ur.isP2WPKH=ur.isP2PKH=ur.isP2PK=ur.isP2MS=void 0;var WL=Mf(),wg=Ui(),yA=Np(),bhe=qa(),bd=Rp();function xd(e){return t=>{try{return e({output:t}),!0}catch{return!1}}}ur.isP2MS=xd(bd.p2ms);ur.isP2PK=xd(bd.p2pk);ur.isP2PKH=xd(bd.p2pkh);ur.isP2WPKH=xd(bd.p2wpkh);ur.isP2WSHScript=xd(bd.p2wsh);ur.isP2SHScript=xd(bd.p2sh);ur.isP2TR=xd(bd.p2tr);function xhe(e){let t=Buffer.allocUnsafe(0);function r(s){t=Buffer.concat([t,Buffer.from(s)])}function n(s){let a=t.length,c=WL.encodingLength(s);t=Buffer.concat([t,Buffer.allocUnsafe(c)]),WL.encode(s,t,a)}function i(s){n(s.length),r(s)}function o(s){n(s.length),s.forEach(i)}return o(e),t}ur.witnessStackToScriptWitness=xhe;function zL(e,t){let r=(0,bhe.hash160)(e),n=e.slice(1,33),i=wg.decompile(t);if(i===null)throw new Error("Unknown script error");return i.findIndex(o=>typeof o=="number"?!1:o.equals(e)||o.equals(r)||o.equals(n))}ur.pubkeyPositionInScript=zL;function whe(e,t){return zL(e,t)!==-1}ur.pubkeyInScript=whe;function vhe(e,t){return Ahe(e).some(n=>jL(n,wg.signature.decode,t))}ur.checkInputForSig=vhe;function jL(e,t,r){let{hashType:n}=t(e),i=[];switch(n&yA.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),n&31){case yA.Transaction.SIGHASH_ALL:break;case yA.Transaction.SIGHASH_SINGLE:case yA.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence");break}return i.indexOf(r)===-1}ur.signatureBlocksAction=jL;function Ahe(e){let t=[];if((e.partialSig||[]).length===0){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=She(e)}else t=e.partialSig;return t.map(r=>r.signature)}function She(e){let t=e.finalScriptSig?wg.decompile(e.finalScriptSig)||[]:[],r=e.finalScriptWitness?wg.decompile(e.finalScriptWitness)||[]:[];return t.concat(r).filter(n=>Buffer.isBuffer(n)&&wg.isCanonicalScriptSignature(n)).map(n=>({signature:n}))}});var $L=K(kr=>{"use strict";p();y();Object.defineProperty(kr,"__esModule",{value:!0});kr.checkTaprootInputForSigs=kr.tapTreeFromList=kr.tapTreeToList=kr.tweakInternalPubKey=kr.checkTaprootOutputFields=kr.checkTaprootInputFields=kr.isTaprootOutput=kr.isTaprootInput=kr.serializeTaprootSignature=kr.tapScriptFinalizer=kr.toXOnly=void 0;var e4=ei(),Ehe=Np(),xA=mA(),Of=Xv(),Ihe=Rp(),khe=mA(),The=e=>e.length===32?e:e.slice(1,33);kr.toXOnly=The;function Phe(e,t,r){let n=jhe(t,e,r);try{let o=Whe(t,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,xA.witnessStackToScriptWitness)(o)}}catch(i){throw new Error(`Can not finalize taproot input #${e}: ${i}`)}}kr.tapScriptFinalizer=Phe;function _he(e,t){let r=t?Buffer.from([t]):Buffer.from([]);return Buffer.concat([e,r])}kr.serializeTaprootSignature=_he;function gA(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,xA.isP2TR)(e.witnessUtxo.script))}kr.isTaprootInput=gA;function bA(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,xA.isP2TR)(t))}kr.isTaprootOutput=bA;function Bhe(e,t,r){Vhe(e,t,r),Hhe(e,t,r)}kr.checkTaprootInputFields=Bhe;function Che(e,t,r){qhe(e,t,r),Mhe(e,t)}kr.checkTaprootOutputFields=Che;function Mhe(e,t){if(!t.tapTree&&!t.tapInternalKey)return;let r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){let{script:i}=e,o=Rhe(r,n);if(i&&!i.equals(o))throw new Error("Error adding output. Script or address missmatch.")}}function Rhe(e,t){let r=t&&GL(t.leaves),{output:n}=(0,Ihe.p2tr)({internalPubkey:e,scriptTree:r});return n}function Ohe(e,t){let r=t.tapInternalKey,n=r&&(0,Of.tweakKey)(r,t.tapMerkleRoot);if(!n)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&r.toString("hex")}`);return n.x}kr.tweakInternalPubKey=Ohe;function Nhe(e){if(!(0,e4.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return Qk(e)}kr.tapTreeToList=Nhe;function GL(e=[]){return e.length===1&&e[0].depth===0?{output:e[0].script,version:e[0].leafVersion}:Fhe(e)}kr.tapTreeFromList=GL;function Uhe(e,t){return Lhe(e).some(n=>(0,khe.signatureBlocksAction)(n,Dhe,t))}kr.checkTaprootInputForSigs=Uhe;function Dhe(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||Ehe.Transaction.SIGHASH_DEFAULT}}function Lhe(e){let t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(r=>r.signature)),!t.length){let r=Khe(e.finalScriptWitness);r&&t.push(r)}return t}function Khe(e){if(!e)return;let t=e.slice(2);if(t.length===64||t.length===65)return t}function Qk(e,t=[],r=0){if(r>Of.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,e4.isTapleaf)(e)?(t.push({depth:r,leafVersion:e.version||Of.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&Qk(e[0],t,r+1),e[1]&&Qk(e[1],t,r+1),t):[]}function Fhe(e){let t;for(let r of e)if(t=Xk(r,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}function Xk(e,t,r=0){if(r>Of.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,e4.isTapleaf)(t))return;let n=Xk(e,t&&t[0],r+1);if(n)return[n,t&&t[1]];let i=Xk(e,t&&t[1],r+1);if(i)return[t&&t[0],i]}function Vhe(e,t,r){let n=gA(e)&&Dp(t),i=Dp(e)&&gA(t),o=e===t&&gA(t)&&Dp(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function qhe(e,t,r){let n=bA(e)&&Dp(t),i=Dp(e)&&bA(t),o=e===t&&bA(t)&&Dp(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function Hhe(e,t,r){if(t.tapMerkleRoot){let n=(t.tapLeafScript||[]).every(o=>Zk(o,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(o=>Zk(o,t.tapMerkleRoot));if(!n||!i)throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(i=>Zk(i,e.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}function Zk(e,t){if(!t)return!0;let r=(0,Of.tapleafHash)({output:e.script,version:e.leafVersion});return(0,Of.rootHashFromPath)(e.controlBlock,r).equals(t)}function Whe(e,t){let r=(0,Of.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(n=>n.leafHash.equals(r)).map(n=>zhe(t.script,n)).sort((n,i)=>i.positionInScript-n.positionInScript).map(n=>n.signature)}function zhe(e,t){return Object.assign({positionInScript:(0,xA.pubkeyPositionInScript)(t.pubkey,e)},t)}function jhe(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);let n=(e.tapLeafScript||[]).sort((i,o)=>i.controlBlock.length-o.controlBlock.length).find(i=>Ghe(i,e.tapScriptSig,r));if(!n)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}function Ghe(e,t,r){let n=(0,Of.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||r.equals(n))&&t.find(o=>o.leafHash.equals(n))!==void 0}function Dp(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}});var bK=K(kA=>{"use strict";p();y();Object.defineProperty(kA,"__esModule",{value:!0});kA.Psbt=void 0;var YL=HL(),JL=Mf(),Fi=Gk(),ZL=Ek(),vA=pg(),$he=is(),as=Rp(),Yhe=Xv(),Xc=Ui(),ni=Np(),Lr=$L(),cn=mA(),Jhe={network:$he.bitcoin,maximumFeeRate:5e3},r4=class e{static fromBase64(t,r={}){let n=Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r={}){let n=Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r={}){let n=YL.Psbt.fromBuffer(t,Zhe),i=new e(r,n);return rpe(i.__CACHE.__TX,i.__CACHE),i}constructor(t={},r=new YL.Psbt(new AA)){this.data=r,this.opts=Object.assign({},Jhe,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0&&this.setVersion(2);let n=(i,o,s,a)=>Object.defineProperty(i,o,{enumerable:s,writable:a});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(t){this.setVersion(t)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(t){this.setLocktime(t)}get txInputs(){return this.__CACHE.__TX.ins.map(t=>({hash:(0,vA.cloneBuffer)(t.hash),index:t.index,sequence:t.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(t=>{let r;try{r=(0,ZL.fromOutputScript)(t.script,this.opts.network)}catch{}return{script:(0,vA.cloneBuffer)(t.script),value:t.value,address:r}})}combine(...t){return this.data.combine(...t.map(r=>r.data)),this}clone(){let t=e.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}setMaximumFeeRate(t){wA(t),this.opts.maximumFeeRate=t}setVersion(t){wA(t),vg(this.data.inputs,"setVersion");let r=this.__CACHE;return r.__TX.version=t,r.__EXTRACTED_TX=void 0,this}setLocktime(t){wA(t),vg(this.data.inputs,"setLocktime");let r=this.__CACHE;return r.__TX.locktime=t,r.__EXTRACTED_TX=void 0,this}setInputSequence(t,r){wA(r),vg(this.data.inputs,"setInputSequence");let n=this.__CACHE;if(n.__TX.ins.length<=t)throw new Error("Input index too high");return n.__TX.ins[t].sequence=r,n.__EXTRACTED_TX=void 0,this}addInputs(t){return t.forEach(r=>this.addInput(r)),this}addInput(t){if(arguments.length>1||!t||t.hash===void 0||t.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,Lr.checkTaprootInputFields)(t,t,"addInput"),vg(this.data.inputs,"addInput"),t.witnessScript&&SA(t.witnessScript);let r=this.__CACHE;this.data.addInput(t);let n=r.__TX.ins[r.__TX.ins.length-1];cK(r,n);let i=this.data.inputs.length-1,o=this.data.inputs[i];return o.nonWitnessUtxo&&i4(this.__CACHE,o,i),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}addOutputs(t){return t.forEach(r=>this.addOutput(r)),this}addOutput(t){if(arguments.length>1||!t||t.value===void 0||t.address===void 0&&t.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");vg(this.data.inputs,"addOutput");let{address:r}=t;if(typeof r=="string"){let{network:i}=this.opts,o=(0,ZL.toOutputScript)(r,i);t=Object.assign(t,{script:o})}(0,Lr.checkTaprootOutputFields)(t,t,"addOutput");let n=this.__CACHE;return this.data.addOutput(t),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}extractTransaction(t){if(!this.data.inputs.every(sK))throw new Error("Not finalized");let r=this.__CACHE;if(t||Xhe(this,r,this.opts),r.__EXTRACTED_TX)return r.__EXTRACTED_TX;let n=r.__TX.clone();return pK(this.data.inputs,n,r,!0),n}getFeeRate(){return rK("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return rK("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,Fi.checkForInput)(this.data.inputs,0),Ag(this.data.inputs.length).forEach(t=>this.finalizeInput(t)),this}finalizeInput(t,r){let n=(0,Fi.checkForInput)(this.data.inputs,t);return(0,Lr.isTaprootInput)(n)?this._finalizeTaprootInput(t,n,void 0,r):this._finalizeInput(t,n,r)}finalizeTaprootInput(t,r,n=Lr.tapScriptFinalizer){let i=(0,Fi.checkForInput)(this.data.inputs,t);if((0,Lr.isTaprootInput)(i))return this._finalizeTaprootInput(t,i,r,n);throw new Error(`Cannot finalize input #${t}. Not Taproot.`)}_finalizeInput(t,r,n=npe){let{script:i,isP2SH:o,isP2WSH:s,isSegwit:a}=ape(t,r,this.__CACHE);if(!i)throw new Error(`No script found for input #${t}`);epe(r);let{finalScriptSig:c,finalScriptWitness:u}=n(t,r,i,a,o,s);if(c&&this.data.updateInput(t,{finalScriptSig:c}),u&&this.data.updateInput(t,{finalScriptWitness:u}),!c&&!u)throw new Error(`Unknown error finalizing input #${t}`);return this.data.clearFinalizedInput(t),this}_finalizeTaprootInput(t,r,n,i=Lr.tapScriptFinalizer){if(!r.witnessUtxo)throw new Error(`Cannot finalize input #${t}. Missing withness utxo.`);if(r.tapKeySig){let o=as.p2tr({output:r.witnessUtxo.script,signature:r.tapKeySig}),s=(0,cn.witnessStackToScriptWitness)(o.witness);this.data.updateInput(t,{finalScriptWitness:s})}else{let{finalScriptWitness:o}=i(t,r,n);this.data.updateInput(t,{finalScriptWitness:o})}return this.data.clearFinalizedInput(t),this}getInputType(t){let r=(0,Fi.checkForInput)(this.data.inputs,t),n=yK(t,r,this.__CACHE),i=IA(n,t,"input",r.redeemScript||dpe(r.finalScriptSig),r.witnessScript||hpe(r.finalScriptWitness)),o=i.type==="raw"?"":i.type+"-",s=gK(i.meaningfulScript);return o+s}inputHasPubkey(t,r){let n=(0,Fi.checkForInput)(this.data.inputs,t);return fpe(r,n,t,this.__CACHE)}inputHasHDKey(t,r){let n=(0,Fi.checkForInput)(this.data.inputs,t),i=XL(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}outputHasPubkey(t,r){let n=(0,Fi.checkForOutput)(this.data.outputs,t);return lpe(r,n,t,this.__CACHE)}outputHasHDKey(t,r){let n=(0,Fi.checkForOutput)(this.data.outputs,t),i=XL(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}validateSignaturesOfAllInputs(t){return(0,Fi.checkForInput)(this.data.inputs,0),Ag(this.data.inputs.length).map(n=>this.validateSignaturesOfInput(n,t)).reduce((n,i)=>i===!0&&n,!0)}validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t];return(0,Lr.isTaprootInput)(i)?this.validateSignaturesOfTaprootInput(t,r,n):this._validateSignaturesOfInput(t,r,n)}_validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t],o=(i||{}).partialSig;if(!i||!o||o.length<1)throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");let s=n?o.filter(l=>l.pubkey.equals(n)):o;if(s.length<1)throw new Error("No signatures for this pubkey");let a=[],c,u,h;for(let l of s){let g=Xc.signature.decode(l.signature),{hash:x,script:A}=h!==g.hashType?fK(t,Object.assign({},i,{sighashType:g.hashType}),this.__CACHE,!0):{hash:c,script:u};h=g.hashType,c=x,u=A,aK(l.pubkey,A,"verify"),a.push(r(l.pubkey,x,g.signature))}return a.every(l=>l===!0)}validateSignaturesOfTaprootInput(t,r,n){let i=this.data.inputs[t],o=(i||{}).tapKeySig,s=(i||{}).tapScriptSig;if(!i&&!o&&!(s&&!s.length))throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");n=n&&(0,Lr.toXOnly)(n);let a=n?n4(t,i,this.data.inputs,n,this.__CACHE):ope(t,i,this.data.inputs,this.__CACHE);if(!a.length)throw new Error("No signatures for this pubkey");let c=a.find(h=>!h.leafHash),u=0;if(o&&c){if(!r(c.pubkey,c.hash,iK(o)))return!1;u++}if(s)for(let h of s){let l=a.find(g=>h.pubkey.equals(g.pubkey));if(l){if(!r(h.pubkey,l.hash,iK(h.signature)))return!1;u++}}return u>0}signAllInputsHD(t,r=[ni.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");let n=[];for(let i of Ag(this.data.inputs.length))try{this.signInputHD(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(t,r=[ni.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));let o=[],s=[];for(let a of Ag(this.data.inputs.length))s.push(this.signInputHDAsync(a,t,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInputHD(t,r,n=[ni.Transaction.SIGHASH_ALL]){if(!r||!r.publicKey||!r.fingerprint)throw new Error("Need HDSigner to sign input");return oK(t,this.data.inputs,r).forEach(o=>this.signInput(t,o,n)),this}signInputHDAsync(t,r,n=[ni.Transaction.SIGHASH_ALL]){return new Promise((i,o)=>{if(!r||!r.publicKey||!r.fingerprint)return o(new Error("Need HDSigner to sign input"));let a=oK(t,this.data.inputs,r).map(c=>this.signInputAsync(t,c,n));return Promise.all(a).then(()=>{i()}).catch(o)})}signAllInputs(t,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");let n=[];for(let i of Ag(this.data.inputs.length))try{this.signInput(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync(t,r){return new Promise((n,i)=>{if(!t||!t.publicKey)return i(new Error("Need Signer to sign input"));let o=[],s=[];for(let[a]of this.data.inputs.entries())s.push(this.signInputAsync(a,t,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInput(t,r,n){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,Fi.checkForInput)(this.data.inputs,t);return(0,Lr.isTaprootInput)(i)?this._signTaprootInput(t,i,r,void 0,n):this._signInput(t,r,n)}signTaprootInput(t,r,n,i){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,Fi.checkForInput)(this.data.inputs,t);if((0,Lr.isTaprootInput)(o))return this._signTaprootInput(t,o,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)}_signInput(t,r,n=[ni.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=nK(this.data.inputs,t,r.publicKey,this.__CACHE,n),s=[{pubkey:r.publicKey,signature:Xc.signature.encode(r.sign(i),o)}];return this.data.updateInput(t,{partialSig:s}),this}_signTaprootInput(t,r,n,i,o=[ni.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(t,r,n,i,o),a=s.filter(u=>!u.leafHash).map(u=>(0,Lr.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType))[0],c=s.filter(u=>!!u.leafHash).map(u=>({pubkey:(0,Lr.toXOnly)(n.publicKey),signature:(0,Lr.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType),leafHash:u.leafHash}));return a&&this.data.updateInput(t,{tapKeySig:a}),c.length&&this.data.updateInput(t,{tapScriptSig:c}),this}signInputAsync(t,r,n){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,Fi.checkForInput)(this.data.inputs,t);return(0,Lr.isTaprootInput)(i)?this._signTaprootInputAsync(t,i,r,void 0,n):this._signInputAsync(t,r,n)})}signTaprootInputAsync(t,r,n,i){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,Fi.checkForInput)(this.data.inputs,t);if((0,Lr.isTaprootInput)(o))return this._signTaprootInputAsync(t,o,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)})}_signInputAsync(t,r,n=[ni.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=nK(this.data.inputs,t,r.publicKey,this.__CACHE,n);return Promise.resolve(r.sign(i)).then(s=>{let a=[{pubkey:r.publicKey,signature:Xc.signature.encode(s,o)}];this.data.updateInput(t,{partialSig:a})})}async _signTaprootInputAsync(t,r,n,i,o=[ni.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(t,r,n,i,o),a=[],c=s.filter(h=>!h.leafHash)[0];if(c){let h=Promise.resolve(n.signSchnorr(c.hash)).then(l=>({tapKeySig:(0,Lr.serializeTaprootSignature)(l,r.sighashType)}));a.push(h)}let u=s.filter(h=>!!h.leafHash);if(u.length){let h=u.map(l=>Promise.resolve(n.signSchnorr(l.hash)).then(g=>({tapScriptSig:[{pubkey:(0,Lr.toXOnly)(n.publicKey),signature:(0,Lr.serializeTaprootSignature)(g,r.sighashType),leafHash:l.leafHash}]})));a.push(...h)}return Promise.all(a).then(h=>{h.forEach(l=>this.data.updateInput(t,l))})}checkTaprootHashesForSig(t,r,n,i,o){if(typeof n.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${t}.`);let s=n4(t,r,this.data.inputs,n.publicKey,this.__CACHE,i,o);if(!s||!s.length)throw new Error(`Can not sign for input #${t} with the key ${n.publicKey.toString("hex")}`);return s}toBuffer(){return t4(this.__CACHE),this.data.toBuffer()}toHex(){return t4(this.__CACHE),this.data.toHex()}toBase64(){return t4(this.__CACHE),this.data.toBase64()}updateGlobal(t){return this.data.updateGlobal(t),this}updateInput(t,r){return r.witnessScript&&SA(r.witnessScript),(0,Lr.checkTaprootInputFields)(this.data.inputs[t],r,"updateInput"),this.data.updateInput(t,r),r.nonWitnessUtxo&&i4(this.__CACHE,this.data.inputs[t],t),this}updateOutput(t,r){let n=this.data.outputs[t];return(0,Lr.checkTaprootOutputFields)(n,r,"updateOutput"),this.data.updateOutput(t,r),this}addUnknownKeyValToGlobal(t){return this.data.addUnknownKeyValToGlobal(t),this}addUnknownKeyValToInput(t,r){return this.data.addUnknownKeyValToInput(t,r),this}addUnknownKeyValToOutput(t,r){return this.data.addUnknownKeyValToOutput(t,r),this}clearFinalizedInput(t){return this.data.clearFinalizedInput(t),this}};kA.Psbt=r4;var Zhe=e=>new AA(e),AA=class{constructor(t=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=ni.Transaction.fromBuffer(t),tpe(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(t){if(t.hash===void 0||t.index===void 0||!Buffer.isBuffer(t.hash)&&typeof t.hash!="string"||typeof t.index!="number")throw new Error("Error adding input.");let r=typeof t.hash=="string"?(0,vA.reverseBuffer)(Buffer.from(t.hash,"hex")):t.hash;this.tx.addInput(r,t.index,t.sequence)}addOutput(t){if(t.script===void 0||t.value===void 0||!Buffer.isBuffer(t.script)||typeof t.value!="number")throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}toBuffer(){return this.tx.toBuffer()}};function Qhe(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return QL(1,e.partialSig);case"multisig":let n=as.p2ms({output:t});return QL(n.m,e.partialSig,n.pubkeys);default:return!1}}function t4(e){if(e.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function QL(e,t,r){if(!t)return!1;let n;if(r?n=r.map(i=>{let o=ppe(i);return t.find(s=>s.pubkey.equals(o))}).filter(i=>!!i):n=t,n.length>e)throw new Error("Too many signatures");return n.length===e}function sK(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function XL(e){return t=>!(!t.masterFingerprint.equals(e.fingerprint)||!e.derivePath(t.path).publicKey.equals(t.pubkey))}function wA(e){if(typeof e!="number"||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function Xhe(e,t,r){let n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function vg(e,t){e.forEach(r=>{if((0,Lr.isTaprootInput)(r)?(0,Lr.checkTaprootInputForSigs)(r,t):(0,cn.checkInputForSig)(r,t))throw new Error("Can not modify transaction, signatures exist.")})}function epe(e){if(!e.sighashType||!e.partialSig)return;let{partialSig:t,sighashType:r}=e;t.forEach(n=>{let{hashType:i}=Xc.signature.decode(n.signature);if(r!==i)throw new Error("Signature sighash does not match input sighash type")})}function aK(e,t,r){if(!(0,cn.pubkeyInScript)(e,t))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function tpe(e){if(!e.ins.every(r=>r.script&&r.script.length===0&&r.witness&&r.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function rpe(e,t){e.ins.forEach(r=>{cK(t,r)})}function cK(e,t){let r=(0,vA.reverseBuffer)(Buffer.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function uK(e,t){return(r,n,i,o)=>{let s=e({redeem:{output:i}}).output;if(!n.equals(s))throw new Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}var eK=uK(as.p2sh,"Redeem script"),tK=uK(as.p2wsh,"Witness script");function rK(e,t,r,n){if(!r.every(sK))throw new Error(`PSBT must be finalized to calculate ${t}`);if(e==="__FEE_RATE"&&n.__FEE_RATE)return n.__FEE_RATE;if(e==="__FEE"&&n.__FEE)return n.__FEE;let i,o=!0;if(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),pK(r,i,n,o),e==="__FEE_RATE")return n.__FEE_RATE;if(e==="__FEE")return n.__FEE}function npe(e,t,r,n,i,o){let s=gK(r);if(!Qhe(t,r,s))throw new Error(`Can not finalize input #${e}`);return ipe(r,s,t.partialSig,n,i,o)}function ipe(e,t,r,n,i,o){let s,a,c=spe(e,t,r),u=o?as.p2wsh({redeem:c}):null,h=i?as.p2sh({redeem:u||c}):null;return n?(u?a=(0,cn.witnessStackToScriptWitness)(u.witness):a=(0,cn.witnessStackToScriptWitness)(c.witness),h&&(s=h.input)):h?s=h.input:s=c.input,{finalScriptSig:s,finalScriptWitness:a}}function nK(e,t,r,n,i){let o=(0,Fi.checkForInput)(e,t),{hash:s,sighashType:a,script:c}=fK(t,o,n,!1,i);return aK(r,c,"sign"),{hash:s,sighashType:a}}function fK(e,t,r,n,i){let o=r.__TX,s=t.sighashType||ni.Transaction.SIGHASH_ALL;dK(s,i);let a,c;if(t.nonWitnessUtxo){let l=EA(r,t,e),g=o.ins[e].hash,x=l.getHash();if(!g.equals(x))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);let A=o.ins[e].index;c=l.outs[A]}else if(t.witnessUtxo)c=t.witnessUtxo;else throw new Error("Need a Utxo input item for signing");let{meaningfulScript:u,type:h}=IA(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(h)>=0)a=o.hashForWitnessV0(e,u,c.value,s);else if((0,cn.isP2WPKH)(u)){let l=as.p2pkh({hash:u.slice(2)}).output;a=o.hashForWitnessV0(e,l,c.value,s)}else{if(t.nonWitnessUtxo===void 0&&r.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${u.toString("hex")}`);!n&&r.__UNSAFE_SIGN_NONSEGWIT!==!1&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),a=o.hashForSignature(e,u,s)}return{script:u,sighashType:s,hash:a}}function ope(e,t,r,n){let i=[];if(t.tapInternalKey){let s=lK(e,t,n);s&&i.push(s)}if(t.tapScriptSig){let s=t.tapScriptSig.map(a=>a.pubkey);i.push(...s)}return i.map(s=>n4(e,t,r,s,n)).flat()}function lK(e,t,r){let{script:n}=o4(e,t,r);return(0,cn.isP2TR)(n)?n.subarray(2,34):null}function iK(e){return e.length===64?e:e.subarray(0,64)}function n4(e,t,r,n,i,o,s){let a=i.__TX,c=t.sighashType||ni.Transaction.SIGHASH_DEFAULT;dK(c,s);let u=r.map((A,E)=>o4(E,A,i)),h=u.map(A=>A.script),l=u.map(A=>A.value),g=[];if(t.tapInternalKey&&!o){let A=lK(e,t,i)||Buffer.from([]);if((0,Lr.toXOnly)(n).equals(A)){let E=a.hashForWitnessV1(e,h,l,c);g.push({pubkey:n,hash:E})}}let x=(t.tapLeafScript||[]).filter(A=>(0,cn.pubkeyInScript)(n,A.script)).map(A=>{let E=(0,Yhe.tapleafHash)({output:A.script,version:A.leafVersion});return Object.assign({hash:E},A)}).filter(A=>!o||o.equals(A.hash)).map(A=>{let E=a.hashForWitnessV1(e,h,l,ni.Transaction.SIGHASH_DEFAULT,A.hash);return{pubkey:n,hash:E,leafHash:A.hash}});return g.concat(x)}function dK(e,t){if(t&&t.indexOf(e)<0){let r=upe(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${r}`)}}function spe(e,t,r){let n;switch(t){case"multisig":let i=cpe(e,r);n=as.p2ms({output:e,signatures:i});break;case"pubkey":n=as.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=as.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=as.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break}return n}function ape(e,t,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){let o=EA(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,cn.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}function oK(e,t,r){let n=(0,Fi.checkForInput)(t,e);if(!n.bip32Derivation||n.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(s=>{if(s.masterFingerprint.equals(r.fingerprint))return s}).filter(s=>!!s);if(i.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(s=>{let a=r.derivePath(s.path);if(!s.pubkey.equals(a.publicKey))throw new Error("pubkey did not match bip32Derivation");return a})}function cpe(e,t){return as.p2ms({output:e}).pubkeys.map(n=>(t.filter(i=>i.pubkey.equals(n))[0]||{}).signature).filter(n=>!!n)}function hK(e){let t=0;function r(s){return t+=s,e.slice(t-s,t)}function n(){let s=JL.decode(e,t);return t+=JL.decode.bytes,s}function i(){return r(n())}function o(){let s=n(),a=[];for(let c=0;c<s;c++)a.push(i());return a}return o()}function upe(e){let t=e&ni.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(e&31){case ni.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case ni.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case ni.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE";break}return t}function i4(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;let n=ni.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;let i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){let s=i.__NON_WITNESS_UTXO_BUF_CACHE[o],a=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(s!==void 0)return s;{let c=a.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=c,c}},set(s){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=s}})}function pK(e,t,r,n){let i=0;e.forEach((c,u)=>{if(n&&c.finalScriptSig&&(t.ins[u].script=c.finalScriptSig),n&&c.finalScriptWitness&&(t.ins[u].witness=hK(c.finalScriptWitness)),c.witnessUtxo)i+=c.witnessUtxo.value;else if(c.nonWitnessUtxo){let h=EA(r,c,u),l=t.ins[u].index,g=h.outs[l];i+=g.value}});let o=t.outs.reduce((c,u)=>c+u.value,0),s=i-o;if(s<0)throw new Error("Outputs are spending more than Inputs");let a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function EA(e,t,r){let n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||i4(e,t,r),n[r]}function yK(e,t,r){let{script:n}=o4(e,t,r);return n}function o4(e,t,r){if(t.witnessUtxo!==void 0)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(t.nonWitnessUtxo!==void 0){let i=EA(r,t,e).outs[r.__TX.ins[e].index];return{script:i.script,value:i.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function fpe(e,t,r,n){let i=yK(r,t,n),{meaningfulScript:o}=IA(i,r,"input",t.redeemScript,t.witnessScript);return(0,cn.pubkeyInScript)(e,o)}function lpe(e,t,r,n){let i=n.__TX.outs[r].script,{meaningfulScript:o}=IA(i,r,"output",t.redeemScript,t.witnessScript);return(0,cn.pubkeyInScript)(e,o)}function dpe(e){if(!e)return;let t=Xc.decompile(e);if(!t)return;let r=t[t.length-1];if(!(!Buffer.isBuffer(r)||mK(r)||ype(r)||!Xc.decompile(r)))return r}function hpe(e){if(!e)return;let t=hK(e),r=t[t.length-1];if(!(mK(r)||!Xc.decompile(r)))return r}function ppe(e){if(e.length===65){let t=e[64]&1,r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}function mK(e){return e.length===33&&Xc.isCanonicalPubKey(e)}function ype(e){return Xc.isCanonicalScriptSignature(e)}function IA(e,t,r,n,i){let o=(0,cn.isP2SHScript)(e),s=o&&n&&(0,cn.isP2WSHScript)(n),a=(0,cn.isP2WSHScript)(e);if(o&&n===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&i===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let c;return s?(c=i,eK(t,e,n,r),tK(t,n,i,r),SA(c)):a?(c=i,tK(t,e,i,r),SA(c)):o?(c=n,eK(t,e,n,r)):c=e,{meaningfulScript:c,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function SA(e){if((0,cn.isP2WPKH)(e)||(0,cn.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function gK(e){return(0,cn.isP2WPKH)(e)?"witnesspubkeyhash":(0,cn.isP2PKH)(e)?"pubkeyhash":(0,cn.isP2MS)(e)?"multisig":(0,cn.isP2PK)(e)?"pubkey":"nonstandard"}function Ag(e){return[...Array(e).keys()]}});var Sg=K(Wr=>{"use strict";p();y();Object.defineProperty(Wr,"__esModule",{value:!0});Wr.initEccLib=Wr.Transaction=Wr.opcodes=Wr.Psbt=Wr.Block=Wr.script=Wr.payments=Wr.networks=Wr.crypto=Wr.address=void 0;var mpe=Ek();Wr.address=mpe;var gpe=qa();Wr.crypto=gpe;var bpe=is();Wr.networks=bpe;var xpe=Rp();Wr.payments=xpe;var wpe=Ui();Wr.script=wpe;var vpe=FD();Object.defineProperty(Wr,"Block",{enumerable:!0,get:function(){return vpe.Block}});var Ape=bK();Object.defineProperty(Wr,"Psbt",{enumerable:!0,get:function(){return Ape.Psbt}});var Spe=Iv();Object.defineProperty(Wr,"opcodes",{enumerable:!0,get:function(){return Spe.OPS}});var Epe=Np();Object.defineProperty(Wr,"Transaction",{enumerable:!0,get:function(){return Epe.Transaction}});var Ipe=Qv();Object.defineProperty(Wr,"initEccLib",{enumerable:!0,get:function(){return Ipe.initEccLib}})});var Hp=K(WA=>{"use strict";p();y();Object.defineProperty(WA,"__esModule",{value:!0});WA.AppAuthError=void 0;var a0e=function(){function e(t,r){this.message=t,this.extras=r}return e}();WA.AppAuthError=a0e});var zA=K(Ya=>{"use strict";p();y();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.DefaultCrypto=Ya.textEncodeLite=Ya.urlSafe=Ya.bufferToString=void 0;var c0e=TB(),lF=Hp(),dF=typeof self<"u"&&!!self.crypto,u0e=dF&&!!self.crypto.subtle,C4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function hF(e){for(var t=[],r=0;r<e.byteLength;r+=1){var n=e[r]%C4.length;t.push(C4[n])}return t.join("")}Ya.bufferToString=hF;function pF(e){var t=c0e.fromByteArray(new Uint8Array(e));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}Ya.urlSafe=pF;function yF(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}Ya.textEncodeLite=yF;var f0e=function(){function e(){}return e.prototype.generateRandom=function(t){var r=new Uint8Array(t);if(dF)self.crypto.getRandomValues(r);else for(var n=0;n<t;n+=1)r[n]=Math.random()*C4.length|0;return hF(r)},e.prototype.deriveChallenge=function(t){return t.length<43||t.length>128?Promise.reject(new lF.AppAuthError("Invalid code length.")):u0e?new Promise(function(r,n){self.crypto.subtle.digest("SHA-256",yF(t)).then(function(i){return r(pF(new Uint8Array(i)))},function(i){return n(i)})}):Promise.reject(new lF.AppAuthError("window.crypto.subtle is unavailable."))},e}();Ya.DefaultCrypto=f0e});var M4=K(ko=>{"use strict";p();y();Object.defineProperty(ko,"__esModule",{value:!0});ko.IS_PROFILE=ko.IS_LOG=ko.setFlag=ko.Flags=void 0;ko.Flags={IS_LOG:!0,IS_PROFILE:!1};function l0e(e,t){ko.Flags[e]=t}ko.setFlag=l0e;ko.IS_LOG=ko.Flags.IS_LOG,ko.IS_PROFILE=ko.Flags.IS_PROFILE});var Og=K(Ff=>{"use strict";p();y();var R4=Ff&&Ff.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.profile=Ff.log=void 0;var mF=M4();function O4(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(mF.Flags.IS_LOG){var n=t?t.length:0;n>0?console.log.apply(console,R4([e],t,!1)):console.log(e)}}Ff.log=O4;var d0e=typeof self<"u"&&!!self.performance&&!!console.profile;function h0e(e,t,r){return mF.Flags.IS_PROFILE?p0e(e,t,r):r}Ff.profile=h0e;function p0e(e,t,r){var n=r.value,i=n.name;return i||(i="anonymous function"),d0e?r.value=function(o){console.profile(i);var s=self.performance.now(),a=n.call.apply(n,R4([this||self],o,!1)),c=self.performance.now()-s;return console.log("".concat(i," took ").concat(c," ms")),console.profileEnd(),a}:r.value=function(o){O4("Profile start ".concat(i));var s=Date.now(),a=n.call.apply(n,R4([this||self],o,!1)),c=Date.now()-s;return O4("Profile end ".concat(i," took ").concat(c," ms.")),a},r}});var N4=K(jA=>{"use strict";p();y();Object.defineProperty(jA,"__esModule",{value:!0});jA.AuthorizationRequest=void 0;var y0e=zA(),m0e=Og(),g0e=10,b0e=function(e){return e.generateRandom(g0e)},x0e=function(){function e(t,r,n){r===void 0&&(r=new y0e.DefaultCrypto),n===void 0&&(n=!0),this.crypto=r,this.usePkce=n,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||b0e(r),this.extras=t.extras,this.internal=t.internal}return e.prototype.setupCodeVerifier=function(){var t=this;if(this.usePkce){var r=this.crypto.generateRandom(128),n=this.crypto.deriveChallenge(r).catch(function(i){(0,m0e.log)("Unable to generate PKCE challenge. Not using PKCE",i)});return n.then(function(i){i&&(t.internal=t.internal||{},t.internal.code_verifier=r,t.extras=t.extras||{},t.extras.code_challenge=i,t.extras.code_challenge_method="S256")})}else return Promise.resolve()},e.prototype.toJson=function(){var t=this;return this.setupCodeVerifier().then(function(){return{response_type:t.responseType,client_id:t.clientId,redirect_uri:t.redirectUri,scope:t.scope,state:t.state,extras:t.extras,internal:t.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();jA.AuthorizationRequest=x0e});var gF=K(GA=>{"use strict";p();y();Object.defineProperty(GA,"__esModule",{value:!0});GA.requireValidUrl=void 0;var w0e=Hp();function v0e(e){try{return new URL(e),e}catch{throw new w0e.AppAuthError("Invalid input url ".concat(e))}}GA.requireValidUrl=v0e});var D4=K(nu=>{"use strict";p();y();Object.defineProperty(nu,"__esModule",{value:!0});nu.AuthorizationRequestHandler=nu.BUILT_IN_PARAMETERS=nu.AuthorizationNotifier=void 0;var U4=Og(),A0e=gF(),S0e=function(){function e(){this.listener=null}return e.prototype.setAuthorizationListener=function(t){this.listener=t},e.prototype.onAuthorizationComplete=function(t,r,n){this.listener&&this.listener(t,r,n)},e}();nu.AuthorizationNotifier=S0e;nu.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var E0e=function(){function e(t,r){this.utils=t,this.crypto=r,this.notifier=null}return e.prototype.buildRequestUrl=function(t,r){var n={redirect_uri:r.redirectUri,client_id:r.clientId,response_type:r.responseType,state:r.state,scope:r.scope};if(r.extras)for(var i in r.extras)r.extras.hasOwnProperty(i)&&nu.BUILT_IN_PARAMETERS.indexOf(i)<0&&(n[i]=r.extras[i]);var o=this.utils.stringify(n),s=(0,A0e.requireValidUrl)(t.authorizationEndpoint),a="".concat(s,"?").concat(o);return a},e.prototype.completeAuthorizationRequestIfPossible=function(){var t=this;return(0,U4.log)("Checking to see if there is an authorization response to be delivered."),this.notifier||(0,U4.log)(`Notifier is not present on AuthorizationRequest handler.
          No delivery of result will be possible`),this.completeAuthorizationRequest().then(function(r){r||(0,U4.log)("No result is available yet."),r&&t.notifier&&t.notifier.onAuthorizationComplete(r.request,r.response,r.error)})},e.prototype.setAuthorizationNotifier=function(t){return this.notifier=t,this},e}();nu.AuthorizationRequestHandler=E0e});var L4=K(Wp=>{"use strict";p();y();Object.defineProperty(Wp,"__esModule",{value:!0});Wp.AuthorizationError=Wp.AuthorizationResponse=void 0;var I0e=function(){function e(t){this.code=t.code,this.state=t.state}return e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();Wp.AuthorizationResponse=I0e;var k0e=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri,this.state=t.state}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();Wp.AuthorizationError=k0e});var YA=K(cs=>{"use strict";p();y();var F4=cs&&cs.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(cs,"__esModule",{value:!0});cs.TestRequestor=cs.FetchRequestor=cs.JQueryRequestor=cs.Requestor=void 0;var K4=Hp(),$A=function(){function e(){}return e}();cs.Requestor=$A;var T0e=function(e){F4(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.xhr=function(r){var n=$.ajax(r);return new Promise(function(i,o){n.then(function(s,a,c){i(s)},function(s,a,c){o(new K4.AppAuthError(c))})})},t}($A);cs.JQueryRequestor=T0e;var P0e=function(e){F4(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.xhr=function(r){if(!r.url)return Promise.reject(new K4.AppAuthError("A URL must be provided."));var n=new URL(r.url),i={};if(i.method=r.method,i.mode="cors",r.data)if(r.method&&r.method.toUpperCase()==="POST")i.body=r.data;else{var o=new URLSearchParams(r.data);o.forEach(function(c,u){n.searchParams.append(u,c)})}if(i.headers={},r.headers)for(var s in r.headers)r.headers.hasOwnProperty(s)&&(i.headers[s]=r.headers[s]);var a=r.dataType&&r.dataType.toLowerCase()==="json";return a&&(i.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(n.toString(),i).then(function(c){if(c.status>=200&&c.status<300){var u=c.headers.get("content-type");return a||u&&u.indexOf("application/json")!==-1?c.json():c.text()}else return Promise.reject(new K4.AppAuthError(c.status.toString(),c.statusText))})},t}($A);cs.FetchRequestor=P0e;var _0e=function(e){F4(t,e);function t(r){var n=e.call(this)||this;return n.promise=r,n}return t.prototype.xhr=function(r){return this.promise},t}($A);cs.TestRequestor=_0e});var bF=K(JA=>{"use strict";p();y();Object.defineProperty(JA,"__esModule",{value:!0});JA.AuthorizationServiceConfiguration=void 0;var B0e=YA(),C0e=".well-known",M0e="openid-configuration",R0e=function(){function e(t){this.authorizationEndpoint=t.authorization_endpoint,this.tokenEndpoint=t.token_endpoint,this.revocationEndpoint=t.revocation_endpoint,this.userInfoEndpoint=t.userinfo_endpoint,this.endSessionEndpoint=t.end_session_endpoint}return e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,r){var n="".concat(t,"/").concat(C0e,"/").concat(M0e),i=r||new B0e.JQueryRequestor;return i.xhr({url:n,dataType:"json",method:"GET"}).then(function(o){return new e(o)})},e}();JA.AuthorizationServiceConfiguration=R0e});var QA=K(ZA=>{"use strict";p();y();Object.defineProperty(ZA,"__esModule",{value:!0});ZA.BasicQueryStringUtils=void 0;var O0e=function(){function e(){}return e.prototype.parse=function(t,r){return r?this.parseQueryString(t.hash):this.parseQueryString(t.search)},e.prototype.parseQueryString=function(t){var r={};t=t.trim().replace(/^(\?|#|&)/,"");for(var n=t.split("&"),i=0;i<n.length;i+=1){var o=n[i],s=o.split("=");if(s.length>=2){var a=decodeURIComponent(s.shift()),c=s.length>0?s.join("="):null;c&&(r[a]=decodeURIComponent(c))}}return r},e.prototype.stringify=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));return r.join("&")},e}();ZA.BasicQueryStringUtils=O0e});var V4=K(Vf=>{"use strict";p();y();var N0e=Vf&&Vf.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Vf,"__esModule",{value:!0});Vf.LocalStorageBackend=Vf.StorageBackend=void 0;var xF=function(){function e(){}return e}();Vf.StorageBackend=xF;var U0e=function(e){N0e(t,e);function t(r){var n=e.call(this)||this;return n.storage=r||self.localStorage,n}return t.prototype.getItem=function(r){var n=this;return new Promise(function(i,o){var s=n.storage.getItem(r);i(s||null)})},t.prototype.removeItem=function(r){var n=this;return new Promise(function(i,o){n.storage.removeItem(r),i()})},t.prototype.clear=function(){var r=this;return new Promise(function(n,i){r.storage.clear(),n()})},t.prototype.setItem=function(r,n){var i=this;return new Promise(function(o,s){i.storage.setItem(r,n),o()})},t}(xF);Vf.LocalStorageBackend=U0e});var AF=K(zp=>{"use strict";p();y();var D0e=zp&&zp.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(zp,"__esModule",{value:!0});zp.RedirectRequestHandler=void 0;var L0e=N4(),K0e=D4(),wF=L4(),F0e=zA(),XA=Og(),V0e=QA(),q0e=V4(),q4=function(e){return"".concat(e,"_appauth_authorization_request")},vF=function(e){return"".concat(e,"_appauth_authorization_service_configuration")},H4="appauth_current_authorization_request",H0e=function(e){D0e(t,e);function t(r,n,i,o){r===void 0&&(r=new q0e.LocalStorageBackend),n===void 0&&(n=new V0e.BasicQueryStringUtils),i===void 0&&(i=self.location),o===void 0&&(o=new F0e.DefaultCrypto);var s=e.call(this,n,o)||this;return s.storageBackend=r,s.locationLike=i,s}return t.prototype.performAuthorizationRequest=function(r,n){var i=this,o=this.crypto.generateRandom(10),s=Promise.all([this.storageBackend.setItem(H4,o),n.toJson().then(function(a){return i.storageBackend.setItem(q4(o),JSON.stringify(a))}),this.storageBackend.setItem(vF(o),JSON.stringify(r.toJson()))]);s.then(function(){var a=i.buildRequestUrl(r,n);(0,XA.log)("Making a request to ",n,a),i.locationLike.assign(a)})},t.prototype.completeAuthorizationRequest=function(){var r=this;return this.storageBackend.getItem(H4).then(function(n){return n?r.storageBackend.getItem(q4(n)).then(function(i){return JSON.parse(i)}).then(function(i){return new L0e.AuthorizationRequest(i)}).then(function(i){var o="".concat(r.locationLike.origin).concat(r.locationLike.pathname),s=r.utils.parse(r.locationLike,!0),a=s.state,c=s.code,u=s.error;(0,XA.log)("Potential authorization request ",o,s,a,c,u);var h=a===i.state,l=null,g=null;if(h){if(u){var x=s.error_uri,A=s.error_description;g=new wF.AuthorizationError({error:u,error_description:A,error_uri:x,state:a})}else l=new wF.AuthorizationResponse({code:c,state:a});return Promise.all([r.storageBackend.removeItem(H4),r.storageBackend.removeItem(q4(n)),r.storageBackend.removeItem(vF(n))]).then(function(){return(0,XA.log)("Delivering authorization response"),{request:i,response:l,error:g}})}else return(0,XA.log)("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)}):null})},t}(K0e.AuthorizationRequestHandler);zp.RedirectRequestHandler=H0e});var SF=K(e2=>{"use strict";p();y();Object.defineProperty(e2,"__esModule",{value:!0});e2.RevokeTokenRequest=void 0;var W0e=function(){function e(t){this.token=t.token,this.tokenTypeHint=t.token_type_hint,this.clientId=t.client_id,this.clientSecret=t.client_secret}return e.prototype.toJson=function(){var t={token:this.token};return this.tokenTypeHint&&(t.token_type_hint=this.tokenTypeHint),this.clientId&&(t.client_id=this.clientId),this.clientSecret&&(t.client_secret=this.clientSecret),t},e.prototype.toStringMap=function(){var t=this.toJson();return t},e}();e2.RevokeTokenRequest=W0e});var EF=K(qf=>{"use strict";p();y();Object.defineProperty(qf,"__esModule",{value:!0});qf.TokenRequest=qf.GRANT_TYPE_REFRESH_TOKEN=qf.GRANT_TYPE_AUTHORIZATION_CODE=void 0;qf.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code";qf.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var z0e=function(){function e(t){this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.grantType=t.grant_type,this.code=t.code,this.refreshToken=t.refresh_token,this.extras=t.extras}return e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var t={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(t.code=this.code),this.refreshToken&&(t.refresh_token=this.refreshToken),this.extras)for(var r in this.extras)this.extras.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=this.extras[r]);return t},e}();qf.TokenRequest=z0e});var W4=K(Ja=>{"use strict";p();y();Object.defineProperty(Ja,"__esModule",{value:!0});Ja.TokenError=Ja.TokenResponse=Ja.nowInSeconds=void 0;var j0e=10*60*-1,G0e=function(){return Math.round(new Date().getTime()/1e3)};Ja.nowInSeconds=G0e;var $0e=function(){function e(t){this.accessToken=t.access_token,this.tokenType=t.token_type||"bearer",t.expires_in&&(this.expiresIn=parseInt(t.expires_in,10)),this.refreshToken=t.refresh_token,this.scope=t.scope,this.idToken=t.id_token,this.issuedAt=t.issued_at||(0,Ja.nowInSeconds)()}return e.prototype.toJson=function(){var t;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:(t=this.expiresIn)===null||t===void 0?void 0:t.toString()}},e.prototype.isValid=function(t){if(t===void 0&&(t=j0e),this.expiresIn){var r=(0,Ja.nowInSeconds)();return r<this.issuedAt+this.expiresIn+t}else return!0},e}();Ja.TokenResponse=$0e;var Y0e=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();Ja.TokenError=Y0e});var kF=K(t2=>{"use strict";p();y();Object.defineProperty(t2,"__esModule",{value:!0});t2.BaseTokenRequestHandler=void 0;var J0e=Hp(),Z0e=QA(),IF=W4(),Q0e=YA(),X0e=function(){function e(t,r){t===void 0&&(t=new Q0e.JQueryRequestor),r===void 0&&(r=new Z0e.BasicQueryStringUtils),this.requestor=t,this.utils=r}return e.prototype.isTokenResponse=function(t){return t.error===void 0},e.prototype.performRevokeTokenRequest=function(t,r){var n=this.requestor.xhr({url:t.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return n.then(function(i){return!0})},e.prototype.performTokenRequest=function(t,r){var n=this,i=this.requestor.xhr({url:t.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return i.then(function(o){return n.isTokenResponse(o)?new IF.TokenResponse(o):Promise.reject(new J0e.AppAuthError(o.error,new IF.TokenError(o)))})},e}();t2.BaseTokenRequestHandler=X0e});var PF=K(TF=>{"use strict";p();y();Object.defineProperty(TF,"__esModule",{value:!0})});var z4=K(Kr=>{"use strict";p();y();var eye=Kr&&Kr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),oi=Kr&&Kr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&eye(t,e,r)};Object.defineProperty(Kr,"__esModule",{value:!0});oi(N4(),Kr);oi(D4(),Kr);oi(L4(),Kr);oi(bF(),Kr);oi(zA(),Kr);oi(Hp(),Kr);oi(M4(),Kr);oi(Og(),Kr);oi(QA(),Kr);oi(AF(),Kr);oi(SF(),Kr);oi(V4(),Kr);oi(EF(),Kr);oi(kF(),Kr);oi(W4(),Kr);oi(PF(),Kr);oi(YA(),Kr)});var kq=K((ob,l0)=>{p();y();var Age=200,JV="__lodash_hash_undefined__",ZV=9007199254740991,GT="[object Arguments]",Sge="[object Array]",QV="[object Boolean]",XV="[object Date]",Ege="[object Error]",$T="[object Function]",eq="[object GeneratorFunction]",A2="[object Map]",tq="[object Number]",YT="[object Object]",KV="[object Promise]",rq="[object RegExp]",S2="[object Set]",nq="[object String]",iq="[object Symbol]",VT="[object WeakMap]",oq="[object ArrayBuffer]",E2="[object DataView]",sq="[object Float32Array]",aq="[object Float64Array]",cq="[object Int8Array]",uq="[object Int16Array]",fq="[object Int32Array]",lq="[object Uint8Array]",dq="[object Uint8ClampedArray]",hq="[object Uint16Array]",pq="[object Uint32Array]",Ige=/[\\^$.*+?()[\]{}|]/g,kge=/\w*$/,Tge=/^\[object .+?Constructor\]$/,Pge=/^(?:0|[1-9]\d*)$/,fr={};fr[GT]=fr[Sge]=fr[oq]=fr[E2]=fr[QV]=fr[XV]=fr[sq]=fr[aq]=fr[cq]=fr[uq]=fr[fq]=fr[A2]=fr[tq]=fr[YT]=fr[rq]=fr[S2]=fr[nq]=fr[iq]=fr[lq]=fr[dq]=fr[hq]=fr[pq]=!0;fr[Ege]=fr[$T]=fr[VT]=!1;var _ge=typeof self=="object"&&self&&self.Object===Object&&self,Bge=typeof self=="object"&&self&&self.Object===Object&&self,cu=_ge||Bge||Function("return this")(),yq=typeof ob=="object"&&ob&&!ob.nodeType&&ob,FV=yq&&typeof l0=="object"&&l0&&!l0.nodeType&&l0,Cge=FV&&FV.exports===yq;function Mge(e,t){return e.set(t[0],t[1]),e}function Rge(e,t){return e.add(t),e}function Oge(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function Nge(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function mq(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function Uge(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Dge(e,t){return e?.[t]}function gq(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function VV(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function JT(e,t){return function(r){return e(t(r))}}function qV(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Lge=Array.prototype,Kge=Function.prototype,I2=Object.prototype,FT=cu["__core-js_shared__"],HV=function(){var e=/[^.]+$/.exec(FT&&FT.keys&&FT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),bq=Kge.toString,$f=I2.hasOwnProperty,k2=I2.toString,Fge=RegExp("^"+bq.call($f).replace(Ige,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),WV=Cge?cu.Buffer:void 0,zV=cu.Symbol,jV=cu.Uint8Array,Vge=JT(Object.getPrototypeOf,Object),qge=Object.create,Hge=I2.propertyIsEnumerable,Wge=Lge.splice,GV=Object.getOwnPropertySymbols,zge=WV?WV.isBuffer:void 0,jge=JT(Object.keys,Object),qT=p0(cu,"DataView"),sb=p0(cu,"Map"),HT=p0(cu,"Promise"),WT=p0(cu,"Set"),zT=p0(cu,"WeakMap"),ab=p0(Object,"create"),Gge=Od(qT),$ge=Od(sb),Yge=Od(HT),Jge=Od(WT),Zge=Od(zT),$V=zV?zV.prototype:void 0,YV=$V?$V.valueOf:void 0;function Rd(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Qge(){this.__data__=ab?ab(null):{}}function Xge(e){return this.has(e)&&delete this.__data__[e]}function ebe(e){var t=this.__data__;if(ab){var r=t[e];return r===JV?void 0:r}return $f.call(t,e)?t[e]:void 0}function tbe(e){var t=this.__data__;return ab?t[e]!==void 0:$f.call(t,e)}function rbe(e,t){var r=this.__data__;return r[e]=ab&&t===void 0?JV:t,this}Rd.prototype.clear=Qge;Rd.prototype.delete=Xge;Rd.prototype.get=ebe;Rd.prototype.has=tbe;Rd.prototype.set=rbe;function uu(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function nbe(){this.__data__=[]}function ibe(e){var t=this.__data__,r=T2(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Wge.call(t,r,1),!0}function obe(e){var t=this.__data__,r=T2(t,e);return r<0?void 0:t[r][1]}function sbe(e){return T2(this.__data__,e)>-1}function abe(e,t){var r=this.__data__,n=T2(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}uu.prototype.clear=nbe;uu.prototype.delete=ibe;uu.prototype.get=obe;uu.prototype.has=sbe;uu.prototype.set=abe;function d0(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function cbe(){this.__data__={hash:new Rd,map:new(sb||uu),string:new Rd}}function ube(e){return P2(this,e).delete(e)}function fbe(e){return P2(this,e).get(e)}function lbe(e){return P2(this,e).has(e)}function dbe(e,t){return P2(this,e).set(e,t),this}d0.prototype.clear=cbe;d0.prototype.delete=ube;d0.prototype.get=fbe;d0.prototype.has=lbe;d0.prototype.set=dbe;function h0(e){this.__data__=new uu(e)}function hbe(){this.__data__=new uu}function pbe(e){return this.__data__.delete(e)}function ybe(e){return this.__data__.get(e)}function mbe(e){return this.__data__.has(e)}function gbe(e,t){var r=this.__data__;if(r instanceof uu){var n=r.__data__;if(!sb||n.length<Age-1)return n.push([e,t]),this;r=this.__data__=new d0(n)}return r.set(e,t),this}h0.prototype.clear=hbe;h0.prototype.delete=pbe;h0.prototype.get=ybe;h0.prototype.has=mbe;h0.prototype.set=gbe;function bbe(e,t){var r=QT(e)||qbe(e)?Uge(e.length,String):[],n=r.length,i=!!n;for(var o in e)(t||$f.call(e,o))&&!(i&&(o=="length"||Lbe(o,n)))&&r.push(o);return r}function xq(e,t,r){var n=e[t];(!($f.call(e,t)&&Sq(n,r))||r===void 0&&!(t in e))&&(e[t]=r)}function T2(e,t){for(var r=e.length;r--;)if(Sq(e[r][0],t))return r;return-1}function xbe(e,t){return e&&wq(t,XT(t),e)}function jT(e,t,r,n,i,o,s){var a;if(n&&(a=o?n(e,i,o,s):n(e)),a!==void 0)return a;if(!_2(e))return e;var c=QT(e);if(c){if(a=Nbe(e),!t)return Mbe(e,a)}else{var u=Md(e),h=u==$T||u==eq;if(Wbe(e))return Ibe(e,t);if(u==YT||u==GT||h&&!o){if(gq(e))return o?e:{};if(a=Ube(h?{}:e),!t)return Rbe(e,xbe(a,e))}else{if(!fr[u])return o?e:{};a=Dbe(e,u,jT,t)}}s||(s=new h0);var l=s.get(e);if(l)return l;if(s.set(e,a),!c)var g=r?Obe(e):XT(e);return Oge(g||e,function(x,A){g&&(A=x,x=e[A]),xq(a,A,jT(x,t,r,n,A,e,s))}),a}function wbe(e){return _2(e)?qge(e):{}}function vbe(e,t,r){var n=t(e);return QT(e)?n:Nge(n,r(e))}function Abe(e){return k2.call(e)}function Sbe(e){if(!_2(e)||Fbe(e))return!1;var t=Iq(e)||gq(e)?Fge:Tge;return t.test(Od(e))}function Ebe(e){if(!Aq(e))return jge(e);var t=[];for(var r in Object(e))$f.call(e,r)&&r!="constructor"&&t.push(r);return t}function Ibe(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function ZT(e){var t=new e.constructor(e.byteLength);return new jV(t).set(new jV(e)),t}function kbe(e,t){var r=t?ZT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Tbe(e,t,r){var n=t?r(VV(e),!0):VV(e);return mq(n,Mge,new e.constructor)}function Pbe(e){var t=new e.constructor(e.source,kge.exec(e));return t.lastIndex=e.lastIndex,t}function _be(e,t,r){var n=t?r(qV(e),!0):qV(e);return mq(n,Rge,new e.constructor)}function Bbe(e){return YV?Object(YV.call(e)):{}}function Cbe(e,t){var r=t?ZT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Mbe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function wq(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=n?n(r[s],e[s],s,r,e):void 0;xq(r,s,a===void 0?e[s]:a)}return r}function Rbe(e,t){return wq(e,vq(e),t)}function Obe(e){return vbe(e,XT,vq)}function P2(e,t){var r=e.__data__;return Kbe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function p0(e,t){var r=Dge(e,t);return Sbe(r)?r:void 0}var vq=GV?JT(GV,Object):Gbe,Md=Abe;(qT&&Md(new qT(new ArrayBuffer(1)))!=E2||sb&&Md(new sb)!=A2||HT&&Md(HT.resolve())!=KV||WT&&Md(new WT)!=S2||zT&&Md(new zT)!=VT)&&(Md=function(e){var t=k2.call(e),r=t==YT?e.constructor:void 0,n=r?Od(r):void 0;if(n)switch(n){case Gge:return E2;case $ge:return A2;case Yge:return KV;case Jge:return S2;case Zge:return VT}return t});function Nbe(e){var t=e.length,r=e.constructor(t);return t&&typeof e[0]=="string"&&$f.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function Ube(e){return typeof e.constructor=="function"&&!Aq(e)?wbe(Vge(e)):{}}function Dbe(e,t,r,n){var i=e.constructor;switch(t){case oq:return ZT(e);case QV:case XV:return new i(+e);case E2:return kbe(e,n);case sq:case aq:case cq:case uq:case fq:case lq:case dq:case hq:case pq:return Cbe(e,n);case A2:return Tbe(e,n,r);case tq:case nq:return new i(e);case rq:return Pbe(e);case S2:return _be(e,n,r);case iq:return Bbe(e)}}function Lbe(e,t){return t=t??ZV,!!t&&(typeof e=="number"||Pge.test(e))&&e>-1&&e%1==0&&e<t}function Kbe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Fbe(e){return!!HV&&HV in e}function Aq(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||I2;return e===r}function Od(e){if(e!=null){try{return bq.call(e)}catch{}try{return e+""}catch{}}return""}function Vbe(e){return jT(e,!0,!0)}function Sq(e,t){return e===t||e!==e&&t!==t}function qbe(e){return Hbe(e)&&$f.call(e,"callee")&&(!Hge.call(e,"callee")||k2.call(e)==GT)}var QT=Array.isArray;function Eq(e){return e!=null&&zbe(e.length)&&!Iq(e)}function Hbe(e){return jbe(e)&&Eq(e)}var Wbe=zge||$be;function Iq(e){var t=_2(e)?k2.call(e):"";return t==$T||t==eq}function zbe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ZV}function _2(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function jbe(e){return!!e&&typeof e=="object"}function XT(e){return Eq(e)?bbe(e):Ebe(e)}function Gbe(){return[]}function $be(){return!1}l0.exports=Vbe});var sW=K((vet,oW)=>{p();y();var Vt={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function ls(e,t){if(!e)throw new Error(t)}function Mt(e,t,r){if(ls(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),i=`Expected ${e} to be an Uint8Array with length [${n}]`;ls(r.includes(t.length),i)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;ls(t.length===r,n)}}function Hd(e){ls(_0(e)==="Boolean","Expected compressed to be a Boolean")}function ua(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),Mt("output",e,t),e}function _0(e){return Object.prototype.toString.call(e).slice(8,-1)}oW.exports=e=>({contextRandomize(t){switch(ls(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&Mt("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(Vt.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return Mt("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(Mt("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(Vt.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(Mt("private key",t,32),Mt("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(Vt.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(Mt("private key",t,32),Mt("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(Vt.TWEAK_MUL)}},publicKeyVerify(t){return Mt("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch(Mt("private key",t,32),Hd(r),n=ua(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(Vt.SECKEY_INVALID);case 2:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch(Mt("public key",t,[33,65]),Hd(r),n=ua(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch(Mt("public key",t,[33,65]),Hd(r),n=ua(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.IMPOSSIBLE_CASE);case 3:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){ls(Array.isArray(t),"Expected public keys to be an Array"),ls(t.length>0,"Expected public keys array will have more than zero items");for(let i of t)Mt("public key",i,[33,65]);switch(Hd(r),n=ua(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.PUBKEY_COMBINE);case 3:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,i){switch(Mt("public key",t,[33,65]),Mt("tweak",r,32),Hd(n),i=ua(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,i){switch(Mt("public key",t,[33,65]),Mt("tweak",r,32),Hd(n),i=ua(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.TWEAK_MUL)}},signatureNormalize(t){switch(Mt("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(Vt.SIG_PARSE)}},signatureExport(t,r){Mt("signature",t,64),r=ua(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(Mt("signature",t),r=ua(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},i){Mt("message",t,32),Mt("private key",r,32),ls(_0(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Mt("options.data",n.data),n.noncefn!==void 0&&ls(_0(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=ua(i,64);let o={signature:i,recid:null};switch(e.ecdsaSign(o,t,r,n.data,n.noncefn)){case 0:return o;case 1:throw new Error(Vt.SIGN);case 2:throw new Error(Vt.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch(Mt("signature",t,64),Mt("message",r,32),Mt("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,i=!0,o){switch(Mt("signature",t,64),ls(_0(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),Mt("message",n,32),Hd(i),o=ua(o,i?33:65),e.ecdsaRecover(o,t,r,n)){case 0:return o;case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.RECOVER);case 3:throw new Error(Vt.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},i){switch(Mt("public key",t,[33,65]),Mt("private key",r,32),ls(_0(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Mt("options.data",n.data),n.hashfn!==void 0?(ls(_0(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&Mt("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&Mt("options.ybuf",n.ybuf,32),Mt("output",i)):i=ua(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.ECDH)}}})});var cW=K((Iet,aW)=>{p();y();var h1e=OB().ec,nc=new h1e("secp256k1"),_t=nc.curve,ir=_t.n.constructor;function p1e(e,t){let r=new ir(t);if(r.cmp(_t.p)>=0)return null;r=r.toRed(_t.red);let n=r.redSqr().redIMul(r).redIAdd(_t.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),nc.keyPair({pub:{x:r,y:n}})}function y1e(e,t,r){let n=new ir(t),i=new ir(r);if(n.cmp(_t.p)>=0||i.cmp(_t.p)>=0||(n=n.toRed(_t.red),i=i.toRed(_t.red),(e===6||e===7)&&i.isOdd()!==(e===7)))return null;let o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd(_t.b)).isZero()?nc.keyPair({pub:{x:n,y:i}}):null}function rl(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:p1e(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:y1e(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function Wd(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}aW.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new ir(e);return t.cmp(_t.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new ir(e),r=_t.n.sub(t).umod(_t.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new ir(t);if(r.cmp(_t.n)>=0||(r.iadd(new ir(e)),r.cmp(_t.n)>=0&&r.isub(_t.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new ir(t);if(r.cmp(_t.n)>=0||r.isZero())return 1;r.imul(new ir(e)),r.cmp(_t.n)>=0&&(r=r.umod(_t.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return rl(e)===null?1:0},publicKeyCreate(e,t){let r=new ir(t);if(r.cmp(_t.n)>=0||r.isZero())return 1;let n=nc.keyFromPrivate(t).getPublic();return Wd(e,n),0},publicKeyConvert(e,t){let r=rl(t);if(r===null)return 1;let n=r.getPublic();return Wd(e,n),0},publicKeyNegate(e,t){let r=rl(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),Wd(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let i=0;i<t.length;++i)if(r[i]=rl(t[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Wd(e,n),0)},publicKeyTweakAdd(e,t,r){let n=rl(t);if(n===null)return 1;if(r=new ir(r),r.cmp(_t.n)>=0)return 2;let i=n.getPublic().add(_t.g.mul(r));return i.isInfinity()?2:(Wd(e,i),0)},publicKeyTweakMul(e,t,r){let n=rl(t);if(n===null)return 1;if(r=new ir(r),r.cmp(_t.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return Wd(e,i),0},signatureNormalize(e){let t=new ir(e.subarray(0,32)),r=new ir(e.subarray(32,64));return t.cmp(_t.n)>=0||r.cmp(_t.n)>=0?1:(r.cmp(nc.nh)===1&&e.set(_t.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new ir(r).cmp(_t.n)>=0||new ir(n).cmp(_t.n)>=0)return 1;let{output:i}=e,o=i.subarray(4,37);o[0]=0,o.set(r,1);let s=33,a=0;for(;s>1&&o[a]===0&&!(o[a+1]&128);--s,++a);if(o=o.subarray(a),o[0]&128||s>1&&o[0]===0&&!(o[1]&128))return 1;let c=i.subarray(39,72);c[0]=0,c.set(n,1);let u=33,h=0;for(;u>1&&c[h]===0&&!(c[h+1]&128);--u,++h);return c=c.subarray(h),c[0]&128||u>1&&c[0]===0&&!(c[1]&128)?1:(e.outputlen=6+s+u,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=o.length,i.set(o,4),i[4+s]=2,i[5+s]=c.length,i.set(c,6+s),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let i=t.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let o=t.subarray(6+r);if(o.length===33&&o[0]===0&&(o=o.slice(1)),o.length>32)throw new Error("S length is too long");let s=new ir(i);s.cmp(_t.n)>=0&&(s=new ir(0));let a=new ir(t.subarray(6+r));return a.cmp(_t.n)>=0&&(a=new ir(0)),e.set(s.toArrayLike(Uint8Array,"be",32),0),e.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,i){if(i){let a=i;i=c=>{let u=a(t,r,null,n,c);if(!(u instanceof Uint8Array&&u.length===32))throw new Error("This is the way");return new ir(u)}}let o=new ir(r);if(o.cmp(_t.n)>=0||o.isZero())return 1;let s;try{s=nc.sign(t,r,{canonical:!0,k:i,pers:n})}catch{return 1}return e.signature.set(s.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(s.s.toArrayLike(Uint8Array,"be",32),32),e.recid=s.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new ir(n.r),o=new ir(n.s);if(i.cmp(_t.n)>=0||o.cmp(_t.n)>=0)return 1;if(o.cmp(nc.nh)===1||i.isZero()||o.isZero())return 3;let s=rl(r);if(s===null)return 2;let a=s.getPublic();return nc.verify(t,n,a)?0:3},ecdsaRecover(e,t,r,n){let i={r:t.slice(0,32),s:t.slice(32,64)},o=new ir(i.r),s=new ir(i.s);if(o.cmp(_t.n)>=0||s.cmp(_t.n)>=0)return 1;if(o.isZero()||s.isZero())return 2;let a;try{a=nc.recoverPubKey(n,i,r)}catch{return 2}return Wd(e,a),0},ecdh(e,t,r,n,i,o,s){let a=rl(t);if(a===null)return 1;let c=new ir(r);if(c.cmp(_t.n)>=0||c.isZero())return 2;let u=a.getPublic().mul(c);if(i===void 0){let h=u.encode(null,!0),l=nc.hash().update(h).digest();for(let g=0;g<32;++g)e[g]=l[g]}else{o||(o=new Uint8Array(32));let h=u.getX().toArray("be",32);for(let A=0;A<32;++A)o[A]=h[A];s||(s=new Uint8Array(32));let l=u.getY().toArray("be",32);for(let A=0;A<32;++A)s[A]=l[A];let g=i(o,s,n);if(!(g instanceof Uint8Array&&g.length===e.length))return 2;e.set(g)}return 0}}});var e5=K((Pet,uW)=>{p();y();uW.exports=sW()(cW())});var lW=K(vS=>{"use strict";p();y();Object.defineProperty(vS,"__esModule",{value:!0});var fW=_B();function m1e(e){return new Promise(function(t,r){fW(e,function(n,i){if(n){r(n);return}t(i)})})}vS.getRandomBytes=m1e;function g1e(e){return fW(e)}vS.getRandomBytesSync=g1e});var yW=K(ic=>{"use strict";p();y();var b1e=ic&&ic.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},x1e=ic&&ic.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function w1e(e){for(var t in e)ic.hasOwnProperty(t)||(ic[t]=e[t])}Object.defineProperty(ic,"__esModule",{value:!0});var dW=e5(),hW=lW(),pW=32;function v1e(){return b1e(this,void 0,void 0,function(){var e;return x1e(this,function(t){switch(t.label){case 0:return[4,hW.getRandomBytes(pW)];case 1:return e=t.sent(),dW.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}ic.createPrivateKey=v1e;function A1e(){for(;;){var e=hW.getRandomBytesSync(pW);if(dW.privateKeyVerify(e))return e}}ic.createPrivateKeySync=A1e;w1e(e5())});var zd=K((mW,t5)=>{p();y();(function(e,t){"use strict";function r(_,f){if(!_)throw new Error(f||"Assertion failed")}function n(_,f){_.super_=f;var m=function(){};m.prototype=f.prototype,_.prototype=new m,_.prototype.constructor=_}function i(_,f,m){if(i.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((f==="le"||f==="be")&&(m=f,f=10),this._init(_||0,f||10,m||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=MB().Buffer}catch{}i.isBN=function(f){return f instanceof i?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===i.wordSize&&Array.isArray(f.words)},i.max=function(f,m){return f.cmp(m)>0?f:m},i.min=function(f,m){return f.cmp(m)<0?f:m},i.prototype._init=function(f,m,b){if(typeof f=="number")return this._initNumber(f,m,b);if(typeof f=="object")return this._initArray(f,m,b);m==="hex"&&(m=16),r(m===(m|0)&&m>=2&&m<=36),f=f.toString().replace(/\s+/g,"");var v=0;f[0]==="-"&&(v++,this.negative=1),v<f.length&&(m===16?this._parseHex(f,v,b):(this._parseBase(f,m,v),b==="le"&&this._initArray(this.toArray(),m,b)))},i.prototype._initNumber=function(f,m,b){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),m,b)},i.prototype._initArray=function(f,m,b){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w,P,B=0;if(b==="be")for(v=f.length-1,w=0;v>=0;v-=3)P=f[v]|f[v-1]<<8|f[v-2]<<16,this.words[w]|=P<<B&67108863,this.words[w+1]=P>>>26-B&67108863,B+=24,B>=26&&(B-=26,w++);else if(b==="le")for(v=0,w=0;v<f.length;v+=3)P=f[v]|f[v+1]<<8|f[v+2]<<16,this.words[w]|=P<<B&67108863,this.words[w+1]=P>>>26-B&67108863,B+=24,B>=26&&(B-=26,w++);return this.strip()};function s(_,f){var m=_.charCodeAt(f);return m>=65&&m<=70?m-55:m>=97&&m<=102?m-87:m-48&15}function a(_,f,m){var b=s(_,m);return m-1>=f&&(b|=s(_,m-1)<<4),b}i.prototype._parseHex=function(f,m,b){this.length=Math.ceil((f.length-m)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w=0,P=0,B;if(b==="be")for(v=f.length-1;v>=m;v-=2)B=a(f,m,v)<<w,this.words[P]|=B&67108863,w>=18?(w-=18,P+=1,this.words[P]|=B>>>26):w+=8;else{var k=f.length-m;for(v=k%2===0?m+1:m;v<f.length;v+=2)B=a(f,m,v)<<w,this.words[P]|=B&67108863,w>=18?(w-=18,P+=1,this.words[P]|=B>>>26):w+=8}this.strip()};function c(_,f,m,b){for(var v=0,w=Math.min(_.length,m),P=f;P<w;P++){var B=_.charCodeAt(P)-48;v*=b,B>=49?v+=B-49+10:B>=17?v+=B-17+10:v+=B}return v}i.prototype._parseBase=function(f,m,b){this.words=[0],this.length=1;for(var v=0,w=1;w<=67108863;w*=m)v++;v--,w=w/m|0;for(var P=f.length-b,B=P%v,k=Math.min(P,P-B)+b,d=0,S=b;S<k;S+=v)d=c(f,S,S+v,m),this.imuln(w),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(B!==0){var F=1;for(d=c(f,S,f.length,m),S=0;S<B;S++)F*=m;this.imuln(F),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},i.prototype.copy=function(f){f.words=new Array(this.length);for(var m=0;m<this.length;m++)f.words[m]=this.words[m];f.length=this.length,f.negative=this.negative,f.red=this.red},i.prototype.clone=function(){var f=new i(null);return this.copy(f),f},i.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(f,m){f=f||10,m=m|0||1;var b;if(f===16||f==="hex"){b="";for(var v=0,w=0,P=0;P<this.length;P++){var B=this.words[P],k=((B<<v|w)&16777215).toString(16);w=B>>>24-v&16777215,w!==0||P!==this.length-1?b=u[6-k.length]+k+b:b=k+b,v+=2,v>=26&&(v-=26,P--)}for(w!==0&&(b=w.toString(16)+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(f===(f|0)&&f>=2&&f<=36){var d=h[f],S=l[f];b="";var F=this.clone();for(F.negative=0;!F.isZero();){var U=F.modn(S).toString(f);F=F.idivn(S),F.isZero()?b=U+b:b=u[d-U.length]+U+b}for(this.isZero()&&(b="0"+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(f,m){return r(typeof o<"u"),this.toArrayLike(o,f,m)},i.prototype.toArray=function(f,m){return this.toArrayLike(Array,f,m)},i.prototype.toArrayLike=function(f,m,b){var v=this.byteLength(),w=b||Math.max(1,v);r(v<=w,"byte array longer than desired length"),r(w>0,"Requested array length <= 0"),this.strip();var P=m==="le",B=new f(w),k,d,S=this.clone();if(P){for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),B[d]=k;for(;d<w;d++)B[d]=0}else{for(d=0;d<w-v;d++)B[d]=0;for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),B[w-d-1]=k}return B},Math.clz32?i.prototype._countBits=function(f){return 32-Math.clz32(f)}:i.prototype._countBits=function(f){var m=f,b=0;return m>=4096&&(b+=13,m>>>=13),m>=64&&(b+=7,m>>>=7),m>=8&&(b+=4,m>>>=4),m>=2&&(b+=2,m>>>=2),b+m},i.prototype._zeroBits=function(f){if(f===0)return 26;var m=f,b=0;return m&8191||(b+=13,m>>>=13),m&127||(b+=7,m>>>=7),m&15||(b+=4,m>>>=4),m&3||(b+=2,m>>>=2),m&1||b++,b},i.prototype.bitLength=function(){var f=this.words[this.length-1],m=this._countBits(f);return(this.length-1)*26+m};function g(_){for(var f=new Array(_.bitLength()),m=0;m<f.length;m++){var b=m/26|0,v=m%26;f[m]=(_.words[b]&1<<v)>>>v}return f}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,m=0;m<this.length;m++){var b=this._zeroBits(this.words[m]);if(f+=b,b!==26)break}return f},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},i.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var m=0;m<f.length;m++)this.words[m]=this.words[m]|f.words[m];return this.strip()},i.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},i.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},i.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},i.prototype.iuand=function(f){var m;this.length>f.length?m=f:m=this;for(var b=0;b<m.length;b++)this.words[b]=this.words[b]&f.words[b];return this.length=m.length,this.strip()},i.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},i.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},i.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},i.prototype.iuxor=function(f){var m,b;this.length>f.length?(m=this,b=f):(m=f,b=this);for(var v=0;v<b.length;v++)this.words[v]=m.words[v]^b.words[v];if(this!==m)for(;v<m.length;v++)this.words[v]=m.words[v];return this.length=m.length,this.strip()},i.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},i.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},i.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},i.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var m=Math.ceil(f/26)|0,b=f%26;this._expand(m),b>0&&m--;for(var v=0;v<m;v++)this.words[v]=~this.words[v]&67108863;return b>0&&(this.words[v]=~this.words[v]&67108863>>26-b),this.strip()},i.prototype.notn=function(f){return this.clone().inotn(f)},i.prototype.setn=function(f,m){r(typeof f=="number"&&f>=0);var b=f/26|0,v=f%26;return this._expand(b+1),m?this.words[b]=this.words[b]|1<<v:this.words[b]=this.words[b]&~(1<<v),this.strip()},i.prototype.iadd=function(f){var m;if(this.negative!==0&&f.negative===0)return this.negative=0,m=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,m=this.isub(f),f.negative=1,m._normSign();var b,v;this.length>f.length?(b=this,v=f):(b=f,v=this);for(var w=0,P=0;P<v.length;P++)m=(b.words[P]|0)+(v.words[P]|0)+w,this.words[P]=m&67108863,w=m>>>26;for(;w!==0&&P<b.length;P++)m=(b.words[P]|0)+w,this.words[P]=m&67108863,w=m>>>26;if(this.length=b.length,w!==0)this.words[this.length]=w,this.length++;else if(b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this},i.prototype.add=function(f){var m;return f.negative!==0&&this.negative===0?(f.negative=0,m=this.sub(f),f.negative^=1,m):f.negative===0&&this.negative!==0?(this.negative=0,m=f.sub(this),this.negative=1,m):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},i.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var m=this.iadd(f);return f.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var b=this.cmp(f);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,w;b>0?(v=this,w=f):(v=f,w=this);for(var P=0,B=0;B<w.length;B++)m=(v.words[B]|0)-(w.words[B]|0)+P,P=m>>26,this.words[B]=m&67108863;for(;P!==0&&B<v.length;B++)m=(v.words[B]|0)+P,P=m>>26,this.words[B]=m&67108863;if(P===0&&B<v.length&&v!==this)for(;B<v.length;B++)this.words[B]=v.words[B];return this.length=Math.max(this.length,B),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(f){return this.clone().isub(f)};function x(_,f,m){m.negative=f.negative^_.negative;var b=_.length+f.length|0;m.length=b,b=b-1|0;var v=_.words[0]|0,w=f.words[0]|0,P=v*w,B=P&67108863,k=P/67108864|0;m.words[0]=B;for(var d=1;d<b;d++){for(var S=k>>>26,F=k&67108863,U=Math.min(d,f.length-1),D=Math.max(0,d-_.length+1);D<=U;D++){var J=d-D|0;v=_.words[J]|0,w=f.words[D]|0,P=v*w+F,S+=P/67108864|0,F=P&67108863}m.words[d]=F|0,k=S|0}return k!==0?m.words[d]=k|0:m.length--,m.strip()}var A=function(f,m,b){var v=f.words,w=m.words,P=b.words,B=0,k,d,S,F=v[0]|0,U=F&8191,D=F>>>13,J=v[1]|0,ue=J&8191,fe=J>>>13,j=v[2]|0,se=j&8191,L=j>>>13,Y=v[3]|0,Z=Y&8191,re=Y>>>13,pe=v[4]|0,te=pe&8191,ce=pe>>>13,ut=v[5]|0,Ie=ut&8191,_e=ut>>>13,Ko=v[6]|0,Oe=Ko&8191,Be=Ko>>>13,xa=v[7]|0,Ce=xa&8191,nt=xa>>>13,xu=v[8]|0,it=xu&8191,ot=xu>>>13,yc=v[9]|0,Ne=yc&8191,Ue=yc>>>13,mc=w[0]|0,De=mc&8191,Le=mc>>>13,gc=w[1]|0,Ke=gc&8191,Fe=gc>>>13,bc=w[2]|0,Ve=bc&8191,qe=bc>>>13,xc=w[3]|0,He=xc&8191,We=xc>>>13,wc=w[4]|0,ze=wc&8191,je=wc>>>13,vc=w[5]|0,Ge=vc&8191,$e=vc>>>13,Ac=w[6]|0,Ye=Ac&8191,Je=Ac>>>13,Sc=w[7]|0,Ze=Sc&8191,Qe=Sc>>>13,Ec=w[8]|0,Xe=Ec&8191,et=Ec>>>13,Ic=w[9]|0,tt=Ic&8191,rt=Ic>>>13;b.negative=f.negative^m.negative,b.length=19,k=Math.imul(U,De),d=Math.imul(U,Le),d=d+Math.imul(D,De)|0,S=Math.imul(D,Le);var xs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(xs>>>26)|0,xs&=67108863,k=Math.imul(ue,De),d=Math.imul(ue,Le),d=d+Math.imul(fe,De)|0,S=Math.imul(fe,Le),k=k+Math.imul(U,Ke)|0,d=d+Math.imul(U,Fe)|0,d=d+Math.imul(D,Ke)|0,S=S+Math.imul(D,Fe)|0;var ws=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(ws>>>26)|0,ws&=67108863,k=Math.imul(se,De),d=Math.imul(se,Le),d=d+Math.imul(L,De)|0,S=Math.imul(L,Le),k=k+Math.imul(ue,Ke)|0,d=d+Math.imul(ue,Fe)|0,d=d+Math.imul(fe,Ke)|0,S=S+Math.imul(fe,Fe)|0,k=k+Math.imul(U,Ve)|0,d=d+Math.imul(U,qe)|0,d=d+Math.imul(D,Ve)|0,S=S+Math.imul(D,qe)|0;var vs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(vs>>>26)|0,vs&=67108863,k=Math.imul(Z,De),d=Math.imul(Z,Le),d=d+Math.imul(re,De)|0,S=Math.imul(re,Le),k=k+Math.imul(se,Ke)|0,d=d+Math.imul(se,Fe)|0,d=d+Math.imul(L,Ke)|0,S=S+Math.imul(L,Fe)|0,k=k+Math.imul(ue,Ve)|0,d=d+Math.imul(ue,qe)|0,d=d+Math.imul(fe,Ve)|0,S=S+Math.imul(fe,qe)|0,k=k+Math.imul(U,He)|0,d=d+Math.imul(U,We)|0,d=d+Math.imul(D,He)|0,S=S+Math.imul(D,We)|0;var As=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(As>>>26)|0,As&=67108863,k=Math.imul(te,De),d=Math.imul(te,Le),d=d+Math.imul(ce,De)|0,S=Math.imul(ce,Le),k=k+Math.imul(Z,Ke)|0,d=d+Math.imul(Z,Fe)|0,d=d+Math.imul(re,Ke)|0,S=S+Math.imul(re,Fe)|0,k=k+Math.imul(se,Ve)|0,d=d+Math.imul(se,qe)|0,d=d+Math.imul(L,Ve)|0,S=S+Math.imul(L,qe)|0,k=k+Math.imul(ue,He)|0,d=d+Math.imul(ue,We)|0,d=d+Math.imul(fe,He)|0,S=S+Math.imul(fe,We)|0,k=k+Math.imul(U,ze)|0,d=d+Math.imul(U,je)|0,d=d+Math.imul(D,ze)|0,S=S+Math.imul(D,je)|0;var Ss=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,k=Math.imul(Ie,De),d=Math.imul(Ie,Le),d=d+Math.imul(_e,De)|0,S=Math.imul(_e,Le),k=k+Math.imul(te,Ke)|0,d=d+Math.imul(te,Fe)|0,d=d+Math.imul(ce,Ke)|0,S=S+Math.imul(ce,Fe)|0,k=k+Math.imul(Z,Ve)|0,d=d+Math.imul(Z,qe)|0,d=d+Math.imul(re,Ve)|0,S=S+Math.imul(re,qe)|0,k=k+Math.imul(se,He)|0,d=d+Math.imul(se,We)|0,d=d+Math.imul(L,He)|0,S=S+Math.imul(L,We)|0,k=k+Math.imul(ue,ze)|0,d=d+Math.imul(ue,je)|0,d=d+Math.imul(fe,ze)|0,S=S+Math.imul(fe,je)|0,k=k+Math.imul(U,Ge)|0,d=d+Math.imul(U,$e)|0,d=d+Math.imul(D,Ge)|0,S=S+Math.imul(D,$e)|0;var Es=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Es>>>26)|0,Es&=67108863,k=Math.imul(Oe,De),d=Math.imul(Oe,Le),d=d+Math.imul(Be,De)|0,S=Math.imul(Be,Le),k=k+Math.imul(Ie,Ke)|0,d=d+Math.imul(Ie,Fe)|0,d=d+Math.imul(_e,Ke)|0,S=S+Math.imul(_e,Fe)|0,k=k+Math.imul(te,Ve)|0,d=d+Math.imul(te,qe)|0,d=d+Math.imul(ce,Ve)|0,S=S+Math.imul(ce,qe)|0,k=k+Math.imul(Z,He)|0,d=d+Math.imul(Z,We)|0,d=d+Math.imul(re,He)|0,S=S+Math.imul(re,We)|0,k=k+Math.imul(se,ze)|0,d=d+Math.imul(se,je)|0,d=d+Math.imul(L,ze)|0,S=S+Math.imul(L,je)|0,k=k+Math.imul(ue,Ge)|0,d=d+Math.imul(ue,$e)|0,d=d+Math.imul(fe,Ge)|0,S=S+Math.imul(fe,$e)|0,k=k+Math.imul(U,Ye)|0,d=d+Math.imul(U,Je)|0,d=d+Math.imul(D,Ye)|0,S=S+Math.imul(D,Je)|0;var Is=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Is>>>26)|0,Is&=67108863,k=Math.imul(Ce,De),d=Math.imul(Ce,Le),d=d+Math.imul(nt,De)|0,S=Math.imul(nt,Le),k=k+Math.imul(Oe,Ke)|0,d=d+Math.imul(Oe,Fe)|0,d=d+Math.imul(Be,Ke)|0,S=S+Math.imul(Be,Fe)|0,k=k+Math.imul(Ie,Ve)|0,d=d+Math.imul(Ie,qe)|0,d=d+Math.imul(_e,Ve)|0,S=S+Math.imul(_e,qe)|0,k=k+Math.imul(te,He)|0,d=d+Math.imul(te,We)|0,d=d+Math.imul(ce,He)|0,S=S+Math.imul(ce,We)|0,k=k+Math.imul(Z,ze)|0,d=d+Math.imul(Z,je)|0,d=d+Math.imul(re,ze)|0,S=S+Math.imul(re,je)|0,k=k+Math.imul(se,Ge)|0,d=d+Math.imul(se,$e)|0,d=d+Math.imul(L,Ge)|0,S=S+Math.imul(L,$e)|0,k=k+Math.imul(ue,Ye)|0,d=d+Math.imul(ue,Je)|0,d=d+Math.imul(fe,Ye)|0,S=S+Math.imul(fe,Je)|0,k=k+Math.imul(U,Ze)|0,d=d+Math.imul(U,Qe)|0,d=d+Math.imul(D,Ze)|0,S=S+Math.imul(D,Qe)|0;var ks=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(ks>>>26)|0,ks&=67108863,k=Math.imul(it,De),d=Math.imul(it,Le),d=d+Math.imul(ot,De)|0,S=Math.imul(ot,Le),k=k+Math.imul(Ce,Ke)|0,d=d+Math.imul(Ce,Fe)|0,d=d+Math.imul(nt,Ke)|0,S=S+Math.imul(nt,Fe)|0,k=k+Math.imul(Oe,Ve)|0,d=d+Math.imul(Oe,qe)|0,d=d+Math.imul(Be,Ve)|0,S=S+Math.imul(Be,qe)|0,k=k+Math.imul(Ie,He)|0,d=d+Math.imul(Ie,We)|0,d=d+Math.imul(_e,He)|0,S=S+Math.imul(_e,We)|0,k=k+Math.imul(te,ze)|0,d=d+Math.imul(te,je)|0,d=d+Math.imul(ce,ze)|0,S=S+Math.imul(ce,je)|0,k=k+Math.imul(Z,Ge)|0,d=d+Math.imul(Z,$e)|0,d=d+Math.imul(re,Ge)|0,S=S+Math.imul(re,$e)|0,k=k+Math.imul(se,Ye)|0,d=d+Math.imul(se,Je)|0,d=d+Math.imul(L,Ye)|0,S=S+Math.imul(L,Je)|0,k=k+Math.imul(ue,Ze)|0,d=d+Math.imul(ue,Qe)|0,d=d+Math.imul(fe,Ze)|0,S=S+Math.imul(fe,Qe)|0,k=k+Math.imul(U,Xe)|0,d=d+Math.imul(U,et)|0,d=d+Math.imul(D,Xe)|0,S=S+Math.imul(D,et)|0;var Ts=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,k=Math.imul(Ne,De),d=Math.imul(Ne,Le),d=d+Math.imul(Ue,De)|0,S=Math.imul(Ue,Le),k=k+Math.imul(it,Ke)|0,d=d+Math.imul(it,Fe)|0,d=d+Math.imul(ot,Ke)|0,S=S+Math.imul(ot,Fe)|0,k=k+Math.imul(Ce,Ve)|0,d=d+Math.imul(Ce,qe)|0,d=d+Math.imul(nt,Ve)|0,S=S+Math.imul(nt,qe)|0,k=k+Math.imul(Oe,He)|0,d=d+Math.imul(Oe,We)|0,d=d+Math.imul(Be,He)|0,S=S+Math.imul(Be,We)|0,k=k+Math.imul(Ie,ze)|0,d=d+Math.imul(Ie,je)|0,d=d+Math.imul(_e,ze)|0,S=S+Math.imul(_e,je)|0,k=k+Math.imul(te,Ge)|0,d=d+Math.imul(te,$e)|0,d=d+Math.imul(ce,Ge)|0,S=S+Math.imul(ce,$e)|0,k=k+Math.imul(Z,Ye)|0,d=d+Math.imul(Z,Je)|0,d=d+Math.imul(re,Ye)|0,S=S+Math.imul(re,Je)|0,k=k+Math.imul(se,Ze)|0,d=d+Math.imul(se,Qe)|0,d=d+Math.imul(L,Ze)|0,S=S+Math.imul(L,Qe)|0,k=k+Math.imul(ue,Xe)|0,d=d+Math.imul(ue,et)|0,d=d+Math.imul(fe,Xe)|0,S=S+Math.imul(fe,et)|0,k=k+Math.imul(U,tt)|0,d=d+Math.imul(U,rt)|0,d=d+Math.imul(D,tt)|0,S=S+Math.imul(D,rt)|0;var Ps=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,k=Math.imul(Ne,Ke),d=Math.imul(Ne,Fe),d=d+Math.imul(Ue,Ke)|0,S=Math.imul(Ue,Fe),k=k+Math.imul(it,Ve)|0,d=d+Math.imul(it,qe)|0,d=d+Math.imul(ot,Ve)|0,S=S+Math.imul(ot,qe)|0,k=k+Math.imul(Ce,He)|0,d=d+Math.imul(Ce,We)|0,d=d+Math.imul(nt,He)|0,S=S+Math.imul(nt,We)|0,k=k+Math.imul(Oe,ze)|0,d=d+Math.imul(Oe,je)|0,d=d+Math.imul(Be,ze)|0,S=S+Math.imul(Be,je)|0,k=k+Math.imul(Ie,Ge)|0,d=d+Math.imul(Ie,$e)|0,d=d+Math.imul(_e,Ge)|0,S=S+Math.imul(_e,$e)|0,k=k+Math.imul(te,Ye)|0,d=d+Math.imul(te,Je)|0,d=d+Math.imul(ce,Ye)|0,S=S+Math.imul(ce,Je)|0,k=k+Math.imul(Z,Ze)|0,d=d+Math.imul(Z,Qe)|0,d=d+Math.imul(re,Ze)|0,S=S+Math.imul(re,Qe)|0,k=k+Math.imul(se,Xe)|0,d=d+Math.imul(se,et)|0,d=d+Math.imul(L,Xe)|0,S=S+Math.imul(L,et)|0,k=k+Math.imul(ue,tt)|0,d=d+Math.imul(ue,rt)|0,d=d+Math.imul(fe,tt)|0,S=S+Math.imul(fe,rt)|0;var _s=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(_s>>>26)|0,_s&=67108863,k=Math.imul(Ne,Ve),d=Math.imul(Ne,qe),d=d+Math.imul(Ue,Ve)|0,S=Math.imul(Ue,qe),k=k+Math.imul(it,He)|0,d=d+Math.imul(it,We)|0,d=d+Math.imul(ot,He)|0,S=S+Math.imul(ot,We)|0,k=k+Math.imul(Ce,ze)|0,d=d+Math.imul(Ce,je)|0,d=d+Math.imul(nt,ze)|0,S=S+Math.imul(nt,je)|0,k=k+Math.imul(Oe,Ge)|0,d=d+Math.imul(Oe,$e)|0,d=d+Math.imul(Be,Ge)|0,S=S+Math.imul(Be,$e)|0,k=k+Math.imul(Ie,Ye)|0,d=d+Math.imul(Ie,Je)|0,d=d+Math.imul(_e,Ye)|0,S=S+Math.imul(_e,Je)|0,k=k+Math.imul(te,Ze)|0,d=d+Math.imul(te,Qe)|0,d=d+Math.imul(ce,Ze)|0,S=S+Math.imul(ce,Qe)|0,k=k+Math.imul(Z,Xe)|0,d=d+Math.imul(Z,et)|0,d=d+Math.imul(re,Xe)|0,S=S+Math.imul(re,et)|0,k=k+Math.imul(se,tt)|0,d=d+Math.imul(se,rt)|0,d=d+Math.imul(L,tt)|0,S=S+Math.imul(L,rt)|0;var Bs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,k=Math.imul(Ne,He),d=Math.imul(Ne,We),d=d+Math.imul(Ue,He)|0,S=Math.imul(Ue,We),k=k+Math.imul(it,ze)|0,d=d+Math.imul(it,je)|0,d=d+Math.imul(ot,ze)|0,S=S+Math.imul(ot,je)|0,k=k+Math.imul(Ce,Ge)|0,d=d+Math.imul(Ce,$e)|0,d=d+Math.imul(nt,Ge)|0,S=S+Math.imul(nt,$e)|0,k=k+Math.imul(Oe,Ye)|0,d=d+Math.imul(Oe,Je)|0,d=d+Math.imul(Be,Ye)|0,S=S+Math.imul(Be,Je)|0,k=k+Math.imul(Ie,Ze)|0,d=d+Math.imul(Ie,Qe)|0,d=d+Math.imul(_e,Ze)|0,S=S+Math.imul(_e,Qe)|0,k=k+Math.imul(te,Xe)|0,d=d+Math.imul(te,et)|0,d=d+Math.imul(ce,Xe)|0,S=S+Math.imul(ce,et)|0,k=k+Math.imul(Z,tt)|0,d=d+Math.imul(Z,rt)|0,d=d+Math.imul(re,tt)|0,S=S+Math.imul(re,rt)|0;var Cs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,k=Math.imul(Ne,ze),d=Math.imul(Ne,je),d=d+Math.imul(Ue,ze)|0,S=Math.imul(Ue,je),k=k+Math.imul(it,Ge)|0,d=d+Math.imul(it,$e)|0,d=d+Math.imul(ot,Ge)|0,S=S+Math.imul(ot,$e)|0,k=k+Math.imul(Ce,Ye)|0,d=d+Math.imul(Ce,Je)|0,d=d+Math.imul(nt,Ye)|0,S=S+Math.imul(nt,Je)|0,k=k+Math.imul(Oe,Ze)|0,d=d+Math.imul(Oe,Qe)|0,d=d+Math.imul(Be,Ze)|0,S=S+Math.imul(Be,Qe)|0,k=k+Math.imul(Ie,Xe)|0,d=d+Math.imul(Ie,et)|0,d=d+Math.imul(_e,Xe)|0,S=S+Math.imul(_e,et)|0,k=k+Math.imul(te,tt)|0,d=d+Math.imul(te,rt)|0,d=d+Math.imul(ce,tt)|0,S=S+Math.imul(ce,rt)|0;var Ms=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,k=Math.imul(Ne,Ge),d=Math.imul(Ne,$e),d=d+Math.imul(Ue,Ge)|0,S=Math.imul(Ue,$e),k=k+Math.imul(it,Ye)|0,d=d+Math.imul(it,Je)|0,d=d+Math.imul(ot,Ye)|0,S=S+Math.imul(ot,Je)|0,k=k+Math.imul(Ce,Ze)|0,d=d+Math.imul(Ce,Qe)|0,d=d+Math.imul(nt,Ze)|0,S=S+Math.imul(nt,Qe)|0,k=k+Math.imul(Oe,Xe)|0,d=d+Math.imul(Oe,et)|0,d=d+Math.imul(Be,Xe)|0,S=S+Math.imul(Be,et)|0,k=k+Math.imul(Ie,tt)|0,d=d+Math.imul(Ie,rt)|0,d=d+Math.imul(_e,tt)|0,S=S+Math.imul(_e,rt)|0;var Rs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,k=Math.imul(Ne,Ye),d=Math.imul(Ne,Je),d=d+Math.imul(Ue,Ye)|0,S=Math.imul(Ue,Je),k=k+Math.imul(it,Ze)|0,d=d+Math.imul(it,Qe)|0,d=d+Math.imul(ot,Ze)|0,S=S+Math.imul(ot,Qe)|0,k=k+Math.imul(Ce,Xe)|0,d=d+Math.imul(Ce,et)|0,d=d+Math.imul(nt,Xe)|0,S=S+Math.imul(nt,et)|0,k=k+Math.imul(Oe,tt)|0,d=d+Math.imul(Oe,rt)|0,d=d+Math.imul(Be,tt)|0,S=S+Math.imul(Be,rt)|0;var Os=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Os>>>26)|0,Os&=67108863,k=Math.imul(Ne,Ze),d=Math.imul(Ne,Qe),d=d+Math.imul(Ue,Ze)|0,S=Math.imul(Ue,Qe),k=k+Math.imul(it,Xe)|0,d=d+Math.imul(it,et)|0,d=d+Math.imul(ot,Xe)|0,S=S+Math.imul(ot,et)|0,k=k+Math.imul(Ce,tt)|0,d=d+Math.imul(Ce,rt)|0,d=d+Math.imul(nt,tt)|0,S=S+Math.imul(nt,rt)|0;var Ns=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,k=Math.imul(Ne,Xe),d=Math.imul(Ne,et),d=d+Math.imul(Ue,Xe)|0,S=Math.imul(Ue,et),k=k+Math.imul(it,tt)|0,d=d+Math.imul(it,rt)|0,d=d+Math.imul(ot,tt)|0,S=S+Math.imul(ot,rt)|0;var xl=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(xl>>>26)|0,xl&=67108863,k=Math.imul(Ne,tt),d=Math.imul(Ne,rt),d=d+Math.imul(Ue,tt)|0,S=Math.imul(Ue,rt);var wl=(B+k|0)+((d&8191)<<13)|0;return B=(S+(d>>>13)|0)+(wl>>>26)|0,wl&=67108863,P[0]=xs,P[1]=ws,P[2]=vs,P[3]=As,P[4]=Ss,P[5]=Es,P[6]=Is,P[7]=ks,P[8]=Ts,P[9]=Ps,P[10]=_s,P[11]=Bs,P[12]=Cs,P[13]=Ms,P[14]=Rs,P[15]=Os,P[16]=Ns,P[17]=xl,P[18]=wl,B!==0&&(P[19]=B,b.length++),b};Math.imul||(A=x);function E(_,f,m){m.negative=f.negative^_.negative,m.length=_.length+f.length;for(var b=0,v=0,w=0;w<m.length-1;w++){var P=v;v=0;for(var B=b&67108863,k=Math.min(w,f.length-1),d=Math.max(0,w-_.length+1);d<=k;d++){var S=w-d,F=_.words[S]|0,U=f.words[d]|0,D=F*U,J=D&67108863;P=P+(D/67108864|0)|0,J=J+B|0,B=J&67108863,P=P+(J>>>26)|0,v+=P>>>26,P&=67108863}m.words[w]=B,b=P,P=v}return b!==0?m.words[w]=b:m.length--,m.strip()}function C(_,f,m){var b=new M;return b.mulp(_,f,m)}i.prototype.mulTo=function(f,m){var b,v=this.length+f.length;return this.length===10&&f.length===10?b=A(this,f,m):v<63?b=x(this,f,m):v<1024?b=E(this,f,m):b=C(this,f,m),b};function M(_,f){this.x=_,this.y=f}M.prototype.makeRBT=function(f){for(var m=new Array(f),b=i.prototype._countBits(f)-1,v=0;v<f;v++)m[v]=this.revBin(v,b,f);return m},M.prototype.revBin=function(f,m,b){if(f===0||f===b-1)return f;for(var v=0,w=0;w<m;w++)v|=(f&1)<<m-w-1,f>>=1;return v},M.prototype.permute=function(f,m,b,v,w,P){for(var B=0;B<P;B++)v[B]=m[f[B]],w[B]=b[f[B]]},M.prototype.transform=function(f,m,b,v,w,P){this.permute(P,f,m,b,v,w);for(var B=1;B<w;B<<=1)for(var k=B<<1,d=Math.cos(2*Math.PI/k),S=Math.sin(2*Math.PI/k),F=0;F<w;F+=k)for(var U=d,D=S,J=0;J<B;J++){var ue=b[F+J],fe=v[F+J],j=b[F+J+B],se=v[F+J+B],L=U*j-D*se;se=U*se+D*j,j=L,b[F+J]=ue+j,v[F+J]=fe+se,b[F+J+B]=ue-j,v[F+J+B]=fe-se,J!==k&&(L=d*U-S*D,D=d*D+S*U,U=L)}},M.prototype.guessLen13b=function(f,m){var b=Math.max(m,f)|1,v=b&1,w=0;for(b=b/2|0;b;b=b>>>1)w++;return 1<<w+1+v},M.prototype.conjugate=function(f,m,b){if(!(b<=1))for(var v=0;v<b/2;v++){var w=f[v];f[v]=f[b-v-1],f[b-v-1]=w,w=m[v],m[v]=-m[b-v-1],m[b-v-1]=-w}},M.prototype.normalize13b=function(f,m){for(var b=0,v=0;v<m/2;v++){var w=Math.round(f[2*v+1]/m)*8192+Math.round(f[2*v]/m)+b;f[v]=w&67108863,w<67108864?b=0:b=w/67108864|0}return f},M.prototype.convert13b=function(f,m,b,v){for(var w=0,P=0;P<m;P++)w=w+(f[P]|0),b[2*P]=w&8191,w=w>>>13,b[2*P+1]=w&8191,w=w>>>13;for(P=2*m;P<v;++P)b[P]=0;r(w===0),r((w&-8192)===0)},M.prototype.stub=function(f){for(var m=new Array(f),b=0;b<f;b++)m[b]=0;return m},M.prototype.mulp=function(f,m,b){var v=2*this.guessLen13b(f.length,m.length),w=this.makeRBT(v),P=this.stub(v),B=new Array(v),k=new Array(v),d=new Array(v),S=new Array(v),F=new Array(v),U=new Array(v),D=b.words;D.length=v,this.convert13b(f.words,f.length,B,v),this.convert13b(m.words,m.length,S,v),this.transform(B,P,k,d,v,w),this.transform(S,P,F,U,v,w);for(var J=0;J<v;J++){var ue=k[J]*F[J]-d[J]*U[J];d[J]=k[J]*U[J]+d[J]*F[J],k[J]=ue}return this.conjugate(k,d,v),this.transform(k,d,D,P,v,w),this.conjugate(D,P,v),this.normalize13b(D,v),b.negative=f.negative^m.negative,b.length=f.length+m.length,b.strip()},i.prototype.mul=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),this.mulTo(f,m)},i.prototype.mulf=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),C(this,f,m)},i.prototype.imul=function(f){return this.clone().mulTo(f,this)},i.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var m=0,b=0;b<this.length;b++){var v=(this.words[b]|0)*f,w=(v&67108863)+(m&67108863);m>>=26,m+=v/67108864|0,m+=w>>>26,this.words[b]=w&67108863}return m!==0&&(this.words[b]=m,this.length++),this},i.prototype.muln=function(f){return this.clone().imuln(f)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(f){var m=g(f);if(m.length===0)return new i(1);for(var b=this,v=0;v<m.length&&m[v]===0;v++,b=b.sqr());if(++v<m.length)for(var w=b.sqr();v<m.length;v++,w=w.sqr())m[v]!==0&&(b=b.mul(w));return b},i.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,v=67108863>>>26-m<<26-m,w;if(m!==0){var P=0;for(w=0;w<this.length;w++){var B=this.words[w]&v,k=(this.words[w]|0)-B<<m;this.words[w]=k|P,P=B>>>26-m}P&&(this.words[w]=P,this.length++)}if(b!==0){for(w=this.length-1;w>=0;w--)this.words[w+b]=this.words[w];for(w=0;w<b;w++)this.words[w]=0;this.length+=b}return this.strip()},i.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},i.prototype.iushrn=function(f,m,b){r(typeof f=="number"&&f>=0);var v;m?v=(m-m%26)/26:v=0;var w=f%26,P=Math.min((f-w)/26,this.length),B=67108863^67108863>>>w<<w,k=b;if(v-=P,v=Math.max(0,v),k){for(var d=0;d<P;d++)k.words[d]=this.words[d];k.length=P}if(P!==0)if(this.length>P)for(this.length-=P,d=0;d<this.length;d++)this.words[d]=this.words[d+P];else this.words[0]=0,this.length=1;var S=0;for(d=this.length-1;d>=0&&(S!==0||d>=v);d--){var F=this.words[d]|0;this.words[d]=S<<26-w|F>>>w,S=F&B}return k&&S!==0&&(k.words[k.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(f,m,b){return r(this.negative===0),this.iushrn(f,m,b)},i.prototype.shln=function(f){return this.clone().ishln(f)},i.prototype.ushln=function(f){return this.clone().iushln(f)},i.prototype.shrn=function(f){return this.clone().ishrn(f)},i.prototype.ushrn=function(f){return this.clone().iushrn(f)},i.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,v=1<<m;if(this.length<=b)return!1;var w=this.words[b];return!!(w&v)},i.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(m!==0&&b++,this.length=Math.min(b,this.length),m!==0){var v=67108863^67108863>>>m<<m;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(f){return this.clone().imaskn(f)},i.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},i.prototype._iaddn=function(f){this.words[0]+=f;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},i.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},i.prototype.addn=function(f){return this.clone().iaddn(f)},i.prototype.subn=function(f){return this.clone().isubn(f)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(f,m,b){var v=f.length+b,w;this._expand(v);var P,B=0;for(w=0;w<f.length;w++){P=(this.words[w+b]|0)+B;var k=(f.words[w]|0)*m;P-=k&67108863,B=(P>>26)-(k/67108864|0),this.words[w+b]=P&67108863}for(;w<this.length-b;w++)P=(this.words[w+b]|0)+B,B=P>>26,this.words[w+b]=P&67108863;if(B===0)return this.strip();for(r(B===-1),B=0,w=0;w<this.length;w++)P=-(this.words[w]|0)+B,B=P>>26,this.words[w]=P&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(f,m){var b=this.length-f.length,v=this.clone(),w=f,P=w.words[w.length-1]|0,B=this._countBits(P);b=26-B,b!==0&&(w=w.ushln(b),v.iushln(b),P=w.words[w.length-1]|0);var k=v.length-w.length,d;if(m!=="mod"){d=new i(null),d.length=k+1,d.words=new Array(d.length);for(var S=0;S<d.length;S++)d.words[S]=0}var F=v.clone()._ishlnsubmul(w,1,k);F.negative===0&&(v=F,d&&(d.words[k]=1));for(var U=k-1;U>=0;U--){var D=(v.words[w.length+U]|0)*67108864+(v.words[w.length+U-1]|0);for(D=Math.min(D/P|0,67108863),v._ishlnsubmul(w,D,U);v.negative!==0;)D--,v.negative=0,v._ishlnsubmul(w,1,U),v.isZero()||(v.negative^=1);d&&(d.words[U]=D)}return d&&d.strip(),v.strip(),m!=="div"&&b!==0&&v.iushrn(b),{div:d||null,mod:v}},i.prototype.divmod=function(f,m,b){if(r(!f.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,w,P;return this.negative!==0&&f.negative===0?(P=this.neg().divmod(f,m),m!=="mod"&&(v=P.div.neg()),m!=="div"&&(w=P.mod.neg(),b&&w.negative!==0&&w.iadd(f)),{div:v,mod:w}):this.negative===0&&f.negative!==0?(P=this.divmod(f.neg(),m),m!=="mod"&&(v=P.div.neg()),{div:v,mod:P.mod}):this.negative&f.negative?(P=this.neg().divmod(f.neg(),m),m!=="div"&&(w=P.mod.neg(),b&&w.negative!==0&&w.isub(f)),{div:P.div,mod:w}):f.length>this.length||this.cmp(f)<0?{div:new i(0),mod:this}:f.length===1?m==="div"?{div:this.divn(f.words[0]),mod:null}:m==="mod"?{div:null,mod:new i(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new i(this.modn(f.words[0]))}:this._wordDiv(f,m)},i.prototype.div=function(f){return this.divmod(f,"div",!1).div},i.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},i.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},i.prototype.divRound=function(f){var m=this.divmod(f);if(m.mod.isZero())return m.div;var b=m.div.negative!==0?m.mod.isub(f):m.mod,v=f.ushrn(1),w=f.andln(1),P=b.cmp(v);return P<0||w===1&&P===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},i.prototype.modn=function(f){r(f<=67108863);for(var m=(1<<26)%f,b=0,v=this.length-1;v>=0;v--)b=(m*b+(this.words[v]|0))%f;return b},i.prototype.idivn=function(f){r(f<=67108863);for(var m=0,b=this.length-1;b>=0;b--){var v=(this.words[b]|0)+m*67108864;this.words[b]=v/f|0,m=v%f}return this.strip()},i.prototype.divn=function(f){return this.clone().idivn(f)},i.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var v=new i(1),w=new i(0),P=new i(0),B=new i(1),k=0;m.isEven()&&b.isEven();)m.iushrn(1),b.iushrn(1),++k;for(var d=b.clone(),S=m.clone();!m.isZero();){for(var F=0,U=1;!(m.words[0]&U)&&F<26;++F,U<<=1);if(F>0)for(m.iushrn(F);F-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(d),w.isub(S)),v.iushrn(1),w.iushrn(1);for(var D=0,J=1;!(b.words[0]&J)&&D<26;++D,J<<=1);if(D>0)for(b.iushrn(D);D-- >0;)(P.isOdd()||B.isOdd())&&(P.iadd(d),B.isub(S)),P.iushrn(1),B.iushrn(1);m.cmp(b)>=0?(m.isub(b),v.isub(P),w.isub(B)):(b.isub(m),P.isub(v),B.isub(w))}return{a:P,b:B,gcd:b.iushln(k)}},i.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var v=new i(1),w=new i(0),P=b.clone();m.cmpn(1)>0&&b.cmpn(1)>0;){for(var B=0,k=1;!(m.words[0]&k)&&B<26;++B,k<<=1);if(B>0)for(m.iushrn(B);B-- >0;)v.isOdd()&&v.iadd(P),v.iushrn(1);for(var d=0,S=1;!(b.words[0]&S)&&d<26;++d,S<<=1);if(d>0)for(b.iushrn(d);d-- >0;)w.isOdd()&&w.iadd(P),w.iushrn(1);m.cmp(b)>=0?(m.isub(b),v.isub(w)):(b.isub(m),w.isub(v))}var F;return m.cmpn(1)===0?F=v:F=w,F.cmpn(0)<0&&F.iadd(f),F},i.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var m=this.clone(),b=f.clone();m.negative=0,b.negative=0;for(var v=0;m.isEven()&&b.isEven();v++)m.iushrn(1),b.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;b.isEven();)b.iushrn(1);var w=m.cmp(b);if(w<0){var P=m;m=b,b=P}else if(w===0||b.cmpn(1)===0)break;m.isub(b)}while(!0);return b.iushln(v)},i.prototype.invm=function(f){return this.egcd(f).a.umod(f)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(f){return this.words[0]&f},i.prototype.bincn=function(f){r(typeof f=="number");var m=f%26,b=(f-m)/26,v=1<<m;if(this.length<=b)return this._expand(b+1),this.words[b]|=v,this;for(var w=v,P=b;w!==0&&P<this.length;P++){var B=this.words[P]|0;B+=w,w=B>>>26,B&=67108863,this.words[P]=B}return w!==0&&(this.words[P]=w,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(f){var m=f<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this.strip();var b;if(this.length>1)b=1;else{m&&(f=-f),r(f<=67108863,"Number is too big");var v=this.words[0]|0;b=v===f?0:v<f?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var m=this.ucmp(f);return this.negative!==0?-m|0:m},i.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var m=0,b=this.length-1;b>=0;b--){var v=this.words[b]|0,w=f.words[b]|0;if(v!==w){v<w?m=-1:v>w&&(m=1);break}}return m},i.prototype.gtn=function(f){return this.cmpn(f)===1},i.prototype.gt=function(f){return this.cmp(f)===1},i.prototype.gten=function(f){return this.cmpn(f)>=0},i.prototype.gte=function(f){return this.cmp(f)>=0},i.prototype.ltn=function(f){return this.cmpn(f)===-1},i.prototype.lt=function(f){return this.cmp(f)===-1},i.prototype.lten=function(f){return this.cmpn(f)<=0},i.prototype.lte=function(f){return this.cmp(f)<=0},i.prototype.eqn=function(f){return this.cmpn(f)===0},i.prototype.eq=function(f){return this.cmp(f)===0},i.red=function(f){return new z(f)},i.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(f){return this.red=f,this},i.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},i.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},i.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},i.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},i.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},i.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},i.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},i.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var N={k256:null,p224:null,p192:null,p25519:null};function R(_,f){this.name=_,this.p=new i(f,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var f=new i(null);return f.words=new Array(Math.ceil(this.n/13)),f},R.prototype.ireduce=function(f){var m=f,b;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),b=m.bitLength();while(b>this.n);var v=b<this.n?-1:m.ucmp(this.p);return v===0?(m.words[0]=0,m.length=1):v>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},R.prototype.split=function(f,m){f.iushrn(this.n,0,m)},R.prototype.imulK=function(f){return f.imul(this.k)};function V(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(V,R),V.prototype.split=function(f,m){for(var b=4194303,v=Math.min(f.length,9),w=0;w<v;w++)m.words[w]=f.words[w];if(m.length=v,f.length<=9){f.words[0]=0,f.length=1;return}var P=f.words[9];for(m.words[m.length++]=P&b,w=10;w<f.length;w++){var B=f.words[w]|0;f.words[w-10]=(B&b)<<4|P>>>22,P=B}P>>>=22,f.words[w-10]=P,P===0&&f.length>10?f.length-=10:f.length-=9},V.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var m=0,b=0;b<f.length;b++){var v=f.words[b]|0;m+=v*977,f.words[b]=m&67108863,m=v*64+(m/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function q(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(q,R);function W(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,R);function G(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,R),G.prototype.imulK=function(f){for(var m=0,b=0;b<f.length;b++){var v=(f.words[b]|0)*19+m,w=v&67108863;v>>>=26,f.words[b]=w,m=v}return m!==0&&(f.words[f.length++]=m),f},i._prime=function(f){if(N[f])return N[f];var m;if(f==="k256")m=new V;else if(f==="p224")m=new q;else if(f==="p192")m=new W;else if(f==="p25519")m=new G;else throw new Error("Unknown prime "+f);return N[f]=m,m};function z(_){if(typeof _=="string"){var f=i._prime(_);this.m=f.p,this.prime=f}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}z.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},z.prototype._verify2=function(f,m){r((f.negative|m.negative)===0,"red works only with positives"),r(f.red&&f.red===m.red,"red works only with red numbers")},z.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},z.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},z.prototype.add=function(f,m){this._verify2(f,m);var b=f.add(m);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},z.prototype.iadd=function(f,m){this._verify2(f,m);var b=f.iadd(m);return b.cmp(this.m)>=0&&b.isub(this.m),b},z.prototype.sub=function(f,m){this._verify2(f,m);var b=f.sub(m);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},z.prototype.isub=function(f,m){this._verify2(f,m);var b=f.isub(m);return b.cmpn(0)<0&&b.iadd(this.m),b},z.prototype.shl=function(f,m){return this._verify1(f),this.imod(f.ushln(m))},z.prototype.imul=function(f,m){return this._verify2(f,m),this.imod(f.imul(m))},z.prototype.mul=function(f,m){return this._verify2(f,m),this.imod(f.mul(m))},z.prototype.isqr=function(f){return this.imul(f,f.clone())},z.prototype.sqr=function(f){return this.mul(f,f)},z.prototype.sqrt=function(f){if(f.isZero())return f.clone();var m=this.m.andln(3);if(r(m%2===1),m===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(f,b)}for(var v=this.m.subn(1),w=0;!v.isZero()&&v.andln(1)===0;)w++,v.iushrn(1);r(!v.isZero());var P=new i(1).toRed(this),B=P.redNeg(),k=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,k).cmp(B)!==0;)d.redIAdd(B);for(var S=this.pow(d,v),F=this.pow(f,v.addn(1).iushrn(1)),U=this.pow(f,v),D=w;U.cmp(P)!==0;){for(var J=U,ue=0;J.cmp(P)!==0;ue++)J=J.redSqr();r(ue<D);var fe=this.pow(S,new i(1).iushln(D-ue-1));F=F.redMul(fe),S=fe.redSqr(),U=U.redMul(S),D=ue}return F},z.prototype.invm=function(f){var m=f._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},z.prototype.pow=function(f,m){if(m.isZero())return new i(1).toRed(this);if(m.cmpn(1)===0)return f.clone();var b=4,v=new Array(1<<b);v[0]=new i(1).toRed(this),v[1]=f;for(var w=2;w<v.length;w++)v[w]=this.mul(v[w-1],f);var P=v[0],B=0,k=0,d=m.bitLength()%26;for(d===0&&(d=26),w=m.length-1;w>=0;w--){for(var S=m.words[w],F=d-1;F>=0;F--){var U=S>>F&1;if(P!==v[0]&&(P=this.sqr(P)),U===0&&B===0){k=0;continue}B<<=1,B|=U,k++,!(k!==b&&(w!==0||F!==0))&&(P=this.mul(P,v[B]),k=0,B=0)}d=26}return P},z.prototype.convertTo=function(f){var m=f.umod(this.m);return m===f?m.clone():m},z.prototype.convertFrom=function(f){var m=f.clone();return m.red=null,m},i.mont=function(f){return new ee(f)};function ee(_){z.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(ee,z),ee.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},ee.prototype.convertFrom=function(f){var m=this.imod(f.mul(this.rinv));return m.red=null,m},ee.prototype.imul=function(f,m){if(f.isZero()||m.isZero())return f.words[0]=0,f.length=1,f;var b=f.imul(m),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=b.isub(v).iushrn(this.shift),P=w;return w.cmp(this.m)>=0?P=w.isub(this.m):w.cmpn(0)<0&&(P=w.iadd(this.m)),P._forceRed(this)},ee.prototype.mul=function(f,m){if(f.isZero()||m.isZero())return new i(0)._forceRed(this);var b=f.mul(m),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=b.isub(v).iushrn(this.shift),P=w;return w.cmp(this.m)>=0?P=w.isub(this.m):w.cmpn(0)<0&&(P=w.iadd(this.m)),P._forceRed(this)},ee.prototype.invm=function(f){var m=this.imod(f._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(typeof t5>"u"||t5,mW)});var bW=K(C0=>{"use strict";p();y();Object.defineProperty(C0,"__esModule",{value:!0});var jd=zd(),S1e=OB().ec,r5=new S1e("secp256k1"),B0=r5.curve;C0.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new jd(e);if(r.ucmp(B0.n)>=0)throw new Error("couldn't export to DER format");var n=r5.g.mul(r);return gW(n.getX(),n.getY(),t)};C0.privateKeyModInverse=function(e){var t=new jd(e);if(t.ucmp(B0.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(B0.n).toArrayLike(Buffer,"be",32)};C0.signatureImport=function(e){var t=new jd(e.r);t.ucmp(B0.n)>=0&&(t=new jd(0));var r=new jd(e.s);return r.ucmp(B0.n)>=0&&(r=new jd(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};C0.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=r5.keyFromPublic(e),i=new jd(t);if(i.ucmp(B0.n)>=0||i.isZero())throw new Error("scalar was invalid (zero or overflow)");var o=n.pub.mul(i);return gW(o.getX(),o.getY(),r)};var gW=function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n}});var xW=K(wb=>{"use strict";p();y();Object.defineProperty(wb,"__esModule",{value:!0});var{Buffer:xb}=en(),E1e=xb.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),I1e=xb.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);wb.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=xb.from(r?E1e:I1e);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};wb.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+i||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};wb.signatureImportLax=function(e){var t=xb.alloc(32,0),r=xb.alloc(32,0),n=e.length,i=0;if(e[i++]!==48)return null;var o=e[i++];if(o&128&&(i+=o-128,i>n)||e[i++]!==2)return null;var s=e[i++];if(s&128){if(o=s-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(s=0;o>0;i+=1,o-=1)s=(s<<8)+e[i]}if(s>n-i)return null;var a=i;if(i+=s,e[i++]!==2)return null;var c=e[i++];if(c&128){if(o=c-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(c=0;o>0;i+=1,o-=1)c=(c<<8)+e[i]}if(c>n-i)return null;var u=i;for(i+=c;s>0&&e[a]===0;s-=1,a+=1);if(s>32)return null;var h=e.slice(a,a+s);for(h.copy(t,32-h.length);c>0&&e[u]===0;c-=1,u+=1);if(c>32)return null;var l=e.slice(u,u+c);return l.copy(r,32-l.length),{r:t,s:r}}});var SS=K(Re=>{"use strict";p();y();Object.defineProperty(Re,"__esModule",{value:!0});Re.ecdhUnsafe=Re.ecdh=Re.recover=Re.verify=Re.sign=Re.signatureImportLax=Re.signatureImport=Re.signatureExport=Re.signatureNormalize=Re.publicKeyCombine=Re.publicKeyTweakMul=Re.publicKeyTweakAdd=Re.publicKeyVerify=Re.publicKeyConvert=Re.publicKeyCreate=Re.privateKeyTweakMul=Re.privateKeyTweakAdd=Re.privateKeyModInverse=Re.privateKeyNegate=Re.privateKeyImport=Re.privateKeyExport=Re.privateKeyVerify=void 0;var ui=yW(),AS=bW(),n5=xW();Re.privateKeyVerify=function(e){return e.length!==32?!1:ui.privateKeyVerify(Uint8Array.from(e))};Re.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=AS.privateKeyExport(e,t);return n5.privateKeyExport(e,r,t)};Re.privateKeyImport=function(e){if(e=n5.privateKeyImport(e),e!==null&&e.length===32&&Re.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};Re.privateKeyNegate=function(e){return Buffer.from(ui.privateKeyNegate(Uint8Array.from(e)))};Re.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(AS.privateKeyModInverse(Uint8Array.from(e)))};Re.privateKeyTweakAdd=function(e,t){return Buffer.from(ui.privateKeyTweakAdd(Uint8Array.from(e),t))};Re.privateKeyTweakMul=function(e,t){return Buffer.from(ui.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};Re.publicKeyCreate=function(e,t){return Buffer.from(ui.publicKeyCreate(Uint8Array.from(e),t))};Re.publicKeyConvert=function(e,t){return Buffer.from(ui.publicKeyConvert(Uint8Array.from(e),t))};Re.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:ui.publicKeyVerify(Uint8Array.from(e))};Re.publicKeyTweakAdd=function(e,t,r){return Buffer.from(ui.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};Re.publicKeyTweakMul=function(e,t,r){return Buffer.from(ui.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};Re.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(ui.publicKeyCombine(r,t))};Re.signatureNormalize=function(e){return Buffer.from(ui.signatureNormalize(Uint8Array.from(e)))};Re.signatureExport=function(e){return Buffer.from(ui.signatureExport(Uint8Array.from(e)))};Re.signatureImport=function(e){return Buffer.from(ui.signatureImport(Uint8Array.from(e)))};Re.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=n5.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return AS.signatureImport(t)};Re.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(o,s,a,c,u){var h=a!=null?Buffer.from(a):null,l=c!=null?Buffer.from(c):null,g=Buffer.from("");return r.noncefn&&(g=r.noncefn(Buffer.from(o),Buffer.from(s),h,l,u)),new Uint8Array(g)})}var i=ui.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(i.signature),recovery:i.recid}};Re.verify=function(e,t,r){return ui.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};Re.recover=function(e,t,r,n){return Buffer.from(ui.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};Re.ecdh=function(e,t){return Buffer.from(ui.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};Re.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(AS.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var i5=K(($et,wW)=>{p();y();wW.exports=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}});var AW=K((Zet,vW)=>{p();y();var k1e=i5();vW.exports=function(t){return typeof t!="string"?t:k1e(t)?t.slice(2):t}});var Gd=K((ett,IW)=>{"use strict";p();y();var T1e=i5(),SW=AW();function ES(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function EW(e){var t=e.toString(16);return"0x"+t}function P1e(e){var t=EW(e);return new Buffer(ES(t.slice(2)),"hex")}function _1e(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}function B1e(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}function C1e(e){var t=new Buffer(ES(SW(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}function M1e(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}function R1e(e){var t=new Buffer(e,"utf8");return"0x"+ES(t.toString("hex")).replace(/^0+|0+$/g,"")}function O1e(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n.toString(16);t+=i.length<2?"0"+i:i}return"0x"+t}function N1e(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var o=e[i][t];if(r&&!o)o="";else if(typeof o!="string")throw new Error("invalid abi");n.push(o)}return n}function U1e(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}IW.exports={arrayContainsArray:B1e,intToBuffer:P1e,getBinarySize:_1e,isHexPrefixed:T1e,stripHexPrefix:SW,padToEven:ES,intToHex:EW,fromAscii:O1e,fromUtf8:R1e,toAscii:M1e,toUtf8:C1e,getKeys:N1e,isHexString:U1e}});var IS=K(oc=>{"use strict";p();y();var D1e=oc&&oc.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oc,"__esModule",{value:!0});oc.getLength=oc.decode=oc.encode=void 0;var L1e=D1e(fx());function TW(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(TW(e[r]));var n=Buffer.concat(t);return Buffer.concat([kW(n.length,192),n])}else{var i=c5(e);return i.length===1&&i[0]<128?i:Buffer.concat([kW(i.length,128),i])}}oc.encode=TW;function o5(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function kW(e,t){if(e<56)return Buffer.from([e+t]);var r=a5(e),n=r.length/2,i=a5(t+55+n);return Buffer.from(i+r,"hex")}function K1e(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=c5(e),n=s5(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}oc.decode=K1e;function F1e(e){if(!e||e.length===0)return Buffer.from([]);var t=c5(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,i=o5(t.slice(1,n).toString("hex"),16);return n+i}oc.getLength=F1e;function s5(e){var t,r,n,i,o,s=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(a<=183){if(t=a-127,a===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(a<=191){if(r=a-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=o5(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(a<=247){for(t=a-191,i=e.slice(1,t);i.length;)o=s5(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(t)}}else{r=a-246,t=o5(e.slice(1,r).toString("hex"),16);var c=r+t;if(c>e.length)throw new Error("invalid rlp: total length is larger than the data");if(i=e.slice(r,c),i.length===0)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)o=s5(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(c)}}}function PW(e){return e.slice(0,2)==="0x"}function V1e(e){return typeof e!="string"?e:PW(e)?e.slice(2):e}function a5(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function q1e(e){return e.length%2?"0"+e:e}function H1e(e){var t=a5(e);return Buffer.from(t,"hex")}function c5(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return PW(e)?Buffer.from(q1e(V1e(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?H1e(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(L1e.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}});var BW=K(Qr=>{"use strict";p();y();Object.defineProperty(Qr,"__esModule",{value:!0});Qr.KECCAK256_RLP=Qr.KECCAK256_RLP_S=Qr.KECCAK256_RLP_ARRAY=Qr.KECCAK256_RLP_ARRAY_S=Qr.KECCAK256_NULL=Qr.KECCAK256_NULL_S=Qr.TWO_POW256=Qr.MAX_INTEGER=void 0;var _W=zd(),{Buffer:u5}=en();Qr.MAX_INTEGER=new _W("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);Qr.TWO_POW256=new _W("10000000000000000000000000000000000000000000000000000000000000000",16);Qr.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Qr.KECCAK256_NULL=u5.from(Qr.KECCAK256_NULL_S,"hex");Qr.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Qr.KECCAK256_RLP_ARRAY=u5.from(Qr.KECCAK256_RLP_ARRAY_S,"hex");Qr.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Qr.KECCAK256_RLP=u5.from(Qr.KECCAK256_RLP_S,"hex")});var RW=K((utt,MW)=>{"use strict";p();y();var W1e=Object.prototype.toString,z1e=Function.prototype.toString,j1e=/^\s*(?:function)?\*/,CW=QE()(),f5=Object.getPrototypeOf,G1e=function(){if(!CW)return!1;try{return Function("return function*() {}")()}catch{}},l5;MW.exports=function(t){if(typeof t!="function")return!1;if(j1e.test(z1e.call(t)))return!0;if(!CW){var r=W1e.call(t);return r==="[object GeneratorFunction]"}if(!f5)return!1;if(typeof l5>"u"){var n=G1e();l5=n?f5(n):!1}return f5(t)===l5}});var UW=K((dtt,NW)=>{"use strict";p();y();var $1e=EJ(),Y1e=Object.prototype.toString,OW=Object.prototype.hasOwnProperty,J1e=function(t,r,n){for(var i=0,o=t.length;i<o;i++)OW.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},Z1e=function(t,r,n){for(var i=0,o=t.length;i<o;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t)},Q1e=function(t,r,n){for(var i in t)OW.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},X1e=function(t,r,n){if(!$1e(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Y1e.call(t)==="[object Array]"?J1e(t,r,i):typeof t=="string"?Z1e(t,r,i):Q1e(t,r,i)};NW.exports=X1e});var h5=K((ytt,DW)=>{"use strict";p();y();var d5=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],eve=typeof globalThis>"u"?self:globalThis;DW.exports=function(){for(var t=[],r=0;r<d5.length;r++)typeof eve[d5[r]]=="function"&&(t[t.length]=d5[r]);return t}});var FW=K((btt,KW)=>{"use strict";p();y();var tve="Function.prototype.bind called on incompatible ",rve=Object.prototype.toString,nve=Math.max,ive="[object Function]",LW=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},ove=function(t,r){for(var n=[],i=r||0,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},sve=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};KW.exports=function(t){var r=this;if(typeof r!="function"||rve.apply(r)!==ive)throw new TypeError(tve+r);for(var n=ove(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,LW(n,arguments));return Object(h)===h?h:this}return r.apply(t,LW(n,arguments))},s=nve(0,r.length-n.length),a=[],c=0;c<s;c++)a[c]="$"+c;if(i=Function("binder","return function ("+sve(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var qW=K((vtt,VW)=>{"use strict";p();y();var ave=FW();VW.exports=Function.prototype.bind||ave});var p5=K((Ett,WW)=>{"use strict";p();y();var HW={foo:{}},cve=Object;WW.exports=function(){return{__proto__:HW}.foo===HW.foo&&!({__proto__:null}instanceof cve)}});var jW=K((Ttt,zW)=>{"use strict";p();y();var uve="Function.prototype.bind called on incompatible ",y5=Array.prototype.slice,fve=Object.prototype.toString,lve="[object Function]";zW.exports=function(t){var r=this;if(typeof r!="function"||fve.call(r)!==lve)throw new TypeError(uve+r);for(var n=y5.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(y5.call(arguments)));return Object(h)===h?h:this}else return r.apply(t,n.concat(y5.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var $W=K((Btt,GW)=>{"use strict";p();y();var dve=jW();GW.exports=Function.prototype.bind||dve});var PS=K((Rtt,XW)=>{"use strict";p();y();var Et,N0=SyntaxError,QW=Function,O0=TypeError,m5=function(e){try{return QW('"use strict"; return ('+e+").constructor;")()}catch{}},$d=Object.getOwnPropertyDescriptor;if($d)try{$d({},"")}catch{$d=null}var g5=function(){throw new O0},hve=$d?function(){try{return arguments.callee,g5}catch{try{return $d(arguments,"callee").get}catch{return g5}}}():g5,M0=jB()(),pve=p5()(),Kn=Object.getPrototypeOf||(pve?function(e){return e.__proto__}:null),R0={},yve=typeof Uint8Array>"u"||!Kn?Et:Kn(Uint8Array),Yd={"%AggregateError%":typeof AggregateError>"u"?Et:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Et:ArrayBuffer,"%ArrayIteratorPrototype%":M0&&Kn?Kn([][Symbol.iterator]()):Et,"%AsyncFromSyncIteratorPrototype%":Et,"%AsyncFunction%":R0,"%AsyncGenerator%":R0,"%AsyncGeneratorFunction%":R0,"%AsyncIteratorPrototype%":R0,"%Atomics%":typeof Atomics>"u"?Et:Atomics,"%BigInt%":typeof BigInt>"u"?Et:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Et:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Et:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Et:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Et:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Et:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Et:FinalizationRegistry,"%Function%":QW,"%GeneratorFunction%":R0,"%Int8Array%":typeof Int8Array>"u"?Et:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Et:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Et:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":M0&&Kn?Kn(Kn([][Symbol.iterator]())):Et,"%JSON%":typeof JSON=="object"?JSON:Et,"%Map%":typeof Map>"u"?Et:Map,"%MapIteratorPrototype%":typeof Map>"u"||!M0||!Kn?Et:Kn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Et:Promise,"%Proxy%":typeof Proxy>"u"?Et:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Et:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Et:Set,"%SetIteratorPrototype%":typeof Set>"u"||!M0||!Kn?Et:Kn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Et:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":M0&&Kn?Kn(""[Symbol.iterator]()):Et,"%Symbol%":M0?Symbol:Et,"%SyntaxError%":N0,"%ThrowTypeError%":hve,"%TypedArray%":yve,"%TypeError%":O0,"%Uint8Array%":typeof Uint8Array>"u"?Et:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Et:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Et:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Et:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Et:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Et:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Et:WeakSet};if(Kn)try{null.error}catch(e){YW=Kn(Kn(e)),Yd["%Error.prototype%"]=YW}var YW,mve=function e(t){var r;if(t==="%AsyncFunction%")r=m5("async function () {}");else if(t==="%GeneratorFunction%")r=m5("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=m5("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Kn&&(r=Kn(i.prototype))}return Yd[t]=r,r},JW={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vb=$W(),kS=GB(),gve=vb.call(Function.call,Array.prototype.concat),bve=vb.call(Function.apply,Array.prototype.splice),ZW=vb.call(Function.call,String.prototype.replace),TS=vb.call(Function.call,String.prototype.slice),xve=vb.call(Function.call,RegExp.prototype.exec),wve=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,vve=/\\(\\)?/g,Ave=function(t){var r=TS(t,0,1),n=TS(t,-1);if(r==="%"&&n!=="%")throw new N0("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new N0("invalid intrinsic syntax, expected opening `%`");var i=[];return ZW(t,wve,function(o,s,a,c){i[i.length]=a?ZW(c,vve,"$1"):s||o}),i},Sve=function(t,r){var n=t,i;if(kS(JW,n)&&(i=JW[n],n="%"+i[0]+"%"),kS(Yd,n)){var o=Yd[n];if(o===R0&&(o=mve(n)),typeof o>"u"&&!r)throw new O0("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new N0("intrinsic "+t+" does not exist!")};XW.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new O0("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new O0('"allowMissing" argument must be a boolean');if(xve(/^%?[^%]*%?$/,t)===null)throw new N0("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Ave(t),i=n.length>0?n[0]:"",o=Sve("%"+i+"%",r),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],bve(n,gve([0,1],u)));for(var h=1,l=!0;h<n.length;h+=1){var g=n[h],x=TS(g,0,1),A=TS(g,-1);if((x==='"'||x==="'"||x==="`"||A==='"'||A==="'"||A==="`")&&x!==A)throw new N0("property names with quotes must have matching quotes");if((g==="constructor"||!l)&&(c=!0),i+="."+g,s="%"+i+"%",kS(Yd,s))a=Yd[s];else if(a!=null){if(!(g in a)){if(!r)throw new O0("base intrinsic for "+t+" exists, but the property is not available.");return}if($d&&h+1>=n.length){var E=$d(a,g);l=!!E,l&&"get"in E&&!("originalValue"in E.get)?a=E.get:a=a[g]}else l=kS(a,g),a=a[g];l&&!c&&(Yd[s]=a)}}return a}});var tz=K((Utt,ez)=>{"use strict";p();y();var Eve="Function.prototype.bind called on incompatible ",b5=Array.prototype.slice,Ive=Object.prototype.toString,kve="[object Function]";ez.exports=function(t){var r=this;if(typeof r!="function"||Ive.call(r)!==kve)throw new TypeError(Eve+r);for(var n=b5.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(b5.call(arguments)));return Object(h)===h?h:this}else return r.apply(t,n.concat(b5.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var nz=K((Ktt,rz)=>{"use strict";p();y();var Tve=tz();rz.exports=Function.prototype.bind||Tve});var uz=K((qtt,cz)=>{"use strict";p();y();var It,K0=SyntaxError,az=Function,L0=TypeError,x5=function(e){try{return az('"use strict"; return ('+e+").constructor;")()}catch{}},Jd=Object.getOwnPropertyDescriptor;if(Jd)try{Jd({},"")}catch{Jd=null}var w5=function(){throw new L0},Pve=Jd?function(){try{return arguments.callee,w5}catch{try{return Jd(arguments,"callee").get}catch{return w5}}}():w5,U0=jB()(),_ve=p5()(),Fn=Object.getPrototypeOf||(_ve?function(e){return e.__proto__}:null),D0={},Bve=typeof Uint8Array>"u"||!Fn?It:Fn(Uint8Array),Zd={"%AggregateError%":typeof AggregateError>"u"?It:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?It:ArrayBuffer,"%ArrayIteratorPrototype%":U0&&Fn?Fn([][Symbol.iterator]()):It,"%AsyncFromSyncIteratorPrototype%":It,"%AsyncFunction%":D0,"%AsyncGenerator%":D0,"%AsyncGeneratorFunction%":D0,"%AsyncIteratorPrototype%":D0,"%Atomics%":typeof Atomics>"u"?It:Atomics,"%BigInt%":typeof BigInt>"u"?It:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?It:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?It:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?It:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?It:Float32Array,"%Float64Array%":typeof Float64Array>"u"?It:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?It:FinalizationRegistry,"%Function%":az,"%GeneratorFunction%":D0,"%Int8Array%":typeof Int8Array>"u"?It:Int8Array,"%Int16Array%":typeof Int16Array>"u"?It:Int16Array,"%Int32Array%":typeof Int32Array>"u"?It:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":U0&&Fn?Fn(Fn([][Symbol.iterator]())):It,"%JSON%":typeof JSON=="object"?JSON:It,"%Map%":typeof Map>"u"?It:Map,"%MapIteratorPrototype%":typeof Map>"u"||!U0||!Fn?It:Fn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?It:Promise,"%Proxy%":typeof Proxy>"u"?It:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?It:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?It:Set,"%SetIteratorPrototype%":typeof Set>"u"||!U0||!Fn?It:Fn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?It:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":U0&&Fn?Fn(""[Symbol.iterator]()):It,"%Symbol%":U0?Symbol:It,"%SyntaxError%":K0,"%ThrowTypeError%":Pve,"%TypedArray%":Bve,"%TypeError%":L0,"%Uint8Array%":typeof Uint8Array>"u"?It:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?It:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?It:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?It:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?It:WeakMap,"%WeakRef%":typeof WeakRef>"u"?It:WeakRef,"%WeakSet%":typeof WeakSet>"u"?It:WeakSet};if(Fn)try{null.error}catch(e){iz=Fn(Fn(e)),Zd["%Error.prototype%"]=iz}var iz,Cve=function e(t){var r;if(t==="%AsyncFunction%")r=x5("async function () {}");else if(t==="%GeneratorFunction%")r=x5("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=x5("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Fn&&(r=Fn(i.prototype))}return Zd[t]=r,r},oz={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ab=nz(),_S=GB(),Mve=Ab.call(Function.call,Array.prototype.concat),Rve=Ab.call(Function.apply,Array.prototype.splice),sz=Ab.call(Function.call,String.prototype.replace),BS=Ab.call(Function.call,String.prototype.slice),Ove=Ab.call(Function.call,RegExp.prototype.exec),Nve=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Uve=/\\(\\)?/g,Dve=function(t){var r=BS(t,0,1),n=BS(t,-1);if(r==="%"&&n!=="%")throw new K0("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new K0("invalid intrinsic syntax, expected opening `%`");var i=[];return sz(t,Nve,function(o,s,a,c){i[i.length]=a?sz(c,Uve,"$1"):s||o}),i},Lve=function(t,r){var n=t,i;if(_S(oz,n)&&(i=oz[n],n="%"+i[0]+"%"),_S(Zd,n)){var o=Zd[n];if(o===D0&&(o=Cve(n)),typeof o>"u"&&!r)throw new L0("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new K0("intrinsic "+t+" does not exist!")};cz.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new L0("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new L0('"allowMissing" argument must be a boolean');if(Ove(/^%?[^%]*%?$/,t)===null)throw new K0("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Dve(t),i=n.length>0?n[0]:"",o=Lve("%"+i+"%",r),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],Rve(n,Mve([0,1],u)));for(var h=1,l=!0;h<n.length;h+=1){var g=n[h],x=BS(g,0,1),A=BS(g,-1);if((x==='"'||x==="'"||x==="`"||A==='"'||A==="'"||A==="`")&&x!==A)throw new K0("property names with quotes must have matching quotes");if((g==="constructor"||!l)&&(c=!0),i+="."+g,s="%"+i+"%",_S(Zd,s))a=Zd[s];else if(a!=null){if(!(g in a)){if(!r)throw new L0("base intrinsic for "+t+" exists, but the property is not available.");return}if(Jd&&h+1>=n.length){var E=Jd(a,g);l=!!E,l&&"get"in E&&!("originalValue"in E.get)?a=E.get:a=a[g]}else l=_S(a,g),a=a[g];l&&!c&&(Zd[s]=a)}}return a}});var dz=K((ztt,lz)=>{"use strict";p();y();var Kve=YB()(),v5=uz(),Sb=Kve&&v5("%Object.defineProperty%",!0);if(Sb)try{Sb({},"a",{value:1})}catch{Sb=!1}var Fve=v5("%SyntaxError%"),F0=v5("%TypeError%"),fz=dx();lz.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new F0("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new F0("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new F0("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new F0("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new F0("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new F0("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!fz&&fz(t,r);if(Sb)Sb(t,r,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:o===null&&c?c.writable:!o});else if(a||!i&&!o&&!s)t[r]=n;else throw new Fve("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var bz=K(($tt,gz)=>{"use strict";p();y();var mz=PS(),hz=dz(),Vve=YB()(),pz=dx(),yz=mz("%TypeError%"),qve=mz("%Math.floor%");gz.exports=function(t,r){if(typeof t!="function")throw new yz("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||qve(r)!==r)throw new yz("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&pz){var s=pz(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(Vve?hz(t,"length",r,!0,!0):hz(t,"length",r)),t}});var S5=K((Ztt,CS)=>{"use strict";p();y();var A5=qW(),V0=PS(),Hve=bz(),Wve=V0("%TypeError%"),wz=V0("%Function.prototype.apply%"),vz=V0("%Function.prototype.call%"),Az=V0("%Reflect.apply%",!0)||A5.call(vz,wz),Eb=V0("%Object.defineProperty%",!0),zve=V0("%Math.max%");if(Eb)try{Eb({},"a",{value:1})}catch{Eb=null}CS.exports=function(t){if(typeof t!="function")throw new Wve("a function is required");var r=Az(A5,vz,arguments);return Hve(r,1+zve(0,t.length-(arguments.length-1)),!0)};var xz=function(){return Az(A5,wz,arguments)};Eb?Eb(CS.exports,"apply",{value:xz}):CS.exports.apply=xz});var kz=K((ert,Iz)=>{"use strict";p();y();var Sz=PS(),Ez=S5(),jve=Ez(Sz("String.prototype.indexOf"));Iz.exports=function(t,r){var n=Sz(t,!!r);return typeof n=="function"&&jve(t,".prototype.")>-1?Ez(n):n}});var Cz=K((nrt,Bz)=>{"use strict";p();y();var RS=UW(),Gve=h5(),Tz=S5(),k5=kz(),MS=dx(),$ve=k5("Object.prototype.toString"),_z=QE()(),Pz=typeof globalThis>"u"?self:globalThis,I5=Gve(),T5=k5("String.prototype.slice"),E5=Object.getPrototypeOf,Yve=k5("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},OS={__proto__:null};_z&&MS&&E5?RS(I5,function(e){var t=new Pz[e];if(Symbol.toStringTag in t){var r=E5(t),n=MS(r,Symbol.toStringTag);if(!n){var i=E5(r);n=MS(i,Symbol.toStringTag)}OS["$"+e]=Tz(n.get)}}):RS(I5,function(e){var t=new Pz[e],r=t.slice||t.set;r&&(OS["$"+e]=Tz(r))});var Jve=function(t){var r=!1;return RS(OS,function(n,i){if(!r)try{"$"+n(t)===i&&(r=T5(i,1))}catch{}}),r},Zve=function(t){var r=!1;return RS(OS,function(n,i){if(!r)try{n(t),r=T5(i,1)}catch{}}),r};Bz.exports=function(t){if(!t||typeof t!="object")return!1;if(!_z){var r=T5($ve(t),8,-1);return Yve(I5,r)>-1?r:r!=="Object"?!1:Zve(t)}return MS?Jve(t):null}});var Rz=K((srt,Mz)=>{p();y();var Qve=Object.prototype.hasOwnProperty,Xve=Object.prototype.toString;Mz.exports=function(t,r,n){if(Xve.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var i=t.length;if(i===+i)for(var o=0;o<i;o++)r.call(n,t[o],o,t);else for(var s in t)Qve.call(t,s)&&r.call(n,t[s],s,t)}});var Nz=K((urt,Oz)=>{"use strict";p();y();Oz.exports=dx()});var Vz=K((drt,Fz)=>{"use strict";p();y();var Uz=Rz(),eAe=h5(),_5=AJ(),tAe=_5("Object.prototype.toString"),Dz=QE()(),rAe=typeof globalThis>"u"?self:globalThis,Lz=eAe(),nAe=_5("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},iAe=_5("String.prototype.slice"),Kz={},NS=Nz(),P5=Object.getPrototypeOf;Dz&&NS&&P5&&Uz(Lz,function(e){var t=new rAe[e];if(Symbol.toStringTag in t){var r=P5(t),n=NS(r,Symbol.toStringTag);if(!n){var i=P5(r);n=NS(i,Symbol.toStringTag)}Kz[e]=n.get}});var oAe=function(t){var r=!1;return Uz(Kz,function(n,i){if(!r)try{r=n.call(t)===i}catch{}}),r};Fz.exports=function(t){if(!t||typeof t!="object")return!1;if(!Dz||!(Symbol.toStringTag in t)){var r=iAe(tAe(t),8,-1);return nAe(Lz,r)>-1}return NS?oAe(t):!1}});var tj=K(vt=>{"use strict";p();y();var sAe=SJ(),aAe=RW(),fa=Cz(),qz=Vz();function q0(e){return e.call.bind(e)}var Hz=typeof BigInt<"u",Wz=typeof Symbol<"u",ds=q0(Object.prototype.toString),cAe=q0(Number.prototype.valueOf),uAe=q0(String.prototype.valueOf),fAe=q0(Boolean.prototype.valueOf);Hz&&(zz=q0(BigInt.prototype.valueOf));var zz;Wz&&(jz=q0(Symbol.prototype.valueOf));var jz;function kb(e,t){if(typeof e!="object")return!1;try{return t(e),!0}catch{return!1}}vt.isArgumentsObject=sAe;vt.isGeneratorFunction=aAe;vt.isTypedArray=qz;function lAe(e){return typeof Promise<"u"&&e instanceof Promise||e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}vt.isPromise=lAe;function dAe(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):qz(e)||$z(e)}vt.isArrayBufferView=dAe;function hAe(e){return fa(e)==="Uint8Array"}vt.isUint8Array=hAe;function pAe(e){return fa(e)==="Uint8ClampedArray"}vt.isUint8ClampedArray=pAe;function yAe(e){return fa(e)==="Uint16Array"}vt.isUint16Array=yAe;function mAe(e){return fa(e)==="Uint32Array"}vt.isUint32Array=mAe;function gAe(e){return fa(e)==="Int8Array"}vt.isInt8Array=gAe;function bAe(e){return fa(e)==="Int16Array"}vt.isInt16Array=bAe;function xAe(e){return fa(e)==="Int32Array"}vt.isInt32Array=xAe;function wAe(e){return fa(e)==="Float32Array"}vt.isFloat32Array=wAe;function vAe(e){return fa(e)==="Float64Array"}vt.isFloat64Array=vAe;function AAe(e){return fa(e)==="BigInt64Array"}vt.isBigInt64Array=AAe;function SAe(e){return fa(e)==="BigUint64Array"}vt.isBigUint64Array=SAe;function US(e){return ds(e)==="[object Map]"}US.working=typeof Map<"u"&&US(new Map);function EAe(e){return typeof Map>"u"?!1:US.working?US(e):e instanceof Map}vt.isMap=EAe;function DS(e){return ds(e)==="[object Set]"}DS.working=typeof Set<"u"&&DS(new Set);function IAe(e){return typeof Set>"u"?!1:DS.working?DS(e):e instanceof Set}vt.isSet=IAe;function LS(e){return ds(e)==="[object WeakMap]"}LS.working=typeof WeakMap<"u"&&LS(new WeakMap);function kAe(e){return typeof WeakMap>"u"?!1:LS.working?LS(e):e instanceof WeakMap}vt.isWeakMap=kAe;function C5(e){return ds(e)==="[object WeakSet]"}C5.working=typeof WeakSet<"u"&&C5(new WeakSet);function TAe(e){return C5(e)}vt.isWeakSet=TAe;function KS(e){return ds(e)==="[object ArrayBuffer]"}KS.working=typeof ArrayBuffer<"u"&&KS(new ArrayBuffer);function Gz(e){return typeof ArrayBuffer>"u"?!1:KS.working?KS(e):e instanceof ArrayBuffer}vt.isArrayBuffer=Gz;function FS(e){return ds(e)==="[object DataView]"}FS.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&FS(new DataView(new ArrayBuffer(1),0,1));function $z(e){return typeof DataView>"u"?!1:FS.working?FS(e):e instanceof DataView}vt.isDataView=$z;var B5=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Ib(e){return ds(e)==="[object SharedArrayBuffer]"}function Yz(e){return typeof B5>"u"?!1:(typeof Ib.working>"u"&&(Ib.working=Ib(new B5)),Ib.working?Ib(e):e instanceof B5)}vt.isSharedArrayBuffer=Yz;function PAe(e){return ds(e)==="[object AsyncFunction]"}vt.isAsyncFunction=PAe;function _Ae(e){return ds(e)==="[object Map Iterator]"}vt.isMapIterator=_Ae;function BAe(e){return ds(e)==="[object Set Iterator]"}vt.isSetIterator=BAe;function CAe(e){return ds(e)==="[object Generator]"}vt.isGeneratorObject=CAe;function MAe(e){return ds(e)==="[object WebAssembly.Module]"}vt.isWebAssemblyCompiledModule=MAe;function Jz(e){return kb(e,cAe)}vt.isNumberObject=Jz;function Zz(e){return kb(e,uAe)}vt.isStringObject=Zz;function Qz(e){return kb(e,fAe)}vt.isBooleanObject=Qz;function Xz(e){return Hz&&kb(e,zz)}vt.isBigIntObject=Xz;function ej(e){return Wz&&kb(e,jz)}vt.isSymbolObject=ej;function RAe(e){return Jz(e)||Zz(e)||Qz(e)||Xz(e)||ej(e)}vt.isBoxedPrimitive=RAe;function OAe(e){return typeof Uint8Array<"u"&&(Gz(e)||Yz(e))}vt.isAnyArrayBuffer=OAe;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(vt,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})});var nj=K((brt,rj)=>{p();y();rj.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}});var W0=K(At=>{p();y();var ij=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),n={},i=0;i<r.length;i++)n[r[i]]=Object.getOwnPropertyDescriptor(t,r[i]);return n},NAe=/%[sdj%]/g;At.format=function(e){if(!GS(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(nl(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(NAe,function(a){if(a==="%%")return"%";if(r>=i)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),s=n[r];r<i;s=n[++r])jS(s)||!H0(s)?o+=" "+s:o+=" "+nl(s);return o};At.deprecate=function(e,t){if(typeof process<"u"&&process.noDeprecation===!0)return e;if(typeof process>"u")return function(){return At.deprecate(e,t).apply(this,arguments)};var r=!1;function n(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return n};var VS={},oj=/^$/;T.NODE_DEBUG&&(qS=T.NODE_DEBUG,qS=qS.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),oj=new RegExp("^"+qS+"$","i"));var qS;At.debuglog=function(e){if(e=e.toUpperCase(),!VS[e])if(oj.test(e)){var t=process.pid;VS[e]=function(){var r=At.format.apply(At,arguments);console.error("%s %d: %s",e,t,r)}}else VS[e]=function(){};return VS[e]};function nl(e,t){var r={seen:[],stylize:DAe};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),N5(t)?r.showHidden=t:t&&At._extend(r,t),Xd(r.showHidden)&&(r.showHidden=!1),Xd(r.depth)&&(r.depth=2),Xd(r.colors)&&(r.colors=!1),Xd(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=UAe),WS(r,e,r.depth)}At.inspect=nl;nl.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};nl.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function UAe(e,t){var r=nl.styles[t];return r?"\x1B["+nl.colors[r][0]+"m"+e+"\x1B["+nl.colors[r][1]+"m":e}function DAe(e,t){return e}function LAe(e){var t={};return e.forEach(function(r,n){t[r]=!0}),t}function WS(e,t,r){if(e.customInspect&&t&&HS(t.inspect)&&t.inspect!==At.inspect&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(r,e);return GS(n)||(n=WS(e,n,r)),n}var i=KAe(e,t);if(i)return i;var o=Object.keys(t),s=LAe(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Pb(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return M5(t);if(o.length===0){if(HS(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(Tb(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(zS(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Pb(t))return M5(t)}var c="",u=!1,h=["{","}"];if(sj(t)&&(u=!0,h=["[","]"]),HS(t)){var l=t.name?": "+t.name:"";c=" [Function"+l+"]"}if(Tb(t)&&(c=" "+RegExp.prototype.toString.call(t)),zS(t)&&(c=" "+Date.prototype.toUTCString.call(t)),Pb(t)&&(c=" "+M5(t)),o.length===0&&(!u||t.length==0))return h[0]+c+h[1];if(r<0)return Tb(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var g;return u?g=FAe(e,t,r,s,o):g=o.map(function(x){return O5(e,t,r,s,x,u)}),e.seen.pop(),VAe(g,c,h)}function KAe(e,t){if(Xd(t))return e.stylize("undefined","undefined");if(GS(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(aj(t))return e.stylize(""+t,"number");if(N5(t))return e.stylize(""+t,"boolean");if(jS(t))return e.stylize("null","null")}function M5(e){return"["+Error.prototype.toString.call(e)+"]"}function FAe(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)cj(t,String(s))?o.push(O5(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(c){c.match(/^\d+$/)||o.push(O5(e,t,r,n,c,!0))}),o}function O5(e,t,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?c.set?a=e.stylize("[Getter/Setter]","special"):a=e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),cj(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(jS(r)?a=WS(e,c.value,null):a=WS(e,c.value,r-1),a.indexOf(`
`)>-1&&(o?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=e.stylize("[Circular]","special")),Xd(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function VAe(e,t,r){var n=0,i=e.reduce(function(o,s){return n++,s.indexOf(`
`)>=0&&n++,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}At.types=tj();function sj(e){return Array.isArray(e)}At.isArray=sj;function N5(e){return typeof e=="boolean"}At.isBoolean=N5;function jS(e){return e===null}At.isNull=jS;function qAe(e){return e==null}At.isNullOrUndefined=qAe;function aj(e){return typeof e=="number"}At.isNumber=aj;function GS(e){return typeof e=="string"}At.isString=GS;function HAe(e){return typeof e=="symbol"}At.isSymbol=HAe;function Xd(e){return e===void 0}At.isUndefined=Xd;function Tb(e){return H0(e)&&U5(e)==="[object RegExp]"}At.isRegExp=Tb;At.types.isRegExp=Tb;function H0(e){return typeof e=="object"&&e!==null}At.isObject=H0;function zS(e){return H0(e)&&U5(e)==="[object Date]"}At.isDate=zS;At.types.isDate=zS;function Pb(e){return H0(e)&&(U5(e)==="[object Error]"||e instanceof Error)}At.isError=Pb;At.types.isNativeError=Pb;function HS(e){return typeof e=="function"}At.isFunction=HS;function WAe(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}At.isPrimitive=WAe;At.isBuffer=nj();function U5(e){return Object.prototype.toString.call(e)}function R5(e){return e<10?"0"+e.toString(10):e.toString(10)}var zAe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function jAe(){var e=new Date,t=[R5(e.getHours()),R5(e.getMinutes()),R5(e.getSeconds())].join(":");return[e.getDate(),zAe[e.getMonth()],t].join(" ")}At.log=function(){console.log("%s - %s",jAe(),At.format.apply(At,arguments))};At.inherits=wJ();At._extend=function(e,t){if(!t||!H0(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};function cj(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Qd=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;At.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(Qd&&t[Qd]){var r=t[Qd];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,Qd,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var n,i,o=new Promise(function(c,u){n=c,i=u}),s=[],a=0;a<arguments.length;a++)s.push(arguments[a]);s.push(function(c,u){c?i(c):n(u)});try{t.apply(this,s)}catch(c){i(c)}return o}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Qd&&Object.defineProperty(r,Qd,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,ij(t))};At.promisify.custom=Qd;function GAe(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function $Ae(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then(function(a){process.nextTick(s.bind(null,null,a))},function(a){process.nextTick(GAe.bind(null,a,s))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,ij(e)),t}At.callbackify=$Ae});var F5=K((Ert,lj)=>{"use strict";p();y();function z0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z0=function(r){return typeof r}:z0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},z0(e)}function YAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JAe(e,t){return t&&(z0(t)==="object"||typeof t=="function")?t:ZAe(e)}function ZAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L5(e){return L5=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},L5(e)}function QAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K5(e,t)}function K5(e,t){return K5=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},K5(e,t)}var fj={},j0,D5;function _b(e,t,r){r||(r=Error);function n(o,s,a){return typeof t=="string"?t:t(o,s,a)}var i=function(o){QAe(s,o);function s(a,c,u){var h;return YAe(this,s),h=JAe(this,L5(s).call(this,n(a,c,u))),h.code=e,h}return s}(r);fj[e]=i}function uj(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function XAe(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function e2e(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function t2e(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}_b("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);_b("ERR_INVALID_ARG_TYPE",function(e,t,r){j0===void 0&&(j0=Bb()),j0(typeof e=="string","'name' must be a string");var n;typeof t=="string"&&XAe(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(e2e(e," argument"))i="The ".concat(e," ").concat(n," ").concat(uj(t,"type"));else{var o=t2e(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(uj(t,"type"))}return i+=". Received type ".concat(z0(r)),i},TypeError);_b("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";D5===void 0&&(D5=W0());var n=D5.inspect(t);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(n)},TypeError,RangeError);_b("ERR_INVALID_RETURN_VALUE",function(e,t,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(z0(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(n,".")},TypeError);_b("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];j0===void 0&&(j0=Bb()),j0(t.length>0,"At least one arg needs to be specified");var n="The ",i=t.length;switch(t=t.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(t[0]," argument");break;case 2:n+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:n+=t.slice(0,i-1).join(", "),n+=", and ".concat(t[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);lj.exports.codes=fj});var mj=K((Trt,yj)=>{"use strict";p();y();function r2e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){n2e(e,i,r[i])})}return e}function n2e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o2e(e,t,r){return t&&dj(e.prototype,t),r&&dj(e,r),e}function G0(e,t){return t&&(hs(t)==="object"||typeof t=="function")?t:V5(e)}function V5(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ob(e,t)}function q5(e){var t=typeof Map=="function"?new Map:void 0;return q5=function(n){if(n===null||!c2e(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return $S(n,arguments,il(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ob(i,n)},q5(e)}function a2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function $S(e,t,r){return a2e()?$S=Reflect.construct:$S=function(i,o,s){var a=[null];a.push.apply(a,o);var c=Function.bind.apply(i,a),u=new c;return s&&Ob(u,s.prototype),u},$S.apply(null,arguments)}function c2e(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Ob(e,t){return Ob=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ob(e,t)}function il(e){return il=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},il(e)}function hs(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hs=function(r){return typeof r}:hs=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hs(e)}var u2e=W0(),H5=u2e.inspect,f2e=F5(),l2e=f2e.codes.ERR_INVALID_ARG_TYPE;function hj(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function d2e(e,t){if(t=Math.floor(t),e.length==0||t==0)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+=e.substring(0,r-e.length),e}var la="",Cb="",Mb="",fi="",eh={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},h2e=10;function pj(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(n){r[n]=e[n]}),Object.defineProperty(r,"message",{value:e.message}),r}function Rb(e){return H5(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function p2e(e,t,r){var n="",i="",o=0,s="",a=!1,c=Rb(e),u=c.split(`
`),h=Rb(t).split(`
`),l=0,g="";if(r==="strictEqual"&&hs(e)==="object"&&hs(t)==="object"&&e!==null&&t!==null&&(r="strictEqualObject"),u.length===1&&h.length===1&&u[0]!==h[0]){var x=u[0].length+h[0].length;if(x<=h2e){if((hs(e)!=="object"||e===null)&&(hs(t)!=="object"||t===null)&&(e!==0||t!==0))return"".concat(eh[r],`

`)+"".concat(u[0]," !== ").concat(h[0],`
`)}else if(r!=="strictEqualObject"){var A=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(x<A){for(;u[0][l]===h[0][l];)l++;l>2&&(g=`
  `.concat(d2e(" ",l),"^"),l=0)}}}for(var E=u[u.length-1],C=h[h.length-1];E===C&&(l++<2?s=`
  `.concat(E).concat(s):n=E,u.pop(),h.pop(),!(u.length===0||h.length===0));)E=u[u.length-1],C=h[h.length-1];var M=Math.max(u.length,h.length);if(M===0){var N=c.split(`
`);if(N.length>30)for(N[26]="".concat(la,"...").concat(fi);N.length>27;)N.pop();return"".concat(eh.notIdentical,`

`).concat(N.join(`
`),`
`)}l>3&&(s=`
`.concat(la,"...").concat(fi).concat(s),a=!0),n!==""&&(s=`
  `.concat(n).concat(s),n="");var R=0,V=eh[r]+`
`.concat(Cb,"+ actual").concat(fi," ").concat(Mb,"- expected").concat(fi),q=" ".concat(la,"...").concat(fi," Lines skipped");for(l=0;l<M;l++){var W=l-o;if(u.length<l+1)W>1&&l>2&&(W>4?(i+=`
`.concat(la,"...").concat(fi),a=!0):W>3&&(i+=`
  `.concat(h[l-2]),R++),i+=`
  `.concat(h[l-1]),R++),o=l,n+=`
`.concat(Mb,"-").concat(fi," ").concat(h[l]),R++;else if(h.length<l+1)W>1&&l>2&&(W>4?(i+=`
`.concat(la,"...").concat(fi),a=!0):W>3&&(i+=`
  `.concat(u[l-2]),R++),i+=`
  `.concat(u[l-1]),R++),o=l,i+=`
`.concat(Cb,"+").concat(fi," ").concat(u[l]),R++;else{var G=h[l],z=u[l],ee=z!==G&&(!hj(z,",")||z.slice(0,-1)!==G);ee&&hj(G,",")&&G.slice(0,-1)===z&&(ee=!1,z+=","),ee?(W>1&&l>2&&(W>4?(i+=`
`.concat(la,"...").concat(fi),a=!0):W>3&&(i+=`
  `.concat(u[l-2]),R++),i+=`
  `.concat(u[l-1]),R++),o=l,i+=`
`.concat(Cb,"+").concat(fi," ").concat(z),n+=`
`.concat(Mb,"-").concat(fi," ").concat(G),R+=2):(i+=n,n="",(W===1||l===0)&&(i+=`
  `.concat(z),R++))}if(R>20&&l<M-2)return"".concat(V).concat(q,`
`).concat(i,`
`).concat(la,"...").concat(fi).concat(n,`
`)+"".concat(la,"...").concat(fi)}return"".concat(V).concat(a?q:"",`
`).concat(i).concat(n).concat(s).concat(g)}var y2e=function(e){s2e(t,e);function t(r){var n;if(i2e(this,t),hs(r)!=="object"||r===null)throw new l2e("options","Object",r);var i=r.message,o=r.operator,s=r.stackStartFn,a=r.actual,c=r.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,i!=null)n=G0(this,il(t).call(this,String(i)));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(la="\x1B[34m",Cb="\x1B[32m",fi="\x1B[39m",Mb="\x1B[31m"):(la="",Cb="",fi="",Mb="")),hs(a)==="object"&&a!==null&&hs(c)==="object"&&c!==null&&"stack"in a&&a instanceof Error&&"stack"in c&&c instanceof Error&&(a=pj(a),c=pj(c)),o==="deepStrictEqual"||o==="strictEqual")n=G0(this,il(t).call(this,p2e(a,c,o)));else if(o==="notDeepStrictEqual"||o==="notStrictEqual"){var h=eh[o],l=Rb(a).split(`
`);if(o==="notStrictEqual"&&hs(a)==="object"&&a!==null&&(h=eh.notStrictEqualObject),l.length>30)for(l[26]="".concat(la,"...").concat(fi);l.length>27;)l.pop();l.length===1?n=G0(this,il(t).call(this,"".concat(h," ").concat(l[0]))):n=G0(this,il(t).call(this,"".concat(h,`

`).concat(l.join(`
`),`
`)))}else{var g=Rb(a),x="",A=eh[o];o==="notDeepEqual"||o==="notEqual"?(g="".concat(eh[o],`

`).concat(g),g.length>1024&&(g="".concat(g.slice(0,1021),"..."))):(x="".concat(Rb(c)),g.length>512&&(g="".concat(g.slice(0,509),"...")),x.length>512&&(x="".concat(x.slice(0,509),"...")),o==="deepEqual"||o==="equal"?g="".concat(A,`

`).concat(g,`

should equal

`):x=" ".concat(o," ").concat(x)),n=G0(this,il(t).call(this,"".concat(g).concat(x)))}return Error.stackTraceLimit=u,n.generatedMessage=!i,Object.defineProperty(V5(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=a,n.expected=c,n.operator=o,Error.captureStackTrace&&Error.captureStackTrace(V5(n),s),n.stack,n.name="AssertionError",G0(n)}return o2e(t,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:H5.custom,value:function(n,i){return H5(this,r2e({},i,{customInspect:!1,depth:0}))}}]),t}(q5(Error));yj.exports=y2e});var xj=K((Brt,bj)=>{"use strict";p();y();function gj(e,t){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var c=o[s],u=Object.getOwnPropertyDescriptor(i,c);u!==void 0&&u.enumerable&&(r[c]=i[c])}}return r}function m2e(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:gj})}bj.exports={assign:gj,polyfill:m2e}});var W5=K((Rrt,vj)=>{"use strict";p();y();var wj=function(e){return e!==e};vj.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||wj(t)&&wj(r))}});var z5=K((Urt,Aj)=>{"use strict";p();y();var g2e=W5();Aj.exports=function(){return typeof Object.is=="function"?Object.is:g2e}});var Ej=K((Krt,Sj)=>{"use strict";p();y();var b2e=z5(),x2e=lx();Sj.exports=function(){var t=b2e();return x2e(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var j5=K((qrt,Tj)=>{"use strict";p();y();var w2e=lx(),v2e=$B(),A2e=W5(),Ij=z5(),S2e=Ej(),kj=v2e(Ij(),Object);w2e(kj,{getPolyfill:Ij,implementation:A2e,shim:S2e});Tj.exports=kj});var G5=K((zrt,Pj)=>{"use strict";p();y();Pj.exports=function(t){return t!==t}});var $5=K(($rt,_j)=>{"use strict";p();y();var E2e=G5();_j.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:E2e}});var Cj=K((Zrt,Bj)=>{"use strict";p();y();var I2e=lx(),k2e=$5();Bj.exports=function(){var t=k2e();return I2e(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var Nj=K((ent,Oj)=>{"use strict";p();y();var T2e=$B(),P2e=lx(),_2e=G5(),Mj=$5(),B2e=Cj(),Rj=T2e(Mj(),Number);P2e(Rj,{getPolyfill:Mj,implementation:_2e,shim:B2e});Oj.exports=Rj});var eG=K((nnt,Xj)=>{"use strict";p();y();function Uj(e,t){return R2e(e)||M2e(e,t)||C2e()}function C2e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function M2e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(c){i=!0,o=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}function R2e(e){if(Array.isArray(e))return e}function Oo(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oo=function(r){return typeof r}:Oo=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Oo(e)}var O2e=/a/g.flags!==void 0,tE=function(t){var r=[];return t.forEach(function(n){return r.push(n)}),r},Dj=function(t){var r=[];return t.forEach(function(n,i){return r.push([i,n])}),r},$j=Object.is?Object.is:j5(),XS=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},Y5=Number.isNaN?Number.isNaN:Nj();function Z5(e){return e.call.bind(e)}var Ub=Z5(Object.prototype.hasOwnProperty),eE=Z5(Object.prototype.propertyIsEnumerable),Lj=Z5(Object.prototype.toString),zi=W0().types,N2e=zi.isAnyArrayBuffer,U2e=zi.isArrayBufferView,Kj=zi.isDate,YS=zi.isMap,Fj=zi.isRegExp,JS=zi.isSet,D2e=zi.isNativeError,L2e=zi.isBoxedPrimitive,Vj=zi.isNumberObject,qj=zi.isStringObject,Hj=zi.isBooleanObject,Wj=zi.isBigIntObject,K2e=zi.isSymbolObject,F2e=zi.isFloat32Array,V2e=zi.isFloat64Array;function q2e(e){if(e.length===0||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return e.length===10&&e>=Math.pow(2,32)}function ZS(e){return Object.keys(e).filter(q2e).concat(XS(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function Yj(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var QS=void 0,H2e=!0,W2e=!1,J5=0,Q5=1,Jj=2,Zj=3;function z2e(e,t){return O2e?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function j2e(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function G2e(e,t){return e.byteLength!==t.byteLength?!1:Yj(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function $2e(e,t){return e.byteLength===t.byteLength&&Yj(new Uint8Array(e),new Uint8Array(t))===0}function Y2e(e,t){return Vj(e)?Vj(t)&&$j(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):qj(e)?qj(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):Hj(e)?Hj(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):Wj(e)?Wj(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):K2e(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function ps(e,t,r,n){if(e===t)return e!==0?!0:r?$j(e,t):!0;if(r){if(Oo(e)!=="object")return typeof e=="number"&&Y5(e)&&Y5(t);if(Oo(t)!=="object"||e===null||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(e===null||Oo(e)!=="object")return t===null||Oo(t)!=="object"?e==t:!1;if(t===null||Oo(t)!=="object")return!1}var i=Lj(e),o=Lj(t);if(i!==o)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var s=ZS(e,QS),a=ZS(t,QS);return s.length!==a.length?!1:Nb(e,t,r,n,Q5,s)}if(i==="[object Object]"&&(!YS(e)&&YS(t)||!JS(e)&&JS(t)))return!1;if(Kj(e)){if(!Kj(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(Fj(e)){if(!Fj(t)||!z2e(e,t))return!1}else if(D2e(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(U2e(e)){if(!r&&(F2e(e)||V2e(e))){if(!j2e(e,t))return!1}else if(!G2e(e,t))return!1;var c=ZS(e,QS),u=ZS(t,QS);return c.length!==u.length?!1:Nb(e,t,r,n,J5,c)}else{if(JS(e))return!JS(t)||e.size!==t.size?!1:Nb(e,t,r,n,Jj);if(YS(e))return!YS(t)||e.size!==t.size?!1:Nb(e,t,r,n,Zj);if(N2e(e)){if(!$2e(e,t))return!1}else if(L2e(e)&&!Y2e(e,t))return!1}return Nb(e,t,r,n,J5)}function zj(e,t){return t.filter(function(r){return eE(e,r)})}function Nb(e,t,r,n,i,o){if(arguments.length===5){o=Object.keys(e);var s=Object.keys(t);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!Ub(t,o[a]))return!1;if(r&&arguments.length===5){var c=XS(e);if(c.length!==0){var u=0;for(a=0;a<c.length;a++){var h=c[a];if(eE(e,h)){if(!eE(t,h))return!1;o.push(h),u++}else if(eE(t,h))return!1}var l=XS(t);if(c.length!==l.length&&zj(t,l).length!==u)return!1}else{var g=XS(t);if(g.length!==0&&zj(t,g).length!==0)return!1}}if(o.length===0&&(i===J5||i===Q5&&e.length===0||e.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var x=n.val1.get(e);if(x!==void 0){var A=n.val2.get(t);if(A!==void 0)return x===A}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var E=eSe(e,t,r,o,n,i);return n.val1.delete(e),n.val2.delete(t),E}function jj(e,t,r,n){for(var i=tE(e),o=0;o<i.length;o++){var s=i[o];if(ps(t,s,r,n))return e.delete(s),!0}return!1}function Qj(e){switch(Oo(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(Y5(e))return!1}return!0}function J2e(e,t,r){var n=Qj(r);return n??(t.has(n)&&!e.has(n))}function Z2e(e,t,r,n,i){var o=Qj(r);if(o!=null)return o;var s=t.get(o);return s===void 0&&!t.has(o)||!ps(n,s,!1,i)?!1:!e.has(o)&&ps(n,s,!1,i)}function Q2e(e,t,r,n){for(var i=null,o=tE(e),s=0;s<o.length;s++){var a=o[s];if(Oo(a)==="object"&&a!==null)i===null&&(i=new Set),i.add(a);else if(!t.has(a)){if(r||!J2e(e,t,a))return!1;i===null&&(i=new Set),i.add(a)}}if(i!==null){for(var c=tE(t),u=0;u<c.length;u++){var h=c[u];if(Oo(h)==="object"&&h!==null){if(!jj(i,h,r,n))return!1}else if(!r&&!e.has(h)&&!jj(i,h,r,n))return!1}return i.size===0}return!0}function Gj(e,t,r,n,i,o){for(var s=tE(e),a=0;a<s.length;a++){var c=s[a];if(ps(r,c,i,o)&&ps(n,t.get(c),i,o))return e.delete(c),!0}return!1}function X2e(e,t,r,n){for(var i=null,o=Dj(e),s=0;s<o.length;s++){var a=Uj(o[s],2),c=a[0],u=a[1];if(Oo(c)==="object"&&c!==null)i===null&&(i=new Set),i.add(c);else{var h=t.get(c);if(h===void 0&&!t.has(c)||!ps(u,h,r,n)){if(r||!Z2e(e,t,c,u,n))return!1;i===null&&(i=new Set),i.add(c)}}}if(i!==null){for(var l=Dj(t),g=0;g<l.length;g++){var x=Uj(l[g],2),c=x[0],A=x[1];if(Oo(c)==="object"&&c!==null){if(!Gj(i,e,c,A,r,n))return!1}else if(!r&&(!e.has(c)||!ps(e.get(c),A,!1,n))&&!Gj(i,e,c,A,!1,n))return!1}return i.size===0}return!0}function eSe(e,t,r,n,i,o){var s=0;if(o===Jj){if(!Q2e(e,t,r,i))return!1}else if(o===Zj){if(!X2e(e,t,r,i))return!1}else if(o===Q5)for(;s<e.length;s++)if(Ub(e,s)){if(!Ub(t,s)||!ps(e[s],t[s],r,i))return!1}else{if(Ub(t,s))return!1;for(var a=Object.keys(e);s<a.length;s++){var c=a[s];if(!Ub(t,c)||!ps(e[c],t[c],r,i))return!1}return a.length===Object.keys(t).length}for(s=0;s<n.length;s++){var u=n[s];if(!ps(e[u],t[u],r,i))return!1}return!0}function tSe(e,t){return ps(e,t,W2e)}function rSe(e,t){return ps(e,t,H2e)}Xj.exports={isDeepEqual:tSe,isDeepStrictEqual:rSe}});var Bb=K((snt,mG)=>{"use strict";p();y();function ol(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ol=function(r){return typeof r}:ol=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ol(e)}function nSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var iSe=F5(),Lb=iSe.codes,tG=Lb.ERR_AMBIGUOUS_ARGUMENT,Db=Lb.ERR_INVALID_ARG_TYPE,oSe=Lb.ERR_INVALID_ARG_VALUE,sSe=Lb.ERR_INVALID_RETURN_VALUE,al=Lb.ERR_MISSING_ARGS,th=mj(),aSe=W0(),cSe=aSe.inspect,oG=W0().types,uSe=oG.isPromise,X5=oG.isRegExp,fSe=Object.assign?Object.assign:xj().assign,sG=Object.is?Object.is:j5(),sl,rE;function Kb(){var e=eG();sl=e.isDeepEqual,rE=e.isDeepStrictEqual}var rG=!1,Cr=mG.exports=e_,nE={};function da(e){throw e.message instanceof Error?e.message:new th(e)}function aG(e,t,r,n,i){var o=arguments.length,s;if(o===0)s="Failed";else if(o===1)r=e,e=void 0;else{if(rG===!1){rG=!0;var a=process.emitWarning?process.emitWarning:console.warn.bind(console);a("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var c={actual:e,expected:t,operator:n===void 0?"fail":n,stackStartFn:i||aG};r!==void 0&&(c.message=r);var u=new th(c);throw s&&(u.message=s,u.generatedMessage=!0),u}Cr.fail=aG;Cr.AssertionError=th;function cG(e,t,r,n){if(!r){var i=!1;if(t===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new th({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function e_(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];cG.apply(void 0,[e_,t.length].concat(t))}Cr.ok=e_;Cr.equal=function e(t,r,n){if(arguments.length<2)throw new al("actual","expected");t!=r&&da({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})};Cr.notEqual=function e(t,r,n){if(arguments.length<2)throw new al("actual","expected");t==r&&da({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})};Cr.deepEqual=function e(t,r,n){if(arguments.length<2)throw new al("actual","expected");sl===void 0&&Kb(),sl(t,r)||da({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})};Cr.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new al("actual","expected");sl===void 0&&Kb(),sl(t,r)&&da({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})};Cr.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new al("actual","expected");sl===void 0&&Kb(),rE(t,r)||da({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})};Cr.notDeepStrictEqual=uG;function uG(e,t,r){if(arguments.length<2)throw new al("actual","expected");sl===void 0&&Kb(),rE(e,t)&&da({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:uG})}Cr.strictEqual=function e(t,r,n){if(arguments.length<2)throw new al("actual","expected");sG(t,r)||da({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})};Cr.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new al("actual","expected");sG(t,r)&&da({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var nG=function e(t,r,n){var i=this;nSe(this,e),r.forEach(function(o){o in t&&(n!==void 0&&typeof n[o]=="string"&&X5(t[o])&&t[o].test(n[o])?i[o]=n[o]:i[o]=t[o])})};function lSe(e,t,r,n,i,o){if(!(r in e)||!rE(e[r],t[r])){if(!n){var s=new nG(e,i),a=new nG(t,i,e),c=new th({actual:s,expected:a,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=e,c.expected=t,c.operator=o.name,c}da({actual:e,expected:t,message:n,operator:o.name,stackStartFn:o})}}function fG(e,t,r,n){if(typeof t!="function"){if(X5(t))return t.test(e);if(arguments.length===2)throw new Db("expected",["Function","RegExp"],t);if(ol(e)!=="object"||e===null){var i=new th({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(t);if(t instanceof Error)o.push("name","message");else if(o.length===0)throw new oSe("error",t,"may not be an empty object");return sl===void 0&&Kb(),o.forEach(function(s){typeof e[s]=="string"&&X5(t[s])&&t[s].test(e[s])||lSe(e,t,s,r,o,n)}),!0}return t.prototype!==void 0&&e instanceof t?!0:Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function lG(e){if(typeof e!="function")throw new Db("fn","Function",e);try{e()}catch(t){return t}return nE}function iG(e){return uSe(e)||e!==null&&ol(e)==="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function dG(e){return Promise.resolve().then(function(){var t;if(typeof e=="function"){if(t=e(),!iG(t))throw new sSe("instance of Promise","promiseFn",t)}else if(iG(e))t=e;else throw new Db("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return nE}).catch(function(r){return r})})}function hG(e,t,r,n){if(typeof r=="string"){if(arguments.length===4)throw new Db("error",["Object","Error","Function","RegExp"],r);if(ol(t)==="object"&&t!==null){if(t.message===r)throw new tG("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new tG("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&ol(r)!=="object"&&typeof r!="function")throw new Db("error",["Object","Error","Function","RegExp"],r);if(t===nE){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=e.name==="rejects"?"rejection":"exception";da({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(r&&!fG(t,r,n,e))throw t}function pG(e,t,r,n){if(t!==nE){if(typeof r=="string"&&(n=r,r=void 0),!r||fG(t,r)){var i=n?": ".concat(n):".",o=e.name==="doesNotReject"?"rejection":"exception";da({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}Cr.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];hG.apply(void 0,[e,lG(t)].concat(n))};Cr.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return dG(t).then(function(o){return hG.apply(void 0,[e,o].concat(n))})};Cr.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];pG.apply(void 0,[e,lG(t)].concat(n))};Cr.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return dG(t).then(function(o){return pG.apply(void 0,[e,o].concat(n))})};Cr.ifError=function e(t){if(t!=null){var r="ifError got unwanted exception: ";ol(t)==="object"&&typeof t.message=="string"?t.message.length===0&&t.constructor?r+=t.constructor.name:r+=t.message:r+=cSe(t);var n=new th({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var s=n.stack.split(`
`),a=0;a<o.length;a++){var c=s.indexOf(o[a]);if(c!==-1){s=s.slice(0,c);break}}n.stack="".concat(s.join(`
`),`
`).concat(o.join(`
`))}throw n}};function yG(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];cG.apply(void 0,[yG,t.length].concat(t))}Cr.strict=fSe(yG,Cr,{equal:Cr.strictEqual,deepEqual:Cr.deepStrictEqual,notEqual:Cr.notStrictEqual,notDeepEqual:Cr.notDeepStrictEqual});Cr.strict.strict=Cr.strict});var Y0=K(kt=>{"use strict";p();y();Object.defineProperty(kt,"__esModule",{value:!0});kt.baToJSON=kt.addHexPrefix=kt.toUnsigned=kt.fromSigned=kt.bufferToHex=kt.bufferToInt=kt.toBuffer=kt.stripZeros=kt.unpad=kt.setLengthRight=kt.setLength=kt.setLengthLeft=kt.zeros=void 0;var $0=Gd(),t_=zd();kt.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};kt.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=kt.zeros(t);return e=kt.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};kt.setLength=kt.setLengthLeft;kt.setLengthRight=function(e,t){return kt.setLength(e,t,!0)};kt.unpad=function(e){e=$0.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};kt.stripZeros=kt.unpad;kt.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if($0.isHexString(e))e=Buffer.from($0.padToEven($0.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=$0.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(t_.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};kt.bufferToInt=function(e){return new t_(kt.toBuffer(e)).toNumber()};kt.bufferToHex=function(e){return e=kt.toBuffer(e),"0x"+e.toString("hex")};kt.fromSigned=function(e){return new t_(e).fromTwos(256)};kt.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};kt.addHexPrefix=function(e){return typeof e!="string"||$0.isHexPrefixed(e)?e:"0x"+e};kt.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(kt.baToJSON(e[r]));return t}}});var gG=K(r_=>{"use strict";p();y();Object.defineProperty(r_,"__esModule",{value:!0});function dSe(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}r_.createHashFunction=dSe});var wG=K((ynt,xG)=>{p();y();var{Transform:hSe}=BB();xG.exports=e=>class bG extends hSe{constructor(r,n,i,o,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=o,this._options=s,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(s){o=s}i(o)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new bG(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var SG=K((bnt,AG)=>{p();y();var{Transform:pSe}=BB();AG.exports=e=>class vG extends pSe{constructor(r,n,i,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=o,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(s){o=s}i(o)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new vG(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var IG=K((vnt,EG)=>{p();y();var ySe=wG(),mSe=SG();EG.exports=function(e){let t=ySe(e),r=mSe(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var PG=K(TG=>{p();y();var kG=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];TG.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],s=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],h=e[8]^e[18]^e[28]^e[38]^e[48],l=e[9]^e[19]^e[29]^e[39]^e[49],g=h^(i<<1|o>>>31),x=l^(o<<1|i>>>31),A=e[0]^g,E=e[1]^x,C=e[10]^g,M=e[11]^x,N=e[20]^g,R=e[21]^x,V=e[30]^g,q=e[31]^x,W=e[40]^g,G=e[41]^x;g=r^(s<<1|a>>>31),x=n^(a<<1|s>>>31);let z=e[2]^g,ee=e[3]^x,_=e[12]^g,f=e[13]^x,m=e[22]^g,b=e[23]^x,v=e[32]^g,w=e[33]^x,P=e[42]^g,B=e[43]^x;g=i^(c<<1|u>>>31),x=o^(u<<1|c>>>31);let k=e[4]^g,d=e[5]^x,S=e[14]^g,F=e[15]^x,U=e[24]^g,D=e[25]^x,J=e[34]^g,ue=e[35]^x,fe=e[44]^g,j=e[45]^x;g=s^(h<<1|l>>>31),x=a^(l<<1|h>>>31);let se=e[6]^g,L=e[7]^x,Y=e[16]^g,Z=e[17]^x,re=e[26]^g,pe=e[27]^x,te=e[36]^g,ce=e[37]^x,ut=e[46]^g,Ie=e[47]^x;g=c^(r<<1|n>>>31),x=u^(n<<1|r>>>31);let _e=e[8]^g,Ko=e[9]^x,Oe=e[18]^g,Be=e[19]^x,xa=e[28]^g,Ce=e[29]^x,nt=e[38]^g,xu=e[39]^x,it=e[48]^g,ot=e[49]^x,yc=A,Ne=E,Ue=M<<4|C>>>28,mc=C<<4|M>>>28,De=N<<3|R>>>29,Le=R<<3|N>>>29,gc=q<<9|V>>>23,Ke=V<<9|q>>>23,Fe=W<<18|G>>>14,bc=G<<18|W>>>14,Ve=z<<1|ee>>>31,qe=ee<<1|z>>>31,xc=f<<12|_>>>20,He=_<<12|f>>>20,We=m<<10|b>>>22,wc=b<<10|m>>>22,ze=w<<13|v>>>19,je=v<<13|w>>>19,vc=P<<2|B>>>30,Ge=B<<2|P>>>30,$e=d<<30|k>>>2,Ac=k<<30|d>>>2,Ye=S<<6|F>>>26,Je=F<<6|S>>>26,Sc=D<<11|U>>>21,Ze=U<<11|D>>>21,Qe=J<<15|ue>>>17,Ec=ue<<15|J>>>17,Xe=j<<29|fe>>>3,et=fe<<29|j>>>3,Ic=se<<28|L>>>4,tt=L<<28|se>>>4,rt=Z<<23|Y>>>9,xs=Y<<23|Z>>>9,ws=re<<25|pe>>>7,vs=pe<<25|re>>>7,As=te<<21|ce>>>11,Ss=ce<<21|te>>>11,Es=Ie<<24|ut>>>8,Is=ut<<24|Ie>>>8,ks=_e<<27|Ko>>>5,Ts=Ko<<27|_e>>>5,Ps=Oe<<20|Be>>>12,_s=Be<<20|Oe>>>12,Bs=Ce<<7|xa>>>25,Cs=xa<<7|Ce>>>25,Ms=nt<<8|xu>>>24,Rs=xu<<8|nt>>>24,Os=it<<14|ot>>>18,Ns=ot<<14|it>>>18;e[0]=yc^~xc&Sc,e[1]=Ne^~He&Ze,e[10]=Ic^~Ps&De,e[11]=tt^~_s&Le,e[20]=Ve^~Ye&ws,e[21]=qe^~Je&vs,e[30]=ks^~Ue&We,e[31]=Ts^~mc&wc,e[40]=$e^~rt&Bs,e[41]=Ac^~xs&Cs,e[2]=xc^~Sc&As,e[3]=He^~Ze&Ss,e[12]=Ps^~De&ze,e[13]=_s^~Le&je,e[22]=Ye^~ws&Ms,e[23]=Je^~vs&Rs,e[32]=Ue^~We&Qe,e[33]=mc^~wc&Ec,e[42]=rt^~Bs&gc,e[43]=xs^~Cs&Ke,e[4]=Sc^~As&Os,e[5]=Ze^~Ss&Ns,e[14]=De^~ze&Xe,e[15]=Le^~je&et,e[24]=ws^~Ms&Fe,e[25]=vs^~Rs&bc,e[34]=We^~Qe&Es,e[35]=wc^~Ec&Is,e[44]=Bs^~gc&vc,e[45]=Cs^~Ke&Ge,e[6]=As^~Os&yc,e[7]=Ss^~Ns&Ne,e[16]=ze^~Xe&Ic,e[17]=je^~et&tt,e[26]=Ms^~Fe&Ve,e[27]=Rs^~bc&qe,e[36]=Qe^~Es&ks,e[37]=Ec^~Is&Ts,e[46]=gc^~vc&$e,e[47]=Ke^~Ge&Ac,e[8]=Os^~yc&xc,e[9]=Ns^~Ne&He,e[18]=Xe^~Ic&Ps,e[19]=et^~tt&_s,e[28]=Fe^~Ve&Ye,e[29]=bc^~qe&Je,e[38]=Es^~ks&Ue,e[39]=Is^~Ts&mc,e[48]=vc^~$e&rt,e[49]=Ge^~Ac&xs,e[0]^=kG[t*2],e[1]^=kG[t*2+1]}}});var BG=K((Tnt,_G)=>{p();y();var iE=PG();function J0(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}J0.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};J0.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(iE.p1600(this.state),this.count=0)};J0.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&iE.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),iE.p1600(this.state),this.count=0,this.squeezing=!0};J0.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(iE.p1600(this.state),this.count=0);return t};J0.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};_G.exports=J0});var MG=K((Bnt,CG)=>{p();y();CG.exports=IG()(BG())});var RG=K(Z0=>{"use strict";p();y();Object.defineProperty(Z0,"__esModule",{value:!0});var oE=gG(),sE=MG();Z0.keccak224=oE.createHashFunction(function(){return sE("keccak224")});Z0.keccak256=oE.createHashFunction(function(){return sE("keccak256")});Z0.keccak384=oE.createHashFunction(function(){return sE("keccak384")});Z0.keccak512=oE.createHashFunction(function(){return sE("keccak512")})});var uE=K(ao=>{"use strict";p();y();Object.defineProperty(ao,"__esModule",{value:!0});ao.rlphash=ao.ripemd160=ao.sha256=ao.keccak256=ao.keccak=void 0;var cE=RG(),gSe=cE.keccak224,bSe=cE.keccak384,xSe=cE.keccak256,wSe=cE.keccak512,OG=CB(),vSe=Gd(),ASe=IS(),aE=Y0();ao.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!vSe.isHexString(e)?e=Buffer.from(e,"utf8"):e=aE.toBuffer(e),t||(t=256),t){case 224:return gSe(e);case 256:return xSe(e);case 384:return bSe(e);case 512:return wSe(e);default:throw new Error("Invald algorithm: keccak"+t)}};ao.keccak256=function(e){return ao.keccak(e)};ao.sha256=function(e){return e=aE.toBuffer(e),OG("sha256").update(e).digest()};ao.ripemd160=function(e,t){e=aE.toBuffer(e);var r=OG("rmd160").update(e).digest();return t===!0?aE.setLength(r,32):r};ao.rlphash=function(e){return ao.keccak(ASe.encode(e))}});var NG=K(mt=>{"use strict";p();y();Object.defineProperty(mt,"__esModule",{value:!0});mt.importPublic=mt.privateToPublic=mt.privateToAddress=mt.publicToAddress=mt.pubToAddress=mt.isValidPublic=mt.isValidPrivate=mt.isPrecompiled=mt.generateAddress2=mt.generateAddress=mt.isValidChecksumAddress=mt.toChecksumAddress=mt.isZeroAddress=mt.isValidAddress=mt.zeroAddress=void 0;var n_=Bb(),SSe=Gd(),Q0=SS(),ESe=zd(),ha=Y0(),X0=uE();mt.zeroAddress=function(){var e=20,t=ha.zeros(e);return ha.bufferToHex(t)};mt.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};mt.isZeroAddress=function(e){var t=mt.zeroAddress();return t===ha.addHexPrefix(e)};mt.toChecksumAddress=function(e,t){e=SSe.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=X0.keccak(r+e).toString("hex"),i="0x",o=0;o<e.length;o++)parseInt(n[o],16)>=8?i+=e[o].toUpperCase():i+=e[o];return i};mt.isValidChecksumAddress=function(e,t){return mt.isValidAddress(e)&&mt.toChecksumAddress(e,t)===e};mt.generateAddress=function(e,t){e=ha.toBuffer(e);var r=new ESe(t);return r.isZero()?X0.rlphash([e,null]).slice(-20):X0.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};mt.generateAddress2=function(e,t,r){var n=ha.toBuffer(e),i=ha.toBuffer(t),o=ha.toBuffer(r);n_(n.length===20),n_(i.length===32);var s=X0.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,i,X0.keccak256(o)]));return s.slice(-20)};mt.isPrecompiled=function(e){var t=ha.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};mt.isValidPrivate=function(e){return Q0.privateKeyVerify(e)};mt.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?Q0.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?Q0.publicKeyVerify(e):!1};mt.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=ha.toBuffer(e),t&&e.length!==64&&(e=Q0.publicKeyConvert(e,!1).slice(1)),n_(e.length===64),X0.keccak(e).slice(-20)};mt.publicToAddress=mt.pubToAddress;mt.privateToAddress=function(e){return mt.publicToAddress(mt.privateToPublic(e))};mt.privateToPublic=function(e){return e=ha.toBuffer(e),Q0.publicKeyCreate(e,!1).slice(1)};mt.importPublic=function(e){return e=ha.toBuffer(e),e.length!==64&&(e=Q0.publicKeyConvert(e,!1).slice(1)),e}});var UG=K(co=>{"use strict";p();y();Object.defineProperty(co,"__esModule",{value:!0});co.hashPersonalMessage=co.isValidSignature=co.fromRpcSig=co.toRpcSig=co.ecrecover=co.ecsign=void 0;var i_=SS(),fE=zd(),rh=Y0(),ISe=uE();co.ecsign=function(e,t,r){var n=i_.sign(e,t),i=n.recovery,o={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(r*2+35):i+27};return o};co.ecrecover=function(e,t,r,n,i){var o=Buffer.concat([rh.setLength(r,32),rh.setLength(n,32)],64),s=o_(t,i);if(!s_(s))throw new Error("Invalid signature v value");var a=i_.recover(e,o,s);return i_.publicKeyConvert(a,!1).slice(1)};co.toRpcSig=function(e,t,r,n){var i=o_(e,n);if(!s_(i))throw new Error("Invalid signature v value");return rh.bufferToHex(Buffer.concat([rh.setLengthLeft(t,32),rh.setLengthLeft(r,32),rh.toBuffer(e)]))};co.fromRpcSig=function(e){var t=rh.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};co.isValidSignature=function(e,t,r,n,i){n===void 0&&(n=!0);var o=new fE("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new fE("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!s_(o_(e,i)))return!1;var a=new fE(t),c=new fE(r);return!(a.isZero()||a.gt(s)||c.isZero()||c.gt(s)||n&&c.cmp(o)===1)};co.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return ISe.keccak(Buffer.concat([t,e]))};function o_(e,t){return t?e-(2*t+35):e-27}function s_(e){return e===0||e===1}});var KG=K(dE=>{"use strict";p();y();Object.defineProperty(dE,"__esModule",{value:!0});dE.defineProperties=void 0;var DG=Bb(),kSe=Gd(),LG=IS(),lE=Y0();dE.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var o={};return e._fields.forEach(function(s){o[s]="0x"+e[s].toString("hex")}),o}return lE.baToJSON(e.raw)},e.serialize=function(){return LG.encode(e.raw)},t.forEach(function(i,o){e._fields.push(i.name);function s(){return e.raw[o]}function a(c){c=lE.toBuffer(c),c.toString("hex")==="00"&&!i.allowZero&&(c=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(c=lE.stripZeros(c),DG(i.length>=c.length,"The field "+i.name+" must not have more "+i.length+" bytes")):!(i.allowZero&&c.length===0)&&i.length&&DG(i.length===c.length,"The field "+i.name+" must have byte length of "+i.length),e.raw[o]=c}Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:s,set:a}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:a,get:s})}),r)if(typeof r=="string"&&(r=Buffer.from(kSe.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=LG.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(i,o){e[e._fields[o]]=lE.toBuffer(i)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=r[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=r[i.alias])})}else throw new Error("invalid data")}});var Fb=K(kn=>{"use strict";p();y();var TSe=kn&&kn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ey=kn&&kn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&TSe(t,e,r)};Object.defineProperty(kn,"__esModule",{value:!0});kn.secp256k1=kn.rlp=kn.BN=void 0;var PSe=SS();kn.secp256k1=PSe;var _Se=Gd(),BSe=zd();kn.BN=BSe;var CSe=IS();kn.rlp=CSe;Object.assign(kn,_Se);ey(BW(),kn);ey(NG(),kn);ey(uE(),kn);ey(UG(),kn);ey(Y0(),kn);ey(KG(),kn)});var Vb=K(uo=>{"use strict";p();y();Object.defineProperty(uo,"__esModule",{value:!0});uo.normalize=uo.recoverPublicKey=uo.concatSig=uo.legacyToBuffer=uo.isNullish=uo.padWithZeroes=void 0;var ys=Fb(),a_=Gd();function c_(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}uo.padWithZeroes=c_;function MSe(e){return e==null}uo.isNullish=MSe;function RSe(e){return typeof e=="string"&&!a_.isHexString(e)?Buffer.from(e):ys.toBuffer(e)}uo.legacyToBuffer=RSe;function OSe(e,t,r){let n=ys.fromSigned(t),i=ys.fromSigned(r),o=ys.bufferToInt(e),s=c_(ys.toUnsigned(n).toString("hex"),64),a=c_(ys.toUnsigned(i).toString("hex"),64),c=a_.stripHexPrefix(a_.intToHex(o));return ys.addHexPrefix(s.concat(a,c))}uo.concatSig=OSe;function NSe(e,t){let r=ys.fromRpcSig(t);return ys.ecrecover(e,r.v,r.r,r.s)}uo.recoverPublicKey=NSe;function USe(e){if(e){if(typeof e=="number"){let t=ys.toBuffer(e);e=ys.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return ys.addHexPrefix(e.toLowerCase())}}uo.normalize=USe});var VG=K(cl=>{"use strict";p();y();Object.defineProperty(cl,"__esModule",{value:!0});cl.extractPublicKey=cl.recoverPersonalSignature=cl.personalSign=void 0;var ty=Fb(),sc=Vb();function DSe({privateKey:e,data:t}){if(sc.isNullish(t))throw new Error("Missing data parameter");if(sc.isNullish(e))throw new Error("Missing privateKey parameter");let r=sc.legacyToBuffer(t),n=ty.hashPersonalMessage(r),i=ty.ecsign(n,e);return sc.concatSig(ty.toBuffer(i.v),i.r,i.s)}cl.personalSign=DSe;function LSe({data:e,signature:t}){if(sc.isNullish(e))throw new Error("Missing data parameter");if(sc.isNullish(t))throw new Error("Missing signature parameter");let r=FG(e,t),n=ty.publicToAddress(r);return ty.bufferToHex(n)}cl.recoverPersonalSignature=LSe;function KSe({data:e,signature:t}){if(sc.isNullish(e))throw new Error("Missing data parameter");if(sc.isNullish(t))throw new Error("Missing signature parameter");return`0x${FG(e,t).toString("hex")}`}cl.extractPublicKey=KSe;function FG(e,t){let r=ty.hashPersonalMessage(sc.legacyToBuffer(e));return sc.recoverPublicKey(r,t)}});var HG=K((qG,u_)=>{p();y();(function(e,t){"use strict";function r(_,f){if(!_)throw new Error(f||"Assertion failed")}function n(_,f){_.super_=f;var m=function(){};m.prototype=f.prototype,_.prototype=new m,_.prototype.constructor=_}function i(_,f,m){if(i.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((f==="le"||f==="be")&&(m=f,f=10),this._init(_||0,f||10,m||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=MB().Buffer}catch{}i.isBN=function(f){return f instanceof i?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===i.wordSize&&Array.isArray(f.words)},i.max=function(f,m){return f.cmp(m)>0?f:m},i.min=function(f,m){return f.cmp(m)<0?f:m},i.prototype._init=function(f,m,b){if(typeof f=="number")return this._initNumber(f,m,b);if(typeof f=="object")return this._initArray(f,m,b);m==="hex"&&(m=16),r(m===(m|0)&&m>=2&&m<=36),f=f.toString().replace(/\s+/g,"");var v=0;f[0]==="-"&&(v++,this.negative=1),v<f.length&&(m===16?this._parseHex(f,v,b):(this._parseBase(f,m,v),b==="le"&&this._initArray(this.toArray(),m,b)))},i.prototype._initNumber=function(f,m,b){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),m,b)},i.prototype._initArray=function(f,m,b){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w,P,B=0;if(b==="be")for(v=f.length-1,w=0;v>=0;v-=3)P=f[v]|f[v-1]<<8|f[v-2]<<16,this.words[w]|=P<<B&67108863,this.words[w+1]=P>>>26-B&67108863,B+=24,B>=26&&(B-=26,w++);else if(b==="le")for(v=0,w=0;v<f.length;v+=3)P=f[v]|f[v+1]<<8|f[v+2]<<16,this.words[w]|=P<<B&67108863,this.words[w+1]=P>>>26-B&67108863,B+=24,B>=26&&(B-=26,w++);return this.strip()};function s(_,f){var m=_.charCodeAt(f);return m>=65&&m<=70?m-55:m>=97&&m<=102?m-87:m-48&15}function a(_,f,m){var b=s(_,m);return m-1>=f&&(b|=s(_,m-1)<<4),b}i.prototype._parseHex=function(f,m,b){this.length=Math.ceil((f.length-m)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w=0,P=0,B;if(b==="be")for(v=f.length-1;v>=m;v-=2)B=a(f,m,v)<<w,this.words[P]|=B&67108863,w>=18?(w-=18,P+=1,this.words[P]|=B>>>26):w+=8;else{var k=f.length-m;for(v=k%2===0?m+1:m;v<f.length;v+=2)B=a(f,m,v)<<w,this.words[P]|=B&67108863,w>=18?(w-=18,P+=1,this.words[P]|=B>>>26):w+=8}this.strip()};function c(_,f,m,b){for(var v=0,w=Math.min(_.length,m),P=f;P<w;P++){var B=_.charCodeAt(P)-48;v*=b,B>=49?v+=B-49+10:B>=17?v+=B-17+10:v+=B}return v}i.prototype._parseBase=function(f,m,b){this.words=[0],this.length=1;for(var v=0,w=1;w<=67108863;w*=m)v++;v--,w=w/m|0;for(var P=f.length-b,B=P%v,k=Math.min(P,P-B)+b,d=0,S=b;S<k;S+=v)d=c(f,S,S+v,m),this.imuln(w),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(B!==0){var F=1;for(d=c(f,S,f.length,m),S=0;S<B;S++)F*=m;this.imuln(F),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},i.prototype.copy=function(f){f.words=new Array(this.length);for(var m=0;m<this.length;m++)f.words[m]=this.words[m];f.length=this.length,f.negative=this.negative,f.red=this.red},i.prototype.clone=function(){var f=new i(null);return this.copy(f),f},i.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(f,m){f=f||10,m=m|0||1;var b;if(f===16||f==="hex"){b="";for(var v=0,w=0,P=0;P<this.length;P++){var B=this.words[P],k=((B<<v|w)&16777215).toString(16);w=B>>>24-v&16777215,w!==0||P!==this.length-1?b=u[6-k.length]+k+b:b=k+b,v+=2,v>=26&&(v-=26,P--)}for(w!==0&&(b=w.toString(16)+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(f===(f|0)&&f>=2&&f<=36){var d=h[f],S=l[f];b="";var F=this.clone();for(F.negative=0;!F.isZero();){var U=F.modn(S).toString(f);F=F.idivn(S),F.isZero()?b=U+b:b=u[d-U.length]+U+b}for(this.isZero()&&(b="0"+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(f,m){return r(typeof o<"u"),this.toArrayLike(o,f,m)},i.prototype.toArray=function(f,m){return this.toArrayLike(Array,f,m)},i.prototype.toArrayLike=function(f,m,b){var v=this.byteLength(),w=b||Math.max(1,v);r(v<=w,"byte array longer than desired length"),r(w>0,"Requested array length <= 0"),this.strip();var P=m==="le",B=new f(w),k,d,S=this.clone();if(P){for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),B[d]=k;for(;d<w;d++)B[d]=0}else{for(d=0;d<w-v;d++)B[d]=0;for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),B[w-d-1]=k}return B},Math.clz32?i.prototype._countBits=function(f){return 32-Math.clz32(f)}:i.prototype._countBits=function(f){var m=f,b=0;return m>=4096&&(b+=13,m>>>=13),m>=64&&(b+=7,m>>>=7),m>=8&&(b+=4,m>>>=4),m>=2&&(b+=2,m>>>=2),b+m},i.prototype._zeroBits=function(f){if(f===0)return 26;var m=f,b=0;return m&8191||(b+=13,m>>>=13),m&127||(b+=7,m>>>=7),m&15||(b+=4,m>>>=4),m&3||(b+=2,m>>>=2),m&1||b++,b},i.prototype.bitLength=function(){var f=this.words[this.length-1],m=this._countBits(f);return(this.length-1)*26+m};function g(_){for(var f=new Array(_.bitLength()),m=0;m<f.length;m++){var b=m/26|0,v=m%26;f[m]=(_.words[b]&1<<v)>>>v}return f}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,m=0;m<this.length;m++){var b=this._zeroBits(this.words[m]);if(f+=b,b!==26)break}return f},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},i.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var m=0;m<f.length;m++)this.words[m]=this.words[m]|f.words[m];return this.strip()},i.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},i.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},i.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},i.prototype.iuand=function(f){var m;this.length>f.length?m=f:m=this;for(var b=0;b<m.length;b++)this.words[b]=this.words[b]&f.words[b];return this.length=m.length,this.strip()},i.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},i.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},i.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},i.prototype.iuxor=function(f){var m,b;this.length>f.length?(m=this,b=f):(m=f,b=this);for(var v=0;v<b.length;v++)this.words[v]=m.words[v]^b.words[v];if(this!==m)for(;v<m.length;v++)this.words[v]=m.words[v];return this.length=m.length,this.strip()},i.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},i.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},i.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},i.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var m=Math.ceil(f/26)|0,b=f%26;this._expand(m),b>0&&m--;for(var v=0;v<m;v++)this.words[v]=~this.words[v]&67108863;return b>0&&(this.words[v]=~this.words[v]&67108863>>26-b),this.strip()},i.prototype.notn=function(f){return this.clone().inotn(f)},i.prototype.setn=function(f,m){r(typeof f=="number"&&f>=0);var b=f/26|0,v=f%26;return this._expand(b+1),m?this.words[b]=this.words[b]|1<<v:this.words[b]=this.words[b]&~(1<<v),this.strip()},i.prototype.iadd=function(f){var m;if(this.negative!==0&&f.negative===0)return this.negative=0,m=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,m=this.isub(f),f.negative=1,m._normSign();var b,v;this.length>f.length?(b=this,v=f):(b=f,v=this);for(var w=0,P=0;P<v.length;P++)m=(b.words[P]|0)+(v.words[P]|0)+w,this.words[P]=m&67108863,w=m>>>26;for(;w!==0&&P<b.length;P++)m=(b.words[P]|0)+w,this.words[P]=m&67108863,w=m>>>26;if(this.length=b.length,w!==0)this.words[this.length]=w,this.length++;else if(b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this},i.prototype.add=function(f){var m;return f.negative!==0&&this.negative===0?(f.negative=0,m=this.sub(f),f.negative^=1,m):f.negative===0&&this.negative!==0?(this.negative=0,m=f.sub(this),this.negative=1,m):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},i.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var m=this.iadd(f);return f.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var b=this.cmp(f);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,w;b>0?(v=this,w=f):(v=f,w=this);for(var P=0,B=0;B<w.length;B++)m=(v.words[B]|0)-(w.words[B]|0)+P,P=m>>26,this.words[B]=m&67108863;for(;P!==0&&B<v.length;B++)m=(v.words[B]|0)+P,P=m>>26,this.words[B]=m&67108863;if(P===0&&B<v.length&&v!==this)for(;B<v.length;B++)this.words[B]=v.words[B];return this.length=Math.max(this.length,B),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(f){return this.clone().isub(f)};function x(_,f,m){m.negative=f.negative^_.negative;var b=_.length+f.length|0;m.length=b,b=b-1|0;var v=_.words[0]|0,w=f.words[0]|0,P=v*w,B=P&67108863,k=P/67108864|0;m.words[0]=B;for(var d=1;d<b;d++){for(var S=k>>>26,F=k&67108863,U=Math.min(d,f.length-1),D=Math.max(0,d-_.length+1);D<=U;D++){var J=d-D|0;v=_.words[J]|0,w=f.words[D]|0,P=v*w+F,S+=P/67108864|0,F=P&67108863}m.words[d]=F|0,k=S|0}return k!==0?m.words[d]=k|0:m.length--,m.strip()}var A=function(f,m,b){var v=f.words,w=m.words,P=b.words,B=0,k,d,S,F=v[0]|0,U=F&8191,D=F>>>13,J=v[1]|0,ue=J&8191,fe=J>>>13,j=v[2]|0,se=j&8191,L=j>>>13,Y=v[3]|0,Z=Y&8191,re=Y>>>13,pe=v[4]|0,te=pe&8191,ce=pe>>>13,ut=v[5]|0,Ie=ut&8191,_e=ut>>>13,Ko=v[6]|0,Oe=Ko&8191,Be=Ko>>>13,xa=v[7]|0,Ce=xa&8191,nt=xa>>>13,xu=v[8]|0,it=xu&8191,ot=xu>>>13,yc=v[9]|0,Ne=yc&8191,Ue=yc>>>13,mc=w[0]|0,De=mc&8191,Le=mc>>>13,gc=w[1]|0,Ke=gc&8191,Fe=gc>>>13,bc=w[2]|0,Ve=bc&8191,qe=bc>>>13,xc=w[3]|0,He=xc&8191,We=xc>>>13,wc=w[4]|0,ze=wc&8191,je=wc>>>13,vc=w[5]|0,Ge=vc&8191,$e=vc>>>13,Ac=w[6]|0,Ye=Ac&8191,Je=Ac>>>13,Sc=w[7]|0,Ze=Sc&8191,Qe=Sc>>>13,Ec=w[8]|0,Xe=Ec&8191,et=Ec>>>13,Ic=w[9]|0,tt=Ic&8191,rt=Ic>>>13;b.negative=f.negative^m.negative,b.length=19,k=Math.imul(U,De),d=Math.imul(U,Le),d=d+Math.imul(D,De)|0,S=Math.imul(D,Le);var xs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(xs>>>26)|0,xs&=67108863,k=Math.imul(ue,De),d=Math.imul(ue,Le),d=d+Math.imul(fe,De)|0,S=Math.imul(fe,Le),k=k+Math.imul(U,Ke)|0,d=d+Math.imul(U,Fe)|0,d=d+Math.imul(D,Ke)|0,S=S+Math.imul(D,Fe)|0;var ws=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(ws>>>26)|0,ws&=67108863,k=Math.imul(se,De),d=Math.imul(se,Le),d=d+Math.imul(L,De)|0,S=Math.imul(L,Le),k=k+Math.imul(ue,Ke)|0,d=d+Math.imul(ue,Fe)|0,d=d+Math.imul(fe,Ke)|0,S=S+Math.imul(fe,Fe)|0,k=k+Math.imul(U,Ve)|0,d=d+Math.imul(U,qe)|0,d=d+Math.imul(D,Ve)|0,S=S+Math.imul(D,qe)|0;var vs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(vs>>>26)|0,vs&=67108863,k=Math.imul(Z,De),d=Math.imul(Z,Le),d=d+Math.imul(re,De)|0,S=Math.imul(re,Le),k=k+Math.imul(se,Ke)|0,d=d+Math.imul(se,Fe)|0,d=d+Math.imul(L,Ke)|0,S=S+Math.imul(L,Fe)|0,k=k+Math.imul(ue,Ve)|0,d=d+Math.imul(ue,qe)|0,d=d+Math.imul(fe,Ve)|0,S=S+Math.imul(fe,qe)|0,k=k+Math.imul(U,He)|0,d=d+Math.imul(U,We)|0,d=d+Math.imul(D,He)|0,S=S+Math.imul(D,We)|0;var As=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(As>>>26)|0,As&=67108863,k=Math.imul(te,De),d=Math.imul(te,Le),d=d+Math.imul(ce,De)|0,S=Math.imul(ce,Le),k=k+Math.imul(Z,Ke)|0,d=d+Math.imul(Z,Fe)|0,d=d+Math.imul(re,Ke)|0,S=S+Math.imul(re,Fe)|0,k=k+Math.imul(se,Ve)|0,d=d+Math.imul(se,qe)|0,d=d+Math.imul(L,Ve)|0,S=S+Math.imul(L,qe)|0,k=k+Math.imul(ue,He)|0,d=d+Math.imul(ue,We)|0,d=d+Math.imul(fe,He)|0,S=S+Math.imul(fe,We)|0,k=k+Math.imul(U,ze)|0,d=d+Math.imul(U,je)|0,d=d+Math.imul(D,ze)|0,S=S+Math.imul(D,je)|0;var Ss=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,k=Math.imul(Ie,De),d=Math.imul(Ie,Le),d=d+Math.imul(_e,De)|0,S=Math.imul(_e,Le),k=k+Math.imul(te,Ke)|0,d=d+Math.imul(te,Fe)|0,d=d+Math.imul(ce,Ke)|0,S=S+Math.imul(ce,Fe)|0,k=k+Math.imul(Z,Ve)|0,d=d+Math.imul(Z,qe)|0,d=d+Math.imul(re,Ve)|0,S=S+Math.imul(re,qe)|0,k=k+Math.imul(se,He)|0,d=d+Math.imul(se,We)|0,d=d+Math.imul(L,He)|0,S=S+Math.imul(L,We)|0,k=k+Math.imul(ue,ze)|0,d=d+Math.imul(ue,je)|0,d=d+Math.imul(fe,ze)|0,S=S+Math.imul(fe,je)|0,k=k+Math.imul(U,Ge)|0,d=d+Math.imul(U,$e)|0,d=d+Math.imul(D,Ge)|0,S=S+Math.imul(D,$e)|0;var Es=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Es>>>26)|0,Es&=67108863,k=Math.imul(Oe,De),d=Math.imul(Oe,Le),d=d+Math.imul(Be,De)|0,S=Math.imul(Be,Le),k=k+Math.imul(Ie,Ke)|0,d=d+Math.imul(Ie,Fe)|0,d=d+Math.imul(_e,Ke)|0,S=S+Math.imul(_e,Fe)|0,k=k+Math.imul(te,Ve)|0,d=d+Math.imul(te,qe)|0,d=d+Math.imul(ce,Ve)|0,S=S+Math.imul(ce,qe)|0,k=k+Math.imul(Z,He)|0,d=d+Math.imul(Z,We)|0,d=d+Math.imul(re,He)|0,S=S+Math.imul(re,We)|0,k=k+Math.imul(se,ze)|0,d=d+Math.imul(se,je)|0,d=d+Math.imul(L,ze)|0,S=S+Math.imul(L,je)|0,k=k+Math.imul(ue,Ge)|0,d=d+Math.imul(ue,$e)|0,d=d+Math.imul(fe,Ge)|0,S=S+Math.imul(fe,$e)|0,k=k+Math.imul(U,Ye)|0,d=d+Math.imul(U,Je)|0,d=d+Math.imul(D,Ye)|0,S=S+Math.imul(D,Je)|0;var Is=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Is>>>26)|0,Is&=67108863,k=Math.imul(Ce,De),d=Math.imul(Ce,Le),d=d+Math.imul(nt,De)|0,S=Math.imul(nt,Le),k=k+Math.imul(Oe,Ke)|0,d=d+Math.imul(Oe,Fe)|0,d=d+Math.imul(Be,Ke)|0,S=S+Math.imul(Be,Fe)|0,k=k+Math.imul(Ie,Ve)|0,d=d+Math.imul(Ie,qe)|0,d=d+Math.imul(_e,Ve)|0,S=S+Math.imul(_e,qe)|0,k=k+Math.imul(te,He)|0,d=d+Math.imul(te,We)|0,d=d+Math.imul(ce,He)|0,S=S+Math.imul(ce,We)|0,k=k+Math.imul(Z,ze)|0,d=d+Math.imul(Z,je)|0,d=d+Math.imul(re,ze)|0,S=S+Math.imul(re,je)|0,k=k+Math.imul(se,Ge)|0,d=d+Math.imul(se,$e)|0,d=d+Math.imul(L,Ge)|0,S=S+Math.imul(L,$e)|0,k=k+Math.imul(ue,Ye)|0,d=d+Math.imul(ue,Je)|0,d=d+Math.imul(fe,Ye)|0,S=S+Math.imul(fe,Je)|0,k=k+Math.imul(U,Ze)|0,d=d+Math.imul(U,Qe)|0,d=d+Math.imul(D,Ze)|0,S=S+Math.imul(D,Qe)|0;var ks=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(ks>>>26)|0,ks&=67108863,k=Math.imul(it,De),d=Math.imul(it,Le),d=d+Math.imul(ot,De)|0,S=Math.imul(ot,Le),k=k+Math.imul(Ce,Ke)|0,d=d+Math.imul(Ce,Fe)|0,d=d+Math.imul(nt,Ke)|0,S=S+Math.imul(nt,Fe)|0,k=k+Math.imul(Oe,Ve)|0,d=d+Math.imul(Oe,qe)|0,d=d+Math.imul(Be,Ve)|0,S=S+Math.imul(Be,qe)|0,k=k+Math.imul(Ie,He)|0,d=d+Math.imul(Ie,We)|0,d=d+Math.imul(_e,He)|0,S=S+Math.imul(_e,We)|0,k=k+Math.imul(te,ze)|0,d=d+Math.imul(te,je)|0,d=d+Math.imul(ce,ze)|0,S=S+Math.imul(ce,je)|0,k=k+Math.imul(Z,Ge)|0,d=d+Math.imul(Z,$e)|0,d=d+Math.imul(re,Ge)|0,S=S+Math.imul(re,$e)|0,k=k+Math.imul(se,Ye)|0,d=d+Math.imul(se,Je)|0,d=d+Math.imul(L,Ye)|0,S=S+Math.imul(L,Je)|0,k=k+Math.imul(ue,Ze)|0,d=d+Math.imul(ue,Qe)|0,d=d+Math.imul(fe,Ze)|0,S=S+Math.imul(fe,Qe)|0,k=k+Math.imul(U,Xe)|0,d=d+Math.imul(U,et)|0,d=d+Math.imul(D,Xe)|0,S=S+Math.imul(D,et)|0;var Ts=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,k=Math.imul(Ne,De),d=Math.imul(Ne,Le),d=d+Math.imul(Ue,De)|0,S=Math.imul(Ue,Le),k=k+Math.imul(it,Ke)|0,d=d+Math.imul(it,Fe)|0,d=d+Math.imul(ot,Ke)|0,S=S+Math.imul(ot,Fe)|0,k=k+Math.imul(Ce,Ve)|0,d=d+Math.imul(Ce,qe)|0,d=d+Math.imul(nt,Ve)|0,S=S+Math.imul(nt,qe)|0,k=k+Math.imul(Oe,He)|0,d=d+Math.imul(Oe,We)|0,d=d+Math.imul(Be,He)|0,S=S+Math.imul(Be,We)|0,k=k+Math.imul(Ie,ze)|0,d=d+Math.imul(Ie,je)|0,d=d+Math.imul(_e,ze)|0,S=S+Math.imul(_e,je)|0,k=k+Math.imul(te,Ge)|0,d=d+Math.imul(te,$e)|0,d=d+Math.imul(ce,Ge)|0,S=S+Math.imul(ce,$e)|0,k=k+Math.imul(Z,Ye)|0,d=d+Math.imul(Z,Je)|0,d=d+Math.imul(re,Ye)|0,S=S+Math.imul(re,Je)|0,k=k+Math.imul(se,Ze)|0,d=d+Math.imul(se,Qe)|0,d=d+Math.imul(L,Ze)|0,S=S+Math.imul(L,Qe)|0,k=k+Math.imul(ue,Xe)|0,d=d+Math.imul(ue,et)|0,d=d+Math.imul(fe,Xe)|0,S=S+Math.imul(fe,et)|0,k=k+Math.imul(U,tt)|0,d=d+Math.imul(U,rt)|0,d=d+Math.imul(D,tt)|0,S=S+Math.imul(D,rt)|0;var Ps=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,k=Math.imul(Ne,Ke),d=Math.imul(Ne,Fe),d=d+Math.imul(Ue,Ke)|0,S=Math.imul(Ue,Fe),k=k+Math.imul(it,Ve)|0,d=d+Math.imul(it,qe)|0,d=d+Math.imul(ot,Ve)|0,S=S+Math.imul(ot,qe)|0,k=k+Math.imul(Ce,He)|0,d=d+Math.imul(Ce,We)|0,d=d+Math.imul(nt,He)|0,S=S+Math.imul(nt,We)|0,k=k+Math.imul(Oe,ze)|0,d=d+Math.imul(Oe,je)|0,d=d+Math.imul(Be,ze)|0,S=S+Math.imul(Be,je)|0,k=k+Math.imul(Ie,Ge)|0,d=d+Math.imul(Ie,$e)|0,d=d+Math.imul(_e,Ge)|0,S=S+Math.imul(_e,$e)|0,k=k+Math.imul(te,Ye)|0,d=d+Math.imul(te,Je)|0,d=d+Math.imul(ce,Ye)|0,S=S+Math.imul(ce,Je)|0,k=k+Math.imul(Z,Ze)|0,d=d+Math.imul(Z,Qe)|0,d=d+Math.imul(re,Ze)|0,S=S+Math.imul(re,Qe)|0,k=k+Math.imul(se,Xe)|0,d=d+Math.imul(se,et)|0,d=d+Math.imul(L,Xe)|0,S=S+Math.imul(L,et)|0,k=k+Math.imul(ue,tt)|0,d=d+Math.imul(ue,rt)|0,d=d+Math.imul(fe,tt)|0,S=S+Math.imul(fe,rt)|0;var _s=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(_s>>>26)|0,_s&=67108863,k=Math.imul(Ne,Ve),d=Math.imul(Ne,qe),d=d+Math.imul(Ue,Ve)|0,S=Math.imul(Ue,qe),k=k+Math.imul(it,He)|0,d=d+Math.imul(it,We)|0,d=d+Math.imul(ot,He)|0,S=S+Math.imul(ot,We)|0,k=k+Math.imul(Ce,ze)|0,d=d+Math.imul(Ce,je)|0,d=d+Math.imul(nt,ze)|0,S=S+Math.imul(nt,je)|0,k=k+Math.imul(Oe,Ge)|0,d=d+Math.imul(Oe,$e)|0,d=d+Math.imul(Be,Ge)|0,S=S+Math.imul(Be,$e)|0,k=k+Math.imul(Ie,Ye)|0,d=d+Math.imul(Ie,Je)|0,d=d+Math.imul(_e,Ye)|0,S=S+Math.imul(_e,Je)|0,k=k+Math.imul(te,Ze)|0,d=d+Math.imul(te,Qe)|0,d=d+Math.imul(ce,Ze)|0,S=S+Math.imul(ce,Qe)|0,k=k+Math.imul(Z,Xe)|0,d=d+Math.imul(Z,et)|0,d=d+Math.imul(re,Xe)|0,S=S+Math.imul(re,et)|0,k=k+Math.imul(se,tt)|0,d=d+Math.imul(se,rt)|0,d=d+Math.imul(L,tt)|0,S=S+Math.imul(L,rt)|0;var Bs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,k=Math.imul(Ne,He),d=Math.imul(Ne,We),d=d+Math.imul(Ue,He)|0,S=Math.imul(Ue,We),k=k+Math.imul(it,ze)|0,d=d+Math.imul(it,je)|0,d=d+Math.imul(ot,ze)|0,S=S+Math.imul(ot,je)|0,k=k+Math.imul(Ce,Ge)|0,d=d+Math.imul(Ce,$e)|0,d=d+Math.imul(nt,Ge)|0,S=S+Math.imul(nt,$e)|0,k=k+Math.imul(Oe,Ye)|0,d=d+Math.imul(Oe,Je)|0,d=d+Math.imul(Be,Ye)|0,S=S+Math.imul(Be,Je)|0,k=k+Math.imul(Ie,Ze)|0,d=d+Math.imul(Ie,Qe)|0,d=d+Math.imul(_e,Ze)|0,S=S+Math.imul(_e,Qe)|0,k=k+Math.imul(te,Xe)|0,d=d+Math.imul(te,et)|0,d=d+Math.imul(ce,Xe)|0,S=S+Math.imul(ce,et)|0,k=k+Math.imul(Z,tt)|0,d=d+Math.imul(Z,rt)|0,d=d+Math.imul(re,tt)|0,S=S+Math.imul(re,rt)|0;var Cs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,k=Math.imul(Ne,ze),d=Math.imul(Ne,je),d=d+Math.imul(Ue,ze)|0,S=Math.imul(Ue,je),k=k+Math.imul(it,Ge)|0,d=d+Math.imul(it,$e)|0,d=d+Math.imul(ot,Ge)|0,S=S+Math.imul(ot,$e)|0,k=k+Math.imul(Ce,Ye)|0,d=d+Math.imul(Ce,Je)|0,d=d+Math.imul(nt,Ye)|0,S=S+Math.imul(nt,Je)|0,k=k+Math.imul(Oe,Ze)|0,d=d+Math.imul(Oe,Qe)|0,d=d+Math.imul(Be,Ze)|0,S=S+Math.imul(Be,Qe)|0,k=k+Math.imul(Ie,Xe)|0,d=d+Math.imul(Ie,et)|0,d=d+Math.imul(_e,Xe)|0,S=S+Math.imul(_e,et)|0,k=k+Math.imul(te,tt)|0,d=d+Math.imul(te,rt)|0,d=d+Math.imul(ce,tt)|0,S=S+Math.imul(ce,rt)|0;var Ms=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,k=Math.imul(Ne,Ge),d=Math.imul(Ne,$e),d=d+Math.imul(Ue,Ge)|0,S=Math.imul(Ue,$e),k=k+Math.imul(it,Ye)|0,d=d+Math.imul(it,Je)|0,d=d+Math.imul(ot,Ye)|0,S=S+Math.imul(ot,Je)|0,k=k+Math.imul(Ce,Ze)|0,d=d+Math.imul(Ce,Qe)|0,d=d+Math.imul(nt,Ze)|0,S=S+Math.imul(nt,Qe)|0,k=k+Math.imul(Oe,Xe)|0,d=d+Math.imul(Oe,et)|0,d=d+Math.imul(Be,Xe)|0,S=S+Math.imul(Be,et)|0,k=k+Math.imul(Ie,tt)|0,d=d+Math.imul(Ie,rt)|0,d=d+Math.imul(_e,tt)|0,S=S+Math.imul(_e,rt)|0;var Rs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,k=Math.imul(Ne,Ye),d=Math.imul(Ne,Je),d=d+Math.imul(Ue,Ye)|0,S=Math.imul(Ue,Je),k=k+Math.imul(it,Ze)|0,d=d+Math.imul(it,Qe)|0,d=d+Math.imul(ot,Ze)|0,S=S+Math.imul(ot,Qe)|0,k=k+Math.imul(Ce,Xe)|0,d=d+Math.imul(Ce,et)|0,d=d+Math.imul(nt,Xe)|0,S=S+Math.imul(nt,et)|0,k=k+Math.imul(Oe,tt)|0,d=d+Math.imul(Oe,rt)|0,d=d+Math.imul(Be,tt)|0,S=S+Math.imul(Be,rt)|0;var Os=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Os>>>26)|0,Os&=67108863,k=Math.imul(Ne,Ze),d=Math.imul(Ne,Qe),d=d+Math.imul(Ue,Ze)|0,S=Math.imul(Ue,Qe),k=k+Math.imul(it,Xe)|0,d=d+Math.imul(it,et)|0,d=d+Math.imul(ot,Xe)|0,S=S+Math.imul(ot,et)|0,k=k+Math.imul(Ce,tt)|0,d=d+Math.imul(Ce,rt)|0,d=d+Math.imul(nt,tt)|0,S=S+Math.imul(nt,rt)|0;var Ns=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,k=Math.imul(Ne,Xe),d=Math.imul(Ne,et),d=d+Math.imul(Ue,Xe)|0,S=Math.imul(Ue,et),k=k+Math.imul(it,tt)|0,d=d+Math.imul(it,rt)|0,d=d+Math.imul(ot,tt)|0,S=S+Math.imul(ot,rt)|0;var xl=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(xl>>>26)|0,xl&=67108863,k=Math.imul(Ne,tt),d=Math.imul(Ne,rt),d=d+Math.imul(Ue,tt)|0,S=Math.imul(Ue,rt);var wl=(B+k|0)+((d&8191)<<13)|0;return B=(S+(d>>>13)|0)+(wl>>>26)|0,wl&=67108863,P[0]=xs,P[1]=ws,P[2]=vs,P[3]=As,P[4]=Ss,P[5]=Es,P[6]=Is,P[7]=ks,P[8]=Ts,P[9]=Ps,P[10]=_s,P[11]=Bs,P[12]=Cs,P[13]=Ms,P[14]=Rs,P[15]=Os,P[16]=Ns,P[17]=xl,P[18]=wl,B!==0&&(P[19]=B,b.length++),b};Math.imul||(A=x);function E(_,f,m){m.negative=f.negative^_.negative,m.length=_.length+f.length;for(var b=0,v=0,w=0;w<m.length-1;w++){var P=v;v=0;for(var B=b&67108863,k=Math.min(w,f.length-1),d=Math.max(0,w-_.length+1);d<=k;d++){var S=w-d,F=_.words[S]|0,U=f.words[d]|0,D=F*U,J=D&67108863;P=P+(D/67108864|0)|0,J=J+B|0,B=J&67108863,P=P+(J>>>26)|0,v+=P>>>26,P&=67108863}m.words[w]=B,b=P,P=v}return b!==0?m.words[w]=b:m.length--,m.strip()}function C(_,f,m){var b=new M;return b.mulp(_,f,m)}i.prototype.mulTo=function(f,m){var b,v=this.length+f.length;return this.length===10&&f.length===10?b=A(this,f,m):v<63?b=x(this,f,m):v<1024?b=E(this,f,m):b=C(this,f,m),b};function M(_,f){this.x=_,this.y=f}M.prototype.makeRBT=function(f){for(var m=new Array(f),b=i.prototype._countBits(f)-1,v=0;v<f;v++)m[v]=this.revBin(v,b,f);return m},M.prototype.revBin=function(f,m,b){if(f===0||f===b-1)return f;for(var v=0,w=0;w<m;w++)v|=(f&1)<<m-w-1,f>>=1;return v},M.prototype.permute=function(f,m,b,v,w,P){for(var B=0;B<P;B++)v[B]=m[f[B]],w[B]=b[f[B]]},M.prototype.transform=function(f,m,b,v,w,P){this.permute(P,f,m,b,v,w);for(var B=1;B<w;B<<=1)for(var k=B<<1,d=Math.cos(2*Math.PI/k),S=Math.sin(2*Math.PI/k),F=0;F<w;F+=k)for(var U=d,D=S,J=0;J<B;J++){var ue=b[F+J],fe=v[F+J],j=b[F+J+B],se=v[F+J+B],L=U*j-D*se;se=U*se+D*j,j=L,b[F+J]=ue+j,v[F+J]=fe+se,b[F+J+B]=ue-j,v[F+J+B]=fe-se,J!==k&&(L=d*U-S*D,D=d*D+S*U,U=L)}},M.prototype.guessLen13b=function(f,m){var b=Math.max(m,f)|1,v=b&1,w=0;for(b=b/2|0;b;b=b>>>1)w++;return 1<<w+1+v},M.prototype.conjugate=function(f,m,b){if(!(b<=1))for(var v=0;v<b/2;v++){var w=f[v];f[v]=f[b-v-1],f[b-v-1]=w,w=m[v],m[v]=-m[b-v-1],m[b-v-1]=-w}},M.prototype.normalize13b=function(f,m){for(var b=0,v=0;v<m/2;v++){var w=Math.round(f[2*v+1]/m)*8192+Math.round(f[2*v]/m)+b;f[v]=w&67108863,w<67108864?b=0:b=w/67108864|0}return f},M.prototype.convert13b=function(f,m,b,v){for(var w=0,P=0;P<m;P++)w=w+(f[P]|0),b[2*P]=w&8191,w=w>>>13,b[2*P+1]=w&8191,w=w>>>13;for(P=2*m;P<v;++P)b[P]=0;r(w===0),r((w&-8192)===0)},M.prototype.stub=function(f){for(var m=new Array(f),b=0;b<f;b++)m[b]=0;return m},M.prototype.mulp=function(f,m,b){var v=2*this.guessLen13b(f.length,m.length),w=this.makeRBT(v),P=this.stub(v),B=new Array(v),k=new Array(v),d=new Array(v),S=new Array(v),F=new Array(v),U=new Array(v),D=b.words;D.length=v,this.convert13b(f.words,f.length,B,v),this.convert13b(m.words,m.length,S,v),this.transform(B,P,k,d,v,w),this.transform(S,P,F,U,v,w);for(var J=0;J<v;J++){var ue=k[J]*F[J]-d[J]*U[J];d[J]=k[J]*U[J]+d[J]*F[J],k[J]=ue}return this.conjugate(k,d,v),this.transform(k,d,D,P,v,w),this.conjugate(D,P,v),this.normalize13b(D,v),b.negative=f.negative^m.negative,b.length=f.length+m.length,b.strip()},i.prototype.mul=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),this.mulTo(f,m)},i.prototype.mulf=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),C(this,f,m)},i.prototype.imul=function(f){return this.clone().mulTo(f,this)},i.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var m=0,b=0;b<this.length;b++){var v=(this.words[b]|0)*f,w=(v&67108863)+(m&67108863);m>>=26,m+=v/67108864|0,m+=w>>>26,this.words[b]=w&67108863}return m!==0&&(this.words[b]=m,this.length++),this},i.prototype.muln=function(f){return this.clone().imuln(f)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(f){var m=g(f);if(m.length===0)return new i(1);for(var b=this,v=0;v<m.length&&m[v]===0;v++,b=b.sqr());if(++v<m.length)for(var w=b.sqr();v<m.length;v++,w=w.sqr())m[v]!==0&&(b=b.mul(w));return b},i.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,v=67108863>>>26-m<<26-m,w;if(m!==0){var P=0;for(w=0;w<this.length;w++){var B=this.words[w]&v,k=(this.words[w]|0)-B<<m;this.words[w]=k|P,P=B>>>26-m}P&&(this.words[w]=P,this.length++)}if(b!==0){for(w=this.length-1;w>=0;w--)this.words[w+b]=this.words[w];for(w=0;w<b;w++)this.words[w]=0;this.length+=b}return this.strip()},i.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},i.prototype.iushrn=function(f,m,b){r(typeof f=="number"&&f>=0);var v;m?v=(m-m%26)/26:v=0;var w=f%26,P=Math.min((f-w)/26,this.length),B=67108863^67108863>>>w<<w,k=b;if(v-=P,v=Math.max(0,v),k){for(var d=0;d<P;d++)k.words[d]=this.words[d];k.length=P}if(P!==0)if(this.length>P)for(this.length-=P,d=0;d<this.length;d++)this.words[d]=this.words[d+P];else this.words[0]=0,this.length=1;var S=0;for(d=this.length-1;d>=0&&(S!==0||d>=v);d--){var F=this.words[d]|0;this.words[d]=S<<26-w|F>>>w,S=F&B}return k&&S!==0&&(k.words[k.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(f,m,b){return r(this.negative===0),this.iushrn(f,m,b)},i.prototype.shln=function(f){return this.clone().ishln(f)},i.prototype.ushln=function(f){return this.clone().iushln(f)},i.prototype.shrn=function(f){return this.clone().ishrn(f)},i.prototype.ushrn=function(f){return this.clone().iushrn(f)},i.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,v=1<<m;if(this.length<=b)return!1;var w=this.words[b];return!!(w&v)},i.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(m!==0&&b++,this.length=Math.min(b,this.length),m!==0){var v=67108863^67108863>>>m<<m;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(f){return this.clone().imaskn(f)},i.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},i.prototype._iaddn=function(f){this.words[0]+=f;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},i.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},i.prototype.addn=function(f){return this.clone().iaddn(f)},i.prototype.subn=function(f){return this.clone().isubn(f)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(f,m,b){var v=f.length+b,w;this._expand(v);var P,B=0;for(w=0;w<f.length;w++){P=(this.words[w+b]|0)+B;var k=(f.words[w]|0)*m;P-=k&67108863,B=(P>>26)-(k/67108864|0),this.words[w+b]=P&67108863}for(;w<this.length-b;w++)P=(this.words[w+b]|0)+B,B=P>>26,this.words[w+b]=P&67108863;if(B===0)return this.strip();for(r(B===-1),B=0,w=0;w<this.length;w++)P=-(this.words[w]|0)+B,B=P>>26,this.words[w]=P&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(f,m){var b=this.length-f.length,v=this.clone(),w=f,P=w.words[w.length-1]|0,B=this._countBits(P);b=26-B,b!==0&&(w=w.ushln(b),v.iushln(b),P=w.words[w.length-1]|0);var k=v.length-w.length,d;if(m!=="mod"){d=new i(null),d.length=k+1,d.words=new Array(d.length);for(var S=0;S<d.length;S++)d.words[S]=0}var F=v.clone()._ishlnsubmul(w,1,k);F.negative===0&&(v=F,d&&(d.words[k]=1));for(var U=k-1;U>=0;U--){var D=(v.words[w.length+U]|0)*67108864+(v.words[w.length+U-1]|0);for(D=Math.min(D/P|0,67108863),v._ishlnsubmul(w,D,U);v.negative!==0;)D--,v.negative=0,v._ishlnsubmul(w,1,U),v.isZero()||(v.negative^=1);d&&(d.words[U]=D)}return d&&d.strip(),v.strip(),m!=="div"&&b!==0&&v.iushrn(b),{div:d||null,mod:v}},i.prototype.divmod=function(f,m,b){if(r(!f.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,w,P;return this.negative!==0&&f.negative===0?(P=this.neg().divmod(f,m),m!=="mod"&&(v=P.div.neg()),m!=="div"&&(w=P.mod.neg(),b&&w.negative!==0&&w.iadd(f)),{div:v,mod:w}):this.negative===0&&f.negative!==0?(P=this.divmod(f.neg(),m),m!=="mod"&&(v=P.div.neg()),{div:v,mod:P.mod}):this.negative&f.negative?(P=this.neg().divmod(f.neg(),m),m!=="div"&&(w=P.mod.neg(),b&&w.negative!==0&&w.isub(f)),{div:P.div,mod:w}):f.length>this.length||this.cmp(f)<0?{div:new i(0),mod:this}:f.length===1?m==="div"?{div:this.divn(f.words[0]),mod:null}:m==="mod"?{div:null,mod:new i(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new i(this.modn(f.words[0]))}:this._wordDiv(f,m)},i.prototype.div=function(f){return this.divmod(f,"div",!1).div},i.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},i.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},i.prototype.divRound=function(f){var m=this.divmod(f);if(m.mod.isZero())return m.div;var b=m.div.negative!==0?m.mod.isub(f):m.mod,v=f.ushrn(1),w=f.andln(1),P=b.cmp(v);return P<0||w===1&&P===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},i.prototype.modn=function(f){r(f<=67108863);for(var m=(1<<26)%f,b=0,v=this.length-1;v>=0;v--)b=(m*b+(this.words[v]|0))%f;return b},i.prototype.idivn=function(f){r(f<=67108863);for(var m=0,b=this.length-1;b>=0;b--){var v=(this.words[b]|0)+m*67108864;this.words[b]=v/f|0,m=v%f}return this.strip()},i.prototype.divn=function(f){return this.clone().idivn(f)},i.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var v=new i(1),w=new i(0),P=new i(0),B=new i(1),k=0;m.isEven()&&b.isEven();)m.iushrn(1),b.iushrn(1),++k;for(var d=b.clone(),S=m.clone();!m.isZero();){for(var F=0,U=1;!(m.words[0]&U)&&F<26;++F,U<<=1);if(F>0)for(m.iushrn(F);F-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(d),w.isub(S)),v.iushrn(1),w.iushrn(1);for(var D=0,J=1;!(b.words[0]&J)&&D<26;++D,J<<=1);if(D>0)for(b.iushrn(D);D-- >0;)(P.isOdd()||B.isOdd())&&(P.iadd(d),B.isub(S)),P.iushrn(1),B.iushrn(1);m.cmp(b)>=0?(m.isub(b),v.isub(P),w.isub(B)):(b.isub(m),P.isub(v),B.isub(w))}return{a:P,b:B,gcd:b.iushln(k)}},i.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var v=new i(1),w=new i(0),P=b.clone();m.cmpn(1)>0&&b.cmpn(1)>0;){for(var B=0,k=1;!(m.words[0]&k)&&B<26;++B,k<<=1);if(B>0)for(m.iushrn(B);B-- >0;)v.isOdd()&&v.iadd(P),v.iushrn(1);for(var d=0,S=1;!(b.words[0]&S)&&d<26;++d,S<<=1);if(d>0)for(b.iushrn(d);d-- >0;)w.isOdd()&&w.iadd(P),w.iushrn(1);m.cmp(b)>=0?(m.isub(b),v.isub(w)):(b.isub(m),w.isub(v))}var F;return m.cmpn(1)===0?F=v:F=w,F.cmpn(0)<0&&F.iadd(f),F},i.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var m=this.clone(),b=f.clone();m.negative=0,b.negative=0;for(var v=0;m.isEven()&&b.isEven();v++)m.iushrn(1),b.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;b.isEven();)b.iushrn(1);var w=m.cmp(b);if(w<0){var P=m;m=b,b=P}else if(w===0||b.cmpn(1)===0)break;m.isub(b)}while(!0);return b.iushln(v)},i.prototype.invm=function(f){return this.egcd(f).a.umod(f)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(f){return this.words[0]&f},i.prototype.bincn=function(f){r(typeof f=="number");var m=f%26,b=(f-m)/26,v=1<<m;if(this.length<=b)return this._expand(b+1),this.words[b]|=v,this;for(var w=v,P=b;w!==0&&P<this.length;P++){var B=this.words[P]|0;B+=w,w=B>>>26,B&=67108863,this.words[P]=B}return w!==0&&(this.words[P]=w,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(f){var m=f<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this.strip();var b;if(this.length>1)b=1;else{m&&(f=-f),r(f<=67108863,"Number is too big");var v=this.words[0]|0;b=v===f?0:v<f?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var m=this.ucmp(f);return this.negative!==0?-m|0:m},i.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var m=0,b=this.length-1;b>=0;b--){var v=this.words[b]|0,w=f.words[b]|0;if(v!==w){v<w?m=-1:v>w&&(m=1);break}}return m},i.prototype.gtn=function(f){return this.cmpn(f)===1},i.prototype.gt=function(f){return this.cmp(f)===1},i.prototype.gten=function(f){return this.cmpn(f)>=0},i.prototype.gte=function(f){return this.cmp(f)>=0},i.prototype.ltn=function(f){return this.cmpn(f)===-1},i.prototype.lt=function(f){return this.cmp(f)===-1},i.prototype.lten=function(f){return this.cmpn(f)<=0},i.prototype.lte=function(f){return this.cmp(f)<=0},i.prototype.eqn=function(f){return this.cmpn(f)===0},i.prototype.eq=function(f){return this.cmp(f)===0},i.red=function(f){return new z(f)},i.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(f){return this.red=f,this},i.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},i.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},i.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},i.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},i.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},i.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},i.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},i.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var N={k256:null,p224:null,p192:null,p25519:null};function R(_,f){this.name=_,this.p=new i(f,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var f=new i(null);return f.words=new Array(Math.ceil(this.n/13)),f},R.prototype.ireduce=function(f){var m=f,b;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),b=m.bitLength();while(b>this.n);var v=b<this.n?-1:m.ucmp(this.p);return v===0?(m.words[0]=0,m.length=1):v>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},R.prototype.split=function(f,m){f.iushrn(this.n,0,m)},R.prototype.imulK=function(f){return f.imul(this.k)};function V(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(V,R),V.prototype.split=function(f,m){for(var b=4194303,v=Math.min(f.length,9),w=0;w<v;w++)m.words[w]=f.words[w];if(m.length=v,f.length<=9){f.words[0]=0,f.length=1;return}var P=f.words[9];for(m.words[m.length++]=P&b,w=10;w<f.length;w++){var B=f.words[w]|0;f.words[w-10]=(B&b)<<4|P>>>22,P=B}P>>>=22,f.words[w-10]=P,P===0&&f.length>10?f.length-=10:f.length-=9},V.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var m=0,b=0;b<f.length;b++){var v=f.words[b]|0;m+=v*977,f.words[b]=m&67108863,m=v*64+(m/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function q(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(q,R);function W(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,R);function G(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,R),G.prototype.imulK=function(f){for(var m=0,b=0;b<f.length;b++){var v=(f.words[b]|0)*19+m,w=v&67108863;v>>>=26,f.words[b]=w,m=v}return m!==0&&(f.words[f.length++]=m),f},i._prime=function(f){if(N[f])return N[f];var m;if(f==="k256")m=new V;else if(f==="p224")m=new q;else if(f==="p192")m=new W;else if(f==="p25519")m=new G;else throw new Error("Unknown prime "+f);return N[f]=m,m};function z(_){if(typeof _=="string"){var f=i._prime(_);this.m=f.p,this.prime=f}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}z.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},z.prototype._verify2=function(f,m){r((f.negative|m.negative)===0,"red works only with positives"),r(f.red&&f.red===m.red,"red works only with red numbers")},z.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},z.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},z.prototype.add=function(f,m){this._verify2(f,m);var b=f.add(m);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},z.prototype.iadd=function(f,m){this._verify2(f,m);var b=f.iadd(m);return b.cmp(this.m)>=0&&b.isub(this.m),b},z.prototype.sub=function(f,m){this._verify2(f,m);var b=f.sub(m);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},z.prototype.isub=function(f,m){this._verify2(f,m);var b=f.isub(m);return b.cmpn(0)<0&&b.iadd(this.m),b},z.prototype.shl=function(f,m){return this._verify1(f),this.imod(f.ushln(m))},z.prototype.imul=function(f,m){return this._verify2(f,m),this.imod(f.imul(m))},z.prototype.mul=function(f,m){return this._verify2(f,m),this.imod(f.mul(m))},z.prototype.isqr=function(f){return this.imul(f,f.clone())},z.prototype.sqr=function(f){return this.mul(f,f)},z.prototype.sqrt=function(f){if(f.isZero())return f.clone();var m=this.m.andln(3);if(r(m%2===1),m===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(f,b)}for(var v=this.m.subn(1),w=0;!v.isZero()&&v.andln(1)===0;)w++,v.iushrn(1);r(!v.isZero());var P=new i(1).toRed(this),B=P.redNeg(),k=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,k).cmp(B)!==0;)d.redIAdd(B);for(var S=this.pow(d,v),F=this.pow(f,v.addn(1).iushrn(1)),U=this.pow(f,v),D=w;U.cmp(P)!==0;){for(var J=U,ue=0;J.cmp(P)!==0;ue++)J=J.redSqr();r(ue<D);var fe=this.pow(S,new i(1).iushln(D-ue-1));F=F.redMul(fe),S=fe.redSqr(),U=U.redMul(S),D=ue}return F},z.prototype.invm=function(f){var m=f._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},z.prototype.pow=function(f,m){if(m.isZero())return new i(1).toRed(this);if(m.cmpn(1)===0)return f.clone();var b=4,v=new Array(1<<b);v[0]=new i(1).toRed(this),v[1]=f;for(var w=2;w<v.length;w++)v[w]=this.mul(v[w-1],f);var P=v[0],B=0,k=0,d=m.bitLength()%26;for(d===0&&(d=26),w=m.length-1;w>=0;w--){for(var S=m.words[w],F=d-1;F>=0;F--){var U=S>>F&1;if(P!==v[0]&&(P=this.sqr(P)),U===0&&B===0){k=0;continue}B<<=1,B|=U,k++,!(k!==b&&(w!==0||F!==0))&&(P=this.mul(P,v[B]),k=0,B=0)}d=26}return P},z.prototype.convertTo=function(f){var m=f.umod(this.m);return m===f?m.clone():m},z.prototype.convertFrom=function(f){var m=f.clone();return m.red=null,m},i.mont=function(f){return new ee(f)};function ee(_){z.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(ee,z),ee.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},ee.prototype.convertFrom=function(f){var m=this.imod(f.mul(this.rinv));return m.red=null,m},ee.prototype.imul=function(f,m){if(f.isZero()||m.isZero())return f.words[0]=0,f.length=1,f;var b=f.imul(m),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=b.isub(v).iushrn(this.shift),P=w;return w.cmp(this.m)>=0?P=w.isub(this.m):w.cmpn(0)<0&&(P=w.iadd(this.m)),P._forceRed(this)},ee.prototype.mul=function(f,m){if(f.isZero()||m.isZero())return new i(0)._forceRed(this);var b=f.mul(m),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=b.isub(v).iushrn(this.shift),P=w;return w.cmp(this.m)>=0?P=w.isub(this.m):w.cmpn(0)<0&&(P=w.iadd(this.m)),P._forceRed(this)},ee.prototype.invm=function(f){var m=this.imod(f._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(typeof u_>"u"||u_,qG)});var GG=K((oit,jG)=>{p();y();var cc=Fb(),fo=HG(),Mr=function(){};function hE(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}Mr.eventID=function(e,t){var r=e+"("+t.map(hE).join(",")+")";return cc.keccak256(Buffer.from(r))};Mr.methodID=function(e,t){return Mr.eventID(e,t).slice(0,4)};function ul(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function f_(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function Hb(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function nh(e){var t=typeof e;if(t==="string")return cc.isHexPrefixed(e)?new fo(cc.stripHexPrefix(e),16):new fo(e,10);if(t==="number")return new fo(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function zG(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}function ac(e,t){var r,n,i,o;if(e==="address")return ac("uint160",nh(t));if(e==="bool")return ac("uint8",t?1:0);if(e==="string")return ac("bytes",Buffer.from(t,"utf8"));if(qb(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=Hb(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(o in t)i.push(ac(e,t[o]));if(r==="dynamic"){var s=ac("uint256",t.length);i.unshift(s)}return Buffer.concat(i)}else{if(e==="bytes")return t=Buffer.from(t),i=Buffer.concat([ac("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,cc.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=ul(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return cc.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=ul(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=nh(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=ul(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=nh(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=f_(e),n=nh(t),n<0)throw new Error("Supplied ufixed is negative");return ac("uint256",n.mul(new fo(2).pow(new fo(r[1]))))}else if(e.startsWith("fixed"))return r=f_(e),ac("int256",nh(t).mul(new fo(2).pow(new fo(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function pa(e,t,r){typeof e=="string"&&(e=l_(e));var n,i,o,s;if(e.name==="address")return pa(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return pa(e.rawType,t,r).toString()===new fo(1).toString();if(e.name==="string"){var a=pa(e.rawType,t,r);return Buffer.from(a,"utf8").toString()}else if(e.isArray){for(o=[],n=e.size,e.size==="dynamic"&&(r=pa("uint256",t,r).toNumber(),n=pa("uint256",t,r).toNumber(),r=r+32),s=0;s<n;s++){var c=pa(e.subArray,t,r);o.push(c),r+=e.subArray.memoryUsage}return o}else{if(e.name==="bytes")return r=pa("uint256",t,r).toNumber(),n=pa("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new fo(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new fo(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new fo(2).pow(new fo(e.size[1])),i=pa("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new fo(2).pow(new fo(e.size[1])),i=pa("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}function l_(e){var t,r;if(qb(e)){t=Hb(e);var n=e.slice(0,e.lastIndexOf("["));return n=l_(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=ul(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=f_(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}function FSe(e){return e==="string"||e==="bytes"||Hb(e)==="dynamic"}function qb(e){return e.lastIndexOf("]")===e.length-1}Mr.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(u){if(qb(u)){var h=Hb(u);h!=="dynamic"?i+=32*h:i+=32}else i+=32});for(var o=0;o<e.length;o++){var s=hE(e[o]),a=t[o],c=ac(s,a);FSe(s)?(r.push(ac("uint256",i)),n.push(c),i+=c.length):r.push(c)}return Buffer.concat(r.concat(n))};Mr.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var o=hE(e[i]),s=l_(o,t,n),a=pa(s,t,n);n+=s.memoryUsage,r.push(a)}return r};Mr.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=zG(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([Mr.methodID(r.method,r.args),Mr.rawEncode(r.args,t)])};Mr.simpleDecode=function(e,t){var r=zG(e);if(!r.retargs)throw new Error("No return values in method");return Mr.rawDecode(r.retargs,t)};function WG(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}Mr.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],o=t[n];/^[^\[]+\[.*\]$/.test(i)?o=o.map(function(s){return WG(i,s)}).join(", "):o=WG(i,o),r.push(o)}return r};Mr.solidityHexValue=function(e,t,r){var n,i;if(qb(e)){var o=e.replace(/\[.*?\]/,"");if(!qb(o)){var s=Hb(e);if(s!=="dynamic"&&s!==0&&t.length>s)throw new Error("Elements exceed array size: "+s)}var a=t.map(function(h){return Mr.solidityHexValue(o,h,256)});return Buffer.concat(a)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var c=Array(r/4).join("0");return Buffer.from(t?c+"1":c+"0","hex")}else if(e==="address"){var u=20;return r&&(u=r/8),cc.setLengthLeft(t,u)}else if(e.startsWith("bytes")){if(n=ul(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return cc.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=ul(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=nh(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=ul(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=nh(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};Mr.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=hE(e[n]),o=t[n];r.push(Mr.solidityHexValue(i,o,null))}return Buffer.concat(r)};Mr.soliditySHA3=function(e,t){return cc.keccak256(Mr.solidityPack(e,t))};Mr.soliditySHA256=function(e,t){return cc.sha256(Mr.solidityPack(e,t))};Mr.solidityRIPEMD160=function(e,t){return cc.ripemd160(Mr.solidityPack(e,t),!0)};function VSe(e){return e>="0"&&e<="9"}Mr.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",o=r+1;o<e.length&&VSe(e[o]);)i+=e[o]-"0",o++;r=o-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};Mr.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+ul(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};jG.exports=Mr});var YG=K((cit,$G)=>{p();y();$G.exports=GG()});var e$=K(Vn=>{"use strict";p();y();Object.defineProperty(Vn,"__esModule",{value:!0});Vn.recoverTypedSignature=Vn.signTypedData=Vn.typedSignatureHash=Vn.TypedDataUtils=Vn.TYPED_MESSAGE_SCHEMA=Vn.SignTypedDataVersion=void 0;var ms=Fb(),Wb=YG(),ih=Vb(),ji;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(ji=Vn.SignTypedDataVersion||(Vn.SignTypedDataVersion={}));Vn.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function ry(e,t){if(Object.keys(ji).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}function JG(e,t,r,n,i){if(ry(i,[ji.V3,ji.V4]),e[r]!==void 0)return["bytes32",i===ji.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":ms.keccak(h_(r,n,e,i))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",ms.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",ms.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(i===ji.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let o=r.slice(0,r.lastIndexOf("[")),s=n.map(a=>JG(e,t,o,a,i));return["bytes32",ms.keccak(Wb.rawEncode(s.map(([a])=>a),s.map(([,a])=>a)))]}return[r,n]}function h_(e,t,r,n){ry(n,[ji.V3,ji.V4]);let i=["bytes32"],o=[QG(e,r)];for(let s of r[e]){if(n===ji.V3&&t[s.name]===void 0)continue;let[a,c]=JG(r,s.name,s.type,t[s.name],n);i.push(a),o.push(c)}return Wb.rawEncode(i,o)}function ZG(e,t){let r="",n=p_(e,t);n.delete(e);let i=[e,...Array.from(n).sort()];for(let o of i){if(!t[o])throw new Error(`No type definition specified: ${o}`);r+=`${o}(${t[o].map(({name:a,type:c})=>`${c} ${a}`).join(",")})`}return r}function p_(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])p_(n.type,t,r);return r}function d_(e,t,r,n){return ry(n,[ji.V3,ji.V4]),ms.keccak(h_(e,t,r,n))}function QG(e,t){return ms.keccak(ZG(e,t))}function XG(e){let t={};for(let r in Vn.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function qSe(e,t){ry(t,[ji.V3,ji.V4]);let r=XG(e),n=[Buffer.from("1901","hex")];return n.push(d_("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(d_(r.primaryType,r.message,r.types,t)),ms.keccak(Buffer.concat(n))}Vn.TypedDataUtils={encodeData:h_,encodeType:ZG,findTypeDependencies:p_,hashStruct:d_,hashType:QG,sanitizeData:XG,eip712Hash:qSe};function HSe(e){let t=y_(e);return ms.bufferToHex(t)}Vn.typedSignatureHash=HSe;function y_(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(o){return o.type!=="bytes"?o.value:ih.legacyToBuffer(o.value)}),n=e.map(function(o){return o.type}),i=e.map(function(o){if(!o.name)throw t;return`${o.type} ${o.name}`});return Wb.soliditySHA3(["bytes32","bytes32"],[Wb.soliditySHA3(new Array(e.length).fill("string"),i),Wb.soliditySHA3(n,r)])}function WSe({privateKey:e,data:t,version:r}){if(ry(r),ih.isNullish(t))throw new Error("Missing data parameter");if(ih.isNullish(e))throw new Error("Missing private key parameter");let n=r===ji.V1?y_(t):Vn.TypedDataUtils.eip712Hash(t,r),i=ms.ecsign(n,e);return ih.concatSig(ms.toBuffer(i.v),i.r,i.s)}Vn.signTypedData=WSe;function zSe({data:e,signature:t,version:r}){if(ry(r),ih.isNullish(e))throw new Error("Missing data parameter");if(ih.isNullish(t))throw new Error("Missing signature parameter");let n=r===ji.V1?y_(e):Vn.TypedDataUtils.eip712Hash(e,r),i=ih.recoverPublicKey(n,t),o=ms.publicToAddress(i);return ms.bufferToHex(o)}Vn.recoverTypedSignature=zSe});var r$=K((t$,pE)=>{p();y();(function(e,t){"use strict";typeof pE<"u"&&pE.exports?pE.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(t$,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,i=unescape(encodeURIComponent(r)),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o},e.encodeUTF8=function(r){var n,i=[];for(n=0;n<r.length;n++)i.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,i=[],o=r.length;for(n=0;n<o;n++)i.push(String.fromCharCode(r[n]));return btoa(i.join(""))},e.decodeBase64=function(r){t(r);var n,i=atob(r),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o}),e})});var a$=K(qn=>{"use strict";p();y();var jSe=qn&&qn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),GSe=qn&&qn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n$=qn&&qn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&jSe(t,e,r);return GSe(t,e),t};Object.defineProperty(qn,"__esModule",{value:!0});qn.getEncryptionPublicKey=qn.decryptSafely=qn.decrypt=qn.encryptSafely=qn.encrypt=void 0;var oh=n$(yh()),ya=n$(r$()),uc=Vb();function i$({publicKey:e,data:t,version:r}){if(uc.isNullish(e))throw new Error("Missing publicKey parameter");if(uc.isNullish(t))throw new Error("Missing data parameter");if(uc.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=oh.box.keyPair(),i;try{i=ya.decodeBase64(e)}catch{throw new Error("Bad public key")}let o=ya.decodeUTF8(t),s=oh.randomBytes(oh.box.nonceLength),a=oh.box(o,s,i,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:ya.encodeBase64(s),ephemPublicKey:ya.encodeBase64(n.publicKey),ciphertext:ya.encodeBase64(a)}}default:throw new Error("Encryption type/version not supported")}}qn.encrypt=i$;function $Se({publicKey:e,data:t,version:r}){if(uc.isNullish(e))throw new Error("Missing publicKey parameter");if(uc.isNullish(t))throw new Error("Missing data parameter");if(uc.isNullish(r))throw new Error("Missing version parameter");let n=2**11,i=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let o={data:t,padding:""},a=Buffer.byteLength(JSON.stringify(o),"utf-8")%n,c=0;a>0&&(c=n-a-i),o.padding="0".repeat(c);let u=JSON.stringify(o);return i$({publicKey:e,data:u,version:r})}qn.encryptSafely=$Se;function o$({encryptedData:e,privateKey:t}){if(uc.isNullish(e))throw new Error("Missing encryptedData parameter");if(uc.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=s$(t),n=oh.box.keyPair.fromSecretKey(r).secretKey,i=ya.decodeBase64(e.nonce),o=ya.decodeBase64(e.ciphertext),s=ya.decodeBase64(e.ephemPublicKey),a=oh.box.open(o,i,s,n),c;try{c=ya.encodeUTF8(a)}catch{throw new Error("Decryption failed.")}if(c)return c;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}qn.decrypt=o$;function YSe({encryptedData:e,privateKey:t}){if(uc.isNullish(e))throw new Error("Missing encryptedData parameter");if(uc.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(o$({encryptedData:e,privateKey:t})).data}qn.decryptSafely=YSe;function JSe(e){let t=s$(e),r=oh.box.keyPair.fromSecretKey(t).publicKey;return ya.encodeBase64(r)}qn.getEncryptionPublicKey=JSe;function s$(e){let t=Buffer.from(e,"hex").toString("base64");return ya.decodeBase64(t)}});var u$=K(No=>{"use strict";p();y();var ZSe=No&&No.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),m_=No&&No.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ZSe(t,e,r)};Object.defineProperty(No,"__esModule",{value:!0});No.normalize=No.concatSig=void 0;m_(VG(),No);m_(e$(),No);m_(a$(),No);var c$=Vb();Object.defineProperty(No,"concatSig",{enumerable:!0,get:function(){return c$.concatSig}});Object.defineProperty(No,"normalize",{enumerable:!0,get:function(){return c$.normalize}})});var G$=K(ay=>{"use strict";p();y();Object.defineProperty(ay,"__esModule",{value:!0});ay.testnet=ay.bitcoin=void 0;ay.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};ay.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var $$=K(or=>{"use strict";p();y();Object.defineProperty(or,"__esModule",{value:!0});or.maybe=or.Boolean=or.Array=or.Buffer256bit=or.Network=or.typeforce=void 0;or.typeforce=tk();or.Network=or.typeforce.compile({messagePrefix:or.typeforce.oneOf(or.typeforce.Buffer,or.typeforce.String),bip32:{public:or.typeforce.UInt32,private:or.typeforce.UInt32},pubKeyHash:or.typeforce.UInt8,scriptHash:or.typeforce.UInt8,wif:or.typeforce.UInt8});or.Buffer256bit=or.typeforce.BufferN(32);or.Array=or.typeforce.Array;or.Boolean=or.typeforce.Boolean;or.maybe=or.typeforce.maybe});var Y$=K(IE=>{"use strict";p();y();Object.defineProperty(IE,"__esModule",{value:!0});IE.testEcc=void 0;var ke=e=>Buffer.from(e,"hex");function zEe(e){br(e.isPoint(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),br(!e.isPoint(ke("030000000000000000000000000000000000000000000000000000000000000005"))),br(e.isPrivate(ke("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),br(e.isPrivate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),br(!e.isPrivate(ke("0000000000000000000000000000000000000000000000000000000000000000"))),br(!e.isPrivate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),br(!e.isPrivate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),br(Buffer.from(e.privateAdd(ke("0000000000000000000000000000000000000000000000000000000000000001"),ke("0000000000000000000000000000000000000000000000000000000000000000"))).equals(ke("0000000000000000000000000000000000000000000000000000000000000001"))),br(e.privateAdd(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),ke("0000000000000000000000000000000000000000000000000000000000000003"))===null),br(Buffer.from(e.privateAdd(ke("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),ke("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(ke("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),br(Buffer.from(e.privateNegate(ke("0000000000000000000000000000000000000000000000000000000000000001"))).equals(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),br(Buffer.from(e.privateNegate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(ke("0000000000000000000000000000000000000000000000000000000000000003"))),br(Buffer.from(e.privateNegate(ke("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ke("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),br(Buffer.from(e.pointCompress(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),br(Buffer.from(e.pointCompress(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),br(Buffer.from(e.pointCompress(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),br(Buffer.from(e.pointCompress(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),br(Buffer.from(e.pointFromScalar(ke("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ke("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),br(e.xOnlyPointAddTweak(ke("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(ke("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),ke("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));br(Buffer.from(t.xOnlyPubkey).equals(ke("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(ke("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),ke("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),br(Buffer.from(t.xOnlyPubkey).equals(ke("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),br(Buffer.from(e.sign(ke("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(ke("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),br(e.verify(ke("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ke("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ke("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&br(Buffer.from(e.signSchnorr(ke("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ke("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),ke("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(ke("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&br(e.verifySchnorr(ke("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ke("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),ke("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}IE.testEcc=zEe;function br(e){if(!e)throw new Error("ecc library invalid")}});var Z$=K(cy=>{"use strict";p();y();Object.defineProperty(cy,"__esModule",{value:!0});cy.ECPairFactory=cy.networks=void 0;var L_=G$();cy.networks=L_;var Gi=$$(),jEe=_B(),J$=dv(),GEe=Y$(),D_=Gi.typeforce.maybe(Gi.typeforce.compile({compressed:Gi.maybe(Gi.Boolean),network:Gi.maybe(Gi.Network)})),$Ee=e=>e.length===32?e:e.slice(1,33);function YEe(e){(0,GEe.testEcc)(e);function t(a){return e.isPoint(a)}function r(a,c){if(Gi.typeforce(Gi.Buffer256bit,a),!e.isPrivate(a))throw new TypeError("Private key not in range [1, n)");return Gi.typeforce(D_,c),new s(a,void 0,c)}function n(a,c){return Gi.typeforce(e.isPoint,a),Gi.typeforce(D_,c),new s(void 0,a,c)}function i(a,c){let u=J$.decode(a),h=u.version;if(Gi.Array(c)){if(c=c.filter(l=>h===l.wif).pop(),!c)throw new Error("Unknown network version")}else if(c=c||L_.bitcoin,h!==c.wif)throw new Error("Invalid network version");return r(u.privateKey,{compressed:u.compressed,network:c})}function o(a){Gi.typeforce(D_,a),a===void 0&&(a={});let c=a.rng||jEe,u;do u=c(32),Gi.typeforce(Gi.Buffer256bit,u);while(!e.isPrivate(u));return r(u,a)}class s{__D;__Q;compressed;network;lowR;constructor(c,u,h){this.__D=c,this.__Q=u,this.lowR=!1,h===void 0&&(h={}),this.compressed=h.compressed===void 0?!0:h.compressed,this.network=h.network||L_.bitcoin,u!==void 0&&(this.__Q=Buffer.from(e.pointCompress(u,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let c=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(c)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return J$.encode(this.network.wif,this.__D,this.compressed)}tweak(c){return this.privateKey?this.tweakFromPrivateKey(c):this.tweakFromPublicKey(c)}sign(c,u){if(!this.__D)throw new Error("Missing private key");if(u===void 0&&(u=this.lowR),u===!1)return Buffer.from(e.sign(c,this.__D));{let h=e.sign(c,this.__D),l=Buffer.alloc(32,0),g=0;for(;h[0]>127;)g++,l.writeUIntLE(g,0,6),h=e.sign(c,this.__D,l);return Buffer.from(h)}}signSchnorr(c){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(c,this.privateKey))}verify(c,u){return e.verify(c,this.publicKey,u)}verifySchnorr(c,u){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(c,this.publicKey.subarray(1,33),u)}tweakFromPublicKey(c){let u=$Ee(this.publicKey),h=e.xOnlyPointAddTweak(u,c);if(!h||h.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let l=Buffer.from([h.parity===0?2:3]);return n(Buffer.concat([l,h.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(c){let h=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,l=e.privateAdd(h,c);if(!l)throw new Error("Invalid tweaked private key!");return r(Buffer.from(l),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:i,makeRandom:o}}cy.ECPairFactory=YEe});var Q$=K(gl=>{"use strict";p();y();Object.defineProperty(gl,"__esModule",{value:!0});gl.networks=gl.ECPairFactory=gl.default=void 0;var K_=Z$();Object.defineProperty(gl,"default",{enumerable:!0,get:function(){return K_.ECPairFactory}});Object.defineProperty(gl,"ECPairFactory",{enumerable:!0,get:function(){return K_.ECPairFactory}});Object.defineProperty(gl,"networks",{enumerable:!0,get:function(){return K_.networks}})});p();y();var ql=X(en()),Gr=X(Jw()),Dc=X(Us());p();y();Ay.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});p();y();var zne=(e,t)=>e+t,eM=e=>e.reduce(zne,0);var tM=ql.Buffer.alloc(64).fill(0),q8=e=>Wo(e)?ql.Buffer.from(e.message.serialize()):e.serializeMessage(),Zw=e=>Dc.default.encode(q8(e)),rM=e=>{try{return Zw(jh(e,"bs58"))}catch{return Zw(jh(e,"base64"))}},nM=e=>{try{return jh(e,"bs58").version}catch{return jh(e,"base64").version}},iM=e=>H8(z8(e)),Wo=e=>e&&"version"in e,Qw=(e,t)=>Wo(e)?ql.Buffer.from(e.serialize()):e.serialize(t??{requireAllSignatures:!1,verifySignatures:!1}),H8=(e,t)=>Dc.default.encode(Qw(e,t)),oM=(e,t)=>Qw(e,t).toString("base64"),jh=(e,t)=>{let r;if(t==="base64")r=ql.Buffer.from(e,"base64");else if(t==="bs58")r=Dc.default.decode(e);else throw new Error("Unsupported encoding");return Gr.VersionedTransaction.deserialize(r)};function W8(e){return Wo(e)?e.signatures.filter(r=>r.every(i=>i===0)===!1).length>0:e.signatures.filter(({signature:r})=>r?r.find(i=>i!==0)!==void 0:!1).length>0}var sM=e=>{let t=e.map(r=>Gr.VersionedMessage.deserialize(Dc.default.decode(r)));return eM(t.map(r=>r.header.numRequiredSignatures))},z8=e=>{let t=Dc.default.decode(e);if(Gr.VersionedMessage.deserializeMessageVersion(t)==="legacy"){let i=Gr.Message.from(t);return Gr.Transaction.populate(i,[])}let n=Gr.VersionedMessage.deserialize(t);return new Gr.VersionedTransaction(n)},aM=(e,t=[])=>{let r=Dc.default.decode(e);if(Gr.VersionedMessage.deserializeMessageVersion(r)==="legacy"){let i=Gr.Message.from(r);return Gr.Transaction.populate(i,t.map(s=>s?Dc.default.encode(s):Dc.default.encode(tM)))}else{let i=Gr.VersionedMessage.deserialize(r);return new Gr.VersionedTransaction(i,t.map(s=>s||tM))}},cM=e=>e.compileMessage().accountKeys,j8=e=>Wo(e)?e.message.recentBlockhash:e.recentBlockhash,uM=(e,t)=>{Wo(e)?e.message.recentBlockhash=t:e.recentBlockhash=t},fM=async(e,t)=>{if(j8(e))return;let r=(await t.getLatestBlockhash("confirmed")).blockhash;uM(e,r)},lM=async(e,t)=>{if(W8(e))return;let r=(await t.getLatestBlockhash("confirmed")).blockhash;uM(e,r)},G8=(e,t)=>{Wo(e)||(e.feePayer=t)},$8=e=>Wo(e)?e.message.staticAccountKeys[0]:e.feePayer,dM=(e,t)=>{$8(e)||G8(e,t)},hM=(e,t)=>{Wo(e)?e.sign(t):e.partialSign(...t)},pM=e=>Wo(e)?e.message.staticAccountKeys:e.signatures.map(t=>t.publicKey),yM=e=>Wo(e)?e.signatures.map(t=>ql.Buffer.from(t)):e.signatures.map(t=>t.signature).filter(t=>t!==null);function mM(e){if(!jne(ql.Buffer.from(e)))return!1;let t;try{t=Gr.Message.from(e)}catch{t=void 0}let r;try{r=Gr.VersionedMessage.deserialize(e)}catch{r=void 0}return!t&&!r||(t?.instructions?.length??0)===0&&(r?.compiledInstructions?.length??0)===0}function jne(e){let t=e.length,r=0;for(;r<t;)if(!(e[r]&128))r++;else if((e[r]&224)===192){if(r+1===t||(e[r+1]&192)!==128||(e[r]&254)===192)return!1;r+=2}else if((e[r]&240)===224){if(r+2>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||e[r]===224&&(e[r+1]&224)===128||e[r]===237&&(e[r+1]&224)===160)return!1;r+=3}else if((e[r]&248)===240){if(r+3>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||(e[r+3]&192)!==128||e[r]===240&&(e[r+1]&240)===128||e[r]===244&&e[r+1]>143||e[r]>244)return!1;r+=4}else return!1;return!0}var gM=e=>Ay(e).dividedBy(Gr.LAMPORTS_PER_SOL),bM=e=>Ay(e).multipliedBy(Gr.LAMPORTS_PER_SOL);var bo={};ZE(bo,{BufferLayout:()=>Jne,Message:()=>eo.Message,MessageV0:()=>eo.MessageV0,Transaction:()=>eo.Transaction,TransactionInstruction:()=>eo.TransactionInstruction,TransactionMessage:()=>eo.TransactionMessage,VersionedMessage:()=>eo.VersionedMessage,VersionedTransaction:()=>eo.VersionedTransaction,getAccountsFromTransaction:()=>cM,getFeePayer:()=>$8,getRecentBlockhash:()=>j8,getRequiredSignatures:()=>sM,getSignaturePubKeys:()=>pM,getSignatures:()=>yM,isAlreadySigned:()=>W8,isSafeMessage:()=>mM,isVersionedTransaction:()=>Wo,lamportsToSolana:()=>gM,messageAndSignaturesToTransaction:()=>aM,messageStringToTransaction:()=>z8,messageStringToTransactionString:()=>iM,setFeePayer:()=>G8,setFeePayerIfNotExists:()=>dM,setRecentBlockhashIfNotExists:()=>fM,setRecentBlockhashIfNotSigned:()=>lM,signWithAdditionalSigners:()=>hM,solanaInstructionEncodeData:()=>SM,solanaToLamports:()=>bM,transactionStringToMessageString:()=>rM,transactionStringToTransaction:()=>jh,transactionStringToVersion:()=>nM,transactionToBase58TransactionString:()=>H8,transactionToBase64TransactionString:()=>oM,transactionToMessageString:()=>Zw,transactionToSerializedMessage:()=>q8,transactionToSerializedTransaction:()=>Qw,u64:()=>vM});p();y();var Jne=X(Ly()),eo=X(Jw());kc(bo,X(Jw()));p();y();var xM=X(ky()),wM=X(Ly()),Xw=X(U3()),Gne=e=>{let t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},e1=e=>t=>{let r=(0,wM.blob)(e,t),{encode:n,decode:i}=Gne(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return(0,Xw.toBigIntLE)(xM.Buffer.from(c))},o.encode=(s,a,c)=>{let u=(0,Xw.toBufferLE)(s,e);return n(u,a,c)},o},vM=e1(8),vke=e1(16),Ake=e1(24),Ske=e1(32);p();y();var AM=X(ky());p();y();var $ne=X(ky()),Gh=X(Ly());function Y8(e,t){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){let o=t[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return Y8({layout:i},t[i.property]);return 0},n=0;return e.layout.fields.forEach(i=>{n+=r(i)}),n}function SM(e,t){let r=e.layout.span>=0?e.layout.span:Y8(e,t),n=AM.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}p();y();p();y();p();y();p();y();var Zne=X(wy(),1);var Bn=BigInt(0),Ct=BigInt(1),Zu=BigInt(2),Qne=BigInt(8),EM=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),dr=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:EM,n:EM,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var _M=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),vm=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Lke=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),Xne=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),eie=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),tie=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),rie=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),hn=class e{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof $r))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals($r.ZERO)?e.ZERO:new e(t.x,t.y,Ct,le(t.x*t.y))}static toAffineBatch(t){let r=oie(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){kM(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=le(r*a),u=le(o*i),h=le(n*a),l=le(s*i);return c===u&&h===l}negate(){return new e(le(-this.x),this.y,this.z,le(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=dr,o=le(t*t),s=le(r*r),a=le(Zu*le(n*n)),c=le(i*o),u=t+r,h=le(le(u*u)-o-s),l=c+s,g=l-a,x=c-s,A=le(h*g),E=le(l*x),C=le(h*x),M=le(g*l);return new e(A,E,M,C)}add(t){kM(t);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=t,h=le((n-r)*(a+s)),l=le((n+r)*(a-s)),g=le(l-h);if(g===Bn)return this.double();let x=le(i*Zu*u),A=le(o*Zu*c),E=A+x,C=l+h,M=A-x,N=le(E*g),R=le(C*M),V=le(E*M),q=le(g*C);return new e(N,R,q,V)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=$r.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&X8.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),X8.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=Ct);let E=x,C=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(IM(M,i[E])):o=o.add(IM(N,i[C]))}return e.normalizeZ([o,s])[0]}multiply(t,r){return this.wNAF(r1(t,dr.l),r)}multiplyUnsafe(t){let r=r1(t,dr.l,!1),n=e.BASE,i=e.ZERO;if(r===Bn)return i;if(this.equals(i)||r===Ct)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>Bn;)r&Ct&&(o=o.add(s)),s=s.double(),r>>=Ct;return o}isSmallOrder(){return this.multiplyUnsafe(dr.h).equals(e.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(dr.l/Zu).double();return dr.l%Zu&&(t=t.add(this)),t.equals(e.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?Qne:i1(i));let s=le(r*t),a=le(n*t),c=le(i*t);if(o)return $r.ZERO;if(c!==Ct)throw new Error("invZ was invalid");return new $r(s,a)}fromRistrettoBytes(){Z8()}toRistrettoBytes(){Z8()}fromRistrettoHash(){Z8()}};hn.BASE=new hn(dr.Gx,dr.Gy,Ct,le(dr.Gx*dr.Gy));hn.ZERO=new hn(Bn,Ct,Ct,Bn);function IM(e,t){let r=t.negate();return e?r:t}function kM(e){if(!(e instanceof hn))throw new TypeError("ExtendedPoint expected")}function J8(e){if(!(e instanceof Hl))throw new TypeError("RistrettoPoint expected")}function Z8(){throw new Error("Legacy method: switch to RistrettoPoint")}var Hl=class e{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=dr,n=le(vm*t*t),i=le((n+Ct)*tie),o=BigInt(-1),s=le((o-r*n)*le(n+r)),{isValid:a,value:c}=tI(i,s),u=le(c*t);Ju(u)||(u=le(-u)),a||(c=u),a||(o=n);let h=le(o*(n-Ct)*rie-s),l=c*c,g=le((c+c)*s),x=le(h*Xne),A=le(Ct-l),E=le(Ct+l);return new hn(le(g*E),le(A*x),le(x*E),le(g*A))}static hashToCurve(t){t=Qu(t,64);let r=Q8(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=Q8(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new e(n.add(o))}static fromHex(t){t=Qu(t,32);let{a:r,d:n}=dr,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=Q8(t);if(!aie(Em(o),t)||Ju(o))throw new Error(i);let s=le(o*o),a=le(Ct+r*s),c=le(Ct-r*s),u=le(a*a),h=le(c*c),l=le(r*n*u-h),{isValid:g,value:x}=PM(le(l*h)),A=le(x*c),E=le(x*A*l),C=le((o+o)*A);Ju(C)&&(C=le(-C));let M=le(a*E),N=le(C*M);if(!g||Ju(N)||M===Bn)throw new Error(i);return new e(new hn(C,M,Ct,N))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,o=le(le(n+r)*le(n-r)),s=le(t*r),a=le(s*s),{value:c}=PM(le(o*a)),u=le(c*o),h=le(c*s),l=le(u*h*i),g;if(Ju(i*l)){let A=le(r*vm),E=le(t*vm);t=A,r=E,g=le(u*eie)}else g=h;Ju(t*l)&&(r=le(-r));let x=le((n-r)*g);return Ju(x)&&(x=le(-x)),Em(x)}toHex(){return Im(this.toRawBytes())}toString(){return this.toHex()}equals(t){J8(t);let r=this.ep,n=t.ep,i=le(r.x*n.y)===le(r.y*n.x),o=le(r.y*n.y)===le(r.x*n.x);return i||o}add(t){return J8(t),new e(this.ep.add(t.ep))}subtract(t){return J8(t),new e(this.ep.subtract(t.ep))}multiply(t){return new e(this.ep.multiply(t))}multiplyUnsafe(t){return new e(this.ep.multiplyUnsafe(t))}};Hl.BASE=new Hl(hn.BASE);Hl.ZERO=new Hl(hn.ZERO);var X8=new WeakMap,$r=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,X8.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=dr;t=Qu(t,32);let o=t.slice();o[31]=t[31]&-129;let s=km(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=_M)throw new Error("Expected 0 < hex < 2**256");let a=le(s*s),c=le(a-Ct),u=le(n*a+Ct),{isValid:h,value:l}=tI(c,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let g=(l&Ct)===Ct;return(t[31]&128)!==0!==g&&(l=le(-l)),new e(l,s)}static async fromPrivateKey(t){return(await RM(t)).point}toRawBytes(){let t=Em(this.y);return t[31]|=this.x&Ct?128:0,t}toHex(){return Im(this.toRawBytes())}toX25519(){let{y:t}=this,r=le((Ct+t)*i1(Ct-t));return Em(r)}isTorsionFree(){return hn.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(le(-this.x),this.y)}add(t){return hn.fromAffine(this).add(hn.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return hn.fromAffine(this).multiply(t,this).toAffine()}};$r.BASE=new $r(dr.Gx,dr.Gy);$r.ZERO=new $r(Bn,Ct);var Sm=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Qu(t,64),n=$r.fromHex(r.slice(0,32),!1),i=km(r.slice(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof $r))throw new Error("Expected Point instance");return r1(r,dr.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(Em(this.s),32),t}toHex(){return Im(this.toRawBytes())}};function TM(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var nie=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Im(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=nie[e[r]];return t}function eI(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function BM(e){let r=e.toString(16).padStart(64,"0");return eI(r)}function Em(e){return BM(e).reverse()}function Ju(e){return(le(e)&Ct)===Ct}function km(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Im(Uint8Array.from(e).reverse()))}var iie=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Q8(e){return le(km(e)&iie)}function le(e,t=dr.P){let r=e%t;return r>=Bn?r:t+r}function i1(e,t=dr.P){if(e===Bn||t<=Bn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=le(e,t),n=t,i=Bn,o=Ct,s=Ct,a=Bn;for(;r!==Bn;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==Ct)throw new Error("invert: does not exist");return le(i,t)}function oie(e,t=dr.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Bn?o:(r[a]=o,le(o*s,t)),Ct),i=i1(n,t);return e.reduceRight((o,s,a)=>s===Bn?o:(r[a]=le(o*r[a],t),le(o*s,t)),i),r}function Ca(e,t){let{P:r}=dr,n=e;for(;t-- >Bn;)n*=n,n%=r;return n}function sie(e){let{P:t}=dr,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=e*e%t*e%t,u=Ca(c,Zu)*c%t,h=Ca(u,Ct)*e%t,l=Ca(h,r)*h%t,g=Ca(l,n)*l%t,x=Ca(g,i)*g%t,A=Ca(x,o)*x%t,E=Ca(A,s)*A%t,C=Ca(E,s)*A%t,M=Ca(C,n)*l%t;return{pow_p_5_8:Ca(M,Zu)*e%t,b2:c}}function tI(e,t){let r=le(t*t*t),n=le(r*r*t),i=sie(e*n).pow_p_5_8,o=le(e*r*i),s=le(t*o*o),a=o,c=le(o*vm),u=s===e,h=s===le(-e),l=s===le(-e*vm);return u&&(o=a),(h||l)&&(o=c),Ju(o)&&(o=le(-o)),{isValid:u||h,value:o}}function PM(e){return tI(Ct,e)}function t1(e){return le(km(e),dr.l)}function aie(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Qu(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):eI(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function r1(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(Bn<e)return e}else if(Bn<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function cie(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function CM(e){if(e=typeof e=="bigint"||typeof e=="number"?BM(r1(e,_M)):Qu(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function MM(e){let t=cie(e.slice(0,32)),r=e.slice(32,64),n=t1(t),i=$r.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}var Am;function n1(...e){if(typeof Am!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return Am(...e)}async function RM(e){return MM(await Lc.sha512(CM(e)))}function rI(e){return MM(n1(CM(e)))}function uie(e){return rI(e).pointBytes}function fie(e,t){e=Qu(e);let{prefix:r,scalar:n,pointBytes:i}=rI(t),o=t1(n1(r,e)),s=$r.BASE.multiply(o),a=t1(n1(s.toRawBytes(),i,e)),c=le(o+a*n,dr.l);return new Sm(s,c).toRawBytes()}function lie(e,t,r){t=Qu(t),r instanceof $r||(r=$r.fromHex(r,!1));let{r:n,s:i}=e instanceof Sm?e.assertValidity():Sm.fromHex(e),o=hn.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:t}}function die(e,t,r,n){let i=t1(n),o=hn.fromAffine(e).multiplyUnsafe(i);return hn.fromAffine(t).add(o).subtract(r).multiplyUnsafe(dr.h).equals(hn.ZERO)}function hie(e,t,r){let{r:n,SB:i,msg:o,pub:s}=lie(e,t,r),a=n1(n.toRawBytes(),s.toRawBytes(),o);return die(s,n,i,a)}var o1={getExtendedPublicKey:rI,getPublicKey:uie,sign:fie,verify:hie};$r.BASE._setWindowSize(8);var Yu={node:Zne,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Lc={bytesToHex:Im,hexToBytes:eI,concatBytes:TM,getExtendedPublicKey:RM,mod:le,invert:i1,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=Qu(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return le(km(e),dr.l-Ct)+Ct},randomBytes:(e=32)=>{if(Yu.web)return Yu.web.getRandomValues(new Uint8Array(e));if(Yu.node){let{randomBytes:t}=Yu.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Lc.randomBytes(32),sha512:async(...e)=>{let t=TM(...e);if(Yu.web){let r=await Yu.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(Yu.node)return Uint8Array.from(Yu.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=$r.BASE){let r=t.equals($r.BASE)?t:new $r(t.x,t.y);return r._setWindowSize(e),r.multiply(Zu),r},sha512Sync:void 0};Object.defineProperties(Lc,{sha512Sync:{configurable:!1,get(){return Am},set(e){Am||(Am=e)}}});p();y();p();y();var s1=BigInt(4294967295),nI=BigInt(32);function OM(e,t=!1){return t?{h:Number(e&s1),l:Number(e>>nI&s1)}:{h:Number(e>>nI&s1)|0,l:Number(e&s1)|0}}function pie(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=OM(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var yie=(e,t)=>BigInt(e>>>0)<<nI|BigInt(t>>>0),mie=(e,t,r)=>e>>>r,gie=(e,t,r)=>e<<32-r|t>>>r,bie=(e,t,r)=>e>>>r|t<<32-r,xie=(e,t,r)=>e<<32-r|t>>>r,wie=(e,t,r)=>e<<64-r|t>>>r-32,vie=(e,t,r)=>e>>>r-32|t<<64-r,Aie=(e,t)=>t,Sie=(e,t)=>e,Eie=(e,t,r)=>e<<r|t>>>32-r,Iie=(e,t,r)=>t<<r|e>>>32-r,kie=(e,t,r)=>t<<r-32|e>>>64-r,Tie=(e,t,r)=>e<<r-32|t>>>64-r;function Pie(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var _ie=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Bie=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Cie=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Mie=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Rie=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Oie=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,Nie={fromBig:OM,split:pie,toBig:yie,shrSH:mie,shrSL:gie,rotrSH:bie,rotrSL:xie,rotrBH:wie,rotrBL:vie,rotr32H:Aie,rotr32L:Sie,rotlSH:Eie,rotlSL:Iie,rotlBH:kie,rotlBL:Tie,add:Pie,add3L:_ie,add3H:Bie,add4L:Cie,add4H:Mie,add5H:Oie,add5L:Rie},Me=Nie;var[Uie,Die]=Me.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Xu=new Uint32Array(80),ef=new Uint32Array(80),$h=class extends eC{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:l,Fl:g,Gh:x,Gl:A,Hh:E,Hl:C}=this;return[t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,C]}set(t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,C){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=l|0,this.Fl=g|0,this.Gh=x|0,this.Gl=A|0,this.Hh=E|0,this.Hl=C|0}process(t,r){for(let R=0;R<16;R++,r+=4)Xu[R]=t.getUint32(r),ef[R]=t.getUint32(r+=4);for(let R=16;R<80;R++){let V=Xu[R-15]|0,q=ef[R-15]|0,W=Me.rotrSH(V,q,1)^Me.rotrSH(V,q,8)^Me.shrSH(V,q,7),G=Me.rotrSL(V,q,1)^Me.rotrSL(V,q,8)^Me.shrSL(V,q,7),z=Xu[R-2]|0,ee=ef[R-2]|0,_=Me.rotrSH(z,ee,19)^Me.rotrBH(z,ee,61)^Me.shrSH(z,ee,6),f=Me.rotrSL(z,ee,19)^Me.rotrBL(z,ee,61)^Me.shrSL(z,ee,6),m=Me.add4L(G,f,ef[R-7],ef[R-16]),b=Me.add4H(m,W,_,Xu[R-7],Xu[R-16]);Xu[R]=b|0,ef[R]=m|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:l,El:g,Fh:x,Fl:A,Gh:E,Gl:C,Hh:M,Hl:N}=this;for(let R=0;R<80;R++){let V=Me.rotrSH(l,g,14)^Me.rotrSH(l,g,18)^Me.rotrBH(l,g,41),q=Me.rotrSL(l,g,14)^Me.rotrSL(l,g,18)^Me.rotrBL(l,g,41),W=l&x^~l&E,G=g&A^~g&C,z=Me.add5L(N,q,G,Die[R],ef[R]),ee=Me.add5H(z,M,V,W,Uie[R],Xu[R]),_=z|0,f=Me.rotrSH(n,i,28)^Me.rotrBH(n,i,34)^Me.rotrBH(n,i,39),m=Me.rotrSL(n,i,28)^Me.rotrBL(n,i,34)^Me.rotrBL(n,i,39),b=n&o^n&a^o&a,v=i&s^i&c^s&c;M=E|0,N=C|0,E=x|0,C=A|0,x=l|0,A=g|0,{h:l,l:g}=Me.add(u|0,h|0,ee|0,_|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let w=Me.add3L(_,m,v);n=Me.add3H(w,ee,f,b),i=w|0}({h:n,l:i}=Me.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=Me.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=Me.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=Me.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:l,l:g}=Me.add(this.Eh|0,this.El|0,l|0,g|0),{h:x,l:A}=Me.add(this.Fh|0,this.Fl|0,x|0,A|0),{h:E,l:C}=Me.add(this.Gh|0,this.Gl|0,E|0,C|0),{h:M,l:N}=Me.add(this.Hh|0,this.Hl|0,M|0,N|0),this.set(n,i,o,s,a,c,u,h,l,g,x,A,E,C,M,N)}roundClean(){Xu.fill(0),ef.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},iI=class extends $h{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},oI=class extends $h{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},sI=class extends $h{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},xo=El(()=>new $h),$ke=El(()=>new iI),Yke=El(()=>new oI),Jke=El(()=>new sI);p();y();var Lie=X(wy(),1);var Lt=BigInt(0),Ar=BigInt(1),rf=BigInt(2),_m=BigInt(3),NM=BigInt(8),Sr=Object.freeze({a:Lt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Ar,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),UM=(e,t)=>(e+t/rf)/t,a1={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=Sr,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Ar*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=UM(o*e,t),c=UM(-n*e,t),u=ge(e-a*r-c*i,t),h=ge(-a*n-c*o,t),l=u>s,g=h>s;if(l&&(u=t-u),g&&(h=t-h),u>s||h>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:g,k2:h}}},Yh=32,Cm=32;var DM=Yh+1,LM=2*Yh+1;function KM(e){let{a:t,b:r}=Sr,n=ge(e*e),i=ge(n*e);return ge(i+t*e+r)}var c1=Sr.a===Lt,d1=class extends Error{constructor(t){super(t)}};function FM(e){if(!(e instanceof Ri))throw new TypeError("JacobianPoint expected")}var Ri=class e{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof Yr))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(Yr.ZERO)?e.ZERO:new e(t.x,t.y,Ar)}static toAffineBatch(t){let r=Hie(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return e.toAffineBatch(t).map(e.fromAffine)}equals(t){FM(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=ge(i*i),u=ge(a*a),h=ge(r*u),l=ge(o*c),g=ge(ge(n*a)*u),x=ge(ge(s*i)*c);return h===l&&g===x}negate(){return new e(this.x,ge(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=ge(t*t),o=ge(r*r),s=ge(o*o),a=t+o,c=ge(rf*(ge(a*a)-i-s)),u=ge(_m*i),h=ge(u*u),l=ge(h-rf*c),g=ge(u*(c-l)-NM*s),x=ge(rf*r*n);return new e(l,g,x)}add(t){FM(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t;if(o===Lt||s===Lt)return this;if(r===Lt||n===Lt)return t;let c=ge(i*i),u=ge(a*a),h=ge(r*u),l=ge(o*c),g=ge(ge(n*a)*u),x=ge(ge(s*i)*c),A=ge(l-h),E=ge(x-g);if(A===Lt)return E===Lt?this.double():e.ZERO;let C=ge(A*A),M=ge(A*C),N=ge(h*C),R=ge(E*E-M-rf*N),V=ge(E*(N-R)-g*M),q=ge(i*a*A);return new e(R,V,q)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=e.ZERO;if(typeof t=="bigint"&&t===Lt)return r;let n=HM(t);if(n===Ar)return this;if(!c1){let l=r,g=this;for(;n>Lt;)n&Ar&&(l=l.add(g)),g=g.double(),n>>=Ar;return l}let{k1neg:i,k1:o,k2neg:s,k2:a}=a1.splitScalar(n),c=r,u=r,h=this;for(;o>Lt||a>Lt;)o&Ar&&(c=c.add(h)),a&Ar&&(u=u.add(h)),h=h.double(),o>>=Ar,a>>=Ar;return i&&(c=c.negate()),s&&(u=u.negate()),u=new e(ge(u.x*a1.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=c1?128/t+1:256/t+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=Yr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&cI.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),cI.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+(c1?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=Ar);let E=x,C=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(u1(M,i[E])):o=o.add(u1(N,i[C]))}return{p:o,f:s}}multiply(t,r){let n=HM(t),i,o;if(c1){let{k1neg:s,k1:a,k2neg:c,k2:u}=a1.splitScalar(n),{p:h,f:l}=this.wNAF(a,r),{p:g,f:x}=this.wNAF(u,r);h=u1(s,h),g=u1(c,g),g=new e(ge(g.x*a1.beta),g.y,g.z),i=h.add(g),o=l.add(x)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return e.normalizeZ([i,o])[0]}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?NM:m1(i));let s=t,a=ge(s*s),c=ge(a*s),u=ge(r*a),h=ge(n*c),l=ge(i*s);if(o)return Yr.ZERO;if(l!==Ar)throw new Error("invZ was invalid");return new Yr(u,h)}};Ri.BASE=new Ri(Sr.Gx,Sr.Gy,Ar);Ri.ZERO=new Ri(Lt,Ar,Lt);function u1(e,t){let r=t.negate();return e?r:t}var cI=new WeakMap,Yr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,cI.delete(this)}hasEvenY(){return this.y%rf===Lt}static fromCompressedHex(t){let r=t.length===32,n=jo(r?t:t.subarray(1));if(!l1(n))throw new Error("Point is not on curve");let i=KM(n),o=qie(i),s=(o&Ar)===Ar;r?s&&(o=ge(-o)):(t[0]&1)===1!==s&&(o=ge(-o));let a=new e(n,o);return a.assertValidity(),a}static fromUncompressedHex(t){let r=jo(t.subarray(1,Yh+1)),n=jo(t.subarray(Yh+1,Yh*2+1)),i=new e(r,n);return i.assertValidity(),i}static fromHex(t){let r=Wl(t),n=r.length,i=r[0];if(n===Yh)return this.fromCompressedHex(r);if(n===DM&&(i===2||i===3))return this.fromCompressedHex(r);if(n===LM&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${DM} compressed bytes or ${LM} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return e.BASE.multiply(Om(t))}static fromSignature(t,r,n){let{r:i,s:o}=Gie(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=zie(Wl(t)),{n:a}=Sr,c=n===2||n===3?i+a:i,u=m1(c,a),h=ge(-s*u,a),l=ge(o*u,a),g=n&1?"03":"02",x=e.fromHex(g+nf(c)),A=e.BASE.multiplyAndAddUnsafe(x,h,l);if(!A)throw new Error("Cannot recover signature: point at infinify");return A.assertValidity(),A}toRawBytes(t=!1){return of(this.toHex(t))}toHex(t=!1){let r=nf(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${nf(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!l1(r)||!l1(n))throw new Error(t);let i=ge(n*n),o=KM(r);if(ge(i-o)!==Lt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(this.x,ge(-this.y))}double(){return Ri.fromAffine(this).double().toAffine()}add(t){return Ri.fromAffine(this).add(Ri.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Ri.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=Ri.fromAffine(this),o=r===Lt||r===Ar||this!==e.BASE?i.multiplyUnsafe(r):i.multiply(r),s=Ri.fromAffine(t).multiplyUnsafe(n),a=o.add(s);return a.equals(Ri.ZERO)?void 0:a.toAffine()}};Yr.BASE=new Yr(Sr.Gx,Sr.Gy);Yr.ZERO=new Yr(Lt,Lt);function VM(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function qM(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${Zh(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:jo(r),left:e.subarray(t+2)}}function Kie(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${Zh(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=qM(e.subarray(2)),{data:n,left:i}=qM(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Zh(i)}`);return{r:t,s:n}}var Bm=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?Zh(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new e(h1(i.slice(0,64)),h1(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=Kie(r?t:of(t));return new e(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!Rm(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Rm(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=Sr.n>>Ar;return this.s>t}normalizeS(){return this.hasHighS()?new e(this.r,ge(-this.s,Sr.n)):this}toDERRawBytes(){return of(this.toDERHex())}toDERHex(){let t=VM(Pm(this.s)),r=VM(Pm(this.r)),n=t.length/2,i=r.length/2,o=Pm(n),s=Pm(i);return`30${Pm(i+n+4)}02${s}${r}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return of(this.toCompactHex())}toCompactHex(){return nf(this.r)+nf(this.s)}};function Tm(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Fie=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Zh(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=Fie[e[r]];return t}var Vie=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function nf(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(Lt<=e&&e<Vie))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Mm(e){let t=of(nf(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function Pm(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function h1(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function of(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function jo(e){return h1(Zh(e))}function Wl(e){return e instanceof Uint8Array?Uint8Array.from(e):of(e)}function HM(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&Rm(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function ge(e,t=Sr.P){let r=e%t;return r>=Lt?r:t+r}function zo(e,t){let{P:r}=Sr,n=e;for(;t-- >Lt;)n*=n,n%=r;return n}function qie(e){let{P:t}=Sr,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=zo(u,_m)*u%t,l=zo(h,_m)*u%t,g=zo(l,rf)*c%t,x=zo(g,n)*g%t,A=zo(x,i)*x%t,E=zo(A,s)*A%t,C=zo(E,a)*E%t,M=zo(C,s)*A%t,N=zo(M,_m)*u%t,R=zo(N,o)*x%t,V=zo(R,r)*c%t,q=zo(V,rf);if(q*q%t!==e)throw new Error("Cannot find square root");return q}function m1(e,t=Sr.P){if(e===Lt||t<=Lt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ge(e,t),n=t,i=Lt,o=Ar,s=Ar,a=Lt;for(;r!==Lt;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==Ar)throw new Error("invert: does not exist");return ge(i,t)}function Hie(e,t=Sr.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Lt?o:(r[a]=o,ge(o*s,t)),Ar),i=m1(n,t);return e.reduceRight((o,s,a)=>s===Lt?o:(r[a]=ge(o*r[a],t),ge(o*s,t)),i),r}function Wie(e){let t=e.length*8-Cm*8,r=jo(e);return t>0?r>>BigInt(t):r}function zie(e,t=!1){let r=Wie(e);if(t)return r;let{n}=Sr;return r>=n?r-n:r}var Jh,aI;function Rm(e){return Lt<e&&e<Sr.n}function l1(e){return Lt<e&&e<Sr.P}function Om(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*Cm)throw new Error("Expected 32 bytes of private key");t=h1(e)}else if(e instanceof Uint8Array){if(e.length!==Cm)throw new Error("Expected 32 bytes of private key");t=jo(e)}else throw new TypeError("Expected valid private key");if(!Rm(t))throw new Error("Expected private key: 0 < key < n");return t}function jie(e){return e instanceof Yr?(e.assertValidity(),e):Yr.fromHex(e)}function Gie(e){if(e instanceof Bm)return e.assertValidity(),e;try{return Bm.fromDER(e)}catch{return Bm.fromCompact(e)}}function Kc(e,t=!1){return Yr.fromPrivateKey(e).toRawBytes(t)}function p1(e){return ge(jo(e),Sr.n)}var Qh=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Wl(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=jo(r.subarray(0,32)),i=jo(r.subarray(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!l1(t)||!Rm(r))throw new Error("Invalid signature")}toHex(){return nf(this.r)+nf(this.s)}toRawBytes(){return of(this.toHex())}};function $ie(e){return Yr.fromPrivateKey(e).toRawX()}var y1=class{constructor(t,r,n=Ma.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=Wl(t);let{x:i,scalar:o}=this.getScalar(Om(r));if(this.px=i,this.d=o,this.rand=Wl(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){let r=Yr.fromPrivateKey(t),n=r.hasEvenY()?t:Sr.n-t;return{point:r,scalar:n,x:r.toRawX()}}initNonce(t,r){return Mm(t^jo(r))}finalizeNonce(t){let r=ge(jo(t),Sr.n);if(r===Lt)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(t,r,n,i){return new Qh(t.x,ge(r+n*i,Sr.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:t,d:r,px:n,rand:i}=this,o=Ma.taggedHash,s=this.initNonce(r,await o(tf.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(tf.nonce,s,n,t)),h=p1(await o(tf.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return await jM(l,t,n)||this.error(),l}calcSync(){let{m:t,d:r,px:n,rand:i}=this,o=Ma.taggedHashSync,s=this.initNonce(r,o(tf.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(tf.nonce,s,n,t)),h=p1(o(tf.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return GM(l,t,n)||this.error(),l}};async function Yie(e,t,r){return new y1(e,t,r).calc()}function Jie(e,t,r){return new y1(e,t,r).calcSync()}function WM(e,t,r){let n=e instanceof Qh,i=n?e:Qh.fromHex(e);return n&&i.assertValidity(),{...i,m:Wl(t),P:jie(r)}}function zM(e,t,r,n){let i=Yr.BASE.multiplyAndAddUnsafe(t,Om(r),ge(-n,Sr.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function jM(e,t,r){try{let{r:n,s:i,m:o,P:s}=WM(e,t,r),a=p1(await Ma.taggedHash(tf.challenge,Mm(n),s.toRawX(),o));return zM(n,s,i,a)}catch{return!1}}function GM(e,t,r){try{let{r:n,s:i,m:o,P:s}=WM(e,t,r),a=p1(Ma.taggedHashSync(tf.challenge,Mm(n),s.toRawX(),o));return zM(n,s,i,a)}catch(n){if(n instanceof d1)throw n;return!1}}var $M={Signature:Qh,getPublicKey:$ie,sign:Yie,verify:jM,signSync:Jie,verifySync:GM};Yr.BASE._setWindowSize(8);var wo={node:Lie,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},tf={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},f1={},Ma={bytesToHex:Zh,hexToBytes:of,concatBytes:Tm,mod:ge,invert:m1,isValidPrivateKey(e){try{return Om(e),!0}catch{return!1}},_bigintTo32Bytes:Mm,_normalizePrivateKey:Om,hashToPrivateKey:e=>{e=Wl(e);let t=Cm+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=ge(jo(e),Sr.n-Ar)+Ar;return Mm(r)},randomBytes:(e=32)=>{if(wo.web)return wo.web.getRandomValues(new Uint8Array(e));if(wo.node){let{randomBytes:t}=wo.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Ma.hashToPrivateKey(Ma.randomBytes(Cm+8)),precompute(e=8,t=Yr.BASE){let r=t===Yr.BASE?t:new Yr(t.x,t.y);return r._setWindowSize(e),r.multiply(_m),r},sha256:async(...e)=>{if(wo.web){let t=await wo.web.subtle.digest("SHA-256",Tm(...e));return new Uint8Array(t)}else if(wo.node){let{createHash:t}=wo.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(wo.web){let r=await wo.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Tm(...t),i=await wo.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(wo.node){let{createHmac:r}=wo.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=f1[e];if(r===void 0){let n=await Ma.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Tm(n,n),f1[e]=r}return Ma.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof Jh!="function")throw new d1("sha256Sync is undefined, you need to set it");let r=f1[e];if(r===void 0){let n=Jh(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Tm(n,n),f1[e]=r}return Jh(r,...t)},_JacobianPoint:Ri};Object.defineProperties(Ma,{sha256Sync:{configurable:!1,get(){return Jh},set(e){Jh||(Jh=e)}},hmacSha256Sync:{configurable:!1,get(){return aI},set(e){aI||(aI=e)}}});p();y();var YM=new RegExp("^[0-9]+'?$"),Xh=2147483648;p();y();var c4e=new RegExp("^m(\\/[0-9]+')+$");var Qie="ed25519 seed",JM=e=>{let t=Buffer.from(Il(xo,Buffer.from(Qie),e)).toString("hex"),r=t.slice(0,64),n=t.slice(64);return{key:Buffer.from(r,"hex"),chainCode:Buffer.from(n,"hex")}},ZM=({key:e,chainCode:t},r)=>{let n=Buffer.allocUnsafe(4);n.writeUInt32BE(r,0);let i=Buffer.concat([Buffer.alloc(1,0),e,n]),o=Buffer.from(Il(xo,t,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64);return{key:Buffer.from(s,"hex"),chainCode:Buffer.from(a,"hex")}};p();y();var Fc=X(en()),g1=X(hh()),ep=X(ln());var Xie=Fc.Buffer.from("Bitcoin seed"),QM=g1.BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),XM=e=>{let t=Fc.Buffer.from(Il(xo,Fc.Buffer.from(Xie),e)).toString("hex"),r=t.slice(0,64),n=t.slice(64);return{key:Fc.Buffer.from(r,"hex"),chainCode:Fc.Buffer.from(n,"hex")}},eR=(e,t)=>{let{key:r,chainCode:n}=e,i=new Uint8Array(37);if(t&Xh)i.set(r,1);else{let l=Kc(r,!0);i.set((0,ep.arrayify)(l))}for(let l=24;l>=0;l-=8)i[33+(l>>3)]=t>>24-l&255;let o=Fc.Buffer.from(Il(xo,n,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64),c=g1.BigNumber.from(`0x${s}`);if(c.gte(QM))throw new Error("Invalid private key");let u=c.add(`0x${r.toString("hex")}`).mod(QM);if(u.eq(g1.BigNumber.from(0)))throw new Error("Invalid private key");let h=(0,ep.hexZeroPad)((0,ep.hexlify)(u),32);return{key:Fc.Buffer.from(h.replace("0x",""),"hex"),chainCode:Fc.Buffer.from(a,"hex")}};p();y();var uI=O.string().refine(e=>{if(typeof e!="string")return!1;let t=e.split("/");if(t.length<2||t[0]!=="m")return!1;for(let r=1;r<t.length;++r)if(!YM.test(t[r]))return!1;return!0},{message:"Value is not a valid derivation path."});var Nm=O.union([O.literal("bitcoinTaproot"),O.literal("bitcoinNativeSegwit"),O.literal("bitcoinNestedSegwit"),O.literal("bitcoinLegacy")]),Um=O.union([O.literal("bip44RootEthereum"),O.literal("bip44Ethereum"),O.literal("bip44EthereumSecondary"),O.literal("bip44EthereumTertiary")]),Dm=O.union([O.literal("bip44Root"),O.literal("bip44"),O.literal("bip44Change"),O.literal("deprecated")]),fI=O.literal("bip44Sui");p();y();var eoe=O.union([O.literal("bip44Change"),O.literal("bip44"),O.literal("deprecated")]),toe=O.union([O.literal("bip44Ethereum"),O.literal("bip44EthereumSecondary"),O.literal("bip44EthereumTertiary")]),roe=O.union([O.literal("bitcoinTaproot"),O.literal("bitcoinNativeSegwit"),O.literal("bitcoinNestedSegwit"),O.literal("bitcoinLegacy")]),noe=O.literal("bip44Sui"),b1=O.number().int().min(0),ioe=O.object({pathType:O.literal("bip44Root"),index:O.number().optional()}),ooe=O.object({pathType:eoe,index:b1}),soe=O.object({pathType:O.literal("bip44RootEthereum"),index:O.number().optional()}),aoe=O.object({pathType:toe,index:b1}),coe=O.object({pathType:roe,index:b1}),uoe=O.object({pathType:noe,index:b1}),x1=O.union([ioe,ooe,soe,aoe,coe,uoe]),Lm=new Error("Invalid derivation path."),rR=new Error("Unsupported derivation path."),lI=e=>{if(!x1.safeParse(e).success)throw Lm;switch(e.pathType){case"bitcoinTaproot":return`m/86'/0'/0'/0/${e.index}`;case"bitcoinNativeSegwit":return`m/84'/0'/0'/0/${e.index}`;case"bitcoinNestedSegwit":return`m/46'/0'/0'/0/${e.index}`;case"bitcoinLegacy":return`m/44'/0'/0'/0/${e.index}`;case"bip44RootEthereum":return"m/44'/60'";case"bip44Ethereum":return`m/44'/60'/0'/0/${e.index}`;case"bip44EthereumSecondary":return`m/44'/60'/1'/0/${e.index}`;case"bip44EthereumTertiary":return`m/44'/60'/2'/0/${e.index}`;case"bip44Root":return"m/44'/501'";case"deprecated":return`m/501'/${e.index}'/0/0`;case"bip44":return`m/44'/501'/${e.index}'`;case"bip44Change":return`m/44'/501'/${e.index}'/0'`;case"bip44Sui":return`m/44'/784'/${e.index}'/0'/0'`}},tR=1<<31>>>0,foe=e=>{try{let t=e.replace("0x","").match(/.{1,2}/g)??[];if(t.length===0)throw Lm;let r=parseInt(t[0],16),n="m";for(let i=0;i<r;i++){let o="";for(let c=0;c<4;c++)o+=t[1+i*4+c];let s=parseInt(o,16),a=s>=tR;a&&(s-=tR),n+=`/${s.toString(10)}${a?"'":""}`}return n}catch{throw Lm}},loe=e=>{let t,r=uI.safeParse(`m/${e.replace("m/","")}`);if(r.success)t=r.data;else try{t=foe(e)}catch{throw Lm}if(t==="m/44'/501'")return{pathType:"bip44Root"};if(t==="m/44'/60'")return{pathType:"bip44RootEthereum"};let n=t.replace("m/","").split("/");try{if(n.length===5&&n[0]==="86'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinTaproot",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="84'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNativeSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="46'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNestedSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinLegacy",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bip44Ethereum",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="1'"&&n[3]==="0")return{pathType:"bip44EthereumSecondary",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="2'"&&n[3]==="0")return{pathType:"bip44EthereumTertiary",index:parseInt(n[4],10)};if(n.length===4&&n[0]==="44'"&&n[1]==="501'"&&n[3]==="0'")return{pathType:"bip44Change",index:parseInt(n[2],10)};if(n.length===3&&n[0]==="44'"&&n[1]==="501'")return{pathType:"bip44",index:parseInt(n[2],10)};if(n.length===4&&n[0]==="501'"&&n[2]==="0"&&n[3]==="0")return{pathType:"deprecated",index:parseInt(n[1],10)}}catch{}throw rR};p();y();var B4e=new Error("Unsupported path."),dI=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!0;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44":case"bip44Change":case"deprecated":case"bip44Sui":return!1}},hI=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!1;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return!0;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":case"bip44Sui":return!1}},pI=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return!1;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!0}};Lc.sha512Sync=(...e)=>xo(Lc.concatBytes(...e));var{getPublicKey:doe}=o1,Ws=class{#e;#t;constructor(t){this.#e={ellipticCurve:"ed25519",value:JM(t),nodes:{}},this.#t={ellipticCurve:"secp256k1",value:XM(t),nodes:{}}}derivePathType(t,r){switch(t){case"bitcoinTaproot":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/86'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNativeSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/84'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNestedSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/46'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinLegacy":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bip44Ethereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/0'/0/${r}`});case"bip44EthereumSecondary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/1'/0/${r}`});case"bip44EthereumTertiary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/2'/0/${r}`});case"bip44RootEthereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:"m/44'/60'"});case"bip44Change":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'/0'`});case"bip44":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'`});case"deprecated":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/501'/${r}'/0/0`});case"bip44Root":return this.derivePath({ellipticCurve:"ed25519",derivationPath:"m/44'/501'"});case"bip44Sui":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/784'/${r}'/0'/0'`})}}derivePath(t){return t.ellipticCurve==="ed25519"?this.deriveED25519Path(t):t.ellipticCurve==="secp256k1"?this.deriveSECP256K1Path(t):be(t)}deriveED25519Path(t){let{ellipticCurve:r,derivationPath:n}=t,i=n.split("/"),o=this.#e;for(let c of i){if(c==="m")continue;if(!o)throw new Error("Cannot derive path, no current node.");let u=o.nodes?.[c]??null;if(!u){let h={ellipticCurve:r,value:ZM(o.value,parseInt(c,10)+Xh),nodes:{}};u=h,o.nodes[c]=h}o=u}if(!o)throw new Error(`Unable to derive ${n} on curve ${r}.`);let s=doe(o.value.key),a=new Uint8Array(64);return a.set(o.value.key),a.set(s,32),{publicKey:s,secretKey:a}}deriveSECP256K1Path(t){let{ellipticCurve:r,derivationPath:n,useCompressedPublicKey:i=!1}=t,o=n.split("/"),s=this.#t;for(let u of o){if(u==="m")continue;if(!s)throw new Error("Cannot derive path, no current node.");let h=s.nodes?.[u]??null;if(!h){let l=0;u.endsWith("'")&&(l=Xh);let g={ellipticCurve:r,value:eR(s.value,parseInt(u,10)+l),nodes:{}};h=g,s.nodes[u]=g}s=h}if(!s)throw new Error(`Unable to derive ${n} on curve ${r}.`);let a=s.value.key;return{publicKey:Kc(a,i),secretKey:new Uint8Array(a)}}cleanUpTree(t){if(t){t.value.key.fill(0),t.value.chainCode.fill(0);let r=Object.values(t.nodes);for(let n of r)this.cleanUpTree(n)}}cleanup(){this.cleanUpTree(this.#e),this.cleanUpTree(this.#t),this.#e=null,this.#t=null}};p();y();var Se=(a=>(a.BitcoinTaproot="bip122_p2tr",a.BitcoinNativeSegwit="bip122_p2wpkh",a.BitcoinNestedSegwit="bip122_p2sh",a.BitcoinLegacy="bip122_p2pkh",a.Solana="solana",a.EVM="eip155",a.Sui="bip44_ed25519",a))(Se||{}),nR=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"],sf=O.enum(nR);var w1=class{constructor(){this.type="bip122_p2pkh";this.displayName="Legacy";this.defaultDerivationPathType="bitcoinLegacy";this.otherDerivationPathType=[]}};p();y();var v1=class{constructor(){this.type="bip122_p2wpkh";this.displayName="Native Segwit";this.defaultDerivationPathType="bitcoinNativeSegwit";this.otherDerivationPathType=[]}};p();y();var A1=class{constructor(){this.type="bip122_p2sh";this.displayName="Nested Segwit";this.defaultDerivationPathType="bitcoinNestedSegwit";this.otherDerivationPathType=[]}};p();y();var S1=class{constructor(){this.type="bip122_p2tr";this.displayName="Taproot";this.defaultDerivationPathType="bitcoinTaproot";this.otherDerivationPathType=[]}};p();y();var E1=class{constructor(){this.type="eip155";this.displayName="Ethereum";this.defaultDerivationPathType="bip44Ethereum";this.otherDerivationPathType=["bip44RootEthereum","bip44EthereumSecondary","bip44EthereumTertiary"]}};p();y();var I1=class{constructor(){this.type="solana";this.displayName="Solana";this.defaultDerivationPathType="bip44Change";this.otherDerivationPathType=["bip44Root","bip44","deprecated"]}};p();y();var k1=class{constructor(){this.type="bip44_ed25519";this.displayName="Sui";this.defaultDerivationPathType="bip44Sui";this.otherDerivationPathType=[]}};var iR,oR,sR,aR,cR,uR,fR;fR="bip122_p2tr",uR="bip122_p2wpkh",cR="bip122_p2sh",aR="bip122_p2pkh",sR="eip155",oR="solana",iR="bip44_ed25519";var yI=class{constructor(){this[fR]=new S1;this[uR]=new v1;this[cR]=new A1;this[aR]=new w1;this[sR]=new E1;this[oR]=new I1;this[iR]=new k1;this.allAddressTypes=Object.values(Se);this.allAddressTypeDefinitions=this.allAddressTypes.map(t=>this[t]);this.addressTypeByDerivationPathType={};this.allAddressTypeDefinitions.forEach(t=>{this.addressTypeByDerivationPathType[t.defaultDerivationPathType]=t.type,t.otherDerivationPathType.forEach(r=>{this.addressTypeByDerivationPathType[r]=t.type})})}getAll(){return this.allAddressTypes}getDisplayName(t){return this[t].displayName}getAddressType(t){return this.addressTypeByDerivationPathType[t]}},gi=new yI;p();y();p();y();p();y();var T1=class{constructor(){this.addressTypes=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"]}generateKeypairFromPrivateKey(t){let r=t.fold(i=>Buffer.from(i));return{publicKey:Kc(r,!0),privateKey:r}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new Ws(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};p();y();p();y();var w6=X(vy());p();y();var mR=X(hh());var tp=X(Go()),gR=X(Pi());p();y();var pR="abstract-provider/5.7.0";var Eoe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},Ioe=new gR.Logger(pR),yR=class extends tp.Description{static isForkEvent(t){return!!(t&&t._isForkEvent)}};var C1=class e{constructor(){Ioe.checkAbstract(new.target,e),(0,tp.defineReadOnly)(this,"_isProvider",!0)}getFeeData(){return Eoe(this,void 0,void 0,function*(){let{block:t,gasPrice:r}=yield(0,tp.resolveProperties)({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(s=>null)}),n=null,i=null,o=null;return t&&t.baseFeePerGas&&(n=t.baseFeePerGas,o=mR.BigNumber.from("1500000000"),i=t.baseFeePerGas.mul(2).add(o)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:o,gasPrice:r}})}addListener(t,r){return this.on(t,r)}removeListener(t,r){return this.off(t,r)}static isProvider(t){return!!(t&&t._isProvider)}};p();y();var js=X(Go()),Ra=X(Pi());p();y();var bR="abstract-signer/5.7.0";var zs=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},$o=new Ra.Logger(bR),koe=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Toe=[Ra.Logger.errors.INSUFFICIENT_FUNDS,Ra.Logger.errors.NONCE_EXPIRED,Ra.Logger.errors.REPLACEMENT_UNDERPRICED],Km=class e{constructor(){$o.checkAbstract(new.target,e),(0,js.defineReadOnly)(this,"_isSigner",!0)}getBalance(t){return zs(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)})}getTransactionCount(t){return zs(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)})}estimateGas(t){return zs(this,void 0,void 0,function*(){this._checkProvider("estimateGas");let r=yield(0,js.resolveProperties)(this.checkTransaction(t));return yield this.provider.estimateGas(r)})}call(t,r){return zs(this,void 0,void 0,function*(){this._checkProvider("call");let n=yield(0,js.resolveProperties)(this.checkTransaction(t));return yield this.provider.call(n,r)})}sendTransaction(t){return zs(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");let r=yield this.populateTransaction(t),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return zs(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return zs(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return zs(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(t){return zs(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)})}checkTransaction(t){for(let n in t)koe.indexOf(n)===-1&&$o.throwArgumentError("invalid transaction key: "+n,"transaction",t);let r=(0,js.shallowCopy)(t);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&$o.throwArgumentError("from address mismatch","transaction",t),n[0])),r}populateTransaction(t){return zs(this,void 0,void 0,function*(){let r=yield(0,js.resolveProperties)(this.checkTransaction(t));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>zs(this,void 0,void 0,function*(){if(i==null)return null;let o=yield this.resolveName(i);return o==null&&$o.throwArgumentError("provided ENS name resolves to null","tx.to",i),o})),r.to.catch(i=>{}));let n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?$o.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t):(r.type===0||r.type===1)&&n&&$o.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{let i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){let o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&$o.throwError("network does not support EIP-1559",Ra.Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):$o.throwError("failed to get consistent fee data",Ra.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(Toe.indexOf(i.code)>=0)throw i;return $o.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ra.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&$o.throwArgumentError("chainId address mismatch","transaction",t),i[0])),yield(0,js.resolveProperties)(r)})}_checkProvider(t){this.provider||$o.throwError("missing provider",Ra.Logger.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!!(t&&t._isSigner)}},xR=class e extends Km{constructor(t,r){super(),(0,js.defineReadOnly)(this,"address",t),(0,js.defineReadOnly)(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,r){return Promise.resolve().then(()=>{$o.throwError(t,Ra.Logger.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new e(this.address,t)}};var $s=X(ln()),Ym=X(MI());p();y();p();y();var RI=X(ln()),Vm=X(Go()),z1=class{constructor(t){(0,Vm.defineReadOnly)(this,"alphabet",t),(0,Vm.defineReadOnly)(this,"base",t.length),(0,Vm.defineReadOnly)(this,"_alphabetMap",{}),(0,Vm.defineReadOnly)(this,"_leader",t.charAt(0));for(let r=0;r<t.length;r++)this._alphabetMap[t.charAt(r)]=r}encode(t){let r=(0,RI.arrayify)(t);if(r.length===0)return"";let n=[0];for(let o=0;o<r.length;++o){let s=r[o];for(let a=0;a<n.length;++a)s+=n[a]<<8,n[a]=s%this.base,s=s/this.base|0;for(;s>0;)n.push(s%this.base),s=s/this.base|0}let i="";for(let o=0;r[o]===0&&o<r.length-1;++o)i+=this._leader;for(let o=n.length-1;o>=0;--o)i+=this.alphabet[n[o]];return i}decode(t){if(typeof t!="string")throw new TypeError("Expected String");let r=[];if(t.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<t.length;n++){let i=this._alphabetMap[t[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let o=i;for(let s=0;s<r.length;++s)o+=r[s]*this.base,r[s]=o&255,o>>=8;for(;o>0;)r.push(o&255),o>>=8}for(let n=0;t[n]===this._leader&&n<t.length-1;++n)r.push(0);return(0,RI.arrayify)(new Uint8Array(r.reverse()))}},k5e=new z1("abcdefghijklmnopqrstuvwxyz234567"),OI=new z1("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Ot=X(ln()),t6=X(hh()),Ql=X(uf());p();y();p();y();var lf=X(ln()),DI=X(UI());function Yl(e,t,r,n,i){e=(0,lf.arrayify)(e),t=(0,lf.arrayify)(t);let o,s=1,a=new Uint8Array(n),c=new Uint8Array(t.length+4);c.set(t);let u,h;for(let l=1;l<=s;l++){c[t.length]=l>>24&255,c[t.length+1]=l>>16&255,c[t.length+2]=l>>8&255,c[t.length+3]=l&255;let g=(0,lf.arrayify)((0,DI.computeHmac)(i,e,c));o||(o=g.length,h=new Uint8Array(o),s=Math.ceil(n/o),u=n-(s-1)*o),h.set(g);for(let E=1;E<r;E++){g=(0,lf.arrayify)((0,DI.computeHmac)(i,e,g));for(let C=0;C<o;C++)h[C]^=g[C]}let x=(l-1)*o,A=l===s?u:o;a.set((0,lf.arrayify)(h).slice(0,A),x)}return(0,lf.hexlify)(a)}var Qn=X(Go());p();y();p();y();var at=X(fx()),Ua=X(RB());function ap(e,t,r){return r={path:t,exports:{},require:function(n,i){return pae(n,i??r.path)}},e(r,r.exports),r.exports}function pae(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var VI=xO;function xO(e,t){if(!e)throw new Error(t||"Assertion failed")}xO.equal=function(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var Gs=ap(function(e,t){"use strict";var r=t;function n(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var c=[];if(typeof s!="string"){for(var u=0;u<s.length;u++)c[u]=s[u]|0;return c}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var u=0;u<s.length;u+=2)c.push(parseInt(s[u]+s[u+1],16))}else for(var u=0;u<s.length;u++){var h=s.charCodeAt(u),l=h>>8,g=h&255;l?c.push(l,g):c.push(g)}return c}r.toArray=n;function i(s){return s.length===1?"0"+s:s}r.zero2=i;function o(s){for(var a="",c=0;c<s.length;c++)a+=i(s[c].toString(16));return a}r.toHex=o,r.encode=function(a,c){return c==="hex"?o(a):a}}),vo=ap(function(e,t){"use strict";var r=t;r.assert=VI,r.toArray=Gs.toArray,r.zero2=Gs.zero2,r.toHex=Gs.toHex,r.encode=Gs.encode;function n(c,u,h){var l=new Array(Math.max(c.bitLength(),h)+1);l.fill(0);for(var g=1<<u+1,x=c.clone(),A=0;A<l.length;A++){var E,C=x.andln(g-1);x.isOdd()?(C>(g>>1)-1?E=(g>>1)-C:E=C,x.isubn(E)):E=0,l[A]=E,x.iushrn(1)}return l}r.getNAF=n;function i(c,u){var h=[[],[]];c=c.clone(),u=u.clone();for(var l=0,g=0,x;c.cmpn(-l)>0||u.cmpn(-g)>0;){var A=c.andln(3)+l&3,E=u.andln(3)+g&3;A===3&&(A=-1),E===3&&(E=-1);var C;A&1?(x=c.andln(7)+l&7,(x===3||x===5)&&E===2?C=-A:C=A):C=0,h[0].push(C);var M;E&1?(x=u.andln(7)+g&7,(x===3||x===5)&&A===2?M=-E:M=E):M=0,h[1].push(M),2*l===C+1&&(l=1-l),2*g===M+1&&(g=1-g),c.iushrn(1),u.iushrn(1)}return h}r.getJSF=i;function o(c,u,h){var l="_"+u;c.prototype[u]=function(){return this[l]!==void 0?this[l]:this[l]=h.call(this)}}r.cachedProperty=o;function s(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=s;function a(c){return new at.default(c,"hex","le")}r.intFromLE=a}),J1=vo.getNAF,yae=vo.getJSF,Z1=vo.assert;function hf(e,t){this.type=e,this.p=new at.default(t.p,16),this.red=t.prime?at.default.red(t.prime):at.default.mont(this.p),this.zero=new at.default(0).toRed(this.red),this.one=new at.default(1).toRed(this.red),this.two=new at.default(2).toRed(this.red),this.n=t.n&&new at.default(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Jl=hf;hf.prototype.point=function(){throw new Error("Not implemented")};hf.prototype.validate=function(){throw new Error("Not implemented")};hf.prototype._fixedNafMul=function(t,r){Z1(t.precomputed);var n=t._getDoubles(),i=J1(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var u=a+n.step-1;u>=a;u--)c=(c<<1)+i[u];s.push(c)}for(var h=this.jpoint(null,null,null),l=this.jpoint(null,null,null),g=o;g>0;g--){for(a=0;a<s.length;a++)c=s[a],c===g?l=l.mixedAdd(n.points[a]):c===-g&&(l=l.mixedAdd(n.points[a].neg()));h=h.add(l)}return h.toP()};hf.prototype._wnafMul=function(t,r){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=J1(r,n,this._bitLength),a=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var u=0;c>=0&&s[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var h=s[c];Z1(h!==0),t.type==="affine"?h>0?a=a.mixedAdd(o[h-1>>1]):a=a.mixedAdd(o[-h-1>>1].neg()):h>0?a=a.add(o[h-1>>1]):a=a.add(o[-h-1>>1].neg())}return t.type==="affine"?a.toP():a};hf.prototype._wnafMulAdd=function(t,r,n,i,o){var s=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,h,l,g;for(h=0;h<i;h++){g=r[h];var x=g._getNAFPoints(t);s[h]=x.wnd,a[h]=x.points}for(h=i-1;h>=1;h-=2){var A=h-1,E=h;if(s[A]!==1||s[E]!==1){c[A]=J1(n[A],s[A],this._bitLength),c[E]=J1(n[E],s[E],this._bitLength),u=Math.max(c[A].length,u),u=Math.max(c[E].length,u);continue}var C=[r[A],null,null,r[E]];r[A].y.cmp(r[E].y)===0?(C[1]=r[A].add(r[E]),C[2]=r[A].toJ().mixedAdd(r[E].neg())):r[A].y.cmp(r[E].y.redNeg())===0?(C[1]=r[A].toJ().mixedAdd(r[E]),C[2]=r[A].add(r[E].neg())):(C[1]=r[A].toJ().mixedAdd(r[E]),C[2]=r[A].toJ().mixedAdd(r[E].neg()));var M=[-3,-1,-5,-7,0,7,5,1,3],N=yae(n[A],n[E]);for(u=Math.max(N[0].length,u),c[A]=new Array(u),c[E]=new Array(u),l=0;l<u;l++){var R=N[0][l]|0,V=N[1][l]|0;c[A][l]=M[(R+1)*3+(V+1)],c[E][l]=0,a[A]=C}}var q=this.jpoint(null,null,null),W=this._wnafT4;for(h=u;h>=0;h--){for(var G=0;h>=0;){var z=!0;for(l=0;l<i;l++)W[l]=c[l][h]|0,W[l]!==0&&(z=!1);if(!z)break;G++,h--}if(h>=0&&G++,q=q.dblp(G),h<0)break;for(l=0;l<i;l++){var ee=W[l];ee!==0&&(ee>0?g=a[l][ee-1>>1]:ee<0&&(g=a[l][-ee-1>>1].neg()),g.type==="affine"?q=q.mixedAdd(g):q=q.add(g))}}for(h=0;h<i;h++)a[h]=null;return o?q:q.toP()};function Xo(e,t){this.curve=e,this.type=t,this.precomputed=null}hf.BasePoint=Xo;Xo.prototype.eq=function(){throw new Error("Not implemented")};Xo.prototype.validate=function(){return this.curve.validate(this)};hf.prototype.decodePoint=function(t,r){t=vo.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){t[0]===6?Z1(t[t.length-1]%2===0):t[0]===7&&Z1(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),t[0]===3);throw new Error("Unknown point format")};Xo.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Xo.prototype._encode=function(t){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Xo.prototype.encode=function(t,r){return vo.encode(this._encode(r),t)};Xo.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};Xo.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};Xo.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=t){for(var s=0;s<t;s++)i=i.dbl();n.push(i)}return{step:t,points:n}};Xo.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<t)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:t,points:r}};Xo.prototype._getBeta=function(){return null};Xo.prototype.dblp=function(t){for(var r=this,n=0;n<t;n++)r=r.dbl();return r};var qI=ap(function(e){typeof Object.create=="function"?e.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),mae=vo.assert;function es(e){Jl.call(this,"short",e),this.a=new at.default(e.a,16).toRed(this.red),this.b=new at.default(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}qI(es,Jl);var gae=es;es.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(t.beta)r=new at.default(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(t.lambda)n=new at.default(t.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],mae(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return t.basis?s=t.basis.map(function(a){return{a:new at.default(a.a,16),b:new at.default(a.b,16)}}):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}};es.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:at.default.mont(t),n=new at.default(2).toRed(r).redInvm(),i=n.redNeg(),o=new at.default(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),a=i.redSub(o).fromRed();return[s,a]};es.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=t,i=this.n.clone(),o=new at.default(1),s=new at.default(0),a=new at.default(0),c=new at.default(1),u,h,l,g,x,A,E,C=0,M,N;n.cmpn(0)!==0;){var R=i.div(n);M=i.sub(R.mul(n)),N=a.sub(R.mul(o));var V=c.sub(R.mul(s));if(!l&&M.cmp(r)<0)u=E.neg(),h=o,l=M.neg(),g=N;else if(l&&++C===2)break;E=M,i=n,n=M,a=o,o=N,c=s,s=V}x=M.neg(),A=N;var q=l.sqr().add(g.sqr()),W=x.sqr().add(A.sqr());return W.cmp(q)>=0&&(x=u,A=h),l.negative&&(l=l.neg(),g=g.neg()),x.negative&&(x=x.neg(),A=A.neg()),[{a:l,b:g},{a:x,b:A}]};es.prototype._endoSplit=function(t){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(t).divRound(this.n),s=n.b.neg().mul(t).divRound(this.n),a=o.mul(n.a),c=s.mul(i.a),u=o.mul(n.b),h=s.mul(i.b),l=t.sub(a).sub(c),g=u.add(h).neg();return{k1:l,k2:g}};es.prototype.pointFromX=function(t,r){t=new at.default(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(t,i)};es.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,n=t.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};es.prototype._endoWnafMulAdd=function(t,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<t.length;s++){var a=this._endoSplit(r[s]),c=t[s],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[s*2]=c,i[s*2+1]=u,o[s*2]=a.k1,o[s*2+1]=a.k2}for(var h=this._wnafMulAdd(1,i,o,s*2,n),l=0;l<s*2;l++)i[l]=null,o[l]=null;return h};function On(e,t,r,n){Jl.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new at.default(t,16),this.y=new at.default(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}qI(On,Jl.BasePoint);es.prototype.point=function(t,r,n){return new On(this,t,r,n)};es.prototype.pointFromJSON=function(t,r){return On.fromJSON(this,t,r)};On.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r}};On.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};On.fromJSON=function(t,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=t.point(r[0],r[1],n);if(!r[2])return i;function o(a){return t.point(a[0],a[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};On.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};On.prototype.isInfinity=function(){return this.inf};On.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(t.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};On.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};On.prototype.getX=function(){return this.x.fromRed()};On.prototype.getY=function(){return this.y.fromRed()};On.prototype.mul=function(t){return t=new at.default(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};On.prototype.mulAdd=function(t,r,n){var i=[this,r],o=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};On.prototype.jmulAdd=function(t,r,n){var i=[this,r],o=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};On.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};On.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};On.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function Zn(e,t,r,n){Jl.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new at.default(0)):(this.x=new at.default(t,16),this.y=new at.default(r,16),this.z=new at.default(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}qI(Zn,Jl.BasePoint);es.prototype.jpoint=function(t,r,n){return new Zn(this,t,r,n)};Zn.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};Zn.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Zn.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=t.x.redMul(n),s=this.y.redMul(r.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),c=i.redSub(o),u=s.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=c.redSqr(),l=h.redMul(c),g=i.redMul(h),x=u.redSqr().redIAdd(l).redISub(g).redISub(g),A=u.redMul(g.redISub(x)).redISub(s.redMul(l)),E=this.z.redMul(t.z).redMul(c);return this.curve.jpoint(x,A,E)};Zn.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=t.x.redMul(r),o=this.y,s=t.y.redMul(r).redMul(this.z),a=n.redSub(i),c=o.redSub(s);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),l=n.redMul(u),g=c.redSqr().redIAdd(h).redISub(l).redISub(l),x=c.redMul(l.redISub(g)).redISub(o.redMul(h)),A=this.z.redMul(a);return this.curve.jpoint(g,x,A)};Zn.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),h=a.redAdd(a);for(r=0;r<t;r++){var l=s.redSqr(),g=h.redSqr(),x=g.redSqr(),A=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(u)),E=s.redMul(g),C=A.redSqr().redISub(E.redAdd(E)),M=E.redISub(C),N=A.redMul(M);N=N.redIAdd(N).redISub(x);var R=h.redMul(c);r+1<t&&(u=u.redMul(x)),s=C,c=R,h=N}return this.curve.jpoint(s,h.redMul(o),c)};Zn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Zn.prototype._zeroDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(a).redISub(a),h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),t=u,r=c.redMul(a.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),g=this.y.redSqr(),x=g.redSqr(),A=this.x.redAdd(g).redSqr().redISub(l).redISub(x);A=A.redIAdd(A);var E=l.redAdd(l).redIAdd(l),C=E.redSqr(),M=x.redIAdd(x);M=M.redIAdd(M),M=M.redIAdd(M),t=C.redISub(A).redISub(A),r=E.redMul(A.redISub(t)).redISub(M),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};Zn.prototype._threeDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);t=u;var h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),r=c.redMul(a.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),g=this.y.redSqr(),x=this.x.redMul(g),A=this.x.redSub(l).redMul(this.x.redAdd(l));A=A.redAdd(A).redIAdd(A);var E=x.redIAdd(x);E=E.redIAdd(E);var C=E.redAdd(E);t=A.redSqr().redISub(C),n=this.y.redAdd(this.z).redSqr().redISub(g).redISub(l);var M=g.redSqr();M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M),r=A.redMul(E.redISub(t)).redISub(M)}return this.curve.jpoint(t,r,n)};Zn.prototype._dbl=function(){var t=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=r.redSqr(),a=n.redSqr(),c=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(o)),u=r.redAdd(r);u=u.redIAdd(u);var h=u.redMul(a),l=c.redSqr().redISub(h.redAdd(h)),g=h.redISub(l),x=a.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var A=c.redMul(g).redISub(x),E=n.redAdd(n).redMul(i);return this.curve.jpoint(l,A,E)};Zn.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=t.redAdd(t).redIAdd(t),s=o.redSqr(),a=this.x.redAdd(r).redSqr().redISub(t).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var c=a.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var h=o.redIAdd(a).redSqr().redISub(s).redISub(c).redISub(u),l=r.redMul(h);l=l.redIAdd(l),l=l.redIAdd(l);var g=this.x.redMul(c).redISub(l);g=g.redIAdd(g),g=g.redIAdd(g);var x=this.y.redMul(h.redMul(u.redISub(h)).redISub(a.redMul(c)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var A=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(g,x,A)};Zn.prototype.mul=function(t,r){return t=new at.default(t,r),this.curve._wnafMul(this,t)};Zn.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(t.z);return this.y.redMul(o).redISub(t.y.redMul(i)).cmpn(0)===0};Zn.prototype.eqXToP=function(t){var r=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=t.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Zn.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Zn.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var $1=ap(function(e,t){"use strict";var r=t;r.base=Jl,r.short=gae,r.mont=null,r.edwards=null}),Y1=ap(function(e,t){"use strict";var r=t,n=vo.assert;function i(a){a.type==="short"?this.curve=new $1.short(a):a.type==="edwards"?this.curve=new $1.edwards(a):this.curve=new $1.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function o(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var u=new i(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:u}),u}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ua.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ua.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ua.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ua.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ua.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ua.default.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ua.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var s;try{s=null.crash()}catch{s=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ua.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})});function df(e){if(!(this instanceof df))return new df(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Gs.toArray(e.entropy,e.entropyEnc||"hex"),r=Gs.toArray(e.nonce,e.nonceEnc||"hex"),n=Gs.toArray(e.pers,e.persEnc||"hex");VI(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var wO=df;df.prototype._init=function(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};df.prototype._hmac=function(){return new Ua.default.hmac(this.hash,this.K)};df.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};df.prototype.reseed=function(t,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),t=Gs.toArray(t,r),n=Gs.toArray(n,i),VI(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1};df.prototype.generate=function(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Gs.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(n),this._reseed++,Gs.encode(s,r)};var FI=vo.assert;function bi(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var HI=bi;bi.fromPublic=function(t,r,n){return r instanceof bi?r:new bi(t,{pub:r,pubEnc:n})};bi.fromPrivate=function(t,r,n){return r instanceof bi?r:new bi(t,{priv:r,privEnc:n})};bi.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};bi.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};bi.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};bi.prototype._importPrivate=function(t,r){this.priv=new at.default(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};bi.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?FI(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&FI(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};bi.prototype.derive=function(t){return t.validate()||FI(t.validate(),"public point not validated"),t.mul(this.priv).getX()};bi.prototype.sign=function(t,r,n){return this.ec.sign(t,this,r,n)};bi.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};bi.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var bae=vo.assert;function Q1(e,t){if(e instanceof Q1)return e;this._importDER(e,t)||(bae(e.r&&e.s,"Signature without r or s"),this.r=new at.default(e.r,16),this.s=new at.default(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var X1=Q1;function xae(){this.place=0}function LI(e,t){var r=e[t.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return i<=127?!1:(t.place=s,i)}function bO(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}Q1.prototype._importDER=function(t,r){t=vo.toArray(t,r);var n=new xae;if(t[n.place++]!==48)return!1;var i=LI(t,n);if(i===!1||i+n.place!==t.length||t[n.place++]!==2)return!1;var o=LI(t,n);if(o===!1)return!1;var s=t.slice(n.place,o+n.place);if(n.place+=o,t[n.place++]!==2)return!1;var a=LI(t,n);if(a===!1||t.length!==a+n.place)return!1;var c=t.slice(n.place,a+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new at.default(s),this.s=new at.default(c),this.recoveryParam=null,!0};function KI(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}Q1.prototype.toDER=function(t){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=bO(r),n=bO(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];KI(i,r.length),i=i.concat(r),i.push(2),KI(i,n.length);var o=i.concat(n),s=[48];return KI(s,o.length),s=s.concat(o),vo.encode(s,t)};var wae=function(){throw new Error("unsupported")},vO=vo.assert;function Qo(e){if(!(this instanceof Qo))return new Qo(e);typeof e=="string"&&(vO(Object.prototype.hasOwnProperty.call(Y1,e),"Unknown curve "+e),e=Y1[e]),e instanceof Y1.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var vae=Qo;Qo.prototype.keyPair=function(t){return new HI(this,t)};Qo.prototype.keyFromPrivate=function(t,r){return HI.fromPrivate(this,t,r)};Qo.prototype.keyFromPublic=function(t,r){return HI.fromPublic(this,t,r)};Qo.prototype.genKeyPair=function(t){t||(t={});for(var r=new wO({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||wae(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new at.default(2));;){var o=new at.default(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Qo.prototype._truncateToN=function(t,r){var n=t.byteLength()*8-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};Qo.prototype.sign=function(t,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),t=this._truncateToN(new at.default(t,16));for(var o=this.n.byteLength(),s=r.getPrivate().toArray("be",o),a=t.toArray("be",o),c=new wO({hash:this.hash,entropy:s,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new at.default(1)),h=0;;h++){var l=i.k?i.k(h):new at.default(c.generate(this.n.byteLength()));if(l=this._truncateToN(l,!0),!(l.cmpn(1)<=0||l.cmp(u)>=0)){var g=this.g.mul(l);if(!g.isInfinity()){var x=g.getX(),A=x.umod(this.n);if(A.cmpn(0)!==0){var E=l.invm(this.n).mul(A.mul(r.getPrivate()).iadd(t));if(E=E.umod(this.n),E.cmpn(0)!==0){var C=(g.getY().isOdd()?1:0)|(x.cmp(A)!==0?2:0);return i.canonical&&E.cmp(this.nh)>0&&(E=this.n.sub(E),C^=1),new X1({r:A,s:E,recoveryParam:C})}}}}}};Qo.prototype.verify=function(t,r,n,i){t=this._truncateToN(new at.default(t,16)),n=this.keyFromPublic(n,i),r=new X1(r,"hex");var o=r.r,s=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),c=a.mul(t).umod(this.n),u=a.mul(o).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(o)):(h=this.g.mulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(o)===0)};Qo.prototype.recoverPubKey=function(e,t,r,n){vO((3&r)===r,"The recovery param is more than two bits"),t=new X1(t,n);var i=this.n,o=new at.default(e),s=t.r,a=t.s,c=r&1,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?s=this.curve.pointFromX(s.add(this.curve.n),c):s=this.curve.pointFromX(s,c);var h=t.r.invm(i),l=i.sub(o).mul(h).umod(i),g=a.mul(h).umod(i);return this.g.mulAdd(l,s,g)};Qo.prototype.getKeyRecoveryParam=function(e,t,r,n){if(t=new X1(t,n),t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Aae=ap(function(e,t){"use strict";var r=t;r.version="6.5.4",r.utils=vo,r.rand=function(){throw new Error("unsupported")},r.curve=$1,r.curves=Y1,r.ec=vae,r.eddsa=null}),AO=Aae.ec;var hr=X(ln()),cp=X(Go()),EO=X(Pi());p();y();var SO="signing-key/5.7.0";var zI=new EO.Logger(SO),WI=null;function Da(){return WI||(WI=new AO("secp256k1")),WI}var ts=class{constructor(t){(0,cp.defineReadOnly)(this,"curve","secp256k1"),(0,cp.defineReadOnly)(this,"privateKey",(0,hr.hexlify)(t)),(0,hr.hexDataLength)(this.privateKey)!==32&&zI.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let r=Da().keyFromPrivate((0,hr.arrayify)(this.privateKey));(0,cp.defineReadOnly)(this,"publicKey","0x"+r.getPublic(!1,"hex")),(0,cp.defineReadOnly)(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),(0,cp.defineReadOnly)(this,"_isSigningKey",!0)}_addPoint(t){let r=Da().keyFromPublic((0,hr.arrayify)(this.publicKey)),n=Da().keyFromPublic((0,hr.arrayify)(t));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(t){let r=Da().keyFromPrivate((0,hr.arrayify)(this.privateKey)),n=(0,hr.arrayify)(t);n.length!==32&&zI.throwArgumentError("bad digest length","digest",t);let i=r.sign(n,{canonical:!0});return(0,hr.splitSignature)({recoveryParam:i.recoveryParam,r:(0,hr.hexZeroPad)("0x"+i.r.toString(16),32),s:(0,hr.hexZeroPad)("0x"+i.s.toString(16),32)})}computeSharedSecret(t){let r=Da().keyFromPrivate((0,hr.arrayify)(this.privateKey)),n=Da().keyFromPublic((0,hr.arrayify)(jI(t)));return(0,hr.hexZeroPad)("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}};function IO(e,t){let r=(0,hr.splitSignature)(t),n={r:(0,hr.arrayify)(r.r),s:(0,hr.arrayify)(r.s)};return"0x"+Da().recoverPubKey((0,hr.arrayify)(e),n,r.recoveryParam).encode("hex",!1)}function jI(e,t){let r=(0,hr.arrayify)(e);if(r.length===32){let n=new ts(r);return t?"0x"+Da().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return t?(0,hr.hexlify)(r):"0x"+Da().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return t?"0x"+Da().keyFromPublic(r).getPublic(!0,"hex"):(0,hr.hexlify)(r)}return zI.throwArgumentError("invalid public or private key","key","[REDACTED]")}var to=X(UI());p();y();var up=X(vy()),pf=X(hh()),st=X(ln()),PO=X(mI()),Zl=X(wu()),_O=X(Go()),La=X(vJ());var ev=X(Pi());p();y();var kO="transactions/5.7.0";var wi=new ev.Logger(kO),TO;(function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"})(TO||(TO={}));function $I(e){return e==="0x"?null:(0,up.getAddress)(e)}function xi(e){return e==="0x"?PO.Zero:pf.BigNumber.from(e)}var Sae=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Eae={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Ka(e){let t=jI(e);return(0,up.getAddress)((0,st.hexDataSlice)((0,Zl.keccak256)((0,st.hexDataSlice)(t,1)),12))}function YI(e,t){return Ka(IO((0,st.arrayify)(e),t))}function Ao(e,t){let r=(0,st.stripZeros)(pf.BigNumber.from(e).toHexString());return r.length>32&&wi.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function GI(e,t){return{address:(0,up.getAddress)(e),storageKeys:(t||[]).map((r,n)=>((0,st.hexDataLength)(r)!==32&&wi.throwArgumentError("invalid access list storageKey",`accessList[${e}:${n}]`,r),r.toLowerCase()))}}function JI(e){if(Array.isArray(e))return e.map((r,n)=>Array.isArray(r)?(r.length>2&&wi.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),GI(r[0],r[1])):GI(r.address,r.storageKeys));let t=Object.keys(e).map(r=>{let n=e[r].reduce((i,o)=>(i[o]=!0,i),{});return GI(r,Object.keys(n).sort())});return t.sort((r,n)=>r.address.localeCompare(n.address)),t}function BO(e){return JI(e).map(t=>[t.address,t.storageKeys])}function CO(e,t){if(e.gasPrice!=null){let n=pf.BigNumber.from(e.gasPrice),i=pf.BigNumber.from(e.maxFeePerGas||0);n.eq(i)||wi.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}let r=[Ao(e.chainId||0,"chainId"),Ao(e.nonce||0,"nonce"),Ao(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ao(e.maxFeePerGas||0,"maxFeePerGas"),Ao(e.gasLimit||0,"gasLimit"),e.to!=null?(0,up.getAddress)(e.to):"0x",Ao(e.value||0,"value"),e.data||"0x",BO(e.accessList||[])];if(t){let n=(0,st.splitSignature)(t);r.push(Ao(n.recoveryParam,"recoveryParam")),r.push((0,st.stripZeros)(n.r)),r.push((0,st.stripZeros)(n.s))}return(0,st.hexConcat)(["0x02",La.encode(r)])}function MO(e,t){let r=[Ao(e.chainId||0,"chainId"),Ao(e.nonce||0,"nonce"),Ao(e.gasPrice||0,"gasPrice"),Ao(e.gasLimit||0,"gasLimit"),e.to!=null?(0,up.getAddress)(e.to):"0x",Ao(e.value||0,"value"),e.data||"0x",BO(e.accessList||[])];if(t){let n=(0,st.splitSignature)(t);r.push(Ao(n.recoveryParam,"recoveryParam")),r.push((0,st.stripZeros)(n.r)),r.push((0,st.stripZeros)(n.s))}return(0,st.hexConcat)(["0x01",La.encode(r)])}function Iae(e,t){(0,_O.checkProperties)(e,Eae);let r=[];Sae.forEach(function(s){let a=e[s.name]||[],c={};s.numeric&&(c.hexPad="left"),a=(0,st.arrayify)((0,st.hexlify)(a,c)),s.length&&a.length!==s.length&&a.length>0&&wi.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a),s.maxLength&&(a=(0,st.stripZeros)(a),a.length>s.maxLength&&wi.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a)),r.push((0,st.hexlify)(a))});let n=0;if(e.chainId!=null?(n=e.chainId,typeof n!="number"&&wi.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!(0,st.isBytesLike)(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),n!==0&&(r.push((0,st.hexlify)(n)),r.push("0x"),r.push("0x")),!t)return La.encode(r);let i=(0,st.splitSignature)(t),o=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),o+=n*2+8,i.v>28&&i.v!==o&&wi.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==o&&wi.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push((0,st.hexlify)(o)),r.push((0,st.stripZeros)((0,st.arrayify)(i.r))),r.push((0,st.stripZeros)((0,st.arrayify)(i.s))),La.encode(r)}function ZI(e,t){if(e.type==null||e.type===0)return e.accessList!=null&&wi.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),Iae(e,t);switch(e.type){case 1:return MO(e,t);case 2:return CO(e,t);default:break}return wi.throwError(`unsupported transaction type: ${e.type}`,ev.Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function RO(e,t,r){try{let n=xi(t[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");e.v=n}catch{wi.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=(0,st.hexZeroPad)(t[1],32),e.s=(0,st.hexZeroPad)(t[2],32);try{let n=(0,Zl.keccak256)(r(e));e.from=YI(n,{r:e.r,s:e.s,recoveryParam:e.v})}catch{}}function kae(e){let t=La.decode(e.slice(1));t.length!==9&&t.length!==12&&wi.throwArgumentError("invalid component count for transaction type: 2","payload",(0,st.hexlify)(e));let r=xi(t[2]),n=xi(t[3]),i={type:2,chainId:xi(t[0]).toNumber(),nonce:xi(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:xi(t[4]),to:$I(t[5]),value:xi(t[6]),data:t[7],accessList:JI(t[8])};return t.length===9||(i.hash=(0,Zl.keccak256)(e),RO(i,t.slice(9),CO)),i}function Tae(e){let t=La.decode(e.slice(1));t.length!==8&&t.length!==11&&wi.throwArgumentError("invalid component count for transaction type: 1","payload",(0,st.hexlify)(e));let r={type:1,chainId:xi(t[0]).toNumber(),nonce:xi(t[1]).toNumber(),gasPrice:xi(t[2]),gasLimit:xi(t[3]),to:$I(t[4]),value:xi(t[5]),data:t[6],accessList:JI(t[7])};return t.length===8||(r.hash=(0,Zl.keccak256)(e),RO(r,t.slice(8),MO)),r}function Pae(e){let t=La.decode(e);t.length!==9&&t.length!==6&&wi.throwArgumentError("invalid raw transaction","rawTransaction",e);let r={nonce:xi(t[0]).toNumber(),gasPrice:xi(t[1]),gasLimit:xi(t[2]),to:$I(t[3]),value:xi(t[4]),data:t[5],chainId:0};if(t.length===6)return r;try{r.v=pf.BigNumber.from(t[6]).toNumber()}catch{return r}if(r.r=(0,st.hexZeroPad)(t[7],32),r.s=(0,st.hexZeroPad)(t[8],32),pf.BigNumber.from(r.r).isZero()&&pf.BigNumber.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27,i=t.slice(0,6);r.chainId!==0&&(i.push((0,st.hexlify)(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);let o=(0,Zl.keccak256)(La.encode(i));try{r.from=YI(o,{r:(0,st.hexlify)(r.r),s:(0,st.hexlify)(r.s),recoveryParam:n})}catch{}r.hash=(0,Zl.keccak256)(e)}return r.type=null,r}function l_e(e){let t=(0,st.arrayify)(e);if(t[0]>127)return Pae(t);switch(t[0]){case 1:return Tae(t);case 2:return kae(t);default:break}return wi.throwError(`unsupported transaction type: ${t[0]}`,ev.Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}p();y();p();y();var NO=X(MI()),QI=X(Go()),UO=X(Pi());p();y();var OO="wordlists/5.7.0";var _ae=!1,Bae=new UO.Logger(OO),fp=class e{constructor(t){Bae.checkAbstract(new.target,e),(0,QI.defineReadOnly)(this,"locale",t)}split(t){return t.toLowerCase().split(/ +/g)}join(t){return t.join(" ")}static check(t){let r=[];for(let n=0;n<2048;n++){let i=t.getWord(n);if(n!==t.getWordIndex(i))return"0x";r.push(i)}return(0,NO.id)(r.join(`
`)+`
`)}static register(t,r){if(r||(r=t.locale),_ae)try{let n=self;n._ethers&&n._ethers.wordlists&&(n._ethers.wordlists[r]||(0,QI.defineReadOnly)(n._ethers.wordlists,r,t))}catch{}}};p();y();p();y();var Cae="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo",zm=null;function DO(e){if(zm==null&&(zm=Cae.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),fp.check(e)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw zm=null,new Error("BIP39 Wordlist for en (English) FAILED")}var XI=class extends fp{constructor(){super("en")}getWord(t){return DO(this),zm[t]}getWordIndex(t){return DO(this),zm.indexOf(t)}},e6=new XI;fp.register(e6);var tv={en:e6};var FO=X(Pi());p();y();var LO="hdnode/5.7.0";var nv=new FO.Logger(LO),Mae=t6.BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Rae=(0,Ql.toUtf8Bytes)("Bitcoin seed"),jm=2147483648;function VO(e){return(1<<e)-1<<8-e}function Oae(e){return(1<<e)-1}function rv(e){return(0,Ot.hexZeroPad)((0,Ot.hexlify)(e),32)}function KO(e){return OI.encode((0,Ot.concat)([e,(0,Ot.hexDataSlice)((0,to.sha256)((0,to.sha256)(e)),0,4)]))}function r6(e){if(e==null)return tv.en;if(typeof e=="string"){let t=tv[e];return t==null&&nv.throwArgumentError("unknown locale","wordlist",e),t}return e}var lp={},Xl="m/44'/60'/0'/0/0",yf=class e{constructor(t,r,n,i,o,s,a,c){if(t!==lp)throw new Error("HDNode constructor cannot be called directly");if(r){let u=new ts(r);(0,Qn.defineReadOnly)(this,"privateKey",u.privateKey),(0,Qn.defineReadOnly)(this,"publicKey",u.compressedPublicKey)}else(0,Qn.defineReadOnly)(this,"privateKey",null),(0,Qn.defineReadOnly)(this,"publicKey",(0,Ot.hexlify)(n));(0,Qn.defineReadOnly)(this,"parentFingerprint",i),(0,Qn.defineReadOnly)(this,"fingerprint",(0,Ot.hexDataSlice)((0,to.ripemd160)((0,to.sha256)(this.publicKey)),0,4)),(0,Qn.defineReadOnly)(this,"address",Ka(this.publicKey)),(0,Qn.defineReadOnly)(this,"chainCode",o),(0,Qn.defineReadOnly)(this,"index",s),(0,Qn.defineReadOnly)(this,"depth",a),c==null?((0,Qn.defineReadOnly)(this,"mnemonic",null),(0,Qn.defineReadOnly)(this,"path",null)):typeof c=="string"?((0,Qn.defineReadOnly)(this,"mnemonic",null),(0,Qn.defineReadOnly)(this,"path",c)):((0,Qn.defineReadOnly)(this,"mnemonic",c),(0,Qn.defineReadOnly)(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return KO((0,Ot.concat)([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",(0,Ot.hexlify)(this.depth),this.parentFingerprint,(0,Ot.hexZeroPad)((0,Ot.hexlify)(this.index),4),this.chainCode,this.privateKey!=null?(0,Ot.concat)(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new e(lp,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(t){if(t>4294967295)throw new Error("invalid index - "+String(t));let r=this.path;r&&(r+="/"+(t&~jm));let n=new Uint8Array(37);if(t&jm){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set((0,Ot.arrayify)(this.privateKey),1),r&&(r+="'")}else n.set((0,Ot.arrayify)(this.publicKey));for(let l=24;l>=0;l-=8)n[33+(l>>3)]=t>>24-l&255;let i=(0,Ot.arrayify)((0,to.computeHmac)(to.SupportedAlgorithm.sha512,this.chainCode,n)),o=i.slice(0,32),s=i.slice(32),a=null,c=null;this.privateKey?a=rv(t6.BigNumber.from(o).add(this.privateKey).mod(Mae)):c=new ts((0,Ot.hexlify)(o))._addPoint(this.publicKey);let u=r,h=this.mnemonic;return h&&(u=Object.freeze({phrase:h.phrase,path:r,locale:h.locale||"en"})),new e(lp,a,c,this.fingerprint,rv(s),t,this.depth+1,u)}derivePath(t){let r=t.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+t);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){let o=r[i];if(o.match(/^[0-9]+'$/)){let s=parseInt(o.substring(0,o.length-1));if(s>=jm)throw new Error("invalid path index - "+o);n=n._derive(jm+s)}else if(o.match(/^[0-9]+$/)){let s=parseInt(o);if(s>=jm)throw new Error("invalid path index - "+o);n=n._derive(s)}else throw new Error("invalid path component - "+o)}return n}static _fromSeed(t,r){let n=(0,Ot.arrayify)(t);if(n.length<16||n.length>64)throw new Error("invalid seed");let i=(0,Ot.arrayify)((0,to.computeHmac)(to.SupportedAlgorithm.sha512,Rae,n));return new e(lp,rv(i.slice(0,32)),null,"0x00000000",rv(i.slice(32)),0,0,r)}static fromMnemonic(t,r,n){return n=r6(n),t=Gm(n6(t,n),n),e._fromSeed(Nae(t,r),{phrase:t,path:"m",locale:n.locale})}static fromSeed(t){return e._fromSeed(t,null)}static fromExtendedKey(t){let r=OI.decode(t);(r.length!==82||KO(r.slice(0,78))!==t)&&nv.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");let n=r[4],i=(0,Ot.hexlify)(r.slice(5,9)),o=parseInt((0,Ot.hexlify)(r.slice(9,13)).substring(2),16),s=(0,Ot.hexlify)(r.slice(13,45)),a=r.slice(45,78);switch((0,Ot.hexlify)(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new e(lp,null,(0,Ot.hexlify)(a),i,s,o,n,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new e(lp,(0,Ot.hexlify)(a.slice(1)),null,i,s,o,n,null)}return nv.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}};function Nae(e,t){t||(t="");let r=(0,Ql.toUtf8Bytes)("mnemonic"+t,Ql.UnicodeNormalizationForm.NFKD);return Yl((0,Ql.toUtf8Bytes)(e,Ql.UnicodeNormalizationForm.NFKD),r,2048,64,"sha512")}function n6(e,t){t=r6(t),nv.checkNormalize();let r=t.split(e);if(r.length%3!==0)throw new Error("invalid mnemonic");let n=(0,Ot.arrayify)(new Uint8Array(Math.ceil(11*r.length/8))),i=0;for(let u=0;u<r.length;u++){let h=t.getWordIndex(r[u].normalize("NFKD"));if(h===-1)throw new Error("invalid mnemonic");for(let l=0;l<11;l++)h&1<<10-l&&(n[i>>3]|=1<<7-i%8),i++}let o=32*r.length/3,s=r.length/3,a=VO(s);if(((0,Ot.arrayify)((0,to.sha256)(n.slice(0,o/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return(0,Ot.hexlify)(n.slice(0,o/8))}function Gm(e,t){if(t=r6(t),e=(0,Ot.arrayify)(e),e.length%4!==0||e.length<16||e.length>32)throw new Error("invalid entropy");let r=[0],n=11;for(let s=0;s<e.length;s++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[s],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[s]>>8-n,r.push(e[s]&Oae(8-n)),n+=3);let i=e.length/4,o=(0,Ot.arrayify)((0,to.sha256)(e))[0]&VO(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,t.join(r.map(s=>t.getWord(s)))}var v6=X(wu()),rs=X(Go());p();y();p();y();var WO=X(ln()),o6=X(Pi());p();y();var qO="random/5.7.0";var i6=new o6.Logger(qO);function Uae(){if(typeof self<"u"||typeof self<"u"||typeof self<"u")return self;throw new Error("unable to locate global object")}var HO=Uae(),iv=HO.crypto||HO.msCrypto;(!iv||!iv.getRandomValues)&&(i6.warn("WARNING: Missing strong random number source"),iv={getRandomValues:function(e){return i6.throwError("no secure random source avaialble",o6.Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function mf(e){(e<=0||e>1024||e%1||e!=e)&&i6.throwArgumentError("invalid length","length",e);let t=new Uint8Array(e);return iv.getRandomValues(t),(0,WO.arrayify)(t)}p();y();p();y();var c6=X(a6()),GO=X(vy()),u6=X(ln()),$O=X(wu());var YO=X(uf()),JO=X(Go()),ZO=X(Pi());p();y();var ov="json-wallets/5.7.0";p();y();var dp=X(ln()),sv=X(uf());function Vc(e){return typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),(0,dp.arrayify)(e)}function hp(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function $m(e){return typeof e=="string"?(0,sv.toUtf8Bytes)(e,sv.UnicodeNormalizationForm.NFKC):(0,dp.arrayify)(e)}function Ur(e,t){let r=e,n=t.toLowerCase().split("/");for(let i=0;i<n.length;i++){let o=null;for(let s in r)if(s.toLowerCase()===n[i]){o=r[s];break}if(o===null)return null;r=o}return r}function jO(e){let t=(0,dp.arrayify)(e);t[6]=t[6]&15|64,t[8]=t[8]&63|128;let r=(0,dp.hexlify)(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}var Dae=new ZO.Logger(ov),f6=class extends JO.Description{isCrowdsaleAccount(t){return!!(t&&t._isCrowdsaleAccount)}};function l6(e,t){let r=JSON.parse(e);t=$m(t);let n=(0,GO.getAddress)(Ur(r,"ethaddr")),i=Vc(Ur(r,"encseed"));(!i||i.length%16!==0)&&Dae.throwArgumentError("invalid encseed","json",e);let o=(0,u6.arrayify)(Yl(t,t,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),c=new c6.default.ModeOfOperation.cbc(o,s),u=c6.default.padding.pkcs7.strip((0,u6.arrayify)(c.decrypt(a))),h="";for(let x=0;x<u.length;x++)h+=String.fromCharCode(u[x]);let l=(0,YO.toUtf8Bytes)(h),g=(0,$O.keccak256)(l);return new f6({_isCrowdsaleAccount:!0,address:n,privateKey:g})}p();y();function d6(e){let t=null;try{t=JSON.parse(e)}catch{return!1}return t.encseed&&t.ethaddr}function h6(e){let t=null;try{t=JSON.parse(e)}catch{return!1}return!(!t.version||parseInt(t.version)!==t.version||parseInt(t.version)!==3)}p();y();var qc=X(a6()),cv=X(XO()),g6=X(vy()),Dr=X(ln());var b6=X(wu());var tN=X(Go());var av=X(Pi());var Lae=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},y6=new av.Logger(ov);function eN(e){return e!=null&&e.mnemonic&&e.mnemonic.phrase}var m6=class extends tN.Description{isKeystoreAccount(t){return!!(t&&t._isKeystoreAccount)}};function Kae(e,t,r){if(Ur(e,"crypto/cipher")==="aes-128-ctr"){let i=Vc(Ur(e,"crypto/cipherparams/iv")),o=new qc.default.Counter(i),s=new qc.default.ModeOfOperation.ctr(t,o);return(0,Dr.arrayify)(s.decrypt(r))}return null}function rN(e,t){let r=Vc(Ur(e,"crypto/ciphertext"));if((0,Dr.hexlify)((0,b6.keccak256)((0,Dr.concat)([t.slice(16,32),r]))).substring(2)!==Ur(e,"crypto/mac").toLowerCase())throw new Error("invalid password");let i=Kae(e,t.slice(0,16),r);i||y6.throwError("unsupported cipher",av.Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});let o=t.slice(32,64),s=Ka(i);if(e.address){let c=e.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),(0,g6.getAddress)(c)!==s)throw new Error("address mismatch")}let a={_isKeystoreAccount:!0,address:s,privateKey:(0,Dr.hexlify)(i)};if(Ur(e,"x-ethers/version")==="0.1"){let c=Vc(Ur(e,"x-ethers/mnemonicCiphertext")),u=Vc(Ur(e,"x-ethers/mnemonicCounter")),h=new qc.default.Counter(u),l=new qc.default.ModeOfOperation.ctr(o,h),g=Ur(e,"x-ethers/path")||Xl,x=Ur(e,"x-ethers/locale")||"en",A=(0,Dr.arrayify)(l.decrypt(c));try{let E=Gm(A,x),C=yf.fromMnemonic(E,null,x).derivePath(g);if(C.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=C.mnemonic}catch(E){if(E.code!==av.Logger.errors.INVALID_ARGUMENT||E.argument!=="wordlist")throw E}}return new m6(a)}function nN(e,t,r,n,i){return(0,Dr.arrayify)(Yl(e,t,r,n,i))}function Fae(e,t,r,n,i){return Promise.resolve(nN(e,t,r,n,i))}function iN(e,t,r,n,i){let o=$m(t),s=Ur(e,"crypto/kdf");if(s&&typeof s=="string"){let a=function(c,u){return y6.throwArgumentError("invalid key-derivation function parameters",c,u)};if(s.toLowerCase()==="scrypt"){let c=Vc(Ur(e,"crypto/kdfparams/salt")),u=parseInt(Ur(e,"crypto/kdfparams/n")),h=parseInt(Ur(e,"crypto/kdfparams/r")),l=parseInt(Ur(e,"crypto/kdfparams/p"));(!u||!h||!l)&&a("kdf",s),u&u-1&&a("N",u);let g=parseInt(Ur(e,"crypto/kdfparams/dklen"));return g!==32&&a("dklen",g),n(o,c,u,h,l,64,i)}else if(s.toLowerCase()==="pbkdf2"){let c=Vc(Ur(e,"crypto/kdfparams/salt")),u=null,h=Ur(e,"crypto/kdfparams/prf");h==="hmac-sha256"?u="sha256":h==="hmac-sha512"?u="sha512":a("prf",h);let l=parseInt(Ur(e,"crypto/kdfparams/c")),g=parseInt(Ur(e,"crypto/kdfparams/dklen"));return g!==32&&a("dklen",g),r(o,c,l,g,u)}}return y6.throwArgumentError("unsupported key-derivation function","kdf",s)}function oN(e,t){let r=JSON.parse(e),n=iN(r,t,nN,cv.default.syncScrypt);return rN(r,n)}function sN(e,t,r){return Lae(this,void 0,void 0,function*(){let n=JSON.parse(e),i=yield iN(n,t,Fae,cv.default.scrypt,r);return rN(n,i)})}function x6(e,t,r,n){try{if((0,g6.getAddress)(e.address)!==Ka(e.privateKey))throw new Error("address/privateKey mismatch");if(eN(e)){let C=e.mnemonic;if(yf.fromMnemonic(C.phrase,null,C.locale).derivePath(C.path||Xl).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(C){return Promise.reject(C)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});let i=(0,Dr.arrayify)(e.privateKey),o=$m(t),s=null,a=null,c=null;if(eN(e)){let C=e.mnemonic;s=(0,Dr.arrayify)(n6(C.phrase,C.locale||"en")),a=C.path||Xl,c=C.locale||"en"}let u=r.client;u||(u="ethers.js");let h=null;r.salt?h=(0,Dr.arrayify)(r.salt):h=mf(32);let l=null;if(r.iv){if(l=(0,Dr.arrayify)(r.iv),l.length!==16)throw new Error("invalid iv")}else l=mf(16);let g=null;if(r.uuid){if(g=(0,Dr.arrayify)(r.uuid),g.length!==16)throw new Error("invalid uuid")}else g=mf(16);let x=1<<17,A=8,E=1;return r.scrypt&&(r.scrypt.N&&(x=r.scrypt.N),r.scrypt.r&&(A=r.scrypt.r),r.scrypt.p&&(E=r.scrypt.p)),cv.default.scrypt(o,h,x,A,E,64,n).then(C=>{C=(0,Dr.arrayify)(C);let M=C.slice(0,16),N=C.slice(16,32),R=C.slice(32,64),V=new qc.default.Counter(l),q=new qc.default.ModeOfOperation.ctr(M,V),W=(0,Dr.arrayify)(q.encrypt(i)),G=(0,b6.keccak256)((0,Dr.concat)([N,W])),z={address:e.address.substring(2).toLowerCase(),id:jO(g),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,Dr.hexlify)(l).substring(2)},ciphertext:(0,Dr.hexlify)(W).substring(2),kdf:"scrypt",kdfparams:{salt:(0,Dr.hexlify)(h).substring(2),n:x,dklen:32,p:E,r:A},mac:G.substring(2)}};if(s){let ee=mf(16),_=new qc.default.Counter(ee),f=new qc.default.ModeOfOperation.ctr(R,_),m=(0,Dr.arrayify)(f.encrypt(s)),b=new Date,v=b.getUTCFullYear()+"-"+hp(b.getUTCMonth()+1,2)+"-"+hp(b.getUTCDate(),2)+"T"+hp(b.getUTCHours(),2)+"-"+hp(b.getUTCMinutes(),2)+"-"+hp(b.getUTCSeconds(),2)+".0Z";z["x-ethers"]={client:u,gethFilename:"UTC--"+v+"--"+z.address,mnemonicCounter:(0,Dr.hexlify)(ee).substring(2),mnemonicCiphertext:(0,Dr.hexlify)(m).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(z)})}function aN(e,t,r){if(d6(e)){r&&r(0);let n=l6(e,t);return r&&r(1),Promise.resolve(n)}return h6(e)?sN(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}function cN(e,t){if(d6(e))return l6(e,t);if(h6(e))return oN(e,t);throw new Error("invalid JSON wallet")}var A6=X(Pi());p();y();var uN="wallet/5.7.0";var fN=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},pp=new A6.Logger(uN);function Vae(e){return e!=null&&(0,$s.isHexString)(e.privateKey,32)&&e.address!=null}function qae(e){let t=e.mnemonic;return t&&t.phrase}var yp=class e extends Km{constructor(t,r){if(super(),Vae(t)){let n=new ts(t.privateKey);if((0,rs.defineReadOnly)(this,"_signingKey",()=>n),(0,rs.defineReadOnly)(this,"address",Ka(this.publicKey)),this.address!==(0,w6.getAddress)(t.address)&&pp.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),qae(t)){let i=t.mnemonic;(0,rs.defineReadOnly)(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||Xl,locale:i.locale||"en"}));let o=this.mnemonic,s=yf.fromMnemonic(o.phrase,null,o.locale).derivePath(o.path);Ka(s.privateKey)!==this.address&&pp.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else(0,rs.defineReadOnly)(this,"_mnemonic",()=>null)}else{if(ts.isSigningKey(t))t.curve!=="secp256k1"&&pp.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),(0,rs.defineReadOnly)(this,"_signingKey",()=>t);else{typeof t=="string"&&t.match(/^[0-9a-f]*$/i)&&t.length===64&&(t="0x"+t);let n=new ts(t);(0,rs.defineReadOnly)(this,"_signingKey",()=>n)}(0,rs.defineReadOnly)(this,"_mnemonic",()=>null),(0,rs.defineReadOnly)(this,"address",Ka(this.publicKey))}r&&!C1.isProvider(r)&&pp.throwArgumentError("invalid provider","provider",r),(0,rs.defineReadOnly)(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(t){return new e(this,t)}signTransaction(t){return(0,rs.resolveProperties)(t).then(r=>{r.from!=null&&((0,w6.getAddress)(r.from)!==this.address&&pp.throwArgumentError("transaction from address mismatch","transaction.from",t.from),delete r.from);let n=this._signingKey().signDigest((0,v6.keccak256)(ZI(r)));return ZI(r,n)})}signMessage(t){return fN(this,void 0,void 0,function*(){return(0,$s.joinSignature)(this._signingKey().signDigest((0,Ym.hashMessage)(t)))})}_signTypedData(t,r,n){return fN(this,void 0,void 0,function*(){let i=yield Ym._TypedDataEncoder.resolveNames(t,r,n,o=>(this.provider==null&&pp.throwError("cannot resolve ENS names without a provider",A6.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:o}),this.provider.resolveName(o)));return(0,$s.joinSignature)(this._signingKey().signDigest(Ym._TypedDataEncoder.hash(i.domain,r,i.value)))})}encrypt(t,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),x6(this,t,r,n)}static createRandom(t){let r=mf(16);t||(t={}),t.extraEntropy&&(r=(0,$s.arrayify)((0,$s.hexDataSlice)((0,v6.keccak256)((0,$s.concat)([r,t.extraEntropy])),0,16)));let n=Gm(r,t.locale);return e.fromMnemonic(n,t.path,t.locale)}static fromEncryptedJson(t,r,n){return aN(t,r,n).then(i=>new e(i))}static fromEncryptedJsonSync(t,r){return new e(cN(t,r))}static fromMnemonic(t,r,n){return r||(r=Xl),new e(yf.fromMnemonic(t,null,n).derivePath(r))}};var uv=class{constructor(){this.addressTypes=["eip155"]}generateKeypairFromPrivateKey(t){let r=t.fold(n=>new yp(new Uint8Array(n)));return{publicKey:new Uint8Array(Buffer.from(r.publicKey.slice(2),"hex")),privateKey:new Uint8Array(Buffer.from(r.privateKey.slice(2),"hex"))}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new Ws(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};p();y();p();y();Lc.sha512Sync=(...e)=>xo(Lc.concatBytes(...e));var{getPublicKey:Hae}=o1,S6=e=>{let t=Hae(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}};var fv=class{constructor(){this.addressTypes=["solana"]}generateKeypairFromPrivateKey(t){let r=t.fold(n=>new bo.Account(new Uint8Array(n)));return{publicKey:r.publicKey.toBytes(),privateKey:r.secretKey}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new Ws(o));try{let o=i.derivePathType(n,r);switch(n){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Root":case"bip44":case"bip44Change":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return{publicKey:o.publicKey,privateKey:o.secretKey};case"deprecated":{let s=S6(o.secretKey);return{publicKey:s.publicKey,privateKey:s.secretKey}}case"bip44Sui":throw new Error("Sui key derivation not supported")}}finally{i.cleanup()}}};p();y();var lv=class{constructor(){this.addressTypes=["bip44_ed25519"]}generateKeypairFromPrivateKey(t){throw new Error("Sui private key import not supported")}generateKeypairFromSeed(t,r,n){throw new Error("Sui seed derivation not supported")}};var Jm=class{constructor(){this.cryptoChainPlugins=new Map;this.registerChainPlugin(new T1),this.registerChainPlugin(new uv),this.registerChainPlugin(new fv),this.registerChainPlugin(new lv)}registerChainPlugin(t){for(let r of t.addressTypes)this.cryptoChainPlugins.set(r,t)}generateKeypairFromPrivateKey(t,r){let n=this.cryptoChainPlugins.get(r);if(!n)throw new Error(`No plugin found for address type ${r}, please register the plugin first.`);return n.generateKeypairFromPrivateKey(t)}generateKeypairFromSeed(t,r,n){let i=gi.getAddressType(n),o=this.cryptoChainPlugins.get(i);if(!o)throw new Error(`No plugin found for address type ${i}, please register the plugin first.`);return o.generateKeypairFromSeed(t,r,n)}};p();y();function E6(e){return gi.getAll().includes(e)}p();y();var kN=X(Us()),TN=X(mp()),pv=X(yh()),PN=X(dv());var _6=e=>{let{privateKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":try{return{key:ece(t,e.networkIDValue),encoding:"hex"}}catch{throw new Error("Could not find encoding for Bitcoin private key")}case"eip155":try{return{key:tce(t),encoding:"hex"}}catch{throw new Error("Could not find encoding for EVM private key")}case"solana":try{return rce(t)}catch{throw new Error("Could not find encoding for Solana private key")}case"bip44_ed25519":throw new Error("Sui private key decoding not supported");default:return be(r)}},ece=(e,t)=>{try{let{privateKey:r}=PN.decodeRaw(TN.default.decode(e),t);return r}catch{throw new Error("Provided Bitcoin private key is invalid!")}},tce=e=>{let t=Buffer.from(e.replace("0x",""),"hex");try{return new yp(new Uint8Array(t)),t}catch{throw new Error("Provided Ethereum private key is invalid!")}},hv=e=>{let t=pv.default.sign.keyPair.fromSecretKey(e),r=Buffer.from("phantom-secret-key-validation"),n=pv.default.sign.detached(r,e);if(!pv.default.sign.detached.verify(r,n,t.publicKey))throw new Error("Provided Solana private key is invalid!")},rce=e=>{try{let t=JSON.parse(e);return hv(Uint8Array.from(t)),{key:t,encoding:"uint8array"}}catch{}try{let t=kN.default.decode(e);return hv(t),{key:t,encoding:"base58"}}catch{}try{let t=Buffer.from(e,"hex");return hv(t),{key:t,encoding:"hex"}}catch{}try{let t=Buffer.from(e,"base64");return hv(t),{key:t,encoding:"base64"}}catch{}throw new Error("Provided Solana private key is invalid!")};p();y();var _N=X(Us()),BN=X(mp()),CN=X(dv());var nce=e=>{let{privateKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return BN.default.encode(CN.encodeRaw(e.networkIDValue,Buffer.from(t),!0));case"eip155":return"0x"+Buffer.from(t).toString("hex");case"solana":return _N.default.encode(t);case"bip44_ed25519":throw new Error("Sui private key export not supported");default:return be(r)}};p();y();var Zm=e=>{try{return _i.from(_6(e).key)}catch(t){return console.error(t),_i.from(Buffer.from(""))}};p();y();var kpe=X(Sv());p();y();var[QN,XN,eU]=[[],[],[]],Zce=BigInt(0),rg=BigInt(1),Qce=BigInt(2),Xce=BigInt(7),eue=BigInt(256),tue=BigInt(113);for(let e=0,t=rg,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],QN.push(2*(5*n+r)),XN.push((e+1)*(e+2)/2%64);let i=Zce;for(let o=0;o<7;o++)t=(t<<rg^(t>>Xce)*tue)%eue,t&Qce&&(i^=rg<<(rg<<BigInt(o))-rg);eU.push(i)}var[rue,nue]=Me.split(eU,!0),JN=(e,t,r)=>r>32?Me.rotlBH(e,t,r):Me.rotlSH(e,t,r),ZN=(e,t,r)=>r>32?Me.rotlBL(e,t,r):Me.rotlSL(e,t,r);function iue(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],h=r[c+1],l=JN(u,h,1)^r[a],g=ZN(u,h,1)^r[a+1];for(let x=0;x<50;x+=10)e[s+x]^=l,e[s+x+1]^=g}let i=e[2],o=e[3];for(let s=0;s<24;s++){let a=XN[s],c=JN(i,o,a),u=ZN(i,o,a),h=QN[s];i=e[h],o=e[h+1],e[h]=c,e[h+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=rue[n],e[1]^=nue[n]}r.fill(0)}var Ev=class e extends QB{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Sl.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=JB(this.state)}keccak(){iue(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Sl.exists(this);let{blockLen:r,state:n}=this;t=ZB(t);let i=t.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Sl.exists(this,!1),Sl.bytes(t),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Sl.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Sl.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new e(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}},vf=(e,t,r)=>El(()=>new Ev(t,e,r)),K7e=vf(6,144,224/8),F7e=vf(6,136,256/8),V7e=vf(6,104,384/8),q7e=vf(6,72,512/8),H7e=vf(1,144,224/8),W6=vf(1,136,256/8),W7e=vf(1,104,384/8),z7e=vf(1,72,512/8),tU=(e,t,r)=>XB((n={})=>new Ev(t,e,n.dkLen===void 0?r:n.dkLen,!0)),j7e=tU(31,168,128/8),G7e=tU(31,136,256/8);var Zs=X(Sg()),xK=X(Us());function oo(e){let{publicKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return Tpe(t,r,e.networkID);case"eip155":return Ppe(t);case"solana":return xK.default.encode(t);case"bip44_ed25519":throw new Error("Sui address encoding not supported");default:return be(r)}}var Tpe=(e,t,r)=>{let n=r==="bip122:000000000933ea01ad0ee984209779ba"?Zs.networks.testnet:Zs.networks.bitcoin,i;switch(t){case"bip122_p2tr":Zs.initEccLib(kpe),i=Zs.payments.p2tr({internalPubkey:Buffer.from(e.slice(1,33)),network:n},{validate:!1})?.address;break;case"bip122_p2wpkh":i=Zs.payments.p2wpkh({pubkey:Buffer.from(e),network:n},{validate:!1})?.address;break;case"bip122_p2sh":{let o=Buffer.from(e),s=Zs.payments.p2wpkh({pubkey:o,network:n},{validate:!1});i=Zs.payments.p2sh({pubkey:o,network:n,redeem:s},{validate:!1})?.address;break}case"bip122_p2pkh":{i=Zs.payments.p2pkh({pubkey:Buffer.from(e),network:n},{validate:!1})?.address;break}default:be(t)}if(!i)throw new Error("Could not derive Bitcoin address from public key");return i},Ppe=e=>{let t=e.slice(1),n=W6(t).slice(12);return _pe(`0x${Buffer.from(n).toString("hex")}`)},_pe=e=>{if(!vl.safeParse(e).success)throw new Error("toChecksumAddress: Input address is not a valid hex string.");let t=e.toLowerCase().replace("0x",""),r=Buffer.from(W6(Buffer.from(t,"utf-8"))).toString("hex"),n="0x";for(let i=0;i<t.length;i++)parseInt(r[i],16)>=8?n+=t[i].toUpperCase():n+=t[i];return n};p();y();function Nf(e){return sf.safeParse(e).success}p();y();function s4(e){switch(e){case"bip44Root":case"bip44Change":case"bip44":case"deprecated":return"solana";case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return"eip155";case"bitcoinLegacy":return"bip122_p2pkh";case"bitcoinNativeSegwit":return"bip122_p2wpkh";case"bitcoinNestedSegwit":return"bip122_p2sh";case"bitcoinTaproot":return"bip122_p2tr";case"bip44Sui":return"bip44_ed25519"}}p();y();p();y();p();y();var Dn=(a=>(a.Solana="solana",a.Monad="monad",a.Ethereum="ethereum",a.Base="base",a.Polygon="polygon",a.Bitcoin="bitcoin",a.Sui="sui",a))(Dn||{}),Io=(a=>(a.Ethereum="60",a.Monad="143",a.Polygon="966",a.Base="8453",a.Solana="501",a.Bitcoin="0",a.Sui="784",a))(Io||{}),a4=class extends Error{constructor(r,n){super(`${n} is not yet supported for ${r}`);this.chain=r;this.feature=n;this.name="UnsupportedChainFeatureError"}},zt=class extends a4{constructor(t){super("sui",t)}};var TA=(r=>(r.Mainnet="eip155:8453",r.Sepolia="eip155:84532",r))(TA||{}),wK=O.union([O.literal("eip155:8453"),O.literal("eip155:84532")]),c4={id:"base",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/base.png",name:"Base",networks:{"eip155:8453":{id:"eip155:8453",name:"Base",rpcProxyUrl:"https://base-mainnet.phantom.app",value:8453},"eip155:84532":{id:"eip155:84532",name:"Base Sepolia",rpcProxyUrl:"https://base-sepolia.phantom.app",value:84532}},mainnetID:"eip155:8453",tokenDecimals:18,tokenSymbol:"ETH",slip44:"8453",parentChain:"ethereum"};p();y();var Bpe=X(Sv());var PA=X(Sg());var un=(r=>(r.Mainnet="bip122:000000000019d6689c085ae165831e93",r.Testnet="bip122:000000000933ea01ad0ee984209779ba",r))(un||{}),Uf=O.union([O.literal("bip122:000000000019d6689c085ae165831e93"),O.literal("bip122:000000000933ea01ad0ee984209779ba")]),Df=O.string().refine(e=>{try{return PA.initEccLib(Bpe),PA.address.toOutputScript(e),!0}catch{return!1}},{message:"Invalid Bitcoin address."}),Eg=O.object({networkID:Uf,addressType:O.nativeEnum(Se),address:Df,publicKey:O.instanceof(Uint8Array).optional()}),u4={id:"bitcoin",addressTypes:["bip122_p2tr","bip122_p2wpkh"],iconUrl:"https://static.phantom.app/assets/bitcoin.png",name:"Bitcoin",networks:{"bip122:000000000019d6689c085ae165831e93":{id:"bip122:000000000019d6689c085ae165831e93",name:"Bitcoin",value:128},"bip122:000000000933ea01ad0ee984209779ba":{id:"bip122:000000000933ea01ad0ee984209779ba",name:"Bitcoin Testnet",shortName:"Testnet",value:239}},mainnetID:"bip122:000000000019d6689c085ae165831e93",tokenDecimals:8,tokenSymbol:"BTC",slip44:"0"};p();y();p();y();var Ig=(n=>(n.Mainnet="eip155:143",n.Testnet="eip155:10143",n.Devnet="eip155:41454",n))(Ig||{}),f4=O.union([O.literal("eip155:143"),O.literal("eip155:10143"),O.literal("eip155:41454")]),l4={id:"monad",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/monad.png",name:"Monad",networks:{"eip155:143":{id:"eip155:143",name:"Monad",rpcProxyUrl:"https://monad-mainnet.phantom.app",value:143},"eip155:10143":{id:"eip155:10143",name:"Monad Testnet",shortName:"Testnet",rpcProxyUrl:"https://monad-testnet.phantom.app",value:10143},"eip155:41454":{id:"eip155:41454",name:"Monad Devnet",shortName:"Devnet",rpcProxyUrl:"https://devnet1.monad.xyz/rpc/YbJtaztqsm4SugWbf5h9byUSMh09sOWnpOo7vJneGE6k",value:41454}},mainnetID:"eip155:41454",tokenDecimals:18,tokenSymbol:"MON",slip44:"143"};p();y();var _A=(r=>(r.Mainnet="eip155:137",r.Amoy="eip155:80002",r))(_A||{}),d4=O.union([O.literal("eip155:137"),O.literal("eip155:80002")]),h4={id:"polygon",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/polygon.png",name:"Polygon",networks:{"eip155:137":{id:"eip155:137",name:"Polygon",rpcProxyUrl:"https://polygon-mainnet.phantom.app",value:137},"eip155:80002":{id:"eip155:80002",name:"Polygon Amoy",shortName:"Amoy",rpcProxyUrl:"https://polygon-amoy.phantom.app",value:80002}},mainnetID:"eip155:137",tokenDecimals:18,tokenSymbol:"POL",slip44:"966",parentChain:"ethereum"};var BA=(r=>(r.Mainnet="eip155:1",r.Sepolia="eip155:11155111",r))(BA||{}),vK=O.union([O.literal("eip155:1"),O.literal("eip155:11155111")]),Lf=O.union([vK,d4,wK,f4]),kg=O.object({networkID:Lf,addressType:O.nativeEnum(Se),address:wa}),p4={id:"ethereum",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/ethereum.png",name:"Ethereum",networks:{"eip155:1":{id:"eip155:1",name:"Ethereum",rpcProxyUrl:"https://eth-mainnet.phantom.app",value:1},"eip155:11155111":{id:"eip155:11155111",name:"Ethereum Sepolia",shortName:"Sepolia",rpcProxyUrl:"https://eth-sepolia.phantom.app",value:11155111}},mainnetID:"eip155:1",tokenDecimals:18,tokenSymbol:"ETH",slip44:"60"};p();y();var CA=(i=>(i.Mainnet="solana:101",i.Testnet="solana:102",i.Devnet="solana:103",i.Localnet="solana:localnet",i))(CA||{}),Kf=O.union([O.literal("solana:101"),O.literal("solana:102"),O.literal("solana:103"),O.literal("solana:localnet")]),Tg=O.object({networkID:Kf,addressType:O.nativeEnum(Se),address:vu}),y4={id:"solana",addressTypes:["solana"],iconUrl:"https://static.phantom.app/assets/solana.png",name:"Solana",networks:{"solana:101":{id:"solana:101",name:"Solana",rpcProxyUrl:"https://solana-mainnet.phantom.app/YBPpkkN4g91xDiAnTE9r0RcMkjg0sKUIWvAfoFVJ?advancedTxSubmission=true",value:"mainnet"},"solana:102":{id:"solana:102",name:"Solana Testnet",shortName:"Testnet",value:"testnet"},"solana:103":{id:"solana:103",name:"Solana Devnet",shortName:"Devnet",value:"devnet"},"solana:localnet":{id:"solana:localnet",name:"Solana Localnet",shortName:"Localnet",value:"localnet"}},localnetID:"solana:localnet",mainnetID:"solana:101",tokenDecimals:9,tokenSymbol:"SOL",slip44:"501"};p();y();var MA=(r=>(r.Mainnet="sui:mainnet",r.Testnet="sui:testnet",r))(MA||{}),Lp=O.union([O.literal("sui:mainnet"),O.literal("sui:testnet")]),AK={id:"sui",addressTypes:["bip44_ed25519"],iconUrl:"https://static.phantom.app/assets/sui.png",name:"Sui",networks:{"sui:mainnet":{id:"sui:mainnet",name:"Sui",rpcProxyUrl:"https://sui-mainnet.phantom.app",value:"mainnet"},"sui:testnet":{id:"sui:testnet",name:"Sui Testnet",shortName:"Testnet",rpcProxyUrl:"https://sui-testnet.phantom.app",value:"testnet"}},mainnetID:"sui:mainnet",tokenDecimals:9,tokenSymbol:"SUI",slip44:"784"},SK=O.object({networkID:Lp,addressType:O.nativeEnum(Se),address:O.string()});p();y();function RA(e){return Object.values(Dn).includes(e)}var Vi={bitcoin:u4,ethereum:p4,polygon:h4,monad:l4,solana:y4,base:c4,sui:AK},OA={solana:1,ethereum:2,monad:3,base:4,polygon:5,bitcoin:6,sui:7},Cpe={solana:!0,ethereum:!0,monad:!1,base:!0,polygon:!0,bitcoin:!0,sui:!1},m4=(e,t)=>{let r=OA[e]-OA[t];return r===0?0:r>0?1:-1},Mpe=()=>{let e=Object.values(Dn).sort(m4),t=e.map(j=>Vi[j]),r={},n=[],i={},o={},s={};t.forEach(j=>{let se=Object.keys(j.networks);n.push(...se),se.forEach(Y=>{r[Y]=j});let L=Object.values(j.networks);i[j.id]=L.map(Y=>Y.id),L.forEach(Y=>{o[Y.id]=Y});for(let Y of j.addressTypes){let Z=s[Y];Z?Z.push(j.id):s[Y]=[j.id]}});let a=new Set(n);function c(j){return j?.evmOnly?e.filter(se=>Vi[se].addressTypes.includes("eip155")):e}function u(j){return VB()&&j==="monad"?!0:Cpe[j]}function h(j){return i[j]}function l(j){if(j){let se=t;return j.evmOnly&&(se=se.filter(L=>L.addressTypes.includes("eip155"))),j.mainnetOnly?se.map(L=>L.mainnetID):se.flatMap(L=>Object.keys(L.networks))}else return n}function g(j){return r[j]}function x(j){return o[j].rpcProxyUrl}function A(j){return r[j].addressTypes[0]}function E(j){let se=r[j];if(se.addressTypes.length===1){let[L]=se.addressTypes;return L}else throw`The chain ${se.id} has multiple address types`}function C(j){return r[j].addressTypes}function M(j){return r[j].id}function N(j){return Vi[fe(j)].name}function R(j){return r[j].tokenDecimals}function V(j){return(ee(j)?r[j]:Vi[j]).tokenSymbol}function q(j){return(ee(j)?r[j]:Vi[j]).iconUrl}function W(j){return r[j].slip44}function G(j){return Vi[fe(j)].mainnetID}function z(j){let se;if(w(j)&&(se=o[j].value),typeof se=="number")return se;throw new Error(`Invalid NetworkID: ${j}. Must be an EVM NetworkID.`)}function ee(j){return a.has(j)}function _(j){return Object.keys(Vi.bitcoin.networks).includes(j)}function f(j){return Object.keys(Vi.ethereum.networks).includes(j)}function m(j){return Object.keys(Vi.polygon.networks).includes(j)}function b(j){return Object.keys(Vi.base.networks).includes(j)}function v(j){return Object.keys(Vi.monad.networks).includes(j)}function w(j){return f(j)||m(j)||b(j)||v(j)}function P(j){return Object.keys(Vi.solana.networks).includes(j)}function B(j){return Object.keys(Vi.sui.networks).includes(j)}function k(j){if(!P(j))throw new Error(`Invalid NetworkID: ${j}. Must be a Solana NetworkID.`);return Vi.solana.networks[j].value}function d(j){return r[j].localnetID===j}function S(j){return r[j].mainnetID===j}function F(j){return o[j]}function U(j,se=!1){let L=o[j];return se&&L.shortName?L.shortName:L.name}function D(j){return r[j].parentChain}function J(j){return s[j]}function ue(j,se){let L=r[j].id,Y=r[se].id;return m4(L,Y)}function fe(j){return RA(j)?j:ee(j)?ie.getChainID(j):be(j)}return{...Vi,getAllChainIDs:c,getDefaultChainEnablement:u,getNetworkIDs:h,getAllNetworkIDs:l,getChainDefinition:g,getAddressType:E,getAddressTypes:C,getChainID:M,getChainName:N,getTokenDecimals:R,getTokenSymbol:V,getChainIconUrl:q,getSlip44:W,getMainnetNetworkID:G,getEVMNetworkIDValue:z,getSolanaNetworkIDValue:k,_DO_NOT_USE_getAddressType:A,isNetworkID:ee,isBitcoinNetworkID:_,isEVMNetworkID:w,isSolanaNetworkID:P,isEthereumNetworkID:f,isPolygonNetworkID:m,isBaseNetworkID:b,isSuiNetworkID:B,isLocalNetworkID:d,isMainnetNetworkID:S,getNetworkDefinition:F,getNetworkName:U,getChainIDs:J,compareChain:m4,compareNetworkID:ue,getRpcProxyUrl:x,getParentChain:D}},ie=Mpe();p();y();var Kt={Bitcoin:un,Ethereum:BA,Polygon:_A,Solana:CA,Sui:MA,Base:TA,Monad:Ig},eu=O.union([Uf,Lf,Kf,Lp]),Rpe=O.union([Eg,kg,Tg,SK]);p();y();p();y();var $a=(n=>(n.address="address",n.tx="tx",n.nativeToken="nativeToken",n))($a||{}),EK=O.string(),IK=O.object({chainId:eu,resourceType:O.nativeEnum($a)}),g4=IK.extend({resourceType:O.literal("nativeToken"),slip44:O.nativeEnum(Io)}),Kp=IK.extend({resourceType:O.literal("address"),address:O.string()}),b4=Kp.extend({chainId:Kf,address:vu}),x4=Kp.extend({chainId:Lf,address:wa,tokenId:O.string().optional()}),w4=Kp.extend({chainId:Uf,address:Df.or(O.string())}),kK=O.union([g4,Kp,b4,x4,w4]);var TK=e=>{if(e.resourceType==="nativeToken")return`${e.chainId}/nativeToken:${e.slip44}`;if(ie.isEVMNetworkID(e.chainId))return e.address=e.address.toLowerCase(),"tokenId"in e&&typeof e.tokenId=="string"&&e.tokenId?`${e.chainId}/address:${e.address}/${e.tokenId}`:`${e.chainId}/address:${e.address}`;if(ie.isSolanaNetworkID(e.chainId))return`${e.chainId}/address:${e.address}`;if(ie.isBitcoinNetworkID(e.chainId)){let t=e;return`${t.chainId}/address:${t.address}`}if(ie.isSuiNetworkID(e.chainId))throw new zt("encode CAIP-19");return be(e.chainId)};p();y();p();y();var PK=O.string().refine(e=>{let t=e.split("/");if(t.length<2)return!1;let r=t[0],i=t[1].split(":");if(i.length<2)return!1;let o=i[0],s=i[1];return typeof e=="string"&&ie.isNetworkID(r)&&o.match(/^[-a-z0-9]{2,8}/)&&s.match(/^[-a-zA-Z0-9]{1,64}/)},{message:"Value is not a valid BRI string."});p();y();var _K=e=>{let t=e.split("/");if(t.length>3||t.length<2)throw new Error(`Cannot decode malformed caip19 string '${e}'`);let r=t[0];if(!(ie.isEVMNetworkID(r)||ie.isSolanaNetworkID(r)||ie.isBitcoinNetworkID(r)))throw new Error(`Cannot decode unsupported chain '${r}'`);let n=t[1].split(":");if(n.length!==2)throw new Error(`Invalid resource specification '${t[1]}'`);let[i,o]=n;if(!Object.values($a).includes(i))throw new Error(`Unsupported resource type '${i}'`);if(i==="nativeToken"){if(!Object.values(Io).includes(o))throw new Error(`Unsupported slip44 '${o}'`);return{chainId:r,resourceType:i,slip44:o}}else if(ie.isEVMNetworkID(r)){if(i==="address")return t.length===3?{chainId:r,address:o,resourceType:i,tokenId:t[2]}:{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(ie.isSolanaNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(ie.isBitcoinNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}throw new Error(`Cannot decode malformed caip19 string '${e}'`)};p();y();function BK(e){return!e||e.resourceType!=="address"?!1:!!ie.isEVMNetworkID(e.chainId)}p();y();function NA(e,t){if(ie.isBitcoinNetworkID(t))return Df.safeParse(e).success;if(ie.isEVMNetworkID(t))return wa.safeParse(e).success;if(ie.isSolanaNetworkID(t))return vu.safeParse(e).success;if(ie.isSuiNetworkID(t))throw new zt("validate address");return be(t)}p();y();var CK=e=>{let t=ie.getNetworkIDs(e),r=ie.getMainnetNetworkID(t[0]),n=ie[e].slip44;return{chainId:r,resourceType:"nativeToken",slip44:n}};p();y();p();y();p();y();function MK(e){return Eg.safeParse(e).success}function RK(e){return Tg.safeParse(e).success}function OK(e){return kg.safeParse(e).success}var NK=O.object({networkID:eu,addressType:O.nativeEnum(Se),address:O.string()}),Ope=e=>`${e.networkID}-${e.address}`,UK={toKey:Ope},DK=e=>{let t={chainId:e.networkID,address:e.address,resourceType:"address"};return ie.isEVMNetworkID(e.networkID)&&(t.address=t.address.toLowerCase()),t};p();y();function LK(e){return[Kt.Solana.Devnet,Kt.Solana.Testnet,Kt.Solana.Mainnet].map(r=>parseInt(r.replace("solana:",""))).includes(parseInt(e,16))?`solana:${parseInt(e,16)}`:`eip155:${parseInt(e,16)}`}p();y();var KK=O.object({id:eu,name:O.string(),symbol:O.string(),imageUrl:O.string()});function FK(e){let{name:t,tokenSymbol:r,iconUrl:n}=ie.getChainDefinition(e);return{id:e,name:t,symbol:r,imageUrl:n}}p();y();function VK(e){switch(e){case"devnet":return Kt.Solana.Devnet;case"mainnet":return Kt.Solana.Mainnet;case"testnet":return Kt.Solana.Testnet;case"localnet":return Kt.Solana.Localnet}}function qK(e){switch(e){case"mainnet":return"mainnet-beta";case"localnet":return"localhost";default:return e}}p();y();var Qs=(e,t)=>{if(ie.isBitcoinNetworkID(e)){switch(!0){case(t.startsWith("bc1p")||t.startsWith("bcrt1p")||t.startsWith("tb1p")):return"bip122_p2tr";case(t.startsWith("bc1q")||t.startsWith("tb1q")):return"bip122_p2wpkh";case(t.startsWith("3")||t.startsWith("2")):return"bip122_p2sh";case(t.startsWith("1")||t.startsWith("m")):return"bip122_p2pkh"}throw new Error(`Unable to get address type from invalid Bitcoin address: ${t}`)}else return ie.isEVMNetworkID(e)?"eip155":ie.isSolanaNetworkID(e)?"solana":ie.isSuiNetworkID(e)?"bip44_ed25519":be(e)};p();y();var Npe=ie.getAllNetworkIDs().filter(e=>ie.isEVMNetworkID(e)),HK=e=>Npe.find(t=>ie.getNetworkDefinition(t).value===e);p();y();var WK=(e,t)=>ie.getAllNetworkIDs({evmOnly:!0}).filter(r=>{if(ie.getChainID(r)==="monad"&&!e)return!1;if(t){if(t==="mainnets_only")return ie.isMainnetNetworkID(r);if(t==="testnets_only")return!ie.isMainnetNetworkID(r)}else return!0}).map(Upe),Upe=e=>`0x${ie.getNetworkDefinition(e).value.toString(16)}`;p();y();var Fpe={[Kt.Monad.Mainnet]:1,[Kt.Monad.Devnet]:1,[Kt.Monad.Testnet]:1,[Kt.Ethereum.Mainnet]:6,[Kt.Ethereum.Sepolia]:6,[Kt.Polygon.Mainnet]:128,[Kt.Polygon.Amoy]:128,[Kt.Base.Mainnet]:3,[Kt.Base.Sepolia]:3},Vpe={[Kt.Bitcoin.Mainnet]:1,[Kt.Bitcoin.Testnet]:1};var qpe="TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb";p();y();p();y();function Hpe(e,t){return t.getSupportedChains().includes(e)}function zK(e,t){if(RA(e))return t.get(e);if(ie.isNetworkID(e)){let r=ie.getChainID(e);if(Hpe(r,t))return t.get(r)}throw new Error("Invalid input type for chain config get method")}function v4(e){return{get:t=>zK(t,e),supportedChains:e.getSupportedChains()}}p();y();var Pg=class{constructor(t){this.chainConfigMap=new Map;Object.entries(t).forEach(([r,n])=>{this.register(r,n)})}register(t,r){this.chainConfigMap.set(t,r)}getSupportedChains(){return Array.from(this.chainConfigMap.keys())}get(t){let r=this.chainConfigMap.get(t);if(!r)throw new Error(`No chain config found for chain: ${t}`);return r}};p();y();var jK=".phantom-labs.internal.enabledChainsOverrideSettings",GK=async e=>{try{return(await e.get(jK))?.settings}catch{return null}},$K=async(e,t,r)=>{let n=await GK(r);return r.set(jK,{version:1,settings:{...n!=null&&n,[e]:t}})},YK=async e=>{let t=[],r;try{r=await GK(e),r&&Object.entries(r).forEach(([n,i])=>{i||t.push(n)})}catch{}try{let n=await e.get(Wpe);!n||n.version===1||n.chains.forEach(i=>{r&&r[i]||t.push(i)})}catch{}try{ie.getAllChainIDs().forEach(n=>{r&&r[n]||ie.getDefaultChainEnablement(n)||t.push(n)})}catch{}return[...new Set(t)]},JK=async(e,t)=>$K(e,!1,t),A4=async(e,t)=>$K(e,!0,t),Fp=".phantom-labs.internal.disabledAddressTypes",ZK=async e=>{let t;try{t=await e.get(Fp)!==null}catch{t=!1}return t},QK=async e=>{let t;try{t=(await e.get(Fp))?.addressTypes??[]}catch{t=[]}return[...new Set([...t,"bip122_p2sh","bip122_p2pkh"])]},XK=async(e,t)=>{let r=await t.get(Fp),n=new Set(r?.addressTypes??[]);return n.delete(e),t.set(Fp,{version:1,addressTypes:Array.from(n)})},eF=async(e,t)=>{let r=await t.get(Fp),n=new Set(r?.addressTypes??[]);return n.add(e),t.set(Fp,{version:1,addressTypes:Array.from(n)})},Wpe=".phantom-labs.internal.disabledChains";p();y();var wd=async e=>{let t=va.isFeatureEnabled("enable-monad"),r=va.isFeatureEnabled("enable-sui"),n=ie.getAllChainIDs().filter(M=>(M!=="monad"||t)&&(M!=="sui"||r)),i=await YK(e),o=new Set(i),s=n.filter(M=>!o.has(M)),a=M=>{let N=ie.getChainID(M);return s.includes(N)},c=ie.getAllNetworkIDs({mainnetOnly:!1}).filter(a),u=ie.getAllNetworkIDs({mainnetOnly:!0}).filter(a),h=new Set(i.flatMap(M=>ie.getNetworkIDs(M))),l=c.filter(M=>!h.has(M)),g=u.filter(M=>!h.has(M)),x=gi.getAll(),A=await QK(e),E=new Set(A);for(let M of x){let N=ie.getChainIDs(M);if(!N){E.add(M);continue}N.every(V=>o.has(V))&&E.add(M)}let C=x.filter(M=>!E.has(M));return{supportedChainIDs:n,supportedAddressTypes:x,disabledChainIDs:i,enabledChainIDs:s,enabledAddressTypes:C,enabledNetworkIDs:l,enabledMainnetOnlyNetworkIDs:g}};p();y();p();y();var UA="@phantom/chains",DA={enabledChains:[`${UA}:enabled-chains`],enabledAddressTypes:[`${UA}:enabled-address-types`],enabledNetworkIDs(e){return[`${UA}:enabled-network-ids`,{mainnetOnly:e}]},chainAvailability(e){return[`${UA}:chain-availability`,e]}};var tF=[],S4=e=>{tF.push(e)},tu=async e=>{let t=va.isFeatureEnabled("enable-monad");await e.invalidateQueries({queryKey:DA.chainAvailability({isMonadEnabled:t})}),await Promise.all(tF.map(r=>r(e)))};p();y();p();y();var _g=(i=>(i.Image="image",i.Emoji="emoji",i.ReadOnlyDefault="read-only-default",i.Default="default",i))(_g||{}),zpe=O.object({type:O.nativeEnum(_g),imageUrl:O.string().optional(),unicode:O.string().optional()}),LA=(t=>(t.Ledger="ledger",t))(LA||{}),KA=(t=>(t.BLE="ble",t))(KA||{}),jpe=O.object({version:O.literal(1),connectionType:O.nativeEnum(KA),deviceType:O.nativeEnum(LA),id:O.string().min(1),name:O.string().optional(),model:O.string().optional()}),Gpe=O.object({value:O.number(),timestamp:O.number()}),$pe=O.object({name:O.string(),icon:zpe.optional(),connectedDevices:jpe.array().optional(),balance:Gpe.optional()});var Ype=100,Jpe={unicode:void 0,imageUrl:void 0,type:"default"},E4={version:1,isDeveloperMode:!1};var FA=Kt.Solana.Devnet,VA=Kt.Ethereum.Sepolia,vd={version:1,setting:{solana:FA,eip155:VA}};function Xs(e){return e.map(t=>gi[t].defaultDerivationPathType)}var Zpe={bip44Root:"bip44RootEthereum",bip44Change:"bip44Ethereum",bip44:"bip44EthereumSecondary",deprecated:"bip44EthereumTertiary",bip44RootEthereum:null,bip44Ethereum:null,bip44EthereumSecondary:null,bip44EthereumTertiary:null,bitcoinTaproot:null,bitcoinNativeSegwit:null,bitcoinNestedSegwit:null,bitcoinLegacy:null,bip44Sui:null},ru={bip44Root:-1,bip44RootEthereum:-1,bitcoinTaproot:0,bitcoinNativeSegwit:0,bitcoinNestedSegwit:0,bitcoinLegacy:0,bip44Change:0,bip44Ethereum:0,bip44:1,bip44EthereumSecondary:1,deprecated:2,bip44EthereumTertiary:2,bip44Sui:0},Qpe="https://help.phantom.app/hc/en-us/articles/4406563212819";var Xpe="https://help.phantom.app/hc/en-us/articles/21872962238355";p();y();var Bg=(e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`};p();y();p();y();var e0e=e=>e.includes(".")||e.includes("@")?!1:vu.safeParse(e).success||wa.safeParse(e).success||Df.safeParse(e).success,I4=(e,t=5)=>e0e(e)?Bg(e,t):e;var t0e=(e,t,r,n=4)=>{let i=t?t.name:r,o=I4(e,n);return i?`${i} (${o})`:o};p();y();var r0e=e=>`${e.substring(0,5)}...`;p();y();var Vp=X(wr()),rF=(0,Vp.createContext)(null);function n0e({children:e,authRepository:t}){return Vp.default.createElement(rF.Provider,{value:t},e)}function qi(){let e=(0,Vp.useContext)(rF);if(!e)throw new Error("useAuthRepository must be used within an AuthProvider");return e}p();y();p();y();var T4=X(en());p();y();var Cg="https://phantom.app",Mg="https://api.phantom.app/oauth2/auth",qA={prod:"a61bc25e-0c4f-4ab3-aa54-b50ec746eea2",staging:"fe26708b-7db7-4146-9fbb-9a9736acfb2b"},k4={prod:"https://auth.phantom.app",staging:"https://staging-auth.phantom.app"},nF="/login/start",iF="/oauth2/token";var i0e="https://help.phantom.app/hc/en-us/articles/32367778944403";var HA=Ds({minutes:60})-Ds({minutes:15});p();y();var ii=e=>Buffer.from(e).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");var o0e=60;function Rg(){let e={alg:"ES256",type:"JWT"},t=Math.floor(Date.now()/1e3),r={iss:Cg,aud:Mg,nbf:t,exp:t+o0e,iat:t};return{header:e,payload:r}}function qp(e){let t=ii(T4.Buffer.from(JSON.stringify(e.header))),r=ii(T4.Buffer.from(JSON.stringify(e.payload)));return[t,r,e.signature].join(".")}p();y();var oF=O.object({alg:O.string(),type:O.string(),kid:O.string()}),sF=O.object({sub:O.string(),iss:O.string(),aud:O.string(),nbf:O.number(),exp:O.number(),iat:O.number()}),P4=O.object({header:oF,payload:sF,signature:O.string()}),aF=O.object({alg:O.string(),type:O.string()}),cF=O.object({iss:O.string(),aud:O.string(),nbf:O.number(),exp:O.number(),iat:O.number()}),_4=O.object({header:aF,payload:cF}),uF=O.object({id_token:O.string(),access_token:O.string(),refresh_token:O.string(),scope:O.string(),token_type:O.string(),expires_in:O.number().gte(0)}),s0e=O.object({redirectTo:O.string()}),fF=O.object({at_hash:O.string(),aud:O.array(O.string()),auth_time:O.number(),exp:O.number(),iat:O.number(),iss:O.string(),jti:O.string(),rat:O.number(),sid:O.string(),sub:O.string(),email:O.string().optional()}),B4=O.object({authenticationKeys:O.array(O.object({createdAt:O.string().datetime().nullish().default(null),updatedAt:O.string().datetime().nullish().default(null),id:O.string().uuid(),publicKey:O.string(),userId:O.string().uuid()})).optional()});p();y();var Ad=X(z4());p();y();p();y();p();y();p();y();function _F(...e){let t=new AbortController;for(let r of e){let n=r instanceof AbortController?r.signal:r;if(n?.aborted)return t.abort(n.reason),t.signal;n?.addEventListener("abort",()=>{t.abort(n.reason)},{once:!0})}return t.signal}var tye=2*60*1e3,rye=[];function BF(e,t){let{fetchTimeout:r,retryDelays:n,...i}=t||{},o=t?.fetchTimeout??tye,s=t?.retryDelays??rye,a=0,c=0;return new Promise((u,h)=>{function l(){a++,c=Date.now();let A=!0,E=new AbortController,C=fetch(e,{...i,signal:_F(...i.signal?[i.signal,E.signal]:[E.signal])}),M=setTimeout(()=>{E.abort(),A=!1,x(a)?g():h(new Error(`fetchWithTimeoutAndRetry(): Failed to get response from server due to timeout of ${o} ms, tried ${a} times.`))},o);C.then(N=>{clearTimeout(M),A&&(N.status>=200&&N.status<300?u(N):x(a,N.status)?g():u(N))}).catch(N=>{clearTimeout(M),x(a)?g():h(N)})}function g(){let A=s[a-1],E=c+A;setTimeout(l,Math.max(E-Date.now(),0))}function x(A,E){let C=E?E>=400&&E<=499:!1;return A<=s.length&&!C}l()})}p();y();var j4=(e={},t={})=>{let r=new Headers(e),n=new Headers(t);for(let[i,o]of n.entries())o===void 0||o==="undefined"?r.delete(i):r.set(i,o);return r};p();y();var $p=X(en());p();y();p();y();function CF(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function G4(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function MF(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");CF(e.outputLen),CF(e.blockLen)}function jp(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function RF(e,t){G4(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p();y();var nye=e=>e instanceof Uint8Array;var r2=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ea=(e,t)=>e<<32-t|e>>>t,iye=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!iye)throw new Error("Non little-endian hardware is not supported");function oye(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ng(e){if(typeof e=="string"&&(e=oye(e)),!nye(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}var Gp=class{clone(){return this._cloneInto()}},iqe={}.toString;function OF(e){let t=n=>e().update(Ng(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}var n2=class extends Gp{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,MF(t);let n=Ng(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return jp(this),this.iHash.update(t),this}digestInto(t){jp(this),G4(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},$4=(e,t,r)=>new n2(e,t).update(r).digest();$4.create=(e,t)=>new n2(e,t);p();y();p();y();function sye(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var i2=class extends Gp{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=r2(this.buffer)}update(t){jp(this);let{view:r,buffer:n,blockLen:i}=this;t=Ng(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=r2(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){jp(this),RF(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;sye(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=r2(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var aye=(e,t,r)=>e&t^~e&r,cye=(e,t,r)=>e&t^e&r^t&r,uye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Hf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wf=new Uint32Array(64),Y4=class extends i2{constructor(){super(64,32,8,!1),this.A=Hf[0]|0,this.B=Hf[1]|0,this.C=Hf[2]|0,this.D=Hf[3]|0,this.E=Hf[4]|0,this.F=Hf[5]|0,this.G=Hf[6]|0,this.H=Hf[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)Wf[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=Wf[l-15],x=Wf[l-2],A=ea(g,7)^ea(g,18)^g>>>3,E=ea(x,17)^ea(x,19)^x>>>10;Wf[l]=E+Wf[l-7]+A+Wf[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=ea(a,6)^ea(a,11)^ea(a,25),x=h+g+aye(a,c,u)+uye[l]+Wf[l]|0,E=(ea(n,2)^ea(n,13)^ea(n,22))+cye(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Wf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var NF=OF(()=>new Y4);var fye=[86,120,48,81,89,86,110,49,100,114,111,113,49,70,56,84,77,115,80,81,66,75,72,51,90,83,110,100,110,116,68,88,107,118,83,53,102,80,114,89,111,88,85,75,57,43,67,57,97,103,74,113,68,76,112,112,100,48,102,101,80,122,83,111,108,113,75,90,56,114,66,70,119,87,84,104,98,57,110,119,43,79,70,51,51,65,61,61],lye=[87,67,49,81,97,71,70,117,100,71,57,116,81,88,86,48,97,70,82,118,97,50,86,117],dye=[87,67,49,81,97,71,70,117,100,71,57,116,84,109,57,117,89,50,85,61];function hye(e){let t=new URL(e);return t.pathname+t.search}function UF(e,t){let r=hye(e),n=JSON.stringify(Math.floor(Date.now()/1e3)),i=r+n,o=$4(NF,$p.Buffer.from(String.fromCharCode(...fye)),$p.Buffer.from(i)),s=new Headers(t);return s.set($p.Buffer.from(String.fromCharCode(...lye),"base64").toString(),encodeURIComponent($p.Buffer.from(o).toString("base64"))),s.set($p.Buffer.from(String.fromCharCode(...dye),"base64").toString(),n),s}var Jp=class extends Error{constructor(t,r){super(t),this.response=r}},pye={"Content-Type":"application/json","X-Phantom-Version":HB,"X-Phantom-Platform":WB},Yp=async e=>{let t,r;try{r=await e.clone().blob()}catch{}try{t=await e.clone().json()}catch{}let{status:n,statusText:i}=e;return{blob:r,data:t,status:n,statusText:i}},J4=class e{constructor(t={}){this.fetch=async(t,r={})=>{try{if(typeof t=="function"){let c=Al()==="https://api.phantom.app"?"prod":"staging";t=t({apiEnv:c})}let n="";this.config.withApiEnvironment==="prod"?n="https://api.phantom.app":this.config.withApiEnvironment==="staging"?n="https://staging-api.phantom.app":this.config.withApiEnvironment==="default"&&(n=Al());let i=new URL(`${n}${t}`);r?.params&&(i.search=new URLSearchParams(r.params).toString());let o=r;r.headers=j4(this.config.headers,r.headers),this.config.withClientAuth&&(r.headers=UF(i.toString(),r.headers));let s=this.config.validateStatus;r?.validateStatus&&(s=r?.validateStatus),o.body&&typeof o.body!="string"&&(o.body=JSON.stringify(o.body)),this.config.timeoutMs&&(o.fetchTimeout=this.config.timeoutMs),this.config.numRetries&&(o.retryDelays=Array(this.config.numRetries).fill(this.config.delayBetweenEachRetryMs));let a=await BF(i.toString(),o);if(s&&!a.ok)throw new Jp(`Request failed with status code ${a.status}`,await Yp(a));return a}catch(n){throw n instanceof Jp?n:new Jp(n?.message,n?.response)}};this.config={withClientAuth:!0,numRetries:0,delayBetweenEachRetryMs:0,timeoutMs:null,validateStatus:!1,headers:pye,withApiEnvironment:"none",...t}}auth(t){return new e({...this.config,withClientAuth:t})}bearer(t){return t?this.headers({authorization:`Bearer ${t}`}):this}headers(t,r){let n=r?.mergeHeaders===!1?t:j4(this.config.headers,t);return new e({...this.config,headers:n})}timeout(t){return new e({...this.config,timeoutMs:t})}retry(t,r){return new e({...this.config,numRetries:t,delayBetweenEachRetryMs:r})}validateStatus(t){return new e({...this.config,validateStatus:t})}api(t="default"){return new e({...this.config,withApiEnvironment:t})}async get(t,r={}){r.method="GET";let n=await this.fetch(t,r);return Yp(n)}async post(t,r,n={}){n.method="POST";let i=await this.fetch(t,{...n,body:r});return Yp(i)}async put(t,r,n={}){n.method="PUT";let i=await this.fetch(t,{...n,body:r});return Yp(i)}async patch(t,r,n={}){n.method="PATCH";let i=await this.fetch(t,{...n,body:r});return Yp(i)}async delete(t,r,n={}){n.method="DELETE";let i=await this.fetch(t,{...n,body:r});return Yp(i)}},rr=new J4;function yye(e){if(e===void 0)throw new Error("rpcUrl undefined");return async(t,r)=>{let n={jsonrpc:"2.0",id:+new Date,method:t,params:r},o=(await rr.post(e,n)).data;if("error"in o)throw new Error(JSON.stringify(o.error));return o.result}}async function mye(e,t={}){return rr.fetch(e,t)}function gye(e){return e.status>199&&e.status<300}function bye(e){return e instanceof Jp}p();y();var Zp=X(z4()),LF=X(yh()),Z4={generateRandom:e=>{let t=(0,LF.randomBytes)(e);return(0,Zp.bufferToString)(t)},async deriveChallenge(e){let t=Au((0,Zp.textEncodeLite)(e));return(0,Zp.urlSafe)(t)}};p();y();var ta=()=>Al()==="https://api.phantom.app"?k4.prod:T.BASE_AUTH_ENDPOINT||k4.staging,Q4=()=>`${ta()}${nF}`,o2=()=>`${ta()}${iF}`;var KF=new Ad.BasicQueryStringUtils;async function Ug(e,t){let{url:r,codeVerifier:n}=await FF(e.getClientID(),e.redirectURL,t),i=t.type==="email",o=await e.fetchAuthorizationCode(e.redirectURL,r,i);return await X4({grantType:"authorization_code",clientID:e.getClientID(),redirectURI:e.redirectURL,tokenEndpoint:o2(),code:o,codeVerifier:n})}async function FF(e,t,r){let n=Q4(),i,o=["openid","offline_access","user","incognito","seedless"],s;switch(r.type){case"key":{i={type:"key",jwt:qp(r.clientJWT)};break}case"email":{i={type:"email",provider:r.provider,existingAccessToken:r.existingAccessToken},s=r.prompt,o.push("email");break}case"session":{i={type:"session",existingAccessToken:r.existingAccessToken};break}}let c=await new Ad.AuthorizationRequest({client_id:e,redirect_uri:t,scope:o.join(" "),response_type:"code"},Z4).toJson(),u;switch(i.type){case"key":u=`jwt:${ii(Buffer.from(i.jwt,"utf8"))}`;break;case"email":u=`sso:${i.provider}`,i.existingAccessToken&&(u=`${u}:${i.existingAccessToken}`);break;case"session":u=`session:${i.existingAccessToken}`;break}let h={redirect_uri:c.redirect_uri,client_id:c.client_id,response_type:c.response_type,state:c.state??"",scope:c.scope,login_hint:u};s&&(h.prompt=s);let l=c.extras?.code_challenge,g=c.extras?.code_challenge_method,x=c.internal?.code_verifier;if(l&&g&&(h.code_challenge=l,h.code_challenge_method=g),!l||!g||!x)throw new Error("Missing code challenge or code verifier for PKCE.");let A=KF.stringify(h);return{url:`${n}?${A}`,codeVerifier:x}}async function X4(e){let{grantType:t,tokenEndpoint:r,clientID:n,redirectURI:i}=e,o;t==="authorization_code"?o=new Ad.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,code:e.code,extras:{code_verifier:e.codeVerifier}}):o=new Ad.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,refresh_token:e.refreshToken});let s=await rr.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).auth(qB()).post(r,KF.stringify(o.toStringMap()));xye(s,t);let a=uF.safeParse(s.data);if(!a.success)throw new Error("Invalid OAuth2Token response.");let{data:c}=a;return{idToken:c.id_token,accessToken:c.access_token,refreshToken:c.refresh_token,scope:c.scope,tokenType:c.token_type,expiresAt:Date.now()+c.expires_in*1e3}}async function VF(e,t){return await X4({clientID:e.getClientID(),redirectURI:e.redirectURL,grantType:"refresh_token",tokenEndpoint:o2(),refreshToken:t})}function xye(e,t){if([401,400].includes(e.status)){let r="";if(e.status===401)switch(r="Token request unauthorized. ",t){case"authorization_code":r+="Authorization code is expired or invalid.";break;case"refresh_token":r+="Refresh token is expired or invalid.";break;default:r+=`Unknown grant type '${t}'. `}if(e.status===400)switch(r="Bad Token request ",t){case"authorization_code":r="for 'authorization_code'. Possible causes: 1. The authorization code is expired or invalid. 2. Redirect URI mismatch. 3. Code verifier mismatch (if using PKCE).";break;case"refresh_token":r="for 'refresh_token'. Possible causes: 1. The refresh token is expired, invalid, or revoked. 2. Client ID mismatch. 3. Missing or malformed refresh token in the request.";break;default:r=`for unknown grant type '${t}'. Check the payload and OAuth provider documentation.`}throw new Error(r)}}p();y();p();y();var qF=e=>Buffer.from(e.replace("-","+").replace("_","/").replace(/=+$/,""),"base64");p();y();var s2=class{constructor(){this.subscribers={user:[],userID:[],accessToken:[],email:[]};this.emitUser=Ey(t=>{this.subscribers.user.forEach(r=>r(t))});this.emitUserID=Ey(t=>{this.subscribers.userID.forEach(r=>r(t))},{resolver:t=>t});this.emitAccessToken=Ey(t=>{this.subscribers.accessToken.forEach(r=>r(t))},{resolver:t=>t});this.emitEmail=Ey(t=>{this.subscribers.email.forEach(r=>r(t))},{resolver:t=>t})}subscribe(t,r){return this.subscribers[t].push(r),()=>{this.subscribers[t].splice(this.subscribers[t].indexOf(r),1)}}emit(t){t&&(this.emitUser(t),this.emitUserID(t.userID),this.emitAccessToken(t.accessToken),t.email&&this.emitEmail(t.email))}};p();y();var a2=new Map;function vye(){a2.clear()}function HF(e){vye();let t=Date.now();a2.set(e,t)}var WF=async e=>{let t=Date.now(),r=a2.get(e)??0;if(t-r<HA)return!0;try{let o=(await rr.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).bearer(e).get(`${ta()}/userinfo`)).status===200;return o&&a2.set(e,t),o}catch{return!1}};p();y();function Qp(e,t="expected value not found"){if(e==null)throw new Error(t);return e}var zF=".phantom.auth",c2=`${zF}.tokens`,Aye=`${zF}.authentication-factors`,Dg="/v1/authentication-keys",Sye=e=>{let t=new s2;return{getUser:()=>Xp(e,t),autoLogIn:()=>Iye(e,t),logIn:r=>GF(e,t,r),isExistingAuthFactor:r=>jF(e,r),getAuthenticationKeys:()=>kye(e,t),getLocalAuthenticationPublicKeys:()=>Tye(e),addAuthFactor:r=>Pye(e,t,r),deleteAuthFactor:r=>_ye(e,t,r),deleteAllAuthFactors:()=>Bye(e,t),subscribe:(r,n)=>t.subscribe(r,n),logOut:()=>Cye(e)}},eT=e=>{let t=e.idToken.split(".");if(t.length!==3)throw new Error("Malformed ID token. Expected 3 period-delimited parts to ID token.");let r;try{let n=qF(t[1]).toString("utf-8"),i=JSON.parse(n);r=fF.parse(i)}catch{throw new Error("Unable to parse ID token payload.")}return{accessToken:e.accessToken,userID:r.sub,email:r.email}},Xp=(e,t)=>{let r=async()=>{let{storage:n,authConfig:i}=e,o=await n.get(c2);if(!o)return null;if(await WF(o.accessToken))return eT(o);if(o.refreshToken)try{let s=await VF(i,o.refreshToken);return await n.set(c2,s),HF(s.accessToken),eT(s)}catch(s){return ae.addBreadcrumb("Failed to refresh access token using refreshToken","Auth","error"),ae.captureError(s,"Auth"),null}return null};return e.runExclusive(async()=>{let n=await r();return t.emit(n),n})},jF=async(e,t)=>{let r=ta(),n=Qp(e.signer,"Signer is required for key-based auth.");try{let i=await n.getAuthenticationPublicKey(t),o=Rg(),s=await n.sign(o,t),{data:a}=await rr.get(`${r}${Dg}`,{params:{token:qp(s)}}),c=B4.safeParse(a);return c.success?(c.data.authenticationKeys??[]).some(l=>l.publicKey===i):!1}catch{return!1}},Eye=async(e,t)=>{if(t.secretIdentifier)return t.secretIdentifier;let r=await Qp(e.signer).getAllSecretIdentifiers();for(let n of r)if(await jF(e,n))return n;throw new Error("Unable to log in with key-based auth. No auth factor found for login.")},GF=async(e,t,r)=>{let{storage:n,authConfig:i}=e,o,{type:s}=r;switch(s){case"key":{let c=await Eye(e,r),u=Qp(e.signer,"Signer is required for key-based auth."),h=Rg(),l=await u.sign(h,c);o=await Ug(i,{type:s,clientJWT:l});break}case"email":{o=await Ug(i,{type:s,prompt:r.prompt,provider:r.provider});break}case"session":{o=await Ug(i,{type:s,existingAccessToken:r.accessToken});break}}await n.set(c2,o);let a=eT(o);return t.emit(a),a},Iye=async(e,t)=>{let r=await Xp(e,t);if(!r)ae.addBreadcrumb("account","Unable to get user from storage or refresh, continuing with full auth flow.","info");else return r;try{return e.signer?await GF(e,t,{type:"key"}):null}catch(n){return ae.captureError(n,"account"),null}},kye=async(e,t)=>({authenticationPublicKeys:(await $F(e,t)).map(n=>n.publicKey)}),$F=async(e,t)=>{let r=ta(),n=await Xp(e,t);if(!n)throw new Error("User not authenticated.");let{data:i}=await rr.bearer(n.accessToken).get(`${r}${Dg}`),o=B4.safeParse(i);if(!o.success)throw new Error("Unable to parse auth factors response.");return o.data.authenticationKeys??[]},Tye=async e=>{try{let t=Qp(e.signer,"Signer is required for key-based auth."),r=await t.getAllSecretIdentifiers(),n={};for(let i of r)n[i]=await t.getAuthenticationPublicKey(i);return n}catch(t){return ae.captureError(t,"account"),{}}},Pye=async(e,t,{secretIdentifier:r})=>{let n=ta(),i=Qp(e.signer,"Signer is required for key-based auth."),o=await Xp(e,t);if(!o)throw new Error("User not authenticated.");let s=Rg(),a=await i.sign(s,r);await rr.bearer(o.accessToken).post(`${n}${Dg}`,{jwt:qp(a)})},_ye=async(e,t,{authenticationPublicKey:r})=>{let n=ta(),i=await Xp(e,t);if(!i)throw new Error("User not authenticated.");await rr.bearer(i.accessToken).delete(`${n}${Dg}/${encodeURIComponent(r)}`)},Bye=async(e,t)=>{let r=ta(),n=e.storage,i=await Xp(e,t);if(!i)throw new Error("User not authenticated.");let o=await $F(e,t);await Promise.all(o.map(s=>rr.bearer(i.accessToken).delete(`${r}${Dg}/${s.id}`))),await n.remove(Aye)},Cye=async({storage:e})=>{await e.remove(c2)};p();y();var Mye=(e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("code");if(!n)throw new Error("No authorization code");return n};p();y();var Rye=(e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("error"),i=r.searchParams.get("error_description");if(n)throw new Error(`${n}: ${i}`,{cause:n});return!1};p();y();var Oye=()=>Al()==="https://api.phantom.app"?qA.prod:qA.staging;p();y();p();y();var YF="@phantom/auth",iu={user:["auth",`${YF}:user`],authFactors:["auth",`${YF}:user-auth-factors`]};var Nye=Ds({minutes:5}),Sd=()=>{let e=qi(),t=iu.user;return Bt({queryKey:t,queryFn:async()=>{let n=await e.autoLogIn();if(!n)throw new Error("Unable to automatically log in with key-based auth.");return n},retryOnMount:!1,gcTime:HA,staleTime:Nye})};p();y();var tT=()=>{let e=qi(),t=iu.authFactors;return Bt({queryKey:t,queryFn:async()=>{let n=await e.getLocalAuthenticationPublicKeys();if(!n)throw new Error("Unable to build local AuthFactors!");let i=[];try{let{authenticationPublicKeys:s=[]}=await e.getAuthenticationKeys();i=s}catch(s){s instanceof Error&&ae.addBreadcrumb("Auth",`Unable to fetch AuthFactors: ${s.message}`,"error")}let o={};for(let[s,a]of Object.entries(n)){let c=i.includes(a);!c&&await e.isExistingAuthFactor(s)||(o[s]={authenticationPublicKey:a,isExistingAuthFactor:c})}return o},retryOnMount:!1})};p();y();p();y();var rT=async e=>{await e.removeQueries({queryKey:iu.user})},nT=async e=>{await e.resetQueries({queryKey:iu.user})},Lg=async e=>{await e.invalidateQueries({queryKey:iu.user})},u2=async e=>{await e.invalidateQueries({queryKey:iu.authFactors})};var Uye=()=>{let e=ve(),t=qi(),r=async({secretIdentifier:n})=>{await t.addAuthFactor({secretIdentifier:n}),await u2(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){ae.addBreadcrumb("Auth",`Could not add auth factor: ${n.secretIdentifier}`,"error");let o;throw i instanceof Error?o=i:o=new Error(`Could not add auth factor: ${n.secretIdentifier}`),ae.captureError(o,"Auth"),o}}})};p();y();var Dye=()=>{let e=ve(),t=qi(),r=async({authenticationPublicKey:n})=>{await t.deleteAuthFactor({authenticationPublicKey:n}),await u2(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){ae.addBreadcrumb("Auth","Could not remove auth factor!","error");let o;throw i instanceof Error?o=i:o=new Error("Could not remove auth factor!"),ae.captureError(o,"Auth"),o}}})};p();y();var Ed=()=>{let{data:e}=Sd();return!!e};p();y();var Lye=()=>{let{data:e}=Sd();return e?.accessToken};p();y();p();y();p();y();var e0=X(wr()),JF=(0,e0.createContext)(null);function Kye({children:e,analytics:t}){return e0.default.createElement(JF.Provider,{value:t},e)}function si(){let e=(0,e0.useContext)(JF);if(!e)throw new Error("useAnalytics must be used within a AnalyticsProvider");return e}p();y();p();y();var Kg=Su(si,e=>new f2(e)),f2=class{#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};p();y();var t0=X(wr()),ZF=(0,t0.createContext)(null);function Fye({children:e,userRepository:t,claimUsernameSigner:r}){return t0.default.createElement(ZF.Provider,{value:{userRepository:t,claimUsernameSigner:r}},e)}function QF(){let e=(0,t0.useContext)(ZF);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}function Ft(){return QF().userRepository}function XF(){return QF().claimUsernameSigner}p();y();p();y();var Fg="@phantom/users",Ln={checkUsernameAvailability(e){return["user",`${Fg}:check-username-availability`,{username:e}]},userProfile(){return["user",`${Fg}:user-profile`]},userProfileAttributeEffect(e){return["user",`${Fg}:user-profile-attribute-effect`,{username:e}]},userSyncedAccounts(){return["user",`${Fg}:user-synced-accounts`]}};var Vye=Ds({days:1}),qye=Ds({minutes:1});function ou(){let e=Ft(),t=Ed(),r=Ln.userProfile();return Bt({enabled:t,queryKey:r,queryFn:async()=>{let i=await e.getUserProfile();if(!i)throw new Error("No user profile.");return i},gcTime:Vye,staleTime:qye})}p();y();p();y();p();y();var r0=(e,t)=>t?`/user/v1/users/${e}/wallet-accounts/${t}`:`/user/v1/users/${e}/wallet-accounts`,Vg=e=>`/user/v1/users/${e}/profile`,iT=e=>`/user/v1/profiles/${e}`,eV=()=>"/user/v1/profiles/creation-check",tV=e=>`/v1/actors-search?query=${encodeURIComponent(e)}`,rV=["seed","seedless","privateKey"],Hye=(e,t)=>{let r=e[0],n=t[0],i=ie.isNetworkID(r),o=ie.isNetworkID(n);return i&&o?ie.compareNetworkID(r,n):i?-1:o?1:0},oT=10,nV=500,qg={seedless:1,seed:2,privateKey:3};p();y();var sT=async e=>{await e.removeQueries({queryKey:Ln.userProfile()})},aT=async e=>{await e.resetQueries({queryKey:Ln.userProfile()})},Id=async e=>{await e.invalidateQueries({queryKey:Ln.userProfile()})},cT=async e=>{await e.removeQueries({queryKey:Ln.userSyncedAccounts()})},Wye=async e=>{await e.resetQueries({queryKey:Ln.userSyncedAccounts()})},ra=async e=>{await e.invalidateQueries({queryKey:Ln.userSyncedAccounts()})};p();y();var l2=O.string().regex(/^https?:\/\/.+$/),d2=O.string(),h2=O.literal("privateKey"),zye=O.object({networkId:Kf,publicKey:vl,address:FB,pathType:Dm.or(h2)}),jye=O.object({networkId:Lf,publicKey:vl,address:wa,pathType:Um.or(h2)}),Gye=O.object({networkId:Uf,publicKey:vl,address:O.string(),pathType:Nm.or(h2)}),$ye=O.object({networkId:Lp,publicKey:vl,address:O.string(),pathType:fI.or(h2)}),Yye=O.union([zye,jye,Gye,$ye]),iV=O.object({accountHash:O.string(),accountOrigin:O.string().regex(/^(seed|privateKey|seedless):(.+)/).catch("readOnly"),name:O.string().nullish().default(null).catch(null),icon:O.union([l2,d2]).nullish().default(null).catch(null),derivationIndex:O.number().nullish().default(null).catch(null),addresses:O.array(Yye).min(1)}),Jye=iV.and(O.object({id:O.string()})),p2=O.object({walletAccounts:O.array(Jye)}),rje=O.record(O.string(),iV);p();y();var n0=e=>{for(let t of rV)if(e.accountOrigin?.split(":")[0]===t)return t;return null},zf=e=>e.accountOrigin?.replace("seed:","")?.replace("privateKey:","")?.replace("seedless:",""),oV=(e=[])=>e.sort((t,r)=>{let n=n0(t),i=n0(r);if(n===null&&i===null)return 0;if(n===null)return 1;if(i===null)return-1;if(qg[n]-qg[i]!==0)return qg[n]-qg[i];let o=zf(t),s=zf(r);if(o===null&&s===null)return 0;if(o===null)return 1;if(s===null)return-1;let a=o.localeCompare(s);return a!==0?a:t.derivationIndex===null&&r.derivationIndex===null?0:t.derivationIndex===null?1:r.derivationIndex===null?-1:t.derivationIndex-r.derivationIndex});p();y();var i0=(i=>(i.PUBLIC="public",i.PRIVATE="private",i.INVISIBLE="invisible",i.HIDDEN="hidden",i))(i0||{}),Zye=Object.values(i0),cV=O.string().brand("ProfileId"),uT=O.object({id:cV,username:O.string(),icon:O.string().nullish(),addresses:O.record(O.string(),O.string()),privacyState:O.nativeEnum(i0).optional().default("public"),biography:O.string().nullish(),phantomJoinDate:O.string().nullish()}),fT=O.string().url().brand("ActorId"),Qye=O.object({id:O.string().optional(),orderedItems:fT.array(),next:O.string().optional()}),sV=O.object({id:O.string().url(),current:Qye.optional(),totalItems:O.number().optional()}),aV=O.object({type:O.string(),value:O.string(),name:O.string()}),Xye=O.object({id:O.string().url().optional(),name:O.string().optional(),type:O.string()}),uV=O.object({id:fT,name:O.string(),preferredUsername:O.string(),manuallyApprovesFollowers:O.boolean(),followers:O.union([sV,O.string().url()]),following:O.union([sV,O.string().url()]),icon:Xye,attachment:O.union([aV,O.array(aV)]).optional(),summary:O.string().nullish(),published:O.string().nullish()}).transform(e=>{let{attachment:t,...r}=e,n={},i=!1,o=!1,s=!1,a=!1;if(t){let c=Array.isArray(t)?t:[t];for(let u of c){if(u.name.endsWith(":address")){let h=eu.safeParse(u.name.replace(":address",""));if(h.success){let l=h.data;n[l]=u.value}}u.name==="requesting"&&(i=u.value==="true"),u.name==="requestedBy"&&(o=u.value==="true"),u.name==="blocking"&&(s=u.value==="true"),u.name==="following"&&(a=u.value==="true")}}return{...r,addresses:n,isSentFollowRequestPending:i,hasPendingFollowRequest:o,isBlocking:s,isFollowing:a}}),fV=O.object({actors:uV.array()}),Hg={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},dje=O.object({type:O.nativeEnum(Hg),imageUrl:O.string().optional(),unicode:O.string().optional()}),lT=O.object({error:O.object({message:O.string()})});var eme=e=>({getUsernameAvailability:t=>tme(t),getUserProfile:()=>rme(e),getUserProfileByUsername:t=>lV(t),getUserProfileByUsernameOrUserProfileId:t=>lV(t),searchForActor:(t,r)=>dme(t,r),setUserProfile:({username:t,addresses:r,icon:n,signedMessages:i,privacyState:o})=>nme(e,{username:t,addresses:r,signedMessages:i,icon:n,privacyState:o}),patchUserProfile:t=>ime(e,t),deleteUserProfile:()=>ome(e),isEligibleToClaim:t=>sme(t),getSyncedAccounts:()=>dT(e),downloadSyncedAccounts:()=>ame(e),uploadSyncedAccounts:t=>cme(e,t),uploadSyncedAccount:t=>ume(e,t),deleteSyncedAccounts:()=>fme(e),deleteSyncedAccount:t=>lme(e,t)}),tme=async e=>{switch((await rr.api().get(iT(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},rme=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:n}=t,i=await rr.api().bearer(n).get(Vg(r)),o=uT.safeParse(i.data);return o.success?o.data:null},lV=async e=>{let t=await rr.api().get(iT(e)),r=uT.safeParse(t.data);return r.success?r.data:null},nme=async({authRepository:e},{username:t,addresses:r,icon:n,signedMessages:i,privacyState:o})=>{let s=await e.getUser();if(!s)throw new Error("User is not logged in, unable to claim username.");let{userID:a,accessToken:c}=s,u=await rr.api().bearer(c).post(Vg(a),{username:t,signedMessages:i,icon:n,addresses:r,privacyState:o});if(u.status===201)return;let h=lT.safeParse(u.data);throw h.success?new Error(h.data.error.message):new Error("Unknown error")},ime=async({authRepository:e},{addresses:t,icon:r,privacyState:n,biography:i})=>{let o=await e.getUser();if(!o)throw new Error("User is not logged in, unable to claim username.");let{userID:s,accessToken:a}=o,c=await rr.api().bearer(a).patch(Vg(s),{addresses:t,icon:r,privacyState:n,biography:i});if(c.status===200)return;ae.captureMessage(`Failed to patch user profile: ${c.status} ${JSON.stringify(c.data)}`,"Auth");let u=lT.safeParse(c.data);throw u.success?new Error(u.data.error.message):new Error("Unknown error")},ome=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await rr.api().bearer(n).delete(Vg(r));return 200<=i.status&&i.status<300},sme=async e=>{try{return(await rr.api().post(eV(),{addresses:e})).status===200}catch{return!1}},dT=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await rr.api().bearer(n).get(r0(r)),o=p2.safeParse(i.data);if(!o.success)throw new Error("Unable to get synced accounts: unable to parse GET /wallet-accounts response.");return{walletAccounts:oV(o.data.walletAccounts)}},ame=async e=>{let{walletAccounts:t}=await dT(e),r=t.reduce((n,i)=>(n[i.accountHash]=i,n),{});return await e.claimUsernameSigner.storeSyncedAccounts(r),!0},dV=(e,t,r)=>rr.api().bearer(e).post(r0(t),r),cme=async(e,t)=>{let{authRepository:r,claimUsernameSigner:n,queryClient:i}=e,o=await r.getUser();if(!o)return ae.addBreadcrumb("Auth","User is not logged in, unable to sync up accounts.","info"),!1;try{let s=t;s||(ae.addBreadcrumb("Auth","Uploading all currently synced accounts...","info"),s=[...(await dT(e)).walletAccounts.reduce((x,A)=>(x.add(A.accountHash),x),new Set)]);let a=await n.getBatchAccountMetadata(s),{userID:c,accessToken:u}=o,h=XE(Object.values(a),oT);for(let l of h)await Promise.all(l.map(g=>dV(u,c,g))),await rC(nV);return await ra(i),ae.addBreadcrumb("Auth",`\u2705 Uploaded synced accounts: ${t?t?.join(" "):"all currently synced accounts"}`,"info"),!0}catch(s){throw ae.addBreadcrumb("Auth",`Unable to sync up accounts: ${t?t?.join(" "):"all currently synced accounts"}`,"info"),ae.captureError(s,"Auth"),s}},ume=async({authRepository:e,claimUsernameSigner:t,queryClient:r},n)=>{let i=await e.getUser();if(!i)return ae.addBreadcrumb("Auth",`User is not logged in, unable to sync up account: ${n}`,"info"),!1;try{ae.addBreadcrumb("Auth",`Syncing account... : ${n}`,"info");let o=await t.getAccountMetadata(n),{userID:s,accessToken:a}=i;return await dV(a,s,o),await ra(r),ae.addBreadcrumb("Auth",`\u2705 Synced account: ${n}`,"info"),!0}catch(o){throw ae.addBreadcrumb("Auth",`Unable to sync up account: ${n}`,"info"),ae.captureError(o,"Auth"),o}},hV=(e,t,r)=>rr.api().bearer(e).delete(r0(t,r.id),r),fme=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to delete all synced accounts.");let{userID:r,accessToken:n}=t,i=await rr.api().bearer(n).get(r0(r)),o=p2.safeParse(i.data);if(!o.success)throw new Error("Unable to delete all synced accounts => unable to parse GET /wallet-accounts response.");let s=XE(o.data.walletAccounts,oT);for(let a of s)await Promise.all(a.map(c=>hV(n,r,c)));return!0},lme=async({authRepository:e},t)=>{let r=await e.getUser();if(!r)throw new Error(`User is not logged in, unable to remove synced account: ${t}`);let{userID:n,accessToken:i}=r,o=await rr.api().bearer(i).get(r0(n)),s=p2.safeParse(o.data);if(!s.success)throw new Error(`Unable to delete synced account [${t}] => unable to parse GET /wallet-accounts response`);let a=s.data.walletAccounts.find(c=>c.accountHash===t);if(!a)return ae.addBreadcrumb("Auth",`Calling deleteSyncedAccount on account that is not synced to begin with: ${t}`,"info"),!1;try{await hV(i,n,a)}catch(c){throw ae.addBreadcrumb("Auth",`Unable to delete synced account: ${t}`,"info"),ae.captureError(c,"Auth"),c}return!0},dme=async(e,t)=>{ae.addBreadcrumb("network","User is searching for actors.","info",{query:e});let r=await rr.api().bearer(t).get(tV(e)),n=fV.safeParse(r.data);return n.success?{actors:n.data.actors}:{actors:[]}};p();y();var hme=new Set([Ln.userProfile()[1],Ln.userSyncedAccounts()[1]]),pme=e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:hme.has(t)};p();y();function yme(){let e=Kg(),t=qi(),r=Ft(),n=XF(),i=ve(),o=async({username:s,addresses:a,icon:c,secretIdentifiers:u,accountIdentifiers:h})=>{if(ae.addBreadcrumb("Auth",`Claiming Username: ${s}.`,"info"),u.length===0)throw new Error("Unable to log in to claim a username. Select a secret identifier to use as an auth factor.");ae.addBreadcrumb("Auth","Logging in with first auth factor","info");let l=await t.logIn({type:"key",secretIdentifier:u[0]});for(let x of u.slice(1))ae.addBreadcrumb("Auth","Adding additional auth factor","info"),await t.addAuthFactor({secretIdentifier:x});ae.addBreadcrumb("Auth","Signing over messages","info");let g=await n.signMessages(s);ae.addBreadcrumb("Auth","Creating user profile to claim username","info"),await r.setUserProfile({username:s,addresses:a,icon:c,signedMessages:g,privacyState:"public"}),ae.addBreadcrumb("Auth","Uploading Synced Accounts","info"),await r.uploadSyncedAccounts(h),ae.addBreadcrumb("Auth","\u2705 Username Claimed!","info"),await nT(i),await aT(i),await Lg(i),await Id(i),e.onClaimFlowComplete(s,l.userID)};return Ae({mutationFn:async s=>{try{return await o(s)}catch(a){ae.addBreadcrumb("Auth","Could not claim username","error");let c;throw a instanceof Error?c=a:c=new Error("Unable to claim username"),ae.captureError(c,"Auth"),c}}})}p();y();function mme(e){let t=Kg(),r=Ft(),n=Ln.checkUsernameAvailability(e);return Bt({enabled:!!e,queryKey:n,queryFn:async()=>{let s=await r.getUsernameAvailability(e);return t.onCheckAvailability(e,s),s}})}p();y();var gme=Ds({days:1}),bme=Ds({minutes:1}),pV=e=>{let t=Ft(),r=Ed();return Bt({enabled:r,queryKey:Ln.userSyncedAccounts(),queryFn:async()=>(await t.getSyncedAccounts()).walletAccounts,gcTime:gme,staleTime:bme,select:e})};p();y();var xme=()=>{let e=ve(),t=qi(),r=Ft();return Ae({mutationFn:async()=>{await r.deleteSyncedAccounts(),await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),await cT(e),await sT(e),await rT(e),await ra(e),await Id(e),await Lg(e)}})};p();y();var wme=()=>{let e=ve(),t=Ft(),r=async n=>{await t.patchUserProfile(n),await Id(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){ae.addBreadcrumb("Auth",`Could not update user profile: ${JSON.stringify(n)}`,"error");let o;throw i instanceof Error?o=i:o=new Error("Could not update user profile!"),ae.captureError(o,"Auth"),o}}})};p();y();p();y();var vme=()=>{let e=ve(),t=Ft(),r=async n=>{Array.isArray(n)?await t.uploadSyncedAccounts(n):await t.uploadSyncedAccount(n),await ra(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){let o=Array.isArray(n)?n.join(" "):n;ae.addBreadcrumb("Auth",`Could not add synced account: ${o}`,"error");let s;throw i instanceof Error?s=i:s=new Error("Could not add synced account!"),ae.captureError(s,"Auth"),s}}})};p();y();var Ame=()=>{let e=ve(),t=Ft(),r=async n=>{Array.isArray(n)?await Promise.all(n.map(i=>t.deleteSyncedAccount(i))):await t.deleteSyncedAccount(n),await ra(e)};return Ae({mutationFn:async n=>{try{return await r(n)}catch(i){let o=Array.isArray(n)?n.join(" "):n;ae.addBreadcrumb("Auth",`Could not remove synced account: ${o}`,"error");let s;throw i instanceof Error?s=i:s=new Error("Could not remove synced account!"),ae.captureError(s,"Auth"),s}}})};p();y();var Sme=()=>{let{data:e}=ou(),t=px(),r=e?.username;return Bt({queryKey:Ln.userProfileAttributeEffect(r),queryFn:async()=>(r&&(va.setSubjectAttributes({username:r}),await t()),!0)}),r};p();y();var yV=X(wr());var Eme=/^https?:\/\/.+$/,Ime=()=>{let{data:e}=ou();return(0,yV.useMemo)(()=>mV(e),[e])},mV=e=>{if(!e?.icon)return{type:Hg.Default};let t=e.icon;return t.match(Eme)?{type:Hg.Image,imageUrl:t}:{type:Hg.Emoji,unicode:t}};p();y();var gV=X(wr());var kme=()=>{let{data:e}=ou();return(0,gV.useMemo)(()=>e?.privacyState??"public",[e?.privacyState])};p();y();var bV=X(wr());var Tme=()=>{let{data:e}=ou();return(0,bV.useMemo)(()=>e?.addresses,[e?.addresses])};p();y();p();y();var xV=X(wr());var Pme=0,_me=e=>e!==null?e.split("@")[Pme]:null,Bme=async(e,t)=>{let r=await e.getUser();if(!r)throw new Error("no user");let n=await t.getUserProfile();return{userID:r.userID,username:n?.username??null,email:_me(r.email??null)}},Cme=()=>{let e=qi(),t=Ft(),{data:r={}}=tT();return(0,xV.useCallback)(async()=>{try{return{...await Bme(e,t),authFactors:r}}catch{return{userID:null,username:null,email:null,authFactors:r}}},[r,e,t])};p();y();var Mme=Su(si,e=>new y2(e)),y2=class{#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};p();y();p();y();p();y();p();y();var m2=(e,t)=>{let r=Qs(e,t);switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return gi.getDisplayName(r);default:return}};var wV={badge:(e,t,r)=>t.filter(Nf).length<=1?"":m2(e,r)??"",showAddressTypeExplainer:e=>e.filter(Nf).length>1,addressTooltipNetworkName:(e,t,r)=>r.filter(Nf).length>=2?m2(e,t)??ie.getChainName(e):ie.getChainName(e)};p();y();var vV={badge:(e,t)=>{switch(e){case"eip155:41454":case"eip155:10143":return ie.getNetworkDefinition(e).shortName;case"eip155:143":return}},networkNameOverride:()=>"Monad"};var Ome=new Pg({solana:{},ethereum:{},polygon:{},base:{},monad:vV,bitcoin:wV,sui:{}}),Wg=v4(Ome);p();y();var gYe=O.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."});p();y();p();y();var wt=(s=>(s.Seed="seed",s.PrivateKey="privateKey",s.Ledger="ledger",s.SeedVault="seedVault",s.ReadOnly="readOnly",s.Seedless="seedless",s))(wt||{}),Nme=O.object({derivationIndex:O.number(),addresses:O.array(O.object({pathType:O.union([Um,Dm]),value:O.string()})),publicKeys:O.array(O.object({pathType:Nm,value:O.string()}))}),Za=class extends Error{constructor(){super(...arguments);this.message="No account exists in storage for identifier"}},kd=class extends Error{constructor(){super(...arguments);this.message="No account exists in storage for identifier"}},jf=class extends Error{constructor(){super(...arguments);this.message="Address type not found or incompatible with account"}},zg=class extends Error{constructor(){super(...arguments);this.message="Hardware wallet account does not have known secr*ts"}},jg=class extends Error{constructor(){super(...arguments);this.message="Read only account does not have known secr*ts"}},Gg=class extends Error{constructor(){super(...arguments);this.message="Invalid configuration for read only account"}},Td=class extends Error{constructor(){super(...arguments);this.message="Seed already exists in storage"}},su=class extends Error{constructor(){super(...arguments);this.message="No seed exists in storage for identifier"}},$g=class extends Error{constructor(){super(...arguments);this.message="The derivation index is missing or invalid"}},Yg=class extends Error{constructor(){super(...arguments);this.message="Private key already exists in storage"}},Pd=class extends Error{constructor(){super(...arguments);this.message="No private key exists in storage for identifier"}};var Qa=class extends Error{constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},g2=class extends Error{constructor(){super(...arguments);this.message="Vault already stores a seedless account"}},Ume=O.union([O.literal("unonboarded"),O.literal("unable-to-load-accounts")]),Dme=O.union([O.literal("invalid-identifier"),O.literal("fetch-integrity-storage-error"),O.literal("fetch-entropy-storage-error"),O.literal("fetch-pk-storage-error"),O.literal("invalid-entropy"),O.literal("invalid-entropy-bip-39"),O.literal("invalid-checksum-bits"),O.literal("invalid-entropy-bits"),O.literal("invalid-checksum"),O.literal("invalid-entropy-length-less-than-twelve"),O.literal("invalid-entropy-length-more-than-twenty-four"),O.literal("invalid-entropy-length-wrong-word"),O.literal("invalid-pk-address-type"),O.literal("invalid-pk-identifier"),O.literal("invalid-pk"),O.literal("internal-error")]),Lme=O.literal("safely-onboarded"),Kme=O.union([O.object({status:Ume,isOnboarded:O.literal(!1),reonboardingNeeded:O.literal(!1)}),O.object({status:Dme,isOnboarded:O.literal(!0),reonboardingNeeded:O.literal(!0)}),O.object({status:Lme,isOnboarded:O.literal(!0),reonboardingNeeded:O.literal(!1)})]);var Fme=(e,t,r,n)=>{let i=[];for(let o of t){let s=ie.getChainID(o);if(n.includes(s))for(let a of ie[s].addressTypes){if(!r.includes(a))continue;let c=e.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":case"bip44_ed25519":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}default:be(c)}}}return i},Vme=(e,t,r,n)=>{let i=[];for(let o of t){let s=ie.getChainID(o);if(n.includes(s))for(let a of ie[s].addressTypes){if(!r.includes(a))continue;let c=e.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":case"bip44_ed25519":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}default:be(c)}}}return i},qme=(e,t,r,n)=>{let i=[];for(let o of t){let s=ie.getChainID(o);if(n.includes(s))for(let a of ie[s].addressTypes)r.includes(a)&&e.chainType===a&&i.push({networkID:o,addressType:a,address:e.address})}return i},Hme=(e,t,r,n)=>{let i=[];for(let o of t){let s=ie.getChainID(o);if(n.includes(s)){for(let a of ie[s].addressTypes)if(r.includes(a)&&e.chainType===a)switch(e.chainType){case"eip155":case"solana":case"bip44_ed25519":{i.push({networkID:o,addressType:a,address:e.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:e.publicKey,address:e.addresses[o]});break}default:be(e)}}}return i},Wme=(e,t,r,n)=>{let i=[];for(let o of t){let s=ie.getChainID(o);if(n.includes(s)){for(let a of ie[s].addressTypes)if(r.includes(a))for(let[c,u]of Object.entries(e.addresses))c===a&&i.push({networkID:o,addressType:a,address:u})}}return i},Jg=(e,t,r,n,i,o)=>{let s;switch(o?s=Object.values(i.setting):s=t,s=s.sort((a,c)=>ie.compareNetworkID(a,c)),e.type){case"seedless":case"seed":return Fme(e,s,r,n);case"ledger":return Vme(e,s,r,n);case"seedVault":return qme(e,s,r,n);case"privateKey":return Hme(e,s,r,n);case"readOnly":return Wme(e,s,r,n)}};p();y();p();y();var o0="Trying to find a selected account, but there no accounts in the vault.",Zg="Missing ChainAvailability.",AV=(e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,hT=new Error("The current account group has no valid bitcoin address"),pT=new Error("The current account group has no valid EIP-155 address"),yT=new Error("The current account group has no valid solana address"),SV=new Error("The current account group has no valid sui address"),EV=new Error("The current account group has no valid address or the the chain type was unsupported"),RYe=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),OYe=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");p();y();var zme=[".phantom-labs.account.accountMetadata","developerMode","networkSetting",".phantom-labs.account.selectedAccount","termsHaveBeenAcknowledged2"];var LYe=new Error("Failed to clear selected account index");async function mT(e){try{let t=await e.get(".phantom-labs.account.selectedAccount");return t?.version===2?t.identifier:null}catch{throw jme}}var jme=new Error("Failed to get selected account identifier");async function Hi(e,t){try{let r={version:2,identifier:t};return await e.set(".phantom-labs.account.selectedAccount",r)}catch{throw Gme}}var Gme=new Error("Failed to set selected account identifier");var au=async(e,t)=>{if(e.length===0)throw new Error(o0);let r=await mT(t),n=e.find(i=>i.identifier===r);return n||(await Hi(t,e[0].identifier),e[0])};p();y();var gT=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Change":case"bip44Ethereum":return!0;case"bip44":case"deprecated":case"bip44Root":case"bip44RootEthereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return!1}};p();y();var $me=({pathType:e,index:t})=>{switch(e){case"bip44RootEthereum":case"bip44Root":return"root-derivation-path-group";case"bip44Change":case"bip44Ethereum":case"bip44Sui":case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return`recommended-group:index-${t}`;case"bip44EthereumSecondary":case"bip44":return`secondary-group:index-${t}`;case"bip44EthereumTertiary":case"deprecated":return`tertiary-group:index-${t}`}};p();y();p();y();var Yme=e=>e==null?!1:["ledger","seedVault"].includes(e);p();y();function IV(e,t){let n=(e?.addresses??[]).find(({addressType:i})=>i===t);if(!e?.addresses||!n)switch(t){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw hT;case"eip155":throw pT;case"solana":throw yT;case"bip44_ed25519":throw SV;default:throw EV}return n}function Jme(e,t){return IV(e,t)?.address}var b2=e=>{switch(e.type){case"seedless":case"seed":case"privateKey":return!0;case"ledger":case"seedVault":case"readOnly":return!1;default:be(e)}};p();y();var Zme=e=>{let t=e.toString();return Bg(t)};p();y();function Qme(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}p();y();function Xme(e){return[e.endsWith(".eth")]}p();y();var ege=async(e,t,r)=>{let i=(await e.fetchAllAccounts()).find(s=>{switch(s.type){case"seed":case"seedless":return s.seedIdentifier===r;case"privateKey":return s.privateKeyIdentifier===r;case"ledger":case"seedVault":case"readOnly":return!1;default:be(s)}});if(!i)throw new Error("Unable to find account to sign client JWT with.");let o=await e.sign(i.identifier,{isJWT:!0,data:t});if(o.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in o)||!o.signedJWT)throw new Error("No JWT from vault signing.");return o.signedJWT};p();y();var tge=async e=>[...(await e.fetchAllAccounts()).reduce((i,o)=>{switch(o.type){case"seed":case"seedless":{i.add(o.seedIdentifier);break}case"privateKey":{i.add(o.privateKeyIdentifier);break}case"ledger":case"seedVault":case"readOnly":break;default:be(o);break}return i},new Set)];p();y();var KT=X(Us());p();y();p();y();function ai(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(T.NODE_ENV!=="production"){var i=uge[e],o=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function s0(e){return!!e&&!!e[To]}function Bd(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===fge}(e)||Array.isArray(e)||!!e[RV]||!!e.constructor[RV]||TT(e)||PT(e))}function Xg(e,t,r){r===void 0&&(r=!1),c0(e)===0?(r?Object.keys:RT)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function c0(e){var t=e[To];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:TT(e)?2:PT(e)?3:0}function AT(e,t){return c0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function rge(e,t){return c0(e)===2?e.get(t):e[t]}function OV(e,t,r){var n=c0(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}function nge(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function TT(e){return age&&e instanceof Map}function PT(e){return cge&&e instanceof Set}function _d(e){return e.o||e.t}function _T(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=lge(e);delete t[To];for(var r=RT(t),n=0;n<r.length;n++){var i=r[n],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function BT(e,t){return t===void 0&&(t=!1),CT(e)||s0(e)||!Bd(e)||(c0(e)>1&&(e.set=e.add=e.clear=e.delete=ige),Object.freeze(e),t&&Xg(e,function(r,n){return BT(n,!0)},!0)),e}function ige(){ai(2)}function CT(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Xa(e){var t=dge[e];return t||ai(18,e),t}function kV(){return T.NODE_ENV==="production"||a0||ai(0),a0}function bT(e,t){t&&(Xa("Patches"),e.u=[],e.s=[],e.v=t)}function x2(e){ST(e),e.p.forEach(oge),e.p=null}function ST(e){e===a0&&(a0=e.l)}function TV(e){return a0={p:[],l:a0,h:e,m:!0,_:0}}function oge(e){var t=e[To];t.i===0||t.i===1?t.j():t.O=!0}function xT(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||Xa("ES5").S(t,e,n),n?(r[To].P&&(x2(t),ai(4)),Bd(e)&&(e=w2(t,e),t.l||v2(t,e)),t.u&&Xa("Patches").M(r[To].t,e,t.u,t.s)):e=w2(t,r,[]),x2(t),t.u&&t.v(t.u,t.s),e!==NV?e:void 0}function w2(e,t,r){if(CT(t))return t;var n=t[To];if(!n)return Xg(t,function(o,s){return PV(e,n,t,o,s,r)},!0),t;if(n.A!==e)return t;if(!n.P)return v2(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=_T(n.k):n.o;Xg(n.i===3?new Set(i):i,function(o,s){return PV(e,n,i,o,s,r)}),v2(e,i,!1),r&&e.u&&Xa("Patches").R(n,r,e.u,e.s)}return n.o}function PV(e,t,r,n,i,o){if(T.NODE_ENV!=="production"&&i===r&&ai(5),s0(i)){var s=w2(e,i,o&&t&&t.i!==3&&!AT(t.D,n)?o.concat(n):void 0);if(OV(r,n,s),!s0(s))return;e.m=!1}if(Bd(i)&&!CT(i)){if(!e.h.F&&e._<1)return;w2(e,i),t&&t.A.l||v2(e,i)}}function v2(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&BT(t,r)}function wT(e,t){var r=e[To];return(r?_d(r):e)[t]}function _V(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function ET(e){e.P||(e.P=!0,e.l&&ET(e.l))}function vT(e){e.o||(e.o=_T(e.t))}function IT(e,t,r){var n=TT(t)?Xa("MapSet").N(t,r):PT(t)?Xa("MapSet").T(t,r):e.g?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:kV(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},c=a,u=kT;s&&(c=[a],u=Qg);var h=Proxy.revocable(c,u),l=h.revoke,g=h.proxy;return a.k=g,a.j=l,g}(t,r):Xa("ES5").J(t,r);return(r?r.A:kV()).p.push(n),n}function sge(e){return s0(e)||ai(22,e),function t(r){if(!Bd(r))return r;var n,i=r[To],o=c0(r);if(i){if(!i.P&&(i.i<4||!Xa("ES5").K(i)))return i.t;i.I=!0,n=BV(r,o),i.I=!1}else n=BV(r,o);return Xg(n,function(s,a){i&&rge(i.t,s)===a||OV(n,s,t(a))}),o===3?new Set(n):n}(e)}function BV(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return _T(e)}var CV,a0,MT=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",age=typeof Map<"u",cge=typeof Set<"u",MV=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",NV=MT?Symbol.for("immer-nothing"):((CV={})["immer-nothing"]=!0,CV),RV=MT?Symbol.for("immer-draftable"):"__$immer_draftable",To=MT?Symbol.for("immer-state"):"__$immer_state";var uge={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},fge=""+Object.prototype.constructor,RT=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,lge=Object.getOwnPropertyDescriptors||function(e){var t={};return RT(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},dge={},kT={get:function(e,t){if(t===To)return e;var r=_d(e);if(!AT(r,t))return function(i,o,s){var a,c=_V(o,s);return c?"value"in c?c.value:(a=c.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!Bd(n)?n:n===wT(e.t,t)?(vT(e),e.o[t]=IT(e.A.h,n,e)):n},has:function(e,t){return t in _d(e)},ownKeys:function(e){return Reflect.ownKeys(_d(e))},set:function(e,t,r){var n=_V(_d(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.P){var i=wT(_d(e),t),o=i?.[To];if(o&&o.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(nge(r,i)&&(r!==void 0||AT(e.t,t)))return!0;vT(e),ET(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return wT(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,vT(e),ET(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=_d(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){ai(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ai(12)}},Qg={};Xg(kT,function(e,t){Qg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Qg.deleteProperty=function(e,t){return T.NODE_ENV!=="production"&&isNaN(parseInt(t))&&ai(13),Qg.set.call(this,e,t,void 0)},Qg.set=function(e,t,r){return T.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&ai(14),kT.set.call(this,e[0],t,r,e[0])};var hge=function(){function e(r){var n=this;this.g=MV,this.F=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var c=n;return function(E){var C=this;E===void 0&&(E=a);for(var M=arguments.length,N=Array(M>1?M-1:0),R=1;R<M;R++)N[R-1]=arguments[R];return c.produce(E,function(V){var q;return(q=o).call.apply(q,[C,V].concat(N))})}}var u;if(typeof o!="function"&&ai(6),s!==void 0&&typeof s!="function"&&ai(7),Bd(i)){var h=TV(n),l=IT(n,i,void 0),g=!0;try{u=o(l),g=!1}finally{g?x2(h):ST(h)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(E){return bT(h,s),xT(E,h)},function(E){throw x2(h),E}):(bT(h,s),xT(u,h))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===NV&&(u=void 0),n.F&&BT(u,!0),s){var x=[],A=[];Xa("Patches").M(i,u,x,A),s(x,A)}return u}ai(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var h=arguments.length,l=Array(h>1?h-1:0),g=1;g<h;g++)l[g-1]=arguments[g];return n.produceWithPatches(u,function(x){return i.apply(void 0,[x].concat(l))})};var s,a,c=n.produce(i,o,function(u,h){s=u,a=h});return typeof Promise<"u"&&c instanceof Promise?c.then(function(u){return[u,s,a]}):[c,s,a]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Bd(r)||ai(8),s0(r)&&(r=sge(r));var n=TV(this),i=IT(this,r,void 0);return i[To].C=!0,ST(n),i},t.finishDraft=function(r,n){var i=r&&r[To];T.NODE_ENV!=="production"&&(i&&i.C||ai(9),i.I&&ai(10));var o=i.A;return bT(o,n),xT(void 0,o)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!MV&&ai(20),this.g=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var s=Xa("Patches").$;return s0(r)?s(r,n):this.produce(r,function(a){return s(a,n)})},e}(),Po=new hge,OT=Po.produce,NJe=Po.produceWithPatches.bind(Po),UJe=Po.setAutoFreeze.bind(Po),DJe=Po.setUseProxies.bind(Po),LJe=Po.applyPatches.bind(Po),KJe=Po.createDraft.bind(Po),FJe=Po.finishDraft.bind(Po),VJe=OT;var NT=new Error("Failed to add user account metadata to storage"),eb=new Error("Could not find account metadata in storage");async function UT(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw eb;let i=n.accounts[t];i?i.name=r:(i={name:r},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function DT(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw eb;let i=n.accounts[t];i?i.icon=r:(i={icon:r,name:Eu.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function LT(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw eb;let i=n.accounts[t];i?i.balance=r:(i={balance:r,name:Eu.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function ec(e,t,r){try{let n=await e.get(".phantom-labs.account.accountMetadata");n?n.accounts[t]=r:n={version:1,accounts:{[t]:r}},await e.set(".phantom-labs.account.accountMetadata",n)}catch{throw NT}}async function tb(e,t){try{let r=await e.get(".phantom-labs.account.accountMetadata");r?r.accounts=OT(r.accounts,n=>{for(let[i,o]of Object.entries(t))n[i]||(n[i]={name:""}),n[i].name=o.name,n[i].icon=o.icon??n[i].icon,n[i].balance=o.balance??n[i].balance,n[i].connectedDevices=o.connectedDevices??n[i].connectedDevices}):r={version:1,accounts:{...t}},await e.set(".phantom-labs.account.accountMetadata",r)}catch{throw NT}}async function rb(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");r||(r={version:1,accounts:{}});let n=r.accounts[t];return n||(n={name:Eu.t("onboardingImportAccountsAccountName",{walletIndex:""})}),n}async function nb(e){let t=await e.get(".phantom-labs.account.accountMetadata");return t?t.accounts:{}}async function ib(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");if(!r)throw eb;delete r.accounts[t],await e.set(".phantom-labs.account.accountMetadata",r)}p();y();p();y();var u0=async e=>{let t=await e.get("networkSetting");return t?pge(e,t):vd},pge=async(e,t)=>{let r=!1;yge(t)&&(r=!0);let n=t.setting.solana;n&&ie.isMainnetNetworkID(n)&&(t.setting.solana=FA,r=!0);let i=t.setting.eip155;return i&&ie.isMainnetNetworkID(i)&&(t.setting.eip155=VA,r=!0),r&&await e.set("networkSetting",t),t},yge=e=>{let t=!1,r=e.setting.eip155;return r&&(r.toString()==="eip155:5"&&(e.setting.eip155=Kt.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting.eip155=Kt.Polygon.Amoy,t=!0)),t};var Cd=async(e,t,r)=>{let n=await e.fetchAllAccounts();if(n.length===0)return[];let i=t.get("developerMode"),o=u0(t),s=nb(t),[a,c,u]=await Promise.all([i,o,s]);return n.map(h=>{let l=u[h.identifier];l||(l={name:Eu.t("onboardingImportAccountsAccountName",{walletIndex:""})});let g={name:l.name,icon:l.icon,identifier:h.identifier,addresses:Jg(h,r.enabledMainnetOnlyNetworkIDs,r.enabledAddressTypes,r.enabledChainIDs,c??vd,a?.isDeveloperMode??!1)};return h.type==="seed"?{...g,type:"seed",seedIdentifier:h.seedIdentifier,isReadOnly:!1}:h.type==="seedless"?{...g,type:"seedless",seedIdentifier:h.seedIdentifier,isReadOnly:!1}:h.type==="readOnly"?{...g,type:"readOnly",isReadOnly:!0}:h.type==="privateKey"?{...g,privateKeyIdentifier:h.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...g,type:h.type,isReadOnly:!1}})};var UV=(e,t)=>{let r=Math.floor(Date.now()/1e3);return`Signing this message to claim username ${e} | Public Key: ${t} | Time: ${r}`},DV=(e,t)=>{let r=e.addresses.map(n=>{let i;switch(t.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":i=`0x${Buffer.from(t.publicKey).toString("hex")}`;break;case"solana":i=`0x${Buffer.from(KT.default.decode(t.address)).toString("hex")}`;break;case"eip155":i=t.address;break;case"bip44_ed25519":i=t.address;break}return{networkId:n.networkID,pathType:"privateKey",publicKey:i,address:n.address}});return r.length===0?null:{accountHash:e.identifier,accountOrigin:`privateKey:${e.privateKeyIdentifier}`,derivationIndex:-1,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,addresses:r}},LV=(e,t)=>{let r=[];for(let n of e.addresses){let i=t.chains[n.addressType];if(!i)continue;let o,s;switch(i.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{o=`0x${Buffer.from(i.publicKey).toString("hex")}`,s=i.addresses["bip122:000000000019d6689c085ae165831e93"];break}case"solana":o=`0x${Buffer.from(KT.default.decode(i.address)).toString("hex")}`,s=i.address;break;case"eip155":o=i.address,s=i.address;break;case"bip44_ed25519":throw new zt("claim username")}let a=null;switch(!0){case(pI(i.pathType)&&ie.isSolanaNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break;case(hI(i.pathType)&&ie.isEVMNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break;case(dI(i.pathType)&&ie.isBitcoinNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break}a&&r.push(a)}return{accountHash:e.identifier,accountOrigin:e.type==="seed"?`seed:${e.seedIdentifier}`:`seedless:${e.seedIdentifier}`,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,derivationIndex:t.derivationIndex,addresses:r}},mge=e=>{let t=l2.safeParse(e);if(t.success)return{type:"image",imageUrl:t.data};let r=d2.safeParse(e);return r.success?{type:"emoji",unicode:r.data}:{type:"default"}},gge=async(e,t)=>{let r=Object.entries(t).reduce((n,[i,o])=>(n[i]={name:o.name??"",icon:mge(o.icon)},n),{});await tb(e,r)},bge=(e,t)=>({signMessages:async r=>{let n=[],i=await wd(t),o=await Cd(e,t,i);for(let s of o){if(!(s.type==="seed"||s.type==="privateKey"||s.type==="seedless"))continue;let a=s.identifier,c=s.addresses.find(l=>l.addressType==="solana");if(!c||c.addressType!=="solana")continue;let u=UV(r,c.address),h=await e.sign(a,{signingType:"message",chainType:c.addressType,message:UV(r,c.address)});h.status!=="error"&&n.push({networkID:c.networkID,address:c.address,message:u,signature:h.signature})}return n},getBatchAccountMetadata:async r=>{let n=new Set(r),i=await wd(t),o=await Cd(e,t,i),s=(await e.fetchAllAccounts()).reduce((c,u)=>(c[u.identifier]=u,c),{}),a={};for(let c of o){if(!b2(c))continue;let u=s?.[c.identifier]??null,h=null;switch(c.type){case"seedless":case"seed":n.has(c.identifier)&&u.type===c.type&&(h=LV(c,u));break;case"privateKey":n.has(c.identifier)&&u.type===c.type&&(h=DV(c,u));break}h&&(a[c.identifier]=h)}return a},getAccountMetadata:async r=>{let n=await wd(t),i=await Cd(e,t,n),o=(await e.fetchAllAccounts()).reduce((u,h)=>(u[h.identifier]=h,u),{}),s=i.find(u=>u.identifier===r)??null;if(!s)throw new Error(`Unable to get account metadata for account: ${r}`);if(!b2(s))throw new Error(`Syncing is not supported for account type: ${s.type}`);let a=o?.[s.identifier]??null,c=null;switch(s.type){case"seedless":case"seed":a.type===s.type&&(c=LV(s,a));break;case"privateKey":a.type===s.type&&(c=DV(s,a));break}if(!c)throw new Error(`Unable to construct metadata to sync for account: ${s.identifier}`);return c},storeSyncedAccounts:async r=>(ae.addBreadcrumb("Auth",`Storing ${Object.entries(r).length} synced accounts`,"info"),await gge(t,r),ae.addBreadcrumb("Auth","\u2705 Stored Synced Account metadata","info"),await e.syncAccounts(r),ae.addBreadcrumb("Auth","\u2705 Stored Sync Accounts in Vault","info"),!0)});p();y();var xge=(e,t)=>e.filter(r=>{switch(r.type){case"seed":case"seedless":return r.seedIdentifier===t;case"privateKey":return r.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1;default:be(r);return}});p();y();function wge(e){return Wg.get(e).networkNameOverride?.(e)??ie.getNetworkName(e,!0)}p();y();function vge(e,t,r){return Wg.get(e).addressTooltipNetworkName?.(e,t,r)??ie.getNetworkName(e)}p();y();p();y();function f0(e,t){return typeof e=="string"?e===t:e.length===t.length&&e.every((r,n)=>r===t[n])}p();y();var cb=X(kq());function Ybe(e){return e=(0,cb.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Nd(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case"bip44_ed25519":throw new zt("deserialize vault account");default:be(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Nd(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}case"bip44_ed25519":throw new zt("deserialize vault account");default:be(n)}}break;case"seedVault":break;default:be(t)}}),e}function Jbe(e){return e=(0,cb.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case"bip44_ed25519":throw new zt("serialize vault account");default:be(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}case"bip44_ed25519":throw new zt("serialize vault account");default:be(n)}}break;case"seedVault":break;default:be(t)}}),e}function Tq(e){return e=(0,cb.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&Nd(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))if(t.version===1&&Nd(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case"seedVault":break;default:be(t)}}),e}function Pq(e){return e=(0,cb.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case"seedVault":break;default:be(t)}}),e}function Nd(e){return!!e&&typeof e=="object"&&e3("type",e)&&typeof e.type=="string"&&e3("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}p();y();var na=".phantom-labs.vault";var C2=`${na}.accounts`,y0=`${na}.secrets`,M2=e=>`${na}.privateKey.${e}`,R2=e=>`${na}.seed.${e}`,O2=e=>`${na}.seedless.${e}`,B2=`${na}.integrityCheck`;async function mr(e){return(await Dq(e))?.accounts??[]}async function Cq(e){let t=await _o(e),r=new Set(t.seedIdentifiers),n=await mr(e);for(let o of n)o.type==="seed"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function N2(e){let t=await _o(e),r=new Set(t.seedlessIdentifiers),n=await mr(e);for(let o of n)o.type==="seedless"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function _o(e){let t=await e.generalStorage.get(y0);return{privateKeyIdentifiers:t?.privateKeyIdentifiers??[],seedIdentifiers:t?.seedIdentifiers??[],seedlessIdentifiers:t?.seedlessIdentifiers??[]}}async function Mq(e,t){let r=R2(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let i=O2(t);n=await e.secretsStorage.getSecureValue(i)}if(n==null)throw new su;return Nd(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}async function m0(e,t){let r=M2(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new Pd;return Nd(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}async function Ei(e,t,r=!0){let n=await Dq(e);if(!n)n={version:1,accounts:[t]};else{let i=n.accounts,o=Qbe(i,t);if(o.length>0){if(!r)throw new Qa(o[0].type,t.type);let s=Bq(t.type);for(let c of o)if(Bq(c.type)>=s)throw new Qa(c.type,t.type);let a=o.map(c=>c.identifier);return i=i.filter(c=>!a.includes(c.identifier)),i.push(t),await ia(e,i),await eP(e)}else i.push(t);n.accounts=i}return ia(e,n.accounts)}async function ia(e,t){let r={version:1,accounts:t};return e.generalStorage.set(C2,Pq(r))}async function Rq(e,t){let r=M2(t.identifier);await e.secretsStorage.setSecureValue(r,t),await txe(e,t.identifier)}async function Oq(e,t){let r=R2(t.identifier);await e.secretsStorage.setSecureValue(r,t),await Xbe(e,t.identifier)}async function Nq(e,t){let r=O2(t.identifier);await e.secretsStorage.setSecureValue(r,t),await exe(e,t.identifier)}async function eP(e){let t=await mr(e),r=new Set,n=new Set;for(let a of t)switch(a.type){case"seed":case"seedless":r.add(a.seedIdentifier);break;case"privateKey":n.add(a.privateKeyIdentifier);break;case"ledger":case"readOnly":case"seedVault":break;default:be(a)}let i=await _o(e),o={seedIdentifiers:i.seedIdentifiers.filter(a=>r.has(a)),seedlessIdentifiers:i.seedlessIdentifiers.filter(a=>r.has(a)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(a=>n.has(a))},s={seedIdentifiers:i.seedIdentifiers.filter(a=>!r.has(a)),seedlessIdentifiers:i.seedlessIdentifiers.filter(a=>!r.has(a)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(a=>!n.has(a))};await e.generalStorage.set(y0,{version:1,...o}),await e.secretsStorage.removeSecureValue([...s.seedIdentifiers.map(a=>R2(a)),...s.seedlessIdentifiers.map(a=>O2(a)),...s.privateKeyIdentifiers.map(a=>M2(a))])}async function tP(e,t){t?await e.secretsStorage.setSecureValue(B2,t):await e.secretsStorage.removeSecureValue(B2)}async function rP(e){return e.secretsStorage.getSecureValue(B2)}async function Uq(e){await e.generalStorage.remove(C2);let t=await _o(e),r=t.privateKeyIdentifiers.map(o=>M2(o)),n=t.seedIdentifiers.map(o=>R2(o)),i=t.seedlessIdentifiers.map(o=>O2(o));await e.secretsStorage.removeSecureValue([...r,...i,...n]),await e.generalStorage.remove(y0),await e.secretsStorage.removeSecureValue(B2),await e.secureCache.clear()}async function Dq(e){let t=await e.generalStorage.get(C2);return t?(t=Tq(t),t=await Zbe(e,t),t):null}async function Zbe(e,t){let r=!1;return t.accounts.forEach(n=>{switch(n.type){case"privateKey":{r=_q(n)||r;break}case"readOnly":break;case"ledger":case"seed":case"seedless":Object.values(n.chains).forEach(i=>{r=_q(i)||r});break;case"seedVault":break;default:be(n)}}),r&&await ia(e,t.accounts),t}function _q(e){let t=!1;switch(e.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Object.values(un).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=oo({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}function Qbe(e,t){let r=[],n=[];switch(t.type){case"seed":case"seedless":case"ledger":{Object.values(t.chains).forEach(o=>{switch(o.chainType){case"eip155":case"solana":{n.push(o.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(o.publicKey);break}default:be(o)}});break}case"readOnly":{Object.values(t.addresses).forEach(o=>{n.push(o)});break}case"privateKey":{switch(t.chainType){case"eip155":case"solana":{n.push(t.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(t.publicKey);break}default:be(t)}break}case"seedVault":{n.push(t.publicKey);break}default:(o=>{throw new Error("unknown account type")})(t)}let i=[];for(let o of e){let s;switch(o.type){case"seed":case"seedless":case"ledger":{s=Object.values(o.chains).some(a=>{switch(a.chainType){case"eip155":case"solana":return!!n.find(c=>f0(c,a.publicKey));case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return!!r.find(c=>f0(c,a.publicKey));default:be(a)}});break}case"readOnly":{s=Object.values(o.addresses).some(a=>!!n.find(c=>f0(c,a)));break}case"privateKey":{s=!!n.find(a=>f0(a,o.publicKey));break}case"seedVault":{s=!!n.find(a=>f0(a,o.publicKey));break}default:(a=>{throw new Error("unknown account type")})(o)}s&&i.push(o)}return i}async function Xbe(e,t){let r=await _o(e);return r.seedIdentifiers=[...new Set([...r.seedIdentifiers,t])],e.generalStorage.set(y0,{version:1,...r})}async function exe(e,t){let r=await _o(e);return r.seedlessIdentifiers=[...new Set([...r.seedlessIdentifiers,t])],e.generalStorage.set(y0,{version:1,...r})}async function txe(e,t){let r=await _o(e);return r.privateKeyIdentifiers=[...new Set([...r.privateKeyIdentifiers,t])],e.generalStorage.set(y0,{version:1,...r})}function Bq(e){switch(e){case"readOnly":return 1;case"privateKey":return 2;case"seedless":case"seed":return 3;case"ledger":return 4;case"seedVault":return 5;default:return 0}}p();y();p();y();var so=X(en());p();y();p();y();p();y();p();y();p();y();function Lq(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function nP(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Kq(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Lq(e.outputLen),Lq(e.blockLen)}function g0(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Fq(e,t){nP(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p();y();p();y();var U2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Vq=e=>e instanceof Uint8Array;var D2=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),oa=(e,t)=>e<<32-t|e>>>t,rxe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!rxe)throw new Error("Non little-endian hardware is not supported");function nxe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ub(e){if(typeof e=="string"&&(e=nxe(e)),!Vq(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function qq(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!Vq(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}var b0=class{clone(){return this._cloneInto()}},wQe={}.toString;function L2(e){let t=n=>e().update(ub(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function K2(e=32){if(U2&&typeof U2.getRandomValues=="function")return U2.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function ixe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var x0=class extends b0{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=D2(this.buffer)}update(t){g0(this);let{view:r,buffer:n,blockLen:i}=this;t=ub(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=D2(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){g0(this),Fq(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;ixe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=D2(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var oxe=(e,t,r)=>e&t^~e&r,sxe=(e,t,r)=>e&t^e&r^t&r,axe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Jf=new Uint32Array(64),iP=class extends x0{constructor(){super(64,32,8,!1),this.A=Yf[0]|0,this.B=Yf[1]|0,this.C=Yf[2]|0,this.D=Yf[3]|0,this.E=Yf[4]|0,this.F=Yf[5]|0,this.G=Yf[6]|0,this.H=Yf[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)Jf[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=Jf[l-15],x=Jf[l-2],A=oa(g,7)^oa(g,18)^g>>>3,E=oa(x,17)^oa(x,19)^x>>>10;Jf[l]=E+Jf[l-7]+A+Jf[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=oa(a,6)^oa(a,11)^oa(a,25),x=h+g+oxe(a,c,u)+axe[l]+Jf[l]|0,E=(oa(n,2)^oa(n,13)^oa(n,22))+sxe(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Jf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ii=L2(()=>new iP);p();y();var cP={};ZE(cP,{bitGet:()=>pxe,bitLen:()=>hxe,bitMask:()=>fb,bitSet:()=>yxe,bytesToHex:()=>Ud,bytesToNumberBE:()=>ci,bytesToNumberLE:()=>q2,concatBytes:()=>fu,createHmacDrbg:()=>aP,ensureBytes:()=>bn,equalBytes:()=>lxe,hexToBytes:()=>Dd,hexToNumber:()=>sP,numberToBytesBE:()=>sa,numberToBytesLE:()=>H2,numberToHexUnpadded:()=>zq,numberToVarBytesBE:()=>fxe,utf8ToBytes:()=>dxe,validateObject:()=>Zf});p();y();var Wq=BigInt(0),F2=BigInt(1),cxe=BigInt(2),V2=e=>e instanceof Uint8Array,uxe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ud(e){if(!V2(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=uxe[e[r]];return t}function zq(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function sP(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Dd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}function ci(e){return sP(Ud(e))}function q2(e){if(!V2(e))throw new Error("Uint8Array expected");return sP(Ud(Uint8Array.from(e).reverse()))}function sa(e,t){return Dd(e.toString(16).padStart(t*2,"0"))}function H2(e,t){return sa(e,t).reverse()}function fxe(e){return Dd(zq(e))}function bn(e,t,r){let n;if(typeof t=="string")try{n=Dd(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(V2(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function fu(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!V2(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function lxe(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function dxe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function hxe(e){let t;for(t=0;e>Wq;e>>=F2,t+=1);return t}function pxe(e,t){return e>>BigInt(t)&F2}var yxe=(e,t,r)=>e|(r?F2:Wq)<<BigInt(t),fb=e=>(cxe<<BigInt(e-1))-F2,oP=e=>new Uint8Array(e),Hq=e=>Uint8Array.from(e);function aP(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=oP(e),i=oP(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),c=(l=oP())=>{i=a(Hq([0]),l),n=a(),l.length!==0&&(i=a(Hq([1]),l),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,g=[];for(;l<t;){n=a();let x=n.slice();g.push(x),l+=n.length}return fu(...g)};return(l,g)=>{s(),c(l);let x;for(;!(x=g(u()));)c();return s(),x}}var mxe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Zf(e,t,r={}){let n=(i,o,s)=>{let a=mxe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var wn=BigInt(0),zr=BigInt(1),Ld=BigInt(2),gxe=BigInt(3),uP=BigInt(4),jq=BigInt(5),Gq=BigInt(8),bxe=BigInt(9),xxe=BigInt(16);function xn(e,t){let r=e%t;return r>=wn?r:t+r}function wxe(e,t,r){if(r<=wn||t<wn)throw new Error("Expected power/modulo > 0");if(r===zr)return wn;let n=zr;for(;t>wn;)t&zr&&(n=n*e%r),e=e*e%r,t>>=zr;return n}function Bo(e,t,r){let n=e;for(;t-- >wn;)n*=n,n%=r;return n}function W2(e,t){if(e===wn||t<=wn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=xn(e,t),n=t,i=wn,o=zr,s=zr,a=wn;for(;r!==wn;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==zr)throw new Error("invert: does not exist");return xn(i,t)}function vxe(e){let t=(e-zr)/Ld,r,n,i;for(r=e-zr,n=0;r%Ld===wn;r/=Ld,n++);for(i=Ld;i<e&&wxe(i,t,e)!==e-zr;i++);if(n===1){let s=(e+zr)/uP;return function(c,u){let h=c.pow(u,s);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}let o=(r+zr)/Ld;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,o),g=a.pow(c,r);for(;!a.eql(g,a.ONE);){if(a.eql(g,a.ZERO))return a.ZERO;let x=1;for(let E=a.sqr(g);x<u&&!a.eql(E,a.ONE);x++)E=a.sqr(E);let A=a.pow(h,zr<<BigInt(u-x-1));h=a.sqr(A),l=a.mul(l,A),g=a.mul(g,h),u=x}return l}}function Axe(e){if(e%uP===gxe){let t=(e+zr)/uP;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%Gq===jq){let t=(e-jq)/Gq;return function(n,i){let o=n.mul(i,Ld),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,Ld),s),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%xxe,vxe(e)}var Sxe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fP(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Sxe.reduce((n,i)=>(n[i]="function",n),t);return Zf(e,r)}function Exe(e,t,r){if(r<wn)throw new Error("Expected power > 0");if(r===wn)return e.ONE;if(r===zr)return t;let n=e.ONE,i=t;for(;r>wn;)r&zr&&(n=e.mul(n,i)),i=e.sqr(i),r>>=zr;return n}function Ixe(e,t){let r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function lP(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function $q(e,t,r=!1,n={}){if(e<=wn)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=lP(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=Axe(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:fb(i),ZERO:wn,ONE:zr,create:c=>xn(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return wn<=c&&c<e},is0:c=>c===wn,isOdd:c=>(c&zr)===zr,neg:c=>xn(-c,e),eql:(c,u)=>c===u,sqr:c=>xn(c*c,e),add:(c,u)=>xn(c+u,e),sub:(c,u)=>xn(c-u,e),mul:(c,u)=>xn(c*u,e),pow:(c,u)=>Exe(a,c,u),div:(c,u)=>xn(c*W2(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>W2(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>Ixe(a,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?H2(c,o):sa(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?q2(c):ci(c)}});return Object.freeze(a)}function Yq(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function dP(e){let t=Yq(e);return t+Math.ceil(t/2)}function Jq(e,t,r=!1){let n=e.length,i=Yq(t),o=dP(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?ci(e):q2(e),a=xn(s,t-zr)+zr;return r?H2(a,i):sa(a,i)}p();y();p();y();var Txe=BigInt(0),hP=BigInt(1);function Zq(e,t){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>Txe;)o&hP&&(s=s.add(a)),a=a.double(),o>>=hP;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],u=i,h=u;for(let l=0;l<s;l++){h=u,c.push(h);for(let g=1;g<a;g++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),u=e.ZERO,h=e.BASE,l=BigInt(2**i-1),g=2**i,x=BigInt(i);for(let A=0;A<a;A++){let E=A*c,C=Number(s&l);s>>=x,C>c&&(C-=g,s+=hP);let M=E,N=E+Math.abs(C)-1,R=A%2!==0,V=C<0;C===0?h=h.add(r(R,o[M])):u=u.add(r(V,o[N]))}return{p:u,f:h}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,a(u))),this.wNAF(c,u,s)}}}function pP(e){return fP(e.Fp),Zf(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...lP(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Pxe(e){let t=pP(e);Zf(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:_xe,hexToBytes:Bxe}=cP,Kd={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Kd;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:_xe(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Kd,r=typeof e=="string"?Bxe(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=Kd._parseInt(r.subarray(2)),{d:s,l:a}=Kd._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let h=u.toString(16);return h.length&1?`0${h}`:h},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},lu=BigInt(0),us=BigInt(1),GQe=BigInt(2),Qq=BigInt(3),$Qe=BigInt(4);function Cxe(e){let t=Pxe(e),{Fp:r}=t,n=t.toBytes||((A,E,C)=>{let M=E.toAffine();return fu(Uint8Array.from([4]),r.toBytes(M.x),r.toBytes(M.y))}),i=t.fromBytes||(A=>{let E=A.subarray(1),C=r.fromBytes(E.subarray(0,r.BYTES)),M=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x:C,y:M}});function o(A){let{a:E,b:C}=t,M=r.sqr(A),N=r.mul(M,A);return r.add(r.add(N,r.mul(A,E)),C)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(A){return typeof A=="bigint"&&lu<A&&A<t.n}function a(A){if(!s(A))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(A){let{allowedPrivateKeyLengths:E,nByteLength:C,wrapPrivateKey:M,n:N}=t;if(E&&typeof A!="bigint"){if(A instanceof Uint8Array&&(A=Ud(A)),typeof A!="string"||!E.includes(A.length))throw new Error("Invalid key");A=A.padStart(C*2,"0")}let R;try{R=typeof A=="bigint"?A:ci(bn("private key",A,C))}catch{throw new Error(`private key must be ${C} bytes, hex or bigint, not ${typeof A}`)}return M&&(R=xn(R,N)),a(R),R}let u=new Map;function h(A){if(!(A instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(E,C,M){if(this.px=E,this.py=C,this.pz=M,E==null||!r.isValid(E))throw new Error("x required");if(C==null||!r.isValid(C))throw new Error("y required");if(M==null||!r.isValid(M))throw new Error("z required")}static fromAffine(E){let{x:C,y:M}=E||{};if(!E||!r.isValid(C)||!r.isValid(M))throw new Error("invalid affine point");if(E instanceof l)throw new Error("projective point not allowed");let N=R=>r.eql(R,r.ZERO);return N(C)&&N(M)?l.ZERO:new l(C,M,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){let C=r.invertBatch(E.map(M=>M.pz));return E.map((M,N)=>M.toAffine(C[N])).map(l.fromAffine)}static fromHex(E){let C=l.fromAffine(i(bn("pointHex",E)));return C.assertValidity(),C}static fromPrivateKey(E){return l.BASE.multiply(c(E))}_setWindowSize(E){this._WINDOW_SIZE=E,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:E,y:C}=this.toAffine();if(!r.isValid(E)||!r.isValid(C))throw new Error("bad point: x or y not FE");let M=r.sqr(C),N=o(E);if(!r.eql(M,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:E}=this.toAffine();if(r.isOdd)return!r.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);let{px:C,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.eql(r.mul(C,q),r.mul(R,N)),G=r.eql(r.mul(M,q),r.mul(V,N));return W&&G}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:E,b:C}=t,M=r.mul(C,Qq),{px:N,py:R,pz:V}=this,q=r.ZERO,W=r.ZERO,G=r.ZERO,z=r.mul(N,N),ee=r.mul(R,R),_=r.mul(V,V),f=r.mul(N,R);return f=r.add(f,f),G=r.mul(N,V),G=r.add(G,G),q=r.mul(E,G),W=r.mul(M,_),W=r.add(q,W),q=r.sub(ee,W),W=r.add(ee,W),W=r.mul(q,W),q=r.mul(f,q),G=r.mul(M,G),_=r.mul(E,_),f=r.sub(z,_),f=r.mul(E,f),f=r.add(f,G),G=r.add(z,z),z=r.add(G,z),z=r.add(z,_),z=r.mul(z,f),W=r.add(W,z),_=r.mul(R,V),_=r.add(_,_),z=r.mul(_,f),q=r.sub(q,z),G=r.mul(_,ee),G=r.add(G,G),G=r.add(G,G),new l(q,W,G)}add(E){h(E);let{px:C,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.ZERO,G=r.ZERO,z=r.ZERO,ee=t.a,_=r.mul(t.b,Qq),f=r.mul(C,R),m=r.mul(M,V),b=r.mul(N,q),v=r.add(C,M),w=r.add(R,V);v=r.mul(v,w),w=r.add(f,m),v=r.sub(v,w),w=r.add(C,N);let P=r.add(R,q);return w=r.mul(w,P),P=r.add(f,b),w=r.sub(w,P),P=r.add(M,N),W=r.add(V,q),P=r.mul(P,W),W=r.add(m,b),P=r.sub(P,W),z=r.mul(ee,w),W=r.mul(_,b),z=r.add(W,z),W=r.sub(m,z),z=r.add(m,z),G=r.mul(W,z),m=r.add(f,f),m=r.add(m,f),b=r.mul(ee,b),w=r.mul(_,w),m=r.add(m,b),b=r.sub(f,b),b=r.mul(ee,b),w=r.add(w,b),f=r.mul(m,w),G=r.add(G,f),f=r.mul(P,w),W=r.mul(v,W),W=r.sub(W,f),f=r.mul(v,m),z=r.mul(P,z),z=r.add(z,f),new l(W,G,z)}subtract(E){return this.add(E.negate())}is0(){return this.equals(l.ZERO)}wNAF(E){return x.wNAFCached(this,u,E,C=>{let M=r.invertBatch(C.map(N=>N.pz));return C.map((N,R)=>N.toAffine(M[R])).map(l.fromAffine)})}multiplyUnsafe(E){let C=l.ZERO;if(E===lu)return C;if(a(E),E===us)return this;let{endo:M}=t;if(!M)return x.unsafeLadder(this,E);let{k1neg:N,k1:R,k2neg:V,k2:q}=M.splitScalar(E),W=C,G=C,z=this;for(;R>lu||q>lu;)R&us&&(W=W.add(z)),q&us&&(G=G.add(z)),z=z.double(),R>>=us,q>>=us;return N&&(W=W.negate()),V&&(G=G.negate()),G=new l(r.mul(G.px,M.beta),G.py,G.pz),W.add(G)}multiply(E){a(E);let C=E,M,N,{endo:R}=t;if(R){let{k1neg:V,k1:q,k2neg:W,k2:G}=R.splitScalar(C),{p:z,f:ee}=this.wNAF(q),{p:_,f}=this.wNAF(G);z=x.constTimeNegate(V,z),_=x.constTimeNegate(W,_),_=new l(r.mul(_.px,R.beta),_.py,_.pz),M=z.add(_),N=ee.add(f)}else{let{p:V,f:q}=this.wNAF(C);M=V,N=q}return l.normalizeZ([M,N])[0]}multiplyAndAddUnsafe(E,C,M){let N=l.BASE,R=(q,W)=>W===lu||W===us||!q.equals(N)?q.multiplyUnsafe(W):q.multiply(W),V=R(this,C).add(R(E,M));return V.is0()?void 0:V}toAffine(E){let{px:C,py:M,pz:N}=this,R=this.is0();E==null&&(E=R?r.ONE:r.inv(N));let V=r.mul(C,E),q=r.mul(M,E),W=r.mul(N,E);if(R)return{x:r.ZERO,y:r.ZERO};if(!r.eql(W,r.ONE))throw new Error("invZ was invalid");return{x:V,y:q}}isTorsionFree(){let{h:E,isTorsionFree:C}=t;if(E===us)return!0;if(C)return C(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:E,clearCofactor:C}=t;return E===us?this:C?C(l,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return this.assertValidity(),n(l,this,E)}toHex(E=!0){return Ud(this.toRawBytes(E))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let g=t.nBitLength,x=Zq(l,t.endo?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function Mxe(e){let t=pP(e);return Zf(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Xq(e){let t=Mxe(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(w){return lu<w&&w<r.ORDER}function a(w){return xn(w,n)}function c(w){return W2(w,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:l,isWithinCurveOrder:g}=Cxe({...t,toBytes(w,P,B){let k=P.toAffine(),d=r.toBytes(k.x),S=fu;return B?S(Uint8Array.from([P.hasEvenY()?2:3]),d):S(Uint8Array.from([4]),d,r.toBytes(k.y))},fromBytes(w){let P=w.length,B=w[0],k=w.subarray(1);if(P===i&&(B===2||B===3)){let d=ci(k);if(!s(d))throw new Error("Point is not on curve");let S=l(d),F=r.sqrt(S),U=(F&us)===us;return(B&1)===1!==U&&(F=r.neg(F)),{x:d,y:F}}else if(P===o&&B===4){let d=r.fromBytes(k.subarray(0,r.BYTES)),S=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:d,y:S}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),x=w=>Ud(sa(w,t.nByteLength));function A(w){let P=n>>us;return w>P}function E(w){return A(w)?a(-w):w}let C=(w,P,B)=>ci(w.slice(P,B));class M{constructor(P,B,k){this.r=P,this.s=B,this.recovery=k,this.assertValidity()}static fromCompact(P){let B=t.nByteLength;return P=bn("compactSignature",P,B*2),new M(C(P,0,B),C(P,B,2*B))}static fromDER(P){let{r:B,s:k}=Kd.toSig(bn("DER",P));return new M(B,k)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new M(this.r,this.s,P)}recoverPublicKey(P){let{r:B,s:k,recovery:d}=this,S=G(bn("msgHash",P));if(d==null||![0,1,2,3].includes(d))throw new Error("recovery id invalid");let F=d===2||d===3?B+t.n:B;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let U=d&1?"03":"02",D=u.fromHex(U+x(F)),J=c(F),ue=a(-S*J),fe=a(k*J),j=u.BASE.multiplyAndAddUnsafe(D,ue,fe);if(!j)throw new Error("point at infinify");return j.assertValidity(),j}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Dd(this.toDERHex())}toDERHex(){return Kd.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Dd(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}let N={isValidPrivateKey(w){try{return h(w),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let w=dP(t.n);return Jq(t.randomBytes(w),t.n)},precompute(w=8,P=u.BASE){return P._setWindowSize(w),P.multiply(BigInt(3)),P}};function R(w,P=!0){return u.fromPrivateKey(w).toRawBytes(P)}function V(w){let P=w instanceof Uint8Array,B=typeof w=="string",k=(P||B)&&w.length;return P?k===i||k===o:B?k===2*i||k===2*o:w instanceof u}function q(w,P,B=!0){if(V(w))throw new Error("first arg must be private key");if(!V(P))throw new Error("second arg must be public key");return u.fromHex(P).multiply(h(w)).toRawBytes(B)}let W=t.bits2int||function(w){let P=ci(w),B=w.length*8-t.nBitLength;return B>0?P>>BigInt(B):P},G=t.bits2int_modN||function(w){return a(W(w))},z=fb(t.nBitLength);function ee(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(lu<=w&&w<z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return sa(w,t.nByteLength)}function _(w,P,B=f){if(["recovered","canonical"].some(L=>L in B))throw new Error("sign() legacy options not supported");let{hash:k,randomBytes:d}=t,{lowS:S,prehash:F,extraEntropy:U}=B;S==null&&(S=!0),w=bn("msgHash",w),F&&(w=bn("prehashed msgHash",k(w)));let D=G(w),J=h(P),ue=[ee(J),ee(D)];if(U!=null){let L=U===!0?d(r.BYTES):U;ue.push(bn("extraEntropy",L))}let fe=fu(...ue),j=D;function se(L){let Y=W(L);if(!g(Y))return;let Z=c(Y),re=u.BASE.multiply(Y).toAffine(),pe=a(re.x);if(pe===lu)return;let te=a(Z*a(j+pe*J));if(te===lu)return;let ce=(re.x===pe?0:2)|Number(re.y&us),ut=te;return S&&A(te)&&(ut=E(te),ce^=1),new M(pe,ut,ce)}return{seed:fe,k2sig:se}}let f={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function b(w,P,B=f){let{seed:k,k2sig:d}=_(w,P,B),S=t;return aP(S.hash.outputLen,S.nByteLength,S.hmac)(k,d)}u.BASE._setWindowSize(8);function v(w,P,B,k=m){let d=w;if(P=bn("msgHash",P),B=bn("publicKey",B),"strict"in k)throw new Error("options.strict was renamed to lowS");let{lowS:S,prehash:F}=k,U,D;try{if(typeof d=="string"||d instanceof Uint8Array)try{U=M.fromDER(d)}catch(re){if(!(re instanceof Kd.Err))throw re;U=M.fromCompact(d)}else if(typeof d=="object"&&typeof d.r=="bigint"&&typeof d.s=="bigint"){let{r:re,s:pe}=d;U=new M(re,pe)}else throw new Error("PARSE");D=u.fromHex(B)}catch(re){if(re.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&U.hasHighS())return!1;F&&(P=t.hash(P));let{r:J,s:ue}=U,fe=G(P),j=c(ue),se=a(fe*j),L=a(J*j),Y=u.BASE.multiplyAndAddUnsafe(D,se,L)?.toAffine();return Y?a(Y.x)===J:!1}return{CURVE:t,getPublicKey:R,getSharedSecret:q,sign:b,verify:v,ProjectivePoint:u,Signature:M,utils:N}}p();y();p();y();var z2=class extends b0{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Kq(t);let n=ub(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return g0(this),this.iHash.update(t),this}digestInto(t){g0(this),nP(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},yP=(e,t,r)=>new z2(e,t).update(r).digest();yP.create=(e,t)=>new z2(e,t);function Rxe(e){return{hash:e,hmac:(t,...r)=>yP(e,t,qq(...r)),randomBytes:K2}}function eH(e,t){let r=n=>Xq({...e,...Rxe(n)});return Object.freeze({...r(t),create:r})}var Y2=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),j2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),nH=BigInt(1),G2=BigInt(2),tH=(e,t)=>(e+t/G2)/t;function iH(e){let t=Y2,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,h=u*u*e%t,l=Bo(h,r,t)*h%t,g=Bo(l,r,t)*h%t,x=Bo(g,G2,t)*u%t,A=Bo(x,i,t)*x%t,E=Bo(A,o,t)*A%t,C=Bo(E,a,t)*E%t,M=Bo(C,c,t)*C%t,N=Bo(M,a,t)*E%t,R=Bo(N,r,t)*h%t,V=Bo(R,s,t)*A%t,q=Bo(V,n,t)*u%t,W=Bo(q,G2,t);if(!gP.eql(gP.sqr(W),e))throw new Error("Cannot find square root");return W}var gP=$q(Y2,void 0,void 0,{sqrt:iH}),w0=eH({a:BigInt(0),b:BigInt(7),Fp:gP,n:j2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=j2,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-nH*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=tH(o*e,t),c=tH(-n*e,t),u=xn(e-a*r-c*i,t),h=xn(-a*n-c*o,t),l=u>s,g=h>s;if(l&&(u=t-u),g&&(h=t-h),u>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:g,k2:h}}}},Ii),J2=BigInt(0),oH=e=>typeof e=="bigint"&&J2<e&&e<Y2,Oxe=e=>typeof e=="bigint"&&J2<e&&e<j2,rH={};function $2(e,...t){let r=rH[e];if(r===void 0){let n=Ii(Uint8Array.from(e,i=>i.charCodeAt(0)));r=fu(n,n),rH[e]=r}return Ii(fu(r,...t))}var wP=e=>e.toRawBytes(!0).slice(1),bP=e=>sa(e,32),mP=e=>xn(e,Y2),lb=e=>xn(e,j2),vP=w0.ProjectivePoint,Nxe=(e,t,r)=>vP.BASE.multiplyAndAddUnsafe(e,t,r);function xP(e){let t=w0.utils.normPrivateKeyToScalar(e),r=vP.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:lb(-t),bytes:wP(r)}}function sH(e){if(!oH(e))throw new Error("bad x: need 0 < x < p");let t=mP(e*e),r=mP(t*e+BigInt(7)),n=iH(r);n%G2!==J2&&(n=mP(-n));let i=new vP(e,n,nH);return i.assertValidity(),i}function aH(...e){return lb(ci($2("BIP0340/challenge",...e)))}function Uxe(e){return xP(e).bytes}function Dxe(e,t,r=K2(32)){let n=bn("message",e),{bytes:i,scalar:o}=xP(t),s=bn("auxRand",r,32),a=bP(o^ci($2("BIP0340/aux",s))),c=$2("BIP0340/nonce",a,i,n),u=lb(ci(c));if(u===J2)throw new Error("sign failed: k is zero");let{bytes:h,scalar:l}=xP(u),g=aH(h,i,n),x=new Uint8Array(64);if(x.set(h,0),x.set(bP(lb(l+g*o)),32),!cH(x,n,i))throw new Error("sign: Invalid signature produced");return x}function cH(e,t,r){let n=bn("signature",e,64),i=bn("message",t),o=bn("publicKey",r,32);try{let s=sH(ci(o)),a=ci(n.subarray(0,32));if(!oH(a))return!1;let c=ci(n.subarray(32,64));if(!Oxe(c))return!1;let u=aH(bP(a),wP(s),i),h=Nxe(s,c,lb(-u));return!(!h||!h.hasEvenY()||h.toAffine().x!==a)}catch{return!1}}var Co={getPublicKey:Uxe,sign:Dxe,verify:cH,utils:{randomPrivateKey:w0.utils.randomPrivateKey,lift_x:sH,pointToBytes:wP,numberToBytesBE:sa,bytesToNumberBE:ci,taggedHash:$2,mod:xn}};p();y();var Lxe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),fH=Uint8Array.from({length:16},(e,t)=>t),Kxe=fH.map(e=>(9*e+5)%16),SP=[fH],EP=[Kxe];for(let e=0;e<4;e++)for(let t of[SP,EP])t.push(t[e].map(r=>Lxe[r]));var lH=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Fxe=SP.map((e,t)=>e.map(r=>lH[t][r])),Vxe=EP.map((e,t)=>e.map(r=>lH[t][r])),qxe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Hxe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Z2=(e,t)=>e<<t|e>>>32-t;function uH(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var Q2=new Uint32Array(16),AP=class extends x0{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let x=0;x<16;x++,r+=4)Q2[x]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,c=a,u=this.h3|0,h=u,l=this.h4|0,g=l;for(let x=0;x<5;x++){let A=4-x,E=qxe[x],C=Hxe[x],M=SP[x],N=EP[x],R=Fxe[x],V=Vxe[x];for(let q=0;q<16;q++){let W=Z2(n+uH(x,o,a,u)+Q2[M[q]]+E,R[q])+l|0;n=l,l=u,u=Z2(a,10)|0,a=o,o=W}for(let q=0;q<16;q++){let W=Z2(i+uH(A,s,c,h)+Q2[N[q]]+C,V[q])+g|0;i=g,g=h,h=Z2(c,10)|0,c=s,s=W}}this.set(this.h1+a+h|0,this.h2+u+g|0,this.h3+l+i|0,this.h4+n+s|0,this.h0+o+c|0)}roundClean(){Q2.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},dH=L2(()=>new AP);p();y();function v0(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function eS(...e){let t=(i,o)=>s=>i(o(s)),r=Array.from(e).reverse().reduce((i,o)=>i?t(i,o.encode):o.encode,void 0),n=e.reduce((i,o)=>i?t(i,o.decode):o.decode,void 0);return{encode:r,decode:n}}function TP(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function PP(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Wxe(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function hH(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],o=Array.from(e);for(o.forEach(s=>{if(s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let c=n;c<o.length;c++){let u=o[c],h=t*s+u;if(!Number.isSafeInteger(h)||t*s/t!==s||h-u!==t*s)throw new Error("convertRadix: carry overflow");s=h%r;let l=Math.floor(h/r);if(o[c]=l,!Number.isSafeInteger(l)||l*r+s!==h)throw new Error("convertRadix: carry overflow");if(a)l?a=!1:n=c;else continue}if(i.push(s),a)break}for(let s=0;s<e.length-1&&e[s]===0;s++)i.push(0);return i.reverse()}var gH=(e,t)=>t?gH(t,e%t):e,X2=(e,t)=>e+(t-gH(e,t));function IP(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(X2(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${X2(t,r)}`);let i=0,o=0,s=2**r-1,a=[];for(let c of e){if(c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)a.push((i>>o-r&s)>>>0);i&=2**o-1}if(i=i<<r-o&s,!n&&o>=t)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&o>0&&a.push(i>>>0),a}function zxe(e){return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return hH(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(hH(t,e,2**8))}}}function bH(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(X2(8,e)>32||X2(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return IP(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(IP(r,e,8,t))}}}function pH(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function jxe(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=t(n).slice(0,e),o=r.slice(-e);for(let s=0;s<e;s++)if(i[s]!==o[s])throw new Error("Invalid checksum");return n}}}var Gxe=e=>eS(zxe(58),TP(e),PP("")),$xe=Gxe("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var xH=e=>eS(jxe(4,t=>e(e(t))),$xe),kP=eS(TP("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),PP("")),yH=[996825010,642813549,513874426,1027748829,705979059];function db(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<yH.length;n++)(t>>n&1)===1&&(r^=yH[n]);return r}function mH(e,t,r=1){let n=e.length,i=1;for(let o=0;o<n;o++){let s=e.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);i=db(i)^s>>5}i=db(i);for(let o=0;o<n;o++)i=db(i)^e.charCodeAt(o)&31;for(let o of t)i=db(i)^o;for(let o=0;o<6;o++)i=db(i);return i^=r,kP.encode(IP([i%2**30],30,5,!1))}function wH(e){let t=e==="bech32"?1:734539939,r=bH(5),n=r.decode,i=r.encode,o=pH(n);function s(h,l,g=90){if(typeof h!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof h}`);if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof l}`);let x=h.length+7+l.length;if(g!==!1&&x>g)throw new TypeError(`Length ${x} exceeds limit ${g}`);let A=h.toLowerCase(),E=mH(A,l,t);return`${A}1${kP.encode(l)}${E}`}function a(h,l=90){if(typeof h!="string")throw new Error(`bech32.decode input should be string, not ${typeof h}`);if(h.length<8||l!==!1&&h.length>l)throw new TypeError(`Wrong string length: ${h.length} (${h}). Expected (8..${l})`);let g=h.toLowerCase();if(h!==g&&h!==h.toUpperCase())throw new Error("String must be lowercase or uppercase");h=g;let x=h.lastIndexOf("1");if(x===0||x===-1)throw new Error('Letter "1" must be present between prefix and data only');let A=h.slice(0,x),E=h.slice(x+1);if(E.length<6)throw new Error("Data must be at least 6 characters long");let C=kP.decode(E).slice(0,-6),M=mH(A,C,t);if(!E.endsWith(M))throw new Error(`Invalid checksum in ${h}: expected "${M}"`);return{prefix:A,words:C}}let c=pH(a);function u(h){let{prefix:l,words:g}=a(h,!1);return{prefix:l,words:g,bytes:n(g)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:c,fromWords:n,fromWordsUnsafe:o,toWords:i}}var tS=wH("bech32"),_P=wH("bech32m"),BP={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},Fr=eS(bH(4),TP("0123456789abcdef"),PP(""),Wxe(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));p();y();var Vr=new Uint8Array,aS=new Uint8Array([0]);function gr(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function rS(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Mo=e=>e instanceof Uint8Array,nS=class{constructor(t,r=[],n=[]){this.data=t,this.path=r,this.fieldPath=n,this.pos=0,this.hasPtr=!1,this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Reader(${this.fieldPath.join("/")}): ${t}`)}absBytes(t){if(t>this.data.length)throw new Error("absBytes: Unexpected end of buffer");return this.data.subarray(t)}bytes(t,r=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(t))throw this.err(`readBytes: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let n=this.data.subarray(this.pos,this.pos+t);return r||(this.pos+=t),n}byte(t=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");return this.data[t?this.pos:this.pos++]}get leftBytes(){return this.data.length-this.pos}isEnd(){return this.pos>=this.data.length&&!this.bitPos}length(t){let r;if(Qf(t)?r=Number(t.decodeStream(this)):typeof t=="number"?r=t:typeof t=="string"&&(r=sS(this.path,t.split("/"))),typeof r=="bigint"&&(r=Number(r)),typeof r!="number")throw this.err(`Wrong length: ${r}`);return r}bits(t){if(t>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let r=0;for(;t;){this.bitPos||(this.bitBuf=this.data[this.pos++],this.bitPos=8);let n=Math.min(t,this.bitPos);this.bitPos-=n,r=r<<n|this.bitBuf>>this.bitPos&2**n-1,this.bitBuf&=2**this.bitPos-1,t-=n}return r>>>0}find(t,r=this.pos){if(!Mo(t))throw this.err(`find: needle is not bytes! ${t}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!t.length)throw this.err("find: needle is empty");for(let n=r;(n=this.data.indexOf(t[0],n))!==-1;n++){if(n===-1||this.data.length-n<t.length)return;if(gr(t,this.data.subarray(n,n+t.length)))return n}}finish(){if(!(this.isEnd()||this.hasPtr))throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${Fr.encode(this.data.slice(this.pos))}`)}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},iS=class{constructor(t=[],r=[]){this.path=t,this.fieldPath=r,this.buffers=[],this.pos=0,this.ptrs=[],this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Writer(${this.fieldPath.join("/")}): ${t}`)}bytes(t){if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(t),this.pos+=t.length}byte(t){if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([t])),this.pos++}get buffer(){if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let t=rS(...this.buffers);for(let r of this.ptrs){let n=t.length;t=rS(t,r.buffer);let i=r.ptr.encode(n);for(let o=0;o<i.length;o++)t[r.pos+o]=i[o]}return t}length(t,r){if(t===null)return;if(Qf(t))return t.encodeStream(this,r);let n;if(typeof t=="number"?n=t:typeof t=="string"&&(n=sS(this.path,t.split("/"))),typeof n=="bigint"&&(n=Number(n)),n===void 0||n!==r)throw this.err(`Wrong length: ${n} len=${t} exp=${r}`)}bits(t,r){if(r>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(t>=2**r)throw this.err(`writeBits: value (${t}) >= 2**bits (${r})`);for(;r;){let n=Math.min(r,8-this.bitPos);this.bitBuf=this.bitBuf<<n|t>>r-n,this.bitPos+=n,r-=n,t&=2**r-1,this.bitPos===8&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},oS=e=>Uint8Array.from(e).reverse();function vH(e,t,r,n){if(n){let i=2n**(r-1n);if(t<-i||t>=i)throw e.err("sInt: value out of bounds")}else if(0n>t||t>=2n**r)throw e.err("uInt: value out of bounds")}function vn(e){return{...e,encode:t=>{let r=new iS;return e.encodeStream(r,t),r.buffer},decode:t=>{let r=new nS(t),n=e.decodeStream(r);return r.finish(),n}}}function sS(e,t){e=Array.from(e);let r=0;for(;r<t.length&&t[r]==="..";r++)e.pop();let n=e.pop();for(;r<t.length;r++){if(!n||n[t[r]]===void 0)return;n=n[t[r]]}return n}function Qf(e){return typeof e.encode=="function"&&typeof e.encodeStream=="function"&&typeof e.decode=="function"&&typeof e.decodeStream=="function"}function Jxe(){return{encode:e=>{let t={};for(let[r,n]of e){if(t[r]!==void 0)throw new Error(`coders.dict: same key(${r}) appears twice in struct`);t[r]=n}return t},decode:e=>Object.entries(e)}}var Zxe={encode:e=>{if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`coders.number: element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>BigInt(e)};function Qxe(e){return{encode:t=>e[t],decode:t=>e[t]}}function Xxe(e){let t=10n**BigInt(e);return{encode:r=>{let n=(r<0n?-r:r).toString(10),i=n.length-e;i<0&&(n=n.padStart(n.length-i,"0"),i=0);let o=n.length-1;for(;o>=i&&n[o]==="0";o--);let[s,a]=[n.slice(0,i),n.slice(i,o+1)];return s||(s="0"),r<0n&&(s="-"+s),a?`${s}.${a}`:s},decode:r=>{let n=!1;r.startsWith("-")&&(n=!0,r=r.slice(1));let i=r.indexOf(".");i=i===-1?r.length:i;let[o,s]=[r.slice(0,i),r.slice(i+1)],a=BigInt(o)*t,c=Math.min(s.length,e),u=BigInt(s.slice(0,c))*10n**BigInt(e-c),h=a+u;return n?-h:h}}}function ewe(e){return{encode:t=>{for(let r of e){let n=r.encode(t);if(n!==void 0)return n}throw new Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let r of e){let n=r.decode(t);if(n!==void 0)return n}throw new Error(`match/decode: cannot find match in ${t}`)}}}var A0={dict:Jxe,number:Zxe,tsEnum:Qxe,decimal:Xxe,match:ewe};var Ro=(e,t=!1,r=!1)=>vn({size:e,encodeStream:(n,i)=>{if(typeof i!="number"&&typeof i!="bigint")throw n.err(`bigint: invalid value: ${i}`);let o=BigInt(i),s=BigInt(e);vH(n,o,8n*s,!!r);let a=2n**(8n*s-1n);r&&o<0&&(o=o|a);let c=[];for(let h=0;h<e;h++)c.push(Number(o&255n)),o>>=8n;let u=new Uint8Array(c).reverse();n.bytes(t?u.reverse():u)},decodeStream:n=>{let i=BigInt(e),o=n.bytes(e);t&&(o=oS(o));let s=oS(o),a=2n**(8n*i-1n),c=0n;for(let u=0;u<s.length;u++)c|=BigInt(s[u])<<8n*BigInt(u);return r&&c&a&&(c=(c^a)-a),vH(n,c,8n*i,!!r),c}}),TXe=Ro(32,!0),AH=Ro(32,!1),PXe=Ro(32,!0,!0),_Xe=Ro(32,!1,!0),BXe=Ro(16,!0),CXe=Ro(16,!1),MXe=Ro(16,!0,!0),RXe=Ro(16,!1,!0),hb=Ro(8,!0),OXe=Ro(8,!1),SH=Ro(8,!0,!0),NXe=Ro(8,!1,!0),tc=(e,t=!1,r=!1)=>{if(e>6)throw new Error("int supports size up to 6 bytes (48 bits), for other use bigint");return yb(Ro(e,t,r),A0.number)},nr=tc(4,!0),EH=tc(4,!1),S0=tc(4,!0,!0),UXe=tc(4,!1,!0),CP=tc(2,!0),DXe=tc(2,!1),LXe=tc(2,!0,!0),KXe=tc(2,!1,!0),du=tc(1,!1),FXe=tc(1,!1,!0),VXe=vn({size:1,encodeStream:(e,t)=>e.byte(t?1:0),decodeStream:e=>{let t=e.byte();if(t!==0&&t!==1)throw e.err(`bool: invalid value ${t}`);return t===1}}),Tr=(e,t=!1)=>vn({size:typeof e=="number"?e:void 0,encodeStream:(r,n)=>{if(!Mo(n))throw r.err(`bytes: invalid value ${n}`);Mo(e)||r.length(e,n.length),r.bytes(t?oS(n):n),Mo(e)&&r.bytes(e)},decodeStream:r=>{let n;if(Mo(e)){let i=r.find(e);if(!i)throw r.err("bytes: cannot find terminator");n=r.bytes(i-r.pos),r.bytes(e.length)}else n=r.bytes(e===null?r.leftBytes:r.length(e));return t?oS(n):n}}),pb=(e,t=!1)=>{let r=Tr(e,t);return vn({size:r.size,encodeStream:(n,i)=>r.encodeStream(n,BP.decode(i)),decodeStream:n=>BP.encode(r.decodeStream(n))})},qXe=pb(aS),IH=(e,t=!1,r=!1)=>{let n=Tr(e,t);return vn({size:n.size,encodeStream:(i,o)=>{if(r&&!o.startsWith("0x"))throw new Error("hex(withZero=true).encode input should start with 0x");let s=Fr.decode(r?o.slice(2):o);return n.encodeStream(i,s)},decodeStream:i=>(r?"0x":"")+Fr.encode(n.decodeStream(i))})};function yb(e,t){if(!Qf(e))throw new Error(`apply: invalid inner value ${e}`);return vn({size:e.size,encodeStream:(r,n)=>{let i;try{i=t.decode(n)}catch(o){throw r.err(""+o)}return e.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r);try{return t.encode(n)}catch(i){throw r.err(""+i)}}})}function fs(e,t){if(!Qf(e))throw new Error(`validate: invalid inner value ${e}`);return vn({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t(n)),decodeStream:r=>t(e.decodeStream(r))})}var kH=(e,t=!1)=>vn({size:e.length,encodeStream:(r,n)=>{!!n!==t&&r.bytes(e)},decodeStream:r=>{let n=r.leftBytes>=e.length;return n&&(n=gr(r.bytes(e.length,!0),e),n&&r.bytes(e.length)),n!==t}});function TH(e,t,r){if(!Qf(t))throw new Error(`flagged: invalid inner value ${t}`);return vn({encodeStream:(n,i)=>{typeof e=="string"?sS(n.path,e.split("/"))?t.encodeStream(n,i):r&&t.encodeStream(n,r):(e.encodeStream(n,!!i),i?t.encodeStream(n,i):r&&t.encodeStream(n,r))},decodeStream:n=>{let i=!1;if(typeof e=="string"?i=sS(n.path,e.split("/")):i=e.decodeStream(n),i)return t.decodeStream(n);r&&t.decodeStream(n)}})}function mb(e,t,r=!0){if(!Qf(e))throw new Error(`flagged: invalid inner value ${e}`);return vn({size:e.size,encodeStream:(n,i)=>e.encodeStream(n,t),decodeStream:n=>{let i=e.decodeStream(n);if(r&&typeof i!="object"&&i!==t||Mo(t)&&!gr(t,i))throw n.err(`magic: invalid value: ${i} !== ${t}`)}})}function PH(e){let t=0;for(let r of e){if(!r.size)return;t+=r.size}return t}function ki(e){if(Array.isArray(e))throw new Error("Packed.Struct: got array instead of object");return vn({size:PH(Object.values(e)),encodeStream:(t,r)=>{if(typeof r!="object"||r===null)throw t.err(`struct: invalid value ${r}`);t.path.push(r);for(let n in e)t.fieldPathPush(n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r={};t.path.push(r);for(let n in e)t.fieldPathPush(n),r[n]=e[n].decodeStream(t),t.fieldPathPop();return t.path.pop(),r}})}function _H(e){if(!Array.isArray(e))throw new Error(`Packed.Tuple: got ${typeof e} instead of array`);return vn({size:PH(e),encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err(`tuple: invalid value ${r}`);t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r=[];t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),r.push(e[n].decodeStream(t)),t.fieldPathPop();return t.path.pop(),r}})}function BH(e,t){if(!Qf(t))throw new Error(`prefix: invalid inner value ${t}`);if(Mo(e))throw new Error("prefix: len cannot be Uint8Array");let r=Tr(e);return vn({size:typeof e=="number"?e:void 0,encodeStream:(n,i)=>{let o=new iS(n.path,n.fieldPath);t.encodeStream(o,i),r.encodeStream(n,o.buffer)},decodeStream:n=>{let i=r.decodeStream(n);return t.decodeStream(new nS(i,n.path,n.fieldPath))}})}function Wi(e,t){if(!Qf(t))throw new Error(`array: invalid inner value ${t}`);return vn({size:typeof e=="number"&&t.size?e*t.size:void 0,encodeStream:(r,n)=>{if(!Array.isArray(n))throw r.err(`array: invalid value ${n}`);Mo(e)||r.length(e,n.length),r.path.push(n);for(let i=0;i<n.length;i++){r.fieldPathPush(""+i);let o=n[i],s=r.pos;if(t.encodeStream(r,o),Mo(e)){if(e.length>r.pos-s)continue;let a=r.buffer.subarray(s,r.pos);if(gr(a.subarray(0,e.length),e))throw r.err(`array: inner element encoding same as separator. elm=${o} data=${a}`)}r.fieldPathPop()}r.path.pop(),Mo(e)&&r.bytes(e)},decodeStream:r=>{let n=[];if(e===null){let i=0;for(r.path.push(n);!r.isEnd()&&(r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop(),!(t.size&&r.leftBytes<t.size)););r.path.pop()}else if(Mo(e)){let i=0;for(r.path.push(n);;){if(gr(r.bytes(e.length,!0),e)){r.bytes(e.length);break}r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop()}r.path.pop()}else{r.fieldPathPush("arrayLen");let i=r.length(e);r.fieldPathPop(),r.path.push(n);for(let o=0;o<i;o++)r.fieldPathPush(""+o),n.push(t.decodeStream(r)),r.fieldPathPop();r.path.pop()}return n}})}var HXe=mb(Tr(0),Vr);var{ProjectivePoint:mS,sign:CH,getPublicKey:rwe}=w0,lS=w0.CURVE.n,bb=(e,t)=>e===void 0?t:e,_r=Mo,gS=e=>dH(Ii(e)),Xf=(...e)=>Ii(Ii(el(...e))),el=rS,zH=xH(Ii);function dS(e){if(Array.isArray(e))return e.map(t=>dS(t));if(e instanceof Uint8Array)return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(e===null)return e;if(typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,dS(r)]));throw new Error(`cloneDeep: unknown type=${e} (${typeof e})`)}var Ti;(function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"})(Ti||(Ti={}));function T0(e,t){let r=e.length;if(t===Ti.ecdsa){if(r===32)throw new Error("Expected non-Schnorr key");return mS.fromHex(e),e}else if(t===Ti.schnorr){if(r!==32)throw new Error("Expected 32-byte Schnorr key");return Co.utils.lift_x(Co.utils.bytesToNumberBE(e)),e}else throw new Error("Unknown key type")}function Vd(e,t){try{return T0(e,t),!0}catch{return!1}}var MH=e=>e.r<lS/2n;function nwe(e,t,r=!1){let n=CH(e,t);if(r&&!MH(n)){let i=new Uint8Array(32);for(let o=0;o<Number.MAX_SAFE_INTEGER&&(i.set(nr.encode(o)),n=CH(e,t,{extraEntropy:i}),!MH(n));o++);}return n.toDERRawBytes()}function jH(e,t){let r=Co.utils,n=r.taggedHash("TapTweak",e,t),i=r.bytesToNumberBE(n);if(i>=lS)throw new Error("tweak higher than curve order");return i}function iwe(e,t=new Uint8Array){let r=Co.utils,n=r.bytesToNumberBE(e),i=mS.fromPrivateKey(n),o=i.hasEvenY()?n:r.mod(-n,lS),s=r.pointToBytes(i),a=jH(s,t);return r.numberToBytesBE(r.mod(o+a,lS),32)}function GH(e,t){let r=Co.utils,n=jH(e,t),o=r.lift_x(r.bytesToNumberBE(e)).add(mS.fromPrivateKey(n)),s=o.hasEvenY()?0:1;return[r.pointToBytes(o),s]}var UP=fs(Tr(null),e=>T0(e,Ti.ecdsa)),hS=fs(Tr(32),e=>T0(e,Ti.schnorr)),RH=fs(Tr(null),e=>{if(e.length!==64&&e.length!==65)throw new Error("Schnorr signature should be 64 or 65 bytes long");return e});var tl={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128};var owe=8,swe=2,Fd=0,$H=4294967295,cS=new Uint8Array(32),JXe=A0.decimal(owe);function DP(e,t){if(!_r(e)||!_r(t))throw new Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(e[n]!=t[n])return Math.sign(e[n]-t[n]);return Math.sign(e.length-t.length)}var An;(function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"})(An||(An={}));var Sn=vn({encodeStream:(e,t)=>{for(let r of t){if(typeof r=="string"){if(An[r]===void 0)throw new Error(`Unknown opcode=${r}`);e.byte(An[r]);continue}else if(typeof r=="number"){if(r===0){e.byte(0);continue}else if(1<=r&&r<=16){e.byte(An.OP_1-1+r);continue}}if(typeof r=="number"&&(r=YH().encode(BigInt(r))),!_r(r))throw new Error(`Wrong Script OP=${r} (${typeof r})`);let n=r.length;n<An.PUSHDATA1?e.byte(n):n<=255?(e.byte(An.PUSHDATA1),e.byte(n)):n<=65535?(e.byte(An.PUSHDATA2),e.bytes(CP.encode(n))):(e.byte(An.PUSHDATA4),e.bytes(nr.encode(n))),e.bytes(r)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let r=e.byte();if(An.OP_0<r&&r<=An.PUSHDATA4){let n;if(r<An.PUSHDATA1)n=r;else if(r===An.PUSHDATA1)n=du.decodeStream(e);else if(r===An.PUSHDATA2)n=CP.decodeStream(e);else if(r===An.PUSHDATA4)n=nr.decodeStream(e);else throw new Error("Should be not possible");t.push(e.bytes(n))}else if(r===0)t.push(0);else if(An.OP_1<=r&&r<=An.OP_16)t.push(r-(An.OP_1-1));else{let n=An[r];if(n===void 0)throw new Error(`Unknown opcode=${r.toString(16)}`);t.push(n)}}return t}});function YH(e=6,t=!1){return vn({encodeStream:(r,n)=>{if(n===0n)return;let i=n<0,o=BigInt(n),s=[];for(let a=i?-o:o;a;a>>=8n)s.push(Number(a&0xffn));s[s.length-1]>=128?s.push(i?128:0):i&&(s[s.length-1]|=128),r.bytes(new Uint8Array(s))},decodeStream:r=>{let n=r.leftBytes;if(n>e)throw new Error(`ScriptNum: number (${n}) bigger than limit=${e}`);if(n===0)return 0n;if(t&&!(r.data[n-1]&127)&&(n<=1||!(r.data[n-2]&128)))throw new Error("Non-minimally encoded ScriptNum");let i=0,o=0n;for(let s=0;s<n;++s)i=r.byte(),o|=BigInt(i)<<8n*BigInt(s);return i>=128&&(o&=2n**BigInt(n*8)-1n>>1n,o=-o),o}})}function awe(e,t=4,r=!0){if(typeof e=="number")return e;if(_r(e))try{let n=YH(t,r).decode(e);return n>Number.MAX_SAFE_INTEGER?void 0:Number(n)}catch{return}}var OH={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,18446744073709551615n]},bS=vn({encodeStream:(e,t)=>{if(typeof t=="number"&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[r,n,i,o]of Object.values(OH))if(!(i>t||t>o)){e.byte(r);for(let s=0;s<n;s++)e.byte(Number(t>>8n*BigInt(s)&0xffn));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[r,n,i]=OH[t],o=0n;for(let s=0;s<n;s++)o|=BigInt(e.byte())<<8n*BigInt(s);if(o<i)throw e.err(`Wrong CompactSize(${8*n})`);return o}}),ca=yb(bS,A0.number),NH=e=>Wi(bS,e),aa=Tr(bS),cwe=ki({txid:Tr(32,!0),index:nr,finalScriptSig:aa,sequence:nr}),I0=ki({amount:hb,script:aa}),uwe={amount:0xffffffffffffffffn,script:Vr},zP=Wi(ca,aa),fwe=ki({version:S0,segwitFlag:kH(new Uint8Array([0,1])),inputs:NH(cwe),outputs:NH(I0),witnesses:TH("segwitFlag",Wi("inputs/length",zP)),lockTime:nr});function lwe(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw new Error("Segwit flag with empty witnesses array");return e}var rc=fs(fwe,lwe);function LP(e){let[t,r,n,i,o,s]=e;return{type:t,kc:r,vc:n,reqInc:i,allowInc:o,silentIgnore:s}}var xS=ki({fingerprint:EH,path:Wi(null,nr)}),dwe=ki({version:du,internalKey:Tr(32),merklePath:Wi(null,Tr(32))}),k0=fs(dwe,e=>{if(e.merklePath.length>128)throw new Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e}),JH=ki({hashes:Wi(ca,Tr(32)),der:xS}),hwe=Tr(78),pwe=ki({pubKey:hS,leafHash:Tr(32)}),ywe=Wi(null,ki({depth:du,version:du,script:aa})),En=Tr(null),UH=Tr(20),gb=Tr(32),jP={unsignedTx:[0,!1,rc,[0],[0],!1],xpub:[1,hwe,xS,[],[0,2],!1],txVersion:[2,!1,nr,[2],[2],!1],fallbackLocktime:[3,!1,nr,[],[2],!1],inputCount:[4,!1,ca,[2],[2],!1],outputCount:[5,!1,ca,[2],[2],!1],txModifiable:[6,!1,du,[],[2],!1],version:[251,!1,nr,[],[0,2],!1],proprietary:[252,En,En,[],[0,2],!1]},pS={nonWitnessUtxo:[0,!1,rc,[],[0,2],!1],witnessUtxo:[1,!1,I0,[],[0,2],!1],partialSig:[2,UP,En,[],[0,2],!1],sighashType:[3,!1,nr,[],[0,2],!1],redeemScript:[4,!1,En,[],[0,2],!1],witnessScript:[5,!1,En,[],[0,2],!1],bip32Derivation:[6,UP,xS,[],[0,2],!1],finalScriptSig:[7,!1,En,[],[0,2],!1],finalScriptWitness:[8,!1,zP,[],[0,2],!1],porCommitment:[9,!1,En,[],[0,2],!1],ripemd160:[10,UH,En,[],[0,2],!1],sha256:[11,gb,En,[],[0,2],!1],hash160:[12,UH,En,[],[0,2],!1],hash256:[13,gb,En,[],[0,2],!1],txid:[14,!1,gb,[2],[2],!0],index:[15,!1,nr,[2],[2],!0],sequence:[16,!1,nr,[],[2],!0],requiredTimeLocktime:[17,!1,nr,[],[2],!1],requiredHeightLocktime:[18,!1,nr,[],[2],!1],tapKeySig:[19,!1,RH,[],[0,2],!1],tapScriptSig:[20,pwe,RH,[],[0,2],!1],tapLeafScript:[21,k0,En,[],[0,2],!1],tapBip32Derivation:[22,gb,JH,[],[0,2],!1],tapInternalKey:[23,!1,hS,[],[0,2],!1],tapMerkleRoot:[24,!1,gb,[],[0,2],!1],proprietary:[252,En,En,[],[0,2],!1]},mwe=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],gwe=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],yS={redeemScript:[0,!1,En,[],[0,2],!1],witnessScript:[1,!1,En,[],[0,2],!1],bip32Derivation:[2,UP,xS,[],[0,2],!1],amount:[3,!1,SH,[2],[2],!0],script:[4,!1,En,[2],[2],!0],tapInternalKey:[5,!1,hS,[],[0,2],!1],tapTree:[6,!1,ywe,[],[0,2],!1],tapBip32Derivation:[7,hS,JH,[],[0,2],!1],proprietary:[252,En,En,[],[0,2],!1]},bwe=[],DH=Wi(aS,ki({key:BH(ca,ki({type:ca,key:Tr(null)})),value:Tr(ca)})),ZXe=ki({type:ca,key:Tr(null)});function GP(e){let t={};for(let r in e){let[n,i,o]=e[r];t[n]=[r,i,o]}return vn({encodeStream:(r,n)=>{let i=[];for(let o in e){let s=n[o];if(s===void 0)continue;let[a,c,u]=e[o];if(!c)i.push({key:{type:a,key:Vr},value:u.encode(s)});else{let h=s.map(([l,g])=>[c.encode(l),u.encode(g)]);h.sort((l,g)=>DP(l[0],g[0]));for(let[l,g]of h)i.push({key:{key:l,type:a},value:g})}}if(n.unknown){n.unknown.sort((o,s)=>DP(o[0].key,s[0].key));for(let[o,s]of n.unknown)i.push({key:o,value:s})}DH.encodeStream(r,i)},decodeStream:r=>{let n=DH.decodeStream(r),i={},o={};for(let s of n){let a="unknown",c=s.key.key,u=s.value;if(t[s.key.type]){let[h,l,g]=t[s.key.type];if(a=h,!l&&c.length)throw new Error(`PSBT: Non-empty key for ${a} (key=${Fr.encode(c)} value=${Fr.encode(u)}`);if(c=l?l.decode(c):void 0,u=g.decode(u),!l){if(i[a])throw new Error(`PSBT: Same keys: ${a} (key=${c} value=${u})`);i[a]=u,o[a]=!0;continue}}else c={type:s.key.type,key:s.key.key};if(o[a])throw new Error(`PSBT: Key type with empty key and no key=${a} val=${u}`);i[a]||(i[a]=[]),i[a].push([c,u])}return i}})}function LH(e,t){if(!gr(e.hash,Ii(t)))throw new Error("checkScript: wsh wrong witnessScript hash");let r=In.decode(t);if(r.type==="tr"||r.type==="tr_ns"||r.type==="tr_ms")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2SH`);if(r.type==="wpkh"||r.type==="sh")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2WSH`)}function KP(e,t,r){if(e){let n=In.decode(e);if(n.type==="tr_ns"||n.type==="tr_ms"||n.type==="ms"||n.type=="pk")throw new Error(`checkScript: non-wrapped ${n.type}`);if(n.type==="sh"&&t){if(!gr(n.hash,gS(t)))throw new Error("checkScript: sh wrong redeemScript hash");let i=In.decode(t);if(i.type==="tr"||i.type==="tr_ns"||i.type==="tr_ms")throw new Error(`checkScript: P2${i.type} cannot be wrapped in P2SH`);if(i.type==="sh")throw new Error("checkScript: P2SH cannot be wrapped in P2SH")}n.type==="wsh"&&r&&LH(n,r)}if(t){let n=In.decode(t);n.type==="wsh"&&r&&LH(n,r)}}var $P=fs(GP(pS),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw new Error("validateInput: wmpty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw new Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)T0(t,Ti.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)T0(t,Ti.ecdsa);if(e.requiredTimeLocktime!==void 0&&e.requiredTimeLocktime<5e8)throw new Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(e.requiredHeightLocktime!==void 0&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw new Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&e.index!==void 0){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw new Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!gr(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw new Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,r]of e.tapLeafScript){if((t.version&254)!==r[r.length-1])throw new Error("validateInput: tapLeafScript version mimatch");if(r[r.length-1]&1)throw new Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw new Error("nonWitnessUtxo: incorect output index");let r=qd.fromRaw(rc.encode(e.nonWitnessUtxo)),n=Fr.encode(e.txid);if(r.id!==n)throw new Error(`nonWitnessUtxo: wrong txid, exp=${n} got=${r.id}`)}return e}),YP=fs(GP(yS),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)T0(t,Ti.ecdsa);return e}),ZH=fs(GP(jP),e=>{if((e.version||0)===0){if(!e.unsignedTx)throw new Error("PSBTv0: missing unsignedTx");if(e.unsignedTx.segwitFlag||e.unsignedTx.witnesses)throw new Error("PSBTv0: witness in unsingedTx");for(let r of e.unsignedTx.inputs)if(r.finalScriptSig&&r.finalScriptSig.length)throw new Error("PSBTv0: input scriptSig found in unsignedTx")}return e}),xwe=ki({magic:mb(pb(new Uint8Array([255])),"psbt"),global:ZH,inputs:Wi("global/unsignedTx/inputs/length",$P),outputs:Wi(null,YP)}),wwe=ki({magic:mb(pb(new Uint8Array([255])),"psbt"),global:ZH,inputs:Wi("global/inputCount",$P),outputs:Wi("global/outputCount",YP)}),QXe=ki({magic:mb(pb(new Uint8Array([255])),"psbt"),items:Wi(null,yb(Wi(aS,_H([IH(ca),Tr(bS)])),A0.dict()))});function MP(e,t,r){for(let n in r){if(n==="unknown"||!t[n])continue;let{allowInc:i}=LP(t[n]);if(!i.includes(e))throw new Error(`PSBTv${e}: field ${n} is not allowed`)}for(let n in t){let{reqInc:i}=LP(t[n]);if(i.includes(e)&&r[n]===void 0)throw new Error(`PSBTv${e}: missing required field ${n}`)}}function KH(e,t,r){let n={};for(let i in r){let o=i;if(o!=="unknown"){if(!t[o])continue;let{allowInc:s,silentIgnore:a}=LP(t[o]);if(!s.includes(e)){if(a)continue;throw new Error(`Failed to serialize in PSBTv${e}: ${o} but versions allows inclusion=${s}`)}}n[o]=r[o]}return n}function QH(e){let t=e&&e.global&&e.global.version||0;MP(t,jP,e.global);for(let s of e.inputs)MP(t,pS,s);for(let s of e.outputs)MP(t,yS,s);let r=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<r)throw new Error("Not enough inputs");let n=e.inputs.slice(r);if(n.length>1||n.length&&Object.keys(n[0]).length)throw new Error(`Unexpected inputs left in tx=${n}`);let i=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<i)throw new Error("Not outputs inputs");let o=e.outputs.slice(i);if(o.length>1||o.length&&Object.keys(o[0]).length)throw new Error(`Unexpected outputs left in tx=${o}`);return e}function RP(e,t,r,n){let i={...r,...t};for(let o in e){let s=o,[a,c,u]=e[s],h=n&&!n.includes(o);if(t[o]===void 0&&o in t){if(h)throw new Error(`Cannot remove signed field=${o}`);delete i[o]}else if(c){let l=r&&r[o]?r[o]:[],g=t[s];if(g){if(!Array.isArray(g))throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);g=g.map(E=>{if(E.length!==2)throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);return[typeof E[0]=="string"?c.decode(Fr.decode(E[0])):E[0],typeof E[1]=="string"?u.decode(Fr.decode(E[1])):E[1]]});let x={},A=(E,C,M)=>{if(x[E]===void 0){x[E]=[C,M];return}let N=Fr.encode(u.encode(x[E][1])),R=Fr.encode(u.encode(M));if(N!==R)throw new Error(`keyMap(${s}): same key=${E} oldVal=${N} newVal=${R}`)};for(let[E,C]of l){let M=Fr.encode(c.encode(E));A(M,E,C)}for(let[E,C]of g){let M=Fr.encode(c.encode(E));if(C===void 0){if(h)throw new Error(`Cannot remove signed field=${s}/${E}`);delete x[M]}else A(M,E,C)}i[s]=Object.values(x)}}else if(typeof i[o]=="string")i[o]=u.decode(Fr.decode(i[o]));else if(h&&o in t&&r&&r[o]!==void 0&&!gr(u.encode(t[o]),u.encode(r[o])))throw new Error(`Cannot change signed field=${o}`)}for(let o in i)e[o]||delete i[o];return i}var FH=fs(xwe,QH),VH=fs(wwe,QH),OP=ki({txid:Tr(32,!0),index:nr}),vwe={encode(e){if(!(e.length!==2||!_r(e[0])||!Vd(e[0],Ti.ecdsa)||e[1]!=="CHECKSIG"))return{type:"pk",pubkey:e[0]}},decode:e=>e.type==="pk"?[e.pubkey,"CHECKSIG"]:void 0};var Awe={encode(e){if(!(e.length!==5||e[0]!=="DUP"||e[1]!=="HASH160"||!_r(e[2]))&&!(e[3]!=="EQUALVERIFY"||e[4]!=="CHECKSIG"))return{type:"pkh",hash:e[2]}},decode:e=>e.type==="pkh"?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0};var Swe={encode(e){if(!(e.length!==3||e[0]!=="HASH160"||!_r(e[1])||e[2]!=="EQUAL"))return{type:"sh",hash:e[1]}},decode:e=>e.type==="sh"?["HASH160",e.hash,"EQUAL"]:void 0},XH=(e,t=tl)=>{let r=e.script;if(!_r(r))throw new Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let n=gS(r),i=In.encode({type:"sh",hash:n});KP(i,r,e.witnessScript);let o={type:"sh",redeemScript:r,script:In.encode({type:"sh",hash:n}),address:wS(t).encode({type:"sh",hash:n})};return e.witnessScript&&(o.witnessScript=e.witnessScript),o},Ewe={encode(e){if(!(e.length!==2||e[0]!==0||!_r(e[1]))&&e[1].length===32)return{type:"wsh",hash:e[1]}},decode:e=>e.type==="wsh"?[0,e.hash]:void 0};var Iwe={encode(e){if(!(e.length!==2||e[0]!==0||!_r(e[1]))&&e[1].length===20)return{type:"wpkh",hash:e[1]}},decode:e=>e.type==="wpkh"?[0,e.hash]:void 0},JP=(e,t=tl)=>{if(!Vd(e,Ti.ecdsa))throw new Error("P2WPKH: invalid publicKey");if(e.length===65)throw new Error("P2WPKH: uncompressed public key");let r=gS(e);return{type:"wpkh",script:In.encode({type:"wpkh",hash:r}),address:wS(t).encode({type:"wpkh",hash:r})}},kwe={encode(e){let t=e.length-1;if(e[t]!=="CHECKMULTISIG")return;let r=e[0],n=e[t-1];if(typeof r!="number"||typeof n!="number")return;let i=e.slice(1,-2);if(n===i.length){for(let o of i)if(!_r(o))return;return{type:"ms",m:r,pubkeys:i}}},decode:e=>e.type==="ms"?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0};var Twe={encode(e){if(!(e.length!==2||e[0]!==1||!_r(e[1])))return{type:"tr",pubkey:e[1]}},decode:e=>e.type==="tr"?[1,e.pubkey]:void 0};function Pwe(e){let t=Array.from(e);for(;t.length>=2;){t.sort((s,a)=>(a.weight||1)-(s.weight||1));let n=t.pop(),i=t.pop(),o=(i?.weight||1)+(n?.weight||1);t.push({weight:o,childs:[i?.childs||i,n?.childs||n]})}let r=t[0];return r?.childs||r}function _we(e,t,r=!1){let n=In.decode(e);if(n.type==="unknown"&&r)return;if(!["tr_ns","tr_ms"].includes(n.type))throw new Error(`P2TR: invalid leaf script=${n.type}`);let i=n;if(!r&&i.pubkeys)for(let o of i.pubkeys){if(gr(o,eW))throw new Error("Unspendable taproot key in leaf script");if(gr(o,t))throw new Error("Using P2TR with leaf script with same key as internal key is not supported")}}function FP(e,t,r=!1){if(!e)throw new Error("taprootHashTree: empty tree");if(Array.isArray(e)&&e.length===1&&(e=e[0]),!Array.isArray(e)){let{leafVersion:a,script:c}=e;if(e.tapLeafScript||e.tapMerkleRoot&&!gr(e.tapMerkleRoot,Vr))throw new Error("P2TR: tapRoot leafScript cannot have tree");let u=typeof c=="string"?Fr.decode(c):c;if(!_r(u))throw new Error(`checkScript: wrong script type=${u}`);return _we(u,t,r),{type:"leaf",version:a,script:u,hash:fS(u,a)}}if(e.length!==2&&(e=Pwe(e)),e.length!==2)throw new Error("hashTree: non binary tree!");let n=FP(e[0],t,r),i=FP(e[1],t,r),[o,s]=[n.hash,i.hash];return DP(s,o)===-1&&([o,s]=[s,o]),{type:"branch",left:n,right:i,hash:Co.utils.taggedHash("TapBranch",o,s)}}function VP(e,t=[]){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return{...e,path:t};if(e.type!=="branch")throw new Error(`taprootAddPath: wrong type=${e}`);return{...e,path:t,left:VP(e.left,[e.right.hash,...t]),right:VP(e.right,[e.left.hash,...t])}}function qP(e){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return[e];if(e.type!=="branch")throw new Error(`taprootWalkTree: wrong type=${e}`);return[...qP(e.left),...qP(e.right)]}var eW=Ii(mS.BASE.toRawBytes(!1));function tW(e,t,r=tl,n=!1){if(!e&&!t)throw new Error("p2tr: should have pubKey or scriptTree (or both)");let i=typeof e=="string"?Fr.decode(e):e||eW;if(!Vd(i,Ti.schnorr))throw new Error("p2tr: non-schnorr pubkey");let o=t?VP(FP(t,i,n)):void 0,s=o?o.hash:void 0,[a,c]=GH(i,s||Vr),u;o&&(u=qP(o).map(g=>({...g,controlBlock:k0.encode({version:(g.version||WP)+c,internalKey:i,merklePath:g.path})})));let h;u&&(h=u.map(g=>[k0.decode(g.controlBlock),el(g.script,new Uint8Array([g.version||WP]))]));let l={type:"tr",script:In.encode({type:"tr",pubkey:a}),address:wS(r).encode({type:"tr",pubkey:a}),tweakedPubkey:a,tapInternalKey:i};return u&&(l.leaves=u),h&&(l.tapLeafScript=h),s&&(l.tapMerkleRoot=s),l}var Bwe={encode(e){let t=e.length-1;if(e[t]!=="CHECKSIG")return;let r=[];for(let n=0;n<t;n++){let i=e[n];if(n&1){if(i!=="CHECKSIGVERIFY"||n===t-1)return;continue}if(!_r(i))return;r.push(i)}return{type:"tr_ns",pubkeys:r}},decode:e=>{if(e.type!=="tr_ns")return;let t=[];for(let r=0;r<e.pubkeys.length-1;r++)t.push(e.pubkeys[r],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}};var Cwe={encode(e){let t=e.length-1;if(e[t]!=="NUMEQUAL"||e[1]!=="CHECKSIG")return;let r=[],n=awe(e[t-1]);if(typeof n=="number"){for(let i=0;i<t-1;i++){let o=e[i];if(i&1){if(o!==(i===1?"CHECKSIG":"CHECKSIGADD"))throw new Error("OutScript.encode/tr_ms: wrong element");continue}if(!_r(o))throw new Error("OutScript.encode/tr_ms: wrong key element");r.push(o)}return{type:"tr_ms",pubkeys:r,m:n}}},decode:e=>{if(e.type!=="tr_ms")return;let t=[e.pubkeys[0],"CHECKSIG"];for(let r=1;r<e.pubkeys.length;r++)t.push(e.pubkeys[r],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}};var Mwe={encode(e){return{type:"unknown",script:Sn.encode(e)}},decode:e=>e.type==="unknown"?Sn.decode(e.script):void 0},Rwe=[vwe,Awe,Swe,Ewe,Iwe,kwe,Twe,Bwe,Cwe,Mwe],Owe=yb(Sn,A0.match(Rwe)),In=fs(Owe,e=>{if(e.type==="pk"&&!Vd(e.pubkey,Ti.ecdsa))throw new Error("OutScript/pk: wrong key");if((e.type==="pkh"||e.type==="sh"||e.type==="wpkh")&&(!_r(e.hash)||e.hash.length!==20))throw new Error(`OutScript/${e.type}: wrong hash`);if(e.type==="wsh"&&(!_r(e.hash)||e.hash.length!==32))throw new Error("OutScript/wsh: wrong hash");if(e.type==="tr"&&(!_r(e.pubkey)||!Vd(e.pubkey,Ti.schnorr)))throw new Error("OutScript/tr: wrong taproot public key");if((e.type==="ms"||e.type==="tr_ns"||e.type==="tr_ms")&&!Array.isArray(e.pubkeys))throw new Error("OutScript/multisig: wrong pubkeys array");if(e.type==="ms"){let t=e.pubkeys.length;for(let r of e.pubkeys)if(!Vd(r,Ti.ecdsa))throw new Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw new Error("OutScript/multisig: invalid params")}if(e.type==="tr_ns"||e.type==="tr_ms"){for(let t of e.pubkeys)if(!Vd(t,Ti.schnorr))throw new Error(`OutScript/${e.type}: wrong pubkey`)}if(e.type==="tr_ms"){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw new Error("OutScript/tr_ms: invalid params")}return e});function rW(e,t){if(t.length<2||t.length>40)throw new Error("Witness: invalid length");if(e>16)throw new Error("Witness: invalid version");if(e===0&&!(t.length===20||t.length===32))throw new Error("Witness: invalid length for version")}function NP(e,t,r=tl){rW(e,t);let n=e===0?tS:_P;return n.encode(r.bech32,[e].concat(n.toWords(t)))}function qH(e,t){return zH.encode(el(Uint8Array.from(t),e))}function wS(e=tl){return{encode(t){let{type:r}=t;if(r==="wpkh")return NP(0,t.hash,e);if(r==="wsh")return NP(0,t.hash,e);if(r==="tr")return NP(1,t.pubkey,e);if(r==="pkh")return qH(t.hash,[e.pubKeyHash]);if(r==="sh")return qH(t.hash,[e.scriptHash]);throw new Error(`Unknown address type=${r}`)},decode(t){if(t.length<14||t.length>74)throw new Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(e.bech32)){let n;try{if(n=tS.decode(t),n.words[0]!==0)throw new Error(`bech32: wrong version=${n.words[0]}`)}catch{if(n=_P.decode(t),n.words[0]===0)throw new Error(`bech32m: wrong version=${n.words[0]}`)}if(n.prefix!==e.bech32)throw new Error(`wrong bech32 prefix=${n.prefix}`);let[i,...o]=n.words,s=tS.fromWords(o);if(rW(i,s),i===0&&s.length===32)return{type:"wsh",hash:s};if(i===0&&s.length===20)return{type:"wpkh",hash:s};if(i===1&&s.length===32)return{type:"tr",pubkey:s};throw new Error("Unknown witness program")}let r=zH.decode(t);if(r.length!==21)throw new Error("Invalid base58 address");if(r[0]===e.pubKeyHash)return{type:"pkh",hash:r.slice(1)};if(r[0]===e.scriptHash)return{type:"sh",hash:r.slice(1)};throw new Error(`Invalid address prefix=${r[0]}`)}}}var Pr;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"})(Pr||(Pr={}));var HP;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"})(HP||(HP={}));function Nwe(e){if(typeof e!="number"||typeof HP[e]!="string")throw new Error(`Invalid SigHash=${e}`);return e}function HH(e){let t=e&31;return{isAny:!!(e&Pr.ANYONECANPAY),isNone:t===Pr.NONE,isSingle:t===Pr.SINGLE}}function uS(e){if(e.txid===void 0||e.index===void 0)throw new Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:bb(e.sequence,$H),finalScriptSig:bb(e.finalScriptSig,Vr)}}function WH(e){for(let t in e){let r=t;mwe.includes(r)||delete e[r]}}function E0(e){if(e.script===void 0||e.amount===void 0)throw new Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}var WP=192,fS=(e,t=WP)=>Co.utils.taggedHash("TapLeaf",new Uint8Array([t]),aa.encode(e));function Uwe(e,t,r,n=Vr){return gr(r,t)&&(e=iwe(e,n),t=Co.getPublicKey(e)),{privKey:e,pubKey:t}}var Dwe={}.toString;function Lwe(e){if(e!==void 0&&Dwe.call(e)!=="[object Object]")throw new Error(`Wrong object type for transaction options: ${e}`);let t={...e,version:bb(e.version,swe),lockTime:bb(e.lockTime,0),PSBTVersion:bb(e.PSBTVersion,0)};if(typeof t.allowUnknowInput<"u"&&(e.allowUnknownInputs=t.allowUnknowInput),typeof t.allowUnknowOutput<"u"&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2].includes(t.version))throw new Error(`Unknown version: ${t.version}`);if(typeof t.lockTime!="number")throw new Error("Transaction lock time should be number");if(nr.encode(t.lockTime),t.PSBTVersion!==0&&t.PSBTVersion!==2)throw new Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let r of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let n=t[r];if(n!==void 0&&typeof n!="boolean")throw new Error(`Transation options wrong type: ${r}=${n} (${typeof n})`)}return Object.freeze(t)}var qd=class e{constructor(t={}){this.global={},this.inputs=[],this.outputs=[];let r=this.opts=Lwe(t);r.lockTime!==Fd&&(this.global.fallbackLocktime=r.lockTime),this.global.txVersion=r.version}static fromRaw(t,r={}){let n=rc.decode(t),i=new e({...r,version:n.version,lockTime:n.lockTime});for(let o of n.outputs)i.addOutput(o);if(i.outputs=n.outputs,i.inputs=n.inputs,n.witnesses)for(let o=0;o<n.witnesses.length;o++)i.inputs[o].finalScriptWitness=n.witnesses[o];return i}static fromPSBT(t,r={}){let n;try{n=FH.decode(t)}catch(l){try{n=VH.decode(t)}catch{throw l}}let i=n.global.version||0;if(i!==0&&i!==2)throw new Error(`Wrong PSBT version=${i}`);let o=n.global.unsignedTx,s=i===0?o?.version:n.global.txVersion,a=i===0?o?.lockTime:n.global.fallbackLocktime,c=new e({...r,version:s,lockTime:a,PSBTVersion:i}),u=i===0?o?.inputs.length:n.global.inputCount;c.inputs=n.inputs.slice(0,u).map((l,g)=>({finalScriptSig:Vr,...n.global.unsignedTx?.inputs[g],...l}));let h=i===0?o?.outputs.length:n.global.outputCount;return c.outputs=n.outputs.slice(0,h).map((l,g)=>({...l,...n.global.unsignedTx?.outputs[g]})),c.global={...n.global,txVersion:s},a!==Fd&&(c.global.fallbackLocktime=a),c}toPSBT(t=this.opts.PSBTVersion){if(t!==0&&t!==2)throw new Error(`Wrong PSBT version=${t}`);let r=this.inputs.map(o=>KH(t,pS,o));for(let o of r)o.partialSig&&!o.partialSig.length&&delete o.partialSig,o.finalScriptSig&&!o.finalScriptSig.length&&delete o.finalScriptSig,o.finalScriptWitness&&!o.finalScriptWitness.length&&delete o.finalScriptWitness;let n=this.outputs.map(o=>KH(t,yS,o)),i={...this.global};return t===0?(i.unsignedTx=rc.decode(this.unsignedTx),delete i.fallbackLocktime,delete i.txVersion):(i.version=t,i.txVersion=this.version,i.inputCount=this.inputs.length,i.outputCount=this.outputs.length,i.fallbackLocktime&&i.fallbackLocktime===Fd&&delete i.fallbackLocktime),this.opts.bip174jsCompat&&(r.length||r.push({}),n.length||n.push({})),(t===0?FH:VH).encode({global:i,inputs:r,outputs:n})}get lockTime(){let t=Fd,r=0,n=Fd,i=0;for(let o of this.inputs)o.requiredHeightLocktime&&(t=Math.max(t,o.requiredHeightLocktime),r++),o.requiredTimeLocktime&&(n=Math.max(n,o.requiredTimeLocktime),i++);return r&&r>=i?t:n!==Fd?n:this.global.fallbackLocktime||Fd}get version(){if(this.global.txVersion===void 0)throw new Error("No global.txVersion");return this.global.txVersion}inputStatus(t){this.checkInputIdx(t);let r=this.inputs[t];return r.finalScriptSig&&r.finalScriptSig.length||r.finalScriptWitness&&r.finalScriptWitness.length?"finalized":r.tapKeySig||r.tapScriptSig&&r.tapScriptSig.length||r.partialSig&&r.partialSig.length?"signed":"unsigned"}inputSighash(t){this.checkInputIdx(t);let r=this.inputType(this.inputs[t]).sighash,n=r===Pr.DEFAULT?Pr.ALL:r&3;return{sigInputs:r&Pr.ANYONECANPAY,sigOutputs:n}}signStatus(){let t=!0,r=!0,n=[],i=[];for(let o=0;o<this.inputs.length;o++){if(this.inputStatus(o)==="unsigned")continue;let{sigInputs:a,sigOutputs:c}=this.inputSighash(o);if(a===Pr.ANYONECANPAY?n.push(o):t=!1,c===Pr.ALL)r=!1;else if(c===Pr.SINGLE)i.push(o);else if(c!==Pr.NONE)throw new Error(`Wrong signature hash output type: ${c}`)}return{addInput:t,addOutput:r,inputs:n,outputs:i}}get isFinal(){for(let t=0;t<this.inputs.length;t++)if(this.inputStatus(t)!=="finalized")return!1;return!0}get hasWitnesses(){let t=!1;for(let r of this.inputs)r.finalScriptWitness&&r.finalScriptWitness.length&&(t=!0);return t}get weight(){if(!this.isFinal)throw new Error("Transaction is not finalized");let t=32,r=this.outputs.map(E0);this.hasWitnesses&&(t+=2),t+=4*ca.encode(this.inputs.length).length,t+=4*ca.encode(this.outputs.length).length;for(let n of this.inputs)t+=160+4*aa.encode(n.finalScriptSig||Vr).length;for(let n of r)t+=32+4*aa.encode(n.script).length;if(this.hasWitnesses)for(let n of this.inputs)n.finalScriptWitness&&(t+=zP.encode(n.finalScriptWitness).length);return t}get vsize(){return Math.ceil(this.weight/4)}toBytes(t=!1,r=!1){return rc.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(uS).map(n=>({...n,finalScriptSig:t&&n.finalScriptSig||Vr})),outputs:this.outputs.map(E0),witnesses:this.inputs.map(n=>n.finalScriptWitness||[]),segwitFlag:r&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return Fr.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw new Error("Transaction is not finalized");return Fr.encode(Xf(this.toBytes(!0)))}get id(){if(!this.isFinal)throw new Error("Transaction is not finalized");return Fr.encode(Xf(this.toBytes(!0)).reverse())}checkInputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.inputs.length)throw new Error(`Wrong input index=${t}`)}getInput(t){return this.checkInputIdx(t),dS(this.inputs[t])}get inputsLength(){return this.inputs.length}normalizeInput(t,r,n){let{nonWitnessUtxo:i,txid:o}=t;typeof i=="string"&&(i=Fr.decode(i)),_r(i)&&(i=rc.decode(i)),i===void 0&&(i=r?.nonWitnessUtxo),typeof o=="string"&&(o=Fr.decode(o)),o===void 0&&(o=r?.txid);let s={...r,...t,nonWitnessUtxo:i,txid:o};s.nonWitnessUtxo===void 0&&delete s.nonWitnessUtxo,s.sequence===void 0&&(s.sequence=$H),s.tapMerkleRoot===null&&delete s.tapMerkleRoot,s=RP(pS,s,r,n),$P.encode(s);let a;return s.nonWitnessUtxo&&s.index!==void 0?a=s.nonWitnessUtxo.outputs[s.index]:s.witnessUtxo&&(a=s.witnessUtxo),a&&!this.opts.disableScriptCheck&&KP(a&&a.script,s.redeemScript,s.witnessScript),s}addInput(t,r=!1){if(!r&&!this.signStatus().addInput)throw new Error("Tx has signed inputs, cannot add new one");return this.inputs.push(this.normalizeInput(t)),this.inputs.length-1}updateInput(t,r,n=!1){this.checkInputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addInput||o.inputs.includes(t))&&(i=gwe)}this.inputs[t]=this.normalizeInput(r,this.inputs[t],i)}checkOutputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.outputs.length)throw new Error(`Wrong output index=${t}`)}getOutput(t){return this.checkOutputIdx(t),dS(this.outputs[t])}get outputsLength(){return this.outputs.length}normalizeOutput(t,r,n){let{amount:i,script:o}=t;if(i===void 0&&(i=r?.amount),typeof i!="bigint")throw new Error("amount must be bigint sats");typeof o=="string"&&(o=Fr.decode(o)),o===void 0&&(o=r?.script);let s={...r,...t,amount:i,script:o};if(s.amount===void 0&&delete s.amount,s=RP(yS,s,r,n),YP.encode(s),s.script&&!this.opts.allowUnknownOutputs&&In.decode(s.script).type==="unknown")throw new Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownScript=true, if you sure");return this.opts.disableScriptCheck||KP(s.script,s.redeemScript,s.witnessScript),s}addOutput(t,r=!1){if(!r&&!this.signStatus().addOutput)throw new Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(t)),this.outputs.length-1}updateOutput(t,r,n=!1){this.checkOutputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addOutput||o.outputs.includes(t))&&(i=bwe)}this.outputs[t]=this.normalizeOutput(r,this.outputs[t],i)}addOutputAddress(t,r,n=tl){return this.addOutput({script:In.encode(wS(n).decode(t)),amount:r})}get fee(){let t=0n;for(let n of this.inputs){let i=this.prevOut(n);if(!i)throw new Error("Empty input amount");t+=i.amount}let r=this.outputs.map(E0);for(let n of r)t-=n.amount;return t}preimageLegacy(t,r,n){let{isAny:i,isNone:o,isSingle:s}=HH(n);if(t<0||!Number.isSafeInteger(t))throw new Error(`Invalid input idx=${t}`);if(s&&t>=this.outputs.length||t>=this.inputs.length)return AH.encode(1n);r=Sn.encode(Sn.decode(r).filter(h=>h!=="CODESEPARATOR"));let a=this.inputs.map(uS).map((h,l)=>({...h,finalScriptSig:l===t?r:Vr}));i?a=[a[t]]:(o||s)&&(a=a.map((h,l)=>({...h,sequence:l===t?h.sequence:0})));let c=this.outputs.map(E0);o?c=[]:s&&(c=c.slice(0,t).fill(uwe).concat([c[t]]));let u=rc.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:a,outputs:c});return Xf(u,S0.encode(n))}preimageWitnessV0(t,r,n,i){let{isAny:o,isNone:s,isSingle:a}=HH(n),c=cS,u=cS,h=cS,l=this.inputs.map(uS),g=this.outputs.map(E0);o||(c=Xf(...l.map(OP.encode))),!o&&!a&&!s&&(u=Xf(...l.map(A=>nr.encode(A.sequence)))),!a&&!s?h=Xf(...g.map(I0.encode)):a&&t<g.length&&(h=Xf(I0.encode(g[t])));let x=l[t];return Xf(S0.encode(this.version),c,u,Tr(32,!0).encode(x.txid),nr.encode(x.index),aa.encode(r),hb.encode(i),nr.encode(x.sequence),h,nr.encode(this.lockTime),nr.encode(n))}preimageWitnessV1(t,r,n,i,o=-1,s,a=192,c){if(!Array.isArray(i)||this.inputs.length!==i.length)throw new Error(`Invalid amounts array=${i}`);if(!Array.isArray(r)||this.inputs.length!==r.length)throw new Error(`Invalid prevOutScript array=${r}`);let u=[du.encode(0),du.encode(n),S0.encode(this.version),nr.encode(this.lockTime)],h=n===Pr.DEFAULT?Pr.ALL:n&3,l=n&Pr.ANYONECANPAY,g=this.inputs.map(uS),x=this.outputs.map(E0);l!==Pr.ANYONECANPAY&&u.push(...[g.map(OP.encode),i.map(hb.encode),r.map(aa.encode),g.map(E=>nr.encode(E.sequence))].map(E=>Ii(el(...E)))),h===Pr.ALL&&u.push(Ii(el(...x.map(I0.encode))));let A=(c?1:0)|(s?2:0);if(u.push(new Uint8Array([A])),l===Pr.ANYONECANPAY){let E=g[t];u.push(OP.encode(E),hb.encode(i[t]),aa.encode(r[t]),nr.encode(E.sequence))}else u.push(nr.encode(t));return A&1&&u.push(Ii(aa.encode(c||Vr))),h===Pr.SINGLE&&u.push(t<x.length?Ii(I0.encode(x[t])):cS),s&&u.push(fS(s,a),du.encode(0),S0.encode(o)),Co.utils.taggedHash("TapSighash",...u)}prevOut(t){if(t.nonWitnessUtxo){if(t.index===void 0)throw new Error("Unknown input index");return t.nonWitnessUtxo.outputs[t.index]}else{if(t.witnessUtxo)return t.witnessUtxo;throw new Error("Cannot find previous output info")}}inputType(t){let r="legacy",n=Pr.ALL,i=this.prevOut(t),o=In.decode(i.script),s=o.type,a=o,c=[o];if(o.type==="tr")return n=Pr.DEFAULT,{txType:"taproot",type:"tr",last:o,lastScript:i.script,defaultSighash:n,sighash:t.sighashType||n};{if((o.type==="wpkh"||o.type==="wsh")&&(r="segwit"),o.type==="sh"){if(!t.redeemScript)throw new Error("inputType: sh without redeemScript");let g=In.decode(t.redeemScript);(g.type==="wpkh"||g.type==="wsh")&&(r="segwit"),c.push(g),a=g,s+=`-${g.type}`}if(a.type==="wsh"){if(!t.witnessScript)throw new Error("inputType: wsh without witnessScript");let g=In.decode(t.witnessScript);g.type==="wsh"&&(r="segwit"),c.push(g),a=g,s+=`-${g.type}`}let u=c[c.length-1];if(u.type==="sh"||u.type==="wsh")throw new Error("inputType: sh/wsh cannot be terminal type");let h=In.encode(u),l={type:s,txType:r,last:u,lastScript:h,defaultSighash:n,sighash:t.sighashType||n};if(r==="legacy"&&!this.opts.allowLegacyWitnessUtxo&&!t.nonWitnessUtxo)throw new Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return l}}signIdx(t,r,n,i){this.checkInputIdx(r);let o=this.inputs[r],s=this.inputType(o);if(!_r(t)){if(!o.bip32Derivation||!o.bip32Derivation.length)throw new Error("bip32Derivation: empty");let h=o.bip32Derivation.filter(g=>g[1].fingerprint==t.fingerprint).map(([g,{path:x}])=>{let A=t;for(let E of x)A=A.deriveChild(E);if(!gr(A.publicKey,g))throw new Error("bip32Derivation: wrong pubKey");if(!A.privateKey)throw new Error("bip32Derivation: no privateKey");return A});if(!h.length)throw new Error(`bip32Derivation: no items with fingerprint=${t.fingerprint}`);let l=!1;for(let g of h)this.signIdx(g.privateKey,r)&&(l=!0);return l}n?n.forEach(Nwe):n=[s.defaultSighash];let a=s.sighash;if(!n.includes(a))throw new Error(`Input with not allowed sigHash=${a}. Allowed: ${n.join(", ")}`);let{sigOutputs:c}=this.inputSighash(r);if(c===Pr.SINGLE&&r>=this.outputs.length)throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${r}`);let u=this.prevOut(o);if(s.txType==="taproot"){if(o.tapBip32Derivation)throw new Error("tapBip32Derivation unsupported");let h=this.inputs.map(this.prevOut),l=h.map(C=>C.script),g=h.map(C=>C.amount),x=!1,A=Co.getPublicKey(t),E=o.tapMerkleRoot||Vr;if(o.tapInternalKey){let{pubKey:C,privKey:M}=Uwe(t,A,o.tapInternalKey,E),[N,R]=GH(o.tapInternalKey,E);if(gr(N,C)){let V=this.preimageWitnessV1(r,l,a,g),q=el(Co.sign(V,M,i),a!==Pr.DEFAULT?new Uint8Array([a]):Vr);this.updateInput(r,{tapKeySig:q},!0),x=!0}}if(o.tapLeafScript){o.tapScriptSig=o.tapScriptSig||[];for(let[C,M]of o.tapLeafScript){let N=M.subarray(0,-1),R=Sn.decode(N),V=M[M.length-1],q=fS(N,V);if(R.findIndex(ee=>_r(ee)&&gr(ee,A))===-1)continue;let G=this.preimageWitnessV1(r,l,a,g,void 0,N,V),z=el(Co.sign(G,t,i),a!==Pr.DEFAULT?new Uint8Array([a]):Vr);this.updateInput(r,{tapScriptSig:[[{pubKey:A,leafHash:q},z]]},!0),x=!0}}if(!x)throw new Error("No taproot scripts signed");return!0}else{let h=rwe(t),l=!1,g=gS(h);for(let E of Sn.decode(s.lastScript))_r(E)&&(gr(E,h)||gr(E,g))&&(l=!0);if(!l)throw new Error(`Input script doesn't have pubKey: ${s.lastScript}`);let x;if(s.txType==="legacy")x=this.preimageLegacy(r,s.lastScript,a);else if(s.txType==="segwit"){let E=s.lastScript;s.last.type==="wpkh"&&(E=In.encode({type:"pkh",hash:s.last.hash})),x=this.preimageWitnessV0(r,E,a,u.amount)}else throw new Error(`Transaction/sign: unknown tx type: ${s.txType}`);let A=nwe(x,t,this.opts.lowR);this.updateInput(r,{partialSig:[[h,el(A,new Uint8Array([a]))]]},!0)}return!0}sign(t,r,n){let i=0;for(let o=0;o<this.inputs.length;o++)try{this.signIdx(t,o,r,n)&&i++}catch{}if(!i)throw new Error("No inputs signed");return i}finalizeIdx(t){if(this.checkInputIdx(t),this.fee<0n)throw new Error("Outputs spends more than inputs amount");let r=this.inputs[t],n=this.inputType(r);if(n.txType==="taproot"){if(r.tapKeySig)r.finalScriptWitness=[r.tapKeySig];else if(r.tapLeafScript&&r.tapScriptSig){let c=r.tapLeafScript.sort((u,h)=>k0.encode(u[0]).length-k0.encode(h[0]).length);for(let[u,h]of c){let l=h.slice(0,-1),g=h[h.length-1],x=In.decode(l),A=fS(l,g),E=r.tapScriptSig.filter(M=>gr(M[0].leafHash,A)),C=[];if(x.type==="tr_ms"){let M=x.m,N=x.pubkeys,R=0;for(let V of N){let q=E.findIndex(W=>gr(W[0].pubKey,V));if(R===M||q===-1){C.push(Vr);continue}C.push(E[q][1]),R++}if(R!==M)continue}else if(x.type==="tr_ns"){for(let M of x.pubkeys){let N=E.findIndex(R=>gr(R[0].pubKey,M));N!==-1&&C.push(E[N][1])}if(C.length!==x.pubkeys.length)continue}else if(x.type==="unknown"&&this.opts.allowUnknownInputs){let M=Sn.decode(l);if(C=E.map(([{pubKey:N},R])=>{let V=M.findIndex(q=>_r(q)&&gr(q,N));if(V===-1)throw new Error("finalize/taproot: cannot find position of pubkey in script");return{signature:R,pos:V}}).sort((N,R)=>N.pos-R.pos).map(N=>N.signature),!C.length)continue}else throw new Error("Finalize: Unknown tapLeafScript");r.finalScriptWitness=C.reverse().concat([l,k0.encode(u)]);break}if(!r.finalScriptWitness)throw new Error("finalize/taproot: empty witness")}else throw new Error("finalize/taproot: unknown input");r.finalScriptSig=Vr,WH(r);return}if(!r.partialSig||!r.partialSig.length)throw new Error("Not enough partial sign");let i=Vr,o=[];if(n.last.type==="ms"){let c=n.last.m,u=n.last.pubkeys,h=[];for(let l of u){let g=r.partialSig.find(x=>gr(l,x[0]));g&&h.push(g[1])}if(h=h.slice(0,c),h.length!==c)throw new Error(`Multisig: wrong signatures count, m=${c} n=${u.length} signatures=${h.length}`);i=Sn.encode([0,...h])}else if(n.last.type==="pk")i=Sn.encode([r.partialSig[0][1]]);else if(n.last.type==="pkh")i=Sn.encode([r.partialSig[0][1],r.partialSig[0][0]]);else if(n.last.type==="wpkh")i=Vr,o=[r.partialSig[0][1],r.partialSig[0][0]];else if(n.last.type==="unknown"&&!this.opts.allowUnknownInputs)throw new Error("Unknown inputs not allowed");let s,a;if(n.type.includes("wsh-")&&(i.length&&n.lastScript.length&&(o=Sn.decode(i).map(c=>{if(c===0)return Vr;if(_r(c))return c;throw new Error(`Wrong witness op=${c}`)})),o=o.concat(n.lastScript)),n.txType==="segwit"&&(a=o),n.type.startsWith("sh-wsh-")?s=Sn.encode([Sn.encode([0,Ii(n.lastScript)])]):n.type.startsWith("sh-")?s=Sn.encode([...Sn.decode(i),n.lastScript]):n.type.startsWith("wsh-")||n.txType!=="segwit"&&(s=i),!s&&!a)throw new Error("Unknown error finalizing input");s&&(r.finalScriptSig=s),a&&(r.finalScriptWitness=a),WH(r)}finalize(){for(let t=0;t<this.inputs.length;t++)this.finalizeIdx(t)}extract(){if(!this.isFinal)throw new Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw new Error("Transaction has no outputs");if(this.fee<0n)throw new Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(t){for(let i of["PSBTVersion","version","lockTime"])if(this.opts[i]!==t.opts[i])throw new Error(`Transaction/combine: different ${i} this=${this.opts[i]} other=${t.opts[i]}`);for(let i of["inputs","outputs"])if(this[i].length!==t[i].length)throw new Error(`Transaction/combine: different ${i} length this=${this[i].length} other=${t[i].length}`);let r=this.global.unsignedTx?rc.encode(this.global.unsignedTx):Vr,n=t.global.unsignedTx?rc.encode(t.global.unsignedTx):Vr;if(!gr(r,n))throw new Error("Transaction/combine: different unsigned tx");this.global=RP(jP,this.global,t.global);for(let i=0;i<this.inputs.length;i++)this.updateInput(i,t.inputs[i],!0);for(let i=0;i<this.outputs.length;i++)this.updateOutput(i,t.outputs[i],!0);return this}clone(){return e.fromPSBT(this.toPSBT(2),this.opts)}};var nW=X(Sg()),QP=X(mk());p();y();p();y();var Fwe=O.array(O.object({address:O.string(),signingIndexes:O.array(O.number()),sigHash:O.number().optional(),isScriptSpend:O.boolean().optional()})),Vwe=O.object({chainType:sf,signingType:O.literal("transaction"),message:O.string().min(1),inputsToSign:Fwe.optional(),finalize:O.boolean()}),qwe=O.object({chainType:sf,signingType:O.literal("message"),message:O.instanceof(Uint8Array)}),Hwe=Vwe.or(qwe),Wwe=O.object({chainType:O.literal("bip44_ed25519"),signingType:O.literal("transaction"),message:O.string()}),zwe=O.object({chainType:O.literal("solana"),signingType:O.literal("transaction"),message:O.union([O.string().min(1),O.instanceof(Uint8Array)])}),jwe=O.object({chainType:O.literal("solana"),signingType:O.literal("message"),message:O.string().min(1)}),Gwe=zwe.or(jwe),$we=O.object({chainType:O.literal("eip155"),signingType:O.literal("transaction"),message:O.string().min(1)}),Ywe=O.object({chainType:O.literal("eip155"),signingType:O.literal("message"),message:O.string().min(1)}),Jwe=O.object({chainType:O.literal("eip155"),signingType:O.literal("typedData"),version:O.literal(1),data:DB}),Zwe=O.object({chainType:O.literal("eip155"),signingType:O.literal("typedData"),version:O.literal(3),data:LB}),Qwe=O.object({chainType:O.literal("eip155"),signingType:O.literal("typedData"),version:O.literal(4),data:KB}),Xwe=$we.or(Ywe).or(Jwe).or(Zwe).or(Qwe),e1e=O.object({isJWT:O.literal(!0),data:_4}),t1e=O.object({status:O.literal("success"),signature:O.string()}),r1e=O.object({status:O.literal("success"),signature:O.string()}),n1e=O.object({status:O.literal("success"),signature:O.string(),message:O.instanceof(Uint8Array).optional()}),i1e=O.object({status:O.literal("success"),signature:O.string(),signedJWT:P4.optional()}),ZP=Gwe.or(Xwe).or(Hwe).or(Wwe).or(e1e),hu=(E=>(E.InvalidInput="invalidInput",E.InvalidAccountId="invalidAccountId",E.InvalidAddressType="invalidAddressType",E.InvalidMessageEncoding="invalidMessageEncoding",E.InvalidDerivationPath="invalidDerivationPath",E.LedgerAppNotOpen="ledgerAppNotOpen",E.LedgerNotConnected="ledgerNotConnected",E.LedgerNeedPermission="ledgerNeedPermission",E.LedgerRejectAction="ledgerRejectAction",E.LedgerUnknownSignError="ledgerUnknownSignError",E.UnsupportedOperation="unsupportedOperation",E.InternalError="internalError",E.ExpiredTokenError="expiredToken",E.BeforeIATError="beforeTimeOfIssuance",E.InvalidClaimError="invalidClaim",E))(hu||{}),o1e=O.object({status:O.literal("error"),type:O.nativeEnum(hu),message:O.string()}),s1e=O.union([i1e,n1e,t1e,r1e,o1e]);var a1e={invalidInput:{message:"Invalid input"},invalidAccountId:{message:"Invalid account identifier."},invalidAddressType:{message:"Invalid chain type."},invalidMessageEncoding:{message:"Invalid message encoding."},invalidDerivationPath:{message:"Invalid derivation path."},ledgerAppNotOpen:{message:"Ledger App not open."},ledgerNotConnected:{message:"Ledger not connected."},ledgerNeedPermission:{message:"Need permission to connect to Ledger."},ledgerRejectAction:{message:"Ledger user rejected action."},ledgerUnknownSignError:{message:"Ledger unknown sign error."},unsupportedOperation:{message:"Unsupported operation."},internalError:{message:"Internal error."},expiredToken:{message:"Token is expired"},beforeTimeOfIssuance:{message:"Received token before issuance time"},invalidClaim:{message:"Claim is invalid"}},Br=(e,t)=>({status:"error",type:e,message:t??a1e[e].message});var XP=e=>e.length===32?e:e.slice(1,33);function c1e(e){return so.Buffer.concat([(0,QP.encode)(e.byteLength),e])}function u1e(e){let{sha256:t}=nW.crypto,n=t(so.Buffer.from("BIP0322-signed-message"));return t(so.Buffer.concat([n,n,so.Buffer.from(e)])).toString("hex")}var f1e=(e,t)=>{switch(e){case"bip122_p2tr":return $M.getPublicKey(t);case"bip122_p2sh":return Kc(t,!0);case"bip122_p2wpkh":return Kc(t,!0);default:throw new Error("Unsupported Address Type")}},l1e=(e,t)=>{let r=tl;switch(e){case"bip122_p2tr":return tW(t,void 0,r);case"bip122_p2wpkh":return JP(t,r);case"bip122_p2sh":{let n=JP(t,r);return XH(n,r)}default:throw new Error("Unsupported Address Type")}};function d1e(e,t,r,n){let i=qd.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(o=>{let s=Qs("bip122:000000000019d6689c085ae165831e93",o.address),a=e[s];if(!a)throw new Error("missing private key for ("+s+")");let{publicKey:c,privateKey:u}=a;o.signingIndexes.forEach(h=>{let l=i.getInput(h),g=l.witnessUtxo?.script&&In.decode(l.witnessUtxo.script);if(!o.isScriptSpend&&!l.tapInternalKey&&g?.type==="tr"&&i.updateInput(h,{tapInternalKey:XP(so.Buffer.from(c))}),o.sigHash)try{i.signIdx(u,h,[o.sigHash],Sy(32))}catch{i.signIdx(u,h,void 0,Sy(32))}else i.signIdx(u,h,void 0,Sy(32));if(n)try{i.finalizeIdx(h)}catch{}})})}catch(o){throw console.error(o),new Error(`Error signing PSBT ${o.toString()}`)}return Promise.resolve(i.toPSBT(0))}var iW=()=>({type:"keyPair",sign:async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=so.Buffer.from(t.message).toString("utf8"),i=e[t.chainType]?.privateKey;if(!i)throw new Error("missing private key for ("+t.chainType+")");let o=so.Buffer.from(i).toString("hex"),s=f1e(r,o),a=l1e(r,s),c=so.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),u=0,h=4294967295,l=0,g=Sn.encode(["OP_0",so.Buffer.from(u1e(n),"hex")]),x=new qd({allowUnknownOutputs:!0,version:u});x.addOutput({amount:BigInt(0),script:a.script}),x.addInput({txid:c,index:h,sequence:l,finalScriptSig:g});let A=new qd({allowUnknownOutputs:!0,version:u});A.addInput({txid:x.id,index:0,sequence:l,tapInternalKey:r==="bip122_p2tr"?s:void 0,witnessUtxo:{script:a.script,amount:BigInt(0)},redeemScript:a.redeemScript}),A.addOutput({script:Sn.encode(["RETURN"]),amount:BigInt(0)}),A.sign(so.Buffer.from(o,"hex"),void 0,Sy(32)),A.finalize();let E=null,C=A.getInput(0);if(C.finalScriptWitness?.length){let M=(0,QP.encode)(C.finalScriptWitness?.length);E=so.Buffer.concat([M,...C.finalScriptWitness.map(N=>c1e(N))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:E.toString("hex"),message:A.toBytes()}}case"transaction":{let r=await d1e(e,t.inputsToSign??[],so.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:so.Buffer.from(r).toString("hex")}}}}catch{return Br("internalError")}}});p();y();var ny=X(en()),f$=X(ln());var fc=X(u$()),l$=X(ph());var d$=()=>({type:"keyPair",sign:(e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=ny.Buffer.from(e.privateKey.slice()),n=fc.SignTypedDataVersion.V1,{data:i}=t,o=(0,fc.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 3:{let r=ny.Buffer.from(e.privateKey.slice()),n=fc.SignTypedDataVersion.V3,i=t.data,o=(0,fc.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 4:{let r=ny.Buffer.from(e.privateKey.slice()),n=fc.SignTypedDataVersion.V4,i=t.data,o=(0,fc.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}}break}case"message":{let r=t.message,n=(0,fc.personalSign)({privateKey:ny.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=ny.Buffer.from(t.message.replace("0x",""),"hex"),n=new ts(e.privateKey),i=`0x${(0,l$.keccak256)(r)}`,o=(0,f$.joinSignature)(n.signDigest(i));return Promise.resolve({status:"success",signature:o})}}}catch(r){return console.error(r),Promise.resolve(Br("invalidMessageEncoding"))}}});p();y();var fh=X(en());p();y();p();y();p();y();p();y();function h$(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function QSe(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function g_(e,...t){if(!QSe(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function p$(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");h$(e.outputLen),h$(e.blockLen)}function iy(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function y$(e,t){g_(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p();y();p();y();var yE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function m$(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var mE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ma=(e,t)=>e<<32-t|e>>>t,XSe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!XSe)throw new Error("Non little-endian hardware is not supported");function eEe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function zb(e){if(typeof e=="string"&&(e=eEe(e)),!m$(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function g$(...e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];if(!m$(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var oy=class{clone(){return this._cloneInto()}},Nit={}.toString;function b$(e){let t=n=>e().update(zb(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function x$(e=32){if(yE&&typeof yE.getRandomValues=="function")return yE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}var gE=class extends oy{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,p$(t);let n=zb(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return iy(this),this.iHash.update(t),this}digestInto(t){iy(this),g_(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},b_=(e,t,r)=>new gE(e,t).update(r).digest();b_.create=(e,t)=>new gE(e,t);p();y();p();y();var A_={};ZE(A_,{bitGet:()=>aEe,bitLen:()=>sEe,bitMask:()=>jb,bitSet:()=>cEe,bytesToHex:()=>sh,bytesToNumberBE:()=>yu,bytesToNumberLE:()=>xE,concatBytes:()=>sy,createHmacDrbg:()=>v_,ensureBytes:()=>Uo,equalBytes:()=>iEe,hexToBytes:()=>ah,hexToNumber:()=>w_,isBytes:()=>ga,numberToBytesBE:()=>fl,numberToBytesLE:()=>wE,numberToHexUnpadded:()=>S$,numberToVarBytesBE:()=>nEe,utf8ToBytes:()=>oEe,validateObject:()=>ll});p();y();var A$=BigInt(0),bE=BigInt(1),tEe=BigInt(2);function ga(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var rEe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function sh(e){if(!ga(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=rEe[e[r]];return t}function S$(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function w_(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var pu={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function w$(e){if(e>=pu._0&&e<=pu._9)return e-pu._0;if(e>=pu._A&&e<=pu._F)return e-(pu._A-10);if(e>=pu._a&&e<=pu._f)return e-(pu._a-10)}function ah(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=w$(e.charCodeAt(o)),a=w$(e.charCodeAt(o+1));if(s===void 0||a===void 0){let c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function yu(e){return w_(sh(e))}function xE(e){if(!ga(e))throw new Error("Uint8Array expected");return w_(sh(Uint8Array.from(e).reverse()))}function fl(e,t){return ah(e.toString(16).padStart(t*2,"0"))}function wE(e,t){return fl(e,t).reverse()}function nEe(e){return ah(S$(e))}function Uo(e,t,r){let n;if(typeof t=="string")try{n=ah(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(ga(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function sy(...e){let t=0;for(let i=0;i<e.length;i++){let o=e[i];if(!ga(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t),n=0;for(let i=0;i<e.length;i++){let o=e[i];r.set(o,n),n+=o.length}return r}function iEe(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function oEe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function sEe(e){let t;for(t=0;e>A$;e>>=bE,t+=1);return t}function aEe(e,t){return e>>BigInt(t)&bE}var cEe=(e,t,r)=>e|(r?bE:A$)<<BigInt(t),jb=e=>(tEe<<BigInt(e-1))-bE,x_=e=>new Uint8Array(e),v$=e=>Uint8Array.from(e);function v_(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=x_(e),i=x_(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),c=(l=x_())=>{i=a(v$([0]),l),n=a(),l.length!==0&&(i=a(v$([1]),l),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,g=[];for(;l<t;){n=a();let x=n.slice();g.push(x),l+=n.length}return sy(...g)};return(l,g)=>{s(),c(l);let x;for(;!(x=g(u()));)c();return s(),x}}var uEe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ga(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ll(e,t,r={}){let n=(i,o,s)=>{let a=uEe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var Hn=BigInt(0),jr=BigInt(1),ch=BigInt(2),fEe=BigInt(3),S_=BigInt(4),E$=BigInt(5),I$=BigInt(8),lEe=BigInt(9),dEe=BigInt(16);function Do(e,t){let r=e%t;return r>=Hn?r:t+r}function hEe(e,t,r){if(r<=Hn||t<Hn)throw new Error("Expected power/modulo > 0");if(r===jr)return Hn;let n=jr;for(;t>Hn;)t&jr&&(n=n*e%r),e=e*e%r,t>>=jr;return n}function vE(e,t){if(e===Hn||t<=Hn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Do(e,t),n=t,i=Hn,o=jr,s=jr,a=Hn;for(;r!==Hn;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==jr)throw new Error("invert: does not exist");return Do(i,t)}function pEe(e){let t=(e-jr)/ch,r,n,i;for(r=e-jr,n=0;r%ch===Hn;r/=ch,n++);for(i=ch;i<e&&hEe(i,t,e)!==e-jr;i++);if(n===1){let s=(e+jr)/S_;return function(c,u){let h=c.pow(u,s);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}let o=(r+jr)/ch;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,o),g=a.pow(c,r);for(;!a.eql(g,a.ONE);){if(a.eql(g,a.ZERO))return a.ZERO;let x=1;for(let E=a.sqr(g);x<u&&!a.eql(E,a.ONE);x++)E=a.sqr(E);let A=a.pow(h,jr<<BigInt(u-x-1));h=a.sqr(A),l=a.mul(l,A),g=a.mul(g,h),u=x}return l}}function yEe(e){if(e%S_===fEe){let t=(e+jr)/S_;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%I$===E$){let t=(e-E$)/I$;return function(n,i){let o=n.mul(i,ch),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,ch),s),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%dEe,pEe(e)}var mEe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function E_(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=mEe.reduce((n,i)=>(n[i]="function",n),t);return ll(e,r)}function gEe(e,t,r){if(r<Hn)throw new Error("Expected power > 0");if(r===Hn)return e.ONE;if(r===jr)return t;let n=e.ONE,i=t;for(;r>Hn;)r&jr&&(n=e.mul(n,i)),i=e.sqr(i),r>>=jr;return n}function bEe(e,t){let r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function I_(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function k$(e,t,r=!1,n={}){if(e<=Hn)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=I_(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=yEe(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:jb(i),ZERO:Hn,ONE:jr,create:c=>Do(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Hn<=c&&c<e},is0:c=>c===Hn,isOdd:c=>(c&jr)===jr,neg:c=>Do(-c,e),eql:(c,u)=>c===u,sqr:c=>Do(c*c,e),add:(c,u)=>Do(c+u,e),sub:(c,u)=>Do(c-u,e),mul:(c,u)=>Do(c*u,e),pow:(c,u)=>gEe(a,c,u),div:(c,u)=>Do(c*vE(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>vE(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>bEe(a,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?wE(c,o):fl(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?xE(c):yu(c)}});return Object.freeze(a)}function T$(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function k_(e){let t=T$(e);return t+Math.ceil(t/2)}function AE(e,t,r=!1){let n=e.length,i=T$(t),o=k_(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?yu(e):xE(e),a=Do(s,t-jr)+jr;return r?wE(a,i):fl(a,i)}p();y();var xEe=BigInt(0),T_=BigInt(1);function _$(e,t){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>xEe;)o&T_&&(s=s.add(a)),a=a.double(),o>>=T_;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],u=i,h=u;for(let l=0;l<s;l++){h=u,c.push(h);for(let g=1;g<a;g++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),u=e.ZERO,h=e.BASE,l=BigInt(2**i-1),g=2**i,x=BigInt(i);for(let A=0;A<a;A++){let E=A*c,C=Number(s&l);s>>=x,C>c&&(C-=g,s+=T_);let M=E,N=E+Math.abs(C)-1,R=A%2!==0,V=C<0;C===0?h=h.add(r(R,o[M])):u=u.add(r(V,o[N]))}return{p:u,f:h}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,a(u))),this.wNAF(c,u,s)}}}function P_(e){return E_(e.Fp),ll(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...I_(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function wEe(e){let t=P_(e);ll(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:vEe,hexToBytes:AEe}=A_,uh={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=uh;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:vEe(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=uh,r=typeof e=="string"?AEe(e):e;if(!ga(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=uh._parseInt(r.subarray(2)),{d:s,l:a}=uh._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let h=u.toString(16);return h.length&1?`0${h}`:h},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},mu=BigInt(0),gs=BigInt(1),not=BigInt(2),B$=BigInt(3),iot=BigInt(4);function SEe(e){let t=wEe(e),{Fp:r}=t,n=t.toBytes||((A,E,C)=>{let M=E.toAffine();return sy(Uint8Array.from([4]),r.toBytes(M.x),r.toBytes(M.y))}),i=t.fromBytes||(A=>{let E=A.subarray(1),C=r.fromBytes(E.subarray(0,r.BYTES)),M=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x:C,y:M}});function o(A){let{a:E,b:C}=t,M=r.sqr(A),N=r.mul(M,A);return r.add(r.add(N,r.mul(A,E)),C)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(A){return typeof A=="bigint"&&mu<A&&A<t.n}function a(A){if(!s(A))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(A){let{allowedPrivateKeyLengths:E,nByteLength:C,wrapPrivateKey:M,n:N}=t;if(E&&typeof A!="bigint"){if(ga(A)&&(A=sh(A)),typeof A!="string"||!E.includes(A.length))throw new Error("Invalid key");A=A.padStart(C*2,"0")}let R;try{R=typeof A=="bigint"?A:yu(Uo("private key",A,C))}catch{throw new Error(`private key must be ${C} bytes, hex or bigint, not ${typeof A}`)}return M&&(R=Do(R,N)),a(R),R}let u=new Map;function h(A){if(!(A instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(E,C,M){if(this.px=E,this.py=C,this.pz=M,E==null||!r.isValid(E))throw new Error("x required");if(C==null||!r.isValid(C))throw new Error("y required");if(M==null||!r.isValid(M))throw new Error("z required")}static fromAffine(E){let{x:C,y:M}=E||{};if(!E||!r.isValid(C)||!r.isValid(M))throw new Error("invalid affine point");if(E instanceof l)throw new Error("projective point not allowed");let N=R=>r.eql(R,r.ZERO);return N(C)&&N(M)?l.ZERO:new l(C,M,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){let C=r.invertBatch(E.map(M=>M.pz));return E.map((M,N)=>M.toAffine(C[N])).map(l.fromAffine)}static fromHex(E){let C=l.fromAffine(i(Uo("pointHex",E)));return C.assertValidity(),C}static fromPrivateKey(E){return l.BASE.multiply(c(E))}_setWindowSize(E){this._WINDOW_SIZE=E,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:E,y:C}=this.toAffine();if(!r.isValid(E)||!r.isValid(C))throw new Error("bad point: x or y not FE");let M=r.sqr(C),N=o(E);if(!r.eql(M,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:E}=this.toAffine();if(r.isOdd)return!r.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);let{px:C,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.eql(r.mul(C,q),r.mul(R,N)),G=r.eql(r.mul(M,q),r.mul(V,N));return W&&G}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:E,b:C}=t,M=r.mul(C,B$),{px:N,py:R,pz:V}=this,q=r.ZERO,W=r.ZERO,G=r.ZERO,z=r.mul(N,N),ee=r.mul(R,R),_=r.mul(V,V),f=r.mul(N,R);return f=r.add(f,f),G=r.mul(N,V),G=r.add(G,G),q=r.mul(E,G),W=r.mul(M,_),W=r.add(q,W),q=r.sub(ee,W),W=r.add(ee,W),W=r.mul(q,W),q=r.mul(f,q),G=r.mul(M,G),_=r.mul(E,_),f=r.sub(z,_),f=r.mul(E,f),f=r.add(f,G),G=r.add(z,z),z=r.add(G,z),z=r.add(z,_),z=r.mul(z,f),W=r.add(W,z),_=r.mul(R,V),_=r.add(_,_),z=r.mul(_,f),q=r.sub(q,z),G=r.mul(_,ee),G=r.add(G,G),G=r.add(G,G),new l(q,W,G)}add(E){h(E);let{px:C,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.ZERO,G=r.ZERO,z=r.ZERO,ee=t.a,_=r.mul(t.b,B$),f=r.mul(C,R),m=r.mul(M,V),b=r.mul(N,q),v=r.add(C,M),w=r.add(R,V);v=r.mul(v,w),w=r.add(f,m),v=r.sub(v,w),w=r.add(C,N);let P=r.add(R,q);return w=r.mul(w,P),P=r.add(f,b),w=r.sub(w,P),P=r.add(M,N),W=r.add(V,q),P=r.mul(P,W),W=r.add(m,b),P=r.sub(P,W),z=r.mul(ee,w),W=r.mul(_,b),z=r.add(W,z),W=r.sub(m,z),z=r.add(m,z),G=r.mul(W,z),m=r.add(f,f),m=r.add(m,f),b=r.mul(ee,b),w=r.mul(_,w),m=r.add(m,b),b=r.sub(f,b),b=r.mul(ee,b),w=r.add(w,b),f=r.mul(m,w),G=r.add(G,f),f=r.mul(P,w),W=r.mul(v,W),W=r.sub(W,f),f=r.mul(v,m),z=r.mul(P,z),z=r.add(z,f),new l(W,G,z)}subtract(E){return this.add(E.negate())}is0(){return this.equals(l.ZERO)}wNAF(E){return x.wNAFCached(this,u,E,C=>{let M=r.invertBatch(C.map(N=>N.pz));return C.map((N,R)=>N.toAffine(M[R])).map(l.fromAffine)})}multiplyUnsafe(E){let C=l.ZERO;if(E===mu)return C;if(a(E),E===gs)return this;let{endo:M}=t;if(!M)return x.unsafeLadder(this,E);let{k1neg:N,k1:R,k2neg:V,k2:q}=M.splitScalar(E),W=C,G=C,z=this;for(;R>mu||q>mu;)R&gs&&(W=W.add(z)),q&gs&&(G=G.add(z)),z=z.double(),R>>=gs,q>>=gs;return N&&(W=W.negate()),V&&(G=G.negate()),G=new l(r.mul(G.px,M.beta),G.py,G.pz),W.add(G)}multiply(E){a(E);let C=E,M,N,{endo:R}=t;if(R){let{k1neg:V,k1:q,k2neg:W,k2:G}=R.splitScalar(C),{p:z,f:ee}=this.wNAF(q),{p:_,f}=this.wNAF(G);z=x.constTimeNegate(V,z),_=x.constTimeNegate(W,_),_=new l(r.mul(_.px,R.beta),_.py,_.pz),M=z.add(_),N=ee.add(f)}else{let{p:V,f:q}=this.wNAF(C);M=V,N=q}return l.normalizeZ([M,N])[0]}multiplyAndAddUnsafe(E,C,M){let N=l.BASE,R=(q,W)=>W===mu||W===gs||!q.equals(N)?q.multiplyUnsafe(W):q.multiply(W),V=R(this,C).add(R(E,M));return V.is0()?void 0:V}toAffine(E){let{px:C,py:M,pz:N}=this,R=this.is0();E==null&&(E=R?r.ONE:r.inv(N));let V=r.mul(C,E),q=r.mul(M,E),W=r.mul(N,E);if(R)return{x:r.ZERO,y:r.ZERO};if(!r.eql(W,r.ONE))throw new Error("invZ was invalid");return{x:V,y:q}}isTorsionFree(){let{h:E,isTorsionFree:C}=t;if(E===gs)return!0;if(C)return C(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:E,clearCofactor:C}=t;return E===gs?this:C?C(l,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return this.assertValidity(),n(l,this,E)}toHex(E=!0){return sh(this.toRawBytes(E))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let g=t.nBitLength,x=_$(l,t.endo?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function EEe(e){let t=P_(e);return ll(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function C$(e){let t=EEe(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(w){return mu<w&&w<r.ORDER}function a(w){return Do(w,n)}function c(w){return vE(w,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:l,isWithinCurveOrder:g}=SEe({...t,toBytes(w,P,B){let k=P.toAffine(),d=r.toBytes(k.x),S=sy;return B?S(Uint8Array.from([P.hasEvenY()?2:3]),d):S(Uint8Array.from([4]),d,r.toBytes(k.y))},fromBytes(w){let P=w.length,B=w[0],k=w.subarray(1);if(P===i&&(B===2||B===3)){let d=yu(k);if(!s(d))throw new Error("Point is not on curve");let S=l(d),F=r.sqrt(S),U=(F&gs)===gs;return(B&1)===1!==U&&(F=r.neg(F)),{x:d,y:F}}else if(P===o&&B===4){let d=r.fromBytes(k.subarray(0,r.BYTES)),S=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:d,y:S}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),x=w=>sh(fl(w,t.nByteLength));function A(w){let P=n>>gs;return w>P}function E(w){return A(w)?a(-w):w}let C=(w,P,B)=>yu(w.slice(P,B));class M{constructor(P,B,k){this.r=P,this.s=B,this.recovery=k,this.assertValidity()}static fromCompact(P){let B=t.nByteLength;return P=Uo("compactSignature",P,B*2),new M(C(P,0,B),C(P,B,2*B))}static fromDER(P){let{r:B,s:k}=uh.toSig(Uo("DER",P));return new M(B,k)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new M(this.r,this.s,P)}recoverPublicKey(P){let{r:B,s:k,recovery:d}=this,S=G(Uo("msgHash",P));if(d==null||![0,1,2,3].includes(d))throw new Error("recovery id invalid");let F=d===2||d===3?B+t.n:B;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let U=d&1?"03":"02",D=u.fromHex(U+x(F)),J=c(F),ue=a(-S*J),fe=a(k*J),j=u.BASE.multiplyAndAddUnsafe(D,ue,fe);if(!j)throw new Error("point at infinify");return j.assertValidity(),j}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ah(this.toDERHex())}toDERHex(){return uh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ah(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}let N={isValidPrivateKey(w){try{return h(w),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let w=k_(t.n);return AE(t.randomBytes(w),t.n)},precompute(w=8,P=u.BASE){return P._setWindowSize(w),P.multiply(BigInt(3)),P}};function R(w,P=!0){return u.fromPrivateKey(w).toRawBytes(P)}function V(w){let P=ga(w),B=typeof w=="string",k=(P||B)&&w.length;return P?k===i||k===o:B?k===2*i||k===2*o:w instanceof u}function q(w,P,B=!0){if(V(w))throw new Error("first arg must be private key");if(!V(P))throw new Error("second arg must be public key");return u.fromHex(P).multiply(h(w)).toRawBytes(B)}let W=t.bits2int||function(w){let P=yu(w),B=w.length*8-t.nBitLength;return B>0?P>>BigInt(B):P},G=t.bits2int_modN||function(w){return a(W(w))},z=jb(t.nBitLength);function ee(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(mu<=w&&w<z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return fl(w,t.nByteLength)}function _(w,P,B=f){if(["recovered","canonical"].some(L=>L in B))throw new Error("sign() legacy options not supported");let{hash:k,randomBytes:d}=t,{lowS:S,prehash:F,extraEntropy:U}=B;S==null&&(S=!0),w=Uo("msgHash",w),F&&(w=Uo("prehashed msgHash",k(w)));let D=G(w),J=h(P),ue=[ee(J),ee(D)];if(U!=null){let L=U===!0?d(r.BYTES):U;ue.push(Uo("extraEntropy",L))}let fe=sy(...ue),j=D;function se(L){let Y=W(L);if(!g(Y))return;let Z=c(Y),re=u.BASE.multiply(Y).toAffine(),pe=a(re.x);if(pe===mu)return;let te=a(Z*a(j+pe*J));if(te===mu)return;let ce=(re.x===pe?0:2)|Number(re.y&gs),ut=te;return S&&A(te)&&(ut=E(te),ce^=1),new M(pe,ut,ce)}return{seed:fe,k2sig:se}}let f={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function b(w,P,B=f){let{seed:k,k2sig:d}=_(w,P,B),S=t;return v_(S.hash.outputLen,S.nByteLength,S.hmac)(k,d)}u.BASE._setWindowSize(8);function v(w,P,B,k=m){let d=w;if(P=Uo("msgHash",P),B=Uo("publicKey",B),"strict"in k)throw new Error("options.strict was renamed to lowS");let{lowS:S,prehash:F}=k,U,D;try{if(typeof d=="string"||ga(d))try{U=M.fromDER(d)}catch(re){if(!(re instanceof uh.Err))throw re;U=M.fromCompact(d)}else if(typeof d=="object"&&typeof d.r=="bigint"&&typeof d.s=="bigint"){let{r:re,s:pe}=d;U=new M(re,pe)}else throw new Error("PARSE");D=u.fromHex(B)}catch(re){if(re.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&U.hasHighS())return!1;F&&(P=t.hash(P));let{r:J,s:ue}=U,fe=G(P),j=c(ue),se=a(fe*j),L=a(J*j),Y=u.BASE.multiplyAndAddUnsafe(D,se,L)?.toAffine();return Y?a(Y.x)===J:!1}return{CURVE:t,getPublicKey:R,getSharedSecret:q,sign:b,verify:v,ProjectivePoint:u,Signature:M,utils:N}}function IEe(e){return{hash:e,hmac:(t,...r)=>b_(e,t,g$(...r)),randomBytes:x$}}function M$(e,t){let r=n=>C$({...e,...IEe(n)});return Object.freeze({...r(t),create:r})}p();y();p();y();function kEe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var SE=class extends oy{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=mE(this.buffer)}update(t){iy(this);let{view:r,buffer:n,blockLen:i}=this;t=zb(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=mE(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){iy(this),y$(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;kEe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=mE(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var TEe=(e,t,r)=>e&t^~e&r,PEe=(e,t,r)=>e&t^e&r^t&r,_Ee=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hl=new Uint32Array(64),__=class extends SE{constructor(){super(64,32,8,!1),this.A=dl[0]|0,this.B=dl[1]|0,this.C=dl[2]|0,this.D=dl[3]|0,this.E=dl[4]|0,this.F=dl[5]|0,this.G=dl[6]|0,this.H=dl[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)hl[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=hl[l-15],x=hl[l-2],A=ma(g,7)^ma(g,18)^g>>>3,E=ma(x,17)^ma(x,19)^x>>>10;hl[l]=E+hl[l-7]+A+hl[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=ma(a,6)^ma(a,11)^ma(a,25),x=h+g+TEe(a,c,u)+_Ee[l]+hl[l]|0,E=(ma(n,2)^ma(n,13)^ma(n,22))+PEe(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){hl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var R$=b$(()=>new __);var O$=k$(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),BEe=O$.create(BigInt("-3")),CEe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gb=M$({a:BEe,b:CEe,Fp:O$,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},R$);var N$=()=>({type:"keyPair",sign:(e,t)=>{if(!t.isJWT)return Promise.resolve(Br("invalidAddressType"));let r=Math.floor(Date.now()/1e3);if(t.data.payload.iat>r)return Promise.resolve(Br("beforeTimeOfIssuance"));if(t.data.payload.exp<r)return Promise.resolve(Br("expiredToken"));if(t.data.payload.iss!==Cg)return Promise.resolve(Br("invalidClaim"));if(t.data.payload.aud!==Mg)return Promise.resolve(Br("invalidClaim"));let n={...t.data.header,kid:ii(fh.Buffer.from(e.publicKey))},i={...t.data.payload,sub:ii(fh.Buffer.from(e.publicKey))},o=ii(fh.Buffer.from(JSON.stringify(n)))+"."+ii(fh.Buffer.from(JSON.stringify(i))),a=Gb.sign(fh.Buffer.from(o).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),c=ii(fh.Buffer.from(a)),u={header:n,payload:i,signature:c};return Promise.resolve({status:"success",signature:c,signedJWT:u})}});p();y();var U$=X(en());var B_=X(Us()),D$=X(yh());var L$=()=>({type:"keyPair",sign:(e,t)=>{if(t.chainType!=="solana")return Promise.resolve(Br("invalidAddressType"));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=B_.default.decode(t.message):r=U$.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(Br("invalidMessageEncoding"))}let n=B_.default.encode(D$.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})}});p();y();var K$=()=>({type:"keyPair",sign:()=>{throw new zt("transaction signing")}});p();y();var EE=class{#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return this.#e.keyPair[r.chainType].sign(t,r);case"eip155":return this.#e.keyPair[r.chainType].sign(t,r);case"solana":return this.#e.keyPair[r.chainType].sign(t,r);case"bip44_ed25519":throw new zt("sign with keypair")}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}};p();y();var F$=e=>ZP.safeParse(e).success;p();y();var MEe=e=>({getSeed:t=>REe(e,t),setSeed:(t,r)=>OEe(e,t,r),getClientJWTSigner:(t,r)=>NEe(e,t,r),setClientJWTSigner:(t,r,n)=>UEe(e,t,r,n),removeSeeds:t=>V$(e,t),removeClientJWTKeypairs:t=>q$(e,t),clear:async()=>{await V$(e,"all"),await q$(e,"all")}}),pl=`${na}.cache.secrets`,C_=e=>`${na}.cache.seed.${e}`,M_=e=>`${na}.cache.client-jwt.${e}`,REe=async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=C_(r),i=null;try{i=await t.getSecureValue(n)}catch{}if(!i)return null;let{bytes:o,encoding:s}=i.seed;return new Uint8Array(Buffer.from(o,s))},OEe=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i)=>{if(!e())return;let o=C_(n);await r.setSecureValue(o,{version:1,identifier:n,seed:{bytes:Buffer.from(i).toString("base64"),encoding:"base64"}});let s=await t.get(pl);if(!s)s={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let a=new Set(s.seedIdentifiers);a.add(n),s.seedIdentifiers=Array.from(a)}await t.set(pl,s)},V$=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(pl);if(!n)return;let i=r==="all"?n.seedIdentifiers:r,o=new Set(i),s=n.seedIdentifiers.filter(a=>o.has(a));await t.removeSecureValue(s.map(C_)),await e.set(pl,{version:1,seedIdentifiers:n.seedIdentifiers.filter(a=>!o.has(a)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},NEe=async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let i=M_(r),o=null;try{o=await t.getSecureValue(i)}catch{}if(!o||!o.keyPairs[n])return null;let s=o.keyPairs[n],a=new Uint8Array(Buffer.from(s.p256pubkey.bytes,s.p256pubkey.encoding)),c=new Uint8Array(Buffer.from(s.p256privkey.bytes,s.p256privkey.encoding));return{p256pubkey:a,p256privkey:c}},UEe=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i,o)=>{if(!e())return;let s=M_(n),a=await r.getSecureValue(s)??{version:1,identifier:n,keyPairs:{}};a.keyPairs[i]={p256pubkey:{bytes:ii(Buffer.from(o.p256pubkey)),encoding:"base64"},p256privkey:{bytes:ii(Buffer.from(o.p256privkey)),encoding:"base64"}},await r.setSecureValue(s,a);let c=await t.get(pl);if(!c)c={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let u=new Set(c.clientJWTKeypairIdentifiers??[]);u.add(n),c.clientJWTKeypairIdentifiers=Array.from(u)}await t.set(pl,c)},q$=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(pl);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let i=r==="all"?n.clientJWTKeypairIdentifiers:r,o=new Set(i);await t.removeSecureValue(i.map(M_)),await e.set(pl,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(s=>!o.has(s))})};p();y();p();y();p();y();p();y();p();y();async function R_(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}p();y();var H$=X(en());var LEe=X(yh());p();y();var O_=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],Sst=new Set(O_);var KEe=(e,t,r,n,i)=>{let o;switch(i){case"rmd160":case"md5":case"sha":throw new Error(`${i} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${i} is supported by noble, but we don't need it for bip39`);case"sha256":o=Au;break;case"sha512":o=xo;break}return hx(o,e,t,{c:r,dkLen:n})},FEe=(e,t,r)=>{for(;e.length<r;)e=t+e;return e},W$=e=>e.map(t=>FEe(t.toString(2),"0",8)).join(""),VEe=e=>parseInt(e,2),qEe=e=>{let r=e.length*8/32,n=Au(e);return W$(Array.from(n)).slice(0,r)};var N_=async e=>{let t=O_;if(e.length<16)throw new Error("LessThanTwelve");if(e.length>32)throw new Error("MoreThanTwentyFour");if(e.length%4!==0)throw new Error("WrongWord");let r,n;try{r=W$(Array.from(e))}catch{throw new Error("InvalidEntropyBits")}try{n=qEe(e)}catch{throw new Error("InvalidChecksumBits")}let o=(r+n).match(/(.{1,11})/g);if(!o)throw new Error("InvalidChecksum");let s=o.map(u=>{let h=VEe(u);return t[h]}),a=H$.Buffer.from(s.join(" "));return{seed:await R_({mnemonic:a,pbkdf2:KEe}),mnemonic:a}};p();y();var HEe=X(yh()),Dst=new RegExp("^m(\\/[0-9]+')+$");p();y();async function yl(e,t){let r=await Mq(e,t);if(!r)throw new su;let n=_i.from(r.entropy);return r.entropy.fill(0),n}async function Wn(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await yl(e,t),{seed:s}=await o.foldAsync(N_);r=s,await e.secureCache.setSeed(t,r)}let i=_i.from(r);return r.fill(0),i}p();y();var U_=X(ph());function lh(e){return e.fold(U_.keccak256)}function ml(e,t,r){let n=ru[r];return U_.keccak256(`${e}:${t}:${n}`)}function lc(e,t,r,n){let i={};for(let o of n){let{publicKey:s}=e.keypairGenerator.generateKeypairFromSeed(t,r,o),a=gi.getAddressType(o);switch(o){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":{i[a]={chainType:a,pathType:o,publicKey:s,addresses:Object.values(un).reduce((c,u)=>({...c,[u]:oo({publicKey:s,addressType:a,networkID:u})}),{})};break}case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44Change":case"bip44":case"deprecated":{i[a]={chainType:a,pathType:o,publicKey:oo({publicKey:s,addressType:a})};break}case"bip44Sui":throw new zt("key derivation");default:be(o)}}return i}async function z$(e,t){let r=new Set,n=await mr(e);for(let o of n)o.type==="seed"&&o.seedIdentifier===t&&ru[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return j$(e,t,i)}async function j$(e,t,r){try{return await WEe(e,t,r)}catch(n){if(n instanceof Qa)return await j$(e,t,r+1);throw n}}async function WEe(e,t,r){let n=await Wn(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Xs(i),s=await ml(t,r,o[0]),a={version:1,type:"seed",identifier:s,seedIdentifier:t,derivationIndex:r,chains:lc(e,n,r,o)};return await Ei(e,a,!1),a}p();y();var X$=X(Sv());var eY=X(Sg()),tY=X(Q$()),rY=X(ph());function JEe(e,t,r){let n=ru[r];return rY.keccak256(`${e}:${t}:${n}`)}async function nY(e,t,r){let n=[];for(let i of r){if(i.addresses.length===0&&i.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let o=i.addresses[0]?.pathType||i.publicKeys[0]?.pathType,s=JEe(t,i.derivationIndex,o);eY.initEccLib(X$);let a=(0,tY.ECPairFactory)(X$),c={...i.addresses.reduce((h,l)=>{let g=gi.getAddressType(l.pathType);switch(g){case"eip155":case"solana":{h[g]={chainType:g,pathType:l.pathType,publicKey:l.value};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw new Error("Bitcoin accounts should be using public key not computed addresses");case"bip44_ed25519":throw new zt("add ledger account");default:be(g)}return h},{}),...i.publicKeys.reduce((h,l)=>{let g=gi.getAddressType(l.pathType);switch(g){case"eip155":case"solana":throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let x=a.fromPublicKey(Buffer.from(l.value,"hex")),A=new Uint8Array(x.publicKey);h[g]={chainType:g,pathType:l.pathType,publicKey:A,addresses:Object.values(un).reduce((E,C)=>({...E,[C]:oo({publicKey:A,addressType:g,networkID:C})}),{})};break}case"bip44_ed25519":throw new zt("add ledger account");default:be(g)}return h},{})},u={version:1,type:"ledger",identifier:s,ledgerGroupIdentifier:t,derivationIndex:i.derivationIndex,chains:c};n.push(u),await Ei(e,u)}return n}p();y();var iY=X(ph());function ZEe(e){return iY.keccak256(e)}async function oY(e,t,r,n){let i=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),o=await _o(e),s=ZEe(i.publicKey);if((o?.privateKeyIdentifiers??[]).includes(s))throw new Yg;let u={version:1,identifier:s,name:n,chainType:t,privateKey:Buffer.from(i.privateKey)},h=s,l;switch(t){case"eip155":case"solana":{l={version:1,type:"privateKey",identifier:h,privateKeyIdentifier:s,publicKey:oo({publicKey:i.publicKey,addressType:t}),chainType:t};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{l={version:1,type:"privateKey",identifier:h,privateKeyIdentifier:s,publicKey:i.publicKey,addresses:Object.values(un).reduce((g,x)=>({...g,[x]:oo({publicKey:i.publicKey,addressType:t,networkID:x})}),{}),chainType:t};break}case"bip44_ed25519":throw new zt("add private key account");default:be(t)}if(!l)throw new Error("unable to create a private key account based on the address type");return await Ei(e,l),await Rq(e,u),l}p();y();var sY=X(ph());function QEe(e){return sY.keccak256(e)}async function aY(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new Gg;let n=QEe(r),i={version:1,type:"readOnly",identifier:n,addresses:t};return await Ei(e,i),i}p();y();async function cY(e,t){let r=new Set,n=await mr(e);for(let o of n)o.type==="seedless"&&o.seedIdentifier===t&&ru[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return uY(e,t,i)}async function uY(e,t,r){try{return await XEe(e,t,r)}catch(n){if(n instanceof Qa)return await uY(e,t,r+1);throw n}}async function XEe(e,t,r){let n=await Wn(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Xs(i),s=await ml(t,r,o[0]),a={version:1,type:"seedless",identifier:s,seedIdentifier:t,derivationIndex:r,chains:lc(e,n,r,o)};return await Ei(e,a,!1),a}p();y();p();y();p();y();async function uy(e,t){let r=await _o(e),n=lh(t),i=r?.seedIdentifiers??[],o=r?.seedlessIdentifiers??[];return i.concat(o).includes(n)}async function kE(e,t,r,n){if((await N2(e)).length>0)throw new g2;if(n.length===0)throw new $g;if(await uy(e,t))throw new Td;let s=lh(t),a=t.fold(h=>({version:1,identifier:s,name:r,entropy:new Uint8Array(h)}));await Nq(e,a);let c=[],u=await Wn(e,s);for(let h of n){let l=ml(s,h.derivationIndex,h.derivationPathTypes[0]),g=lc(e,u,h.derivationIndex,h.derivationPathTypes),x={version:1,type:"seedless",identifier:l,seedIdentifier:s,derivationIndex:h.derivationIndex,chains:g};await Ei(e,x),c.push(x)}return c}async function fY(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Xs(n);return(await kE(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}p();y();p();y();async function TE(e,t,r,n,i=!1){let o=await uy(e,t);if(!i&&o)throw new Td;let s=lh(t),a=t.fold(h=>({version:1,identifier:s,name:r,entropy:new Uint8Array(h)}));await Oq(e,a);let c=[],u=await Wn(e,s);for(let h of n){let l=await ml(s,h.derivationIndex,h.derivationPathTypes[0]),g=lc(e,u,h.derivationIndex,h.derivationPathTypes),x={version:1,type:"seed",identifier:l,seedIdentifier:s,derivationIndex:h.derivationIndex,chains:g};await Ei(e,x),c.push(x)}return c}async function lY(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Xs(n);return(await TE(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}p();y();var dY=X(ph());function e3e(e){return dY.keccak256(e)}async function hY(e,t){let r=[];for(let{publicKey:n,derivationPath:i,authToken:o}of t){let s=e3e(n),a={version:1,type:"seedVault",identifier:s,derivationPath:i,authToken:o,publicKey:n,chainType:"solana"};r.push(a),await Ei(e,a)}return r}p();y();p();y();async function PE(e,t,r){let i=(await mr(e)).find(o=>o.identifier===t);if(!i)throw new Za;switch(i.type){case"seed":case"seedless":{let o=i.chains[r]?.pathType;if(!o)throw new jf;let s=await Wn(e,i.seedIdentifier),a=e.keypairGenerator.generateKeypairFromSeed(s,i.derivationIndex,o);return _i.from(a.privateKey)}case"privateKey":{let o=await m0(e,i.privateKeyIdentifier);if(o.chainType!==r)throw new jf;let s=e.keypairGenerator.generateKeypairFromPrivateKey(_i.from(o.privateKey),r);return _i.from(s.privateKey)}case"ledger":case"seedVault":throw new zg;case"readOnly":throw new jg;default:(o=>{throw new Error("invalid account type")})(i)}}p();y();p();y();p();y();var Yb=new Error("Unknown error"),_E=new Error("Invalid entropy length"),$b=new Error("Invalid mn*monic sentence length"),q_=new Error("Invalid checksum"),pY=new RangeError("Invalid mn*monic word"),V_=new RangeError("Invalid wordlist"),H_=new RangeError("Invalid wordlist index"),bs=(e,t)=>{if(!e)throw t};function bl(e){bs(e>=128,_E),bs(e<=256,_E),bs(e%32===0,_E)}function Jb(e){bs(e>=12,$b),bs(e<=24,$b),bs(e%3===0,$b)}function fy(e){bs(e.length===2048,V_),bs(e.every(t=>typeof t=="string"),V_)}function W_(e,t){return Jb(e),t(e*4/3)}async function BE(e,t){let r=e.length*8;bl(r);let n=r/32,i=await t(e),[o]=i,s=8-n,a=o>>>s<<s>>>0,c=new Uint8Array(e.length+1);return c.set(e,0),c[c.length-1]=a,c}function CE(e){let t=(e.length-1)*8;bl(t);let r=t/32,n=(t+r)/11,i=new ArrayBuffer(n*4),o=new DataView(i),s=0,a=0,c=0;for(let u of e)if(c+=8,a|=u<<32-c,a>>>=0,c>=11){let h=a>>>21;bs(h>=0&&h<=2047,H_),o.setUint32(s*4,h,!0),s++,a<<=11,a>>>=0,c-=11}return bs(s===n,$b),new Uint32Array(i)}function yY(e){let t=e.length;Jb(t);let r=11,n=e.length*r,i=new ArrayBuffer(Math.ceil(n/8)),o=new DataView(i),s=new DataView(e.buffer),a=e.length,c=0,u=0,h=0,l=8;for(let g=0;g<a;g++){let x=s.getUint32(g*4,!0);bs(x<2048,H_);let A=r;for(;A>0;){let E=32-A,C=A>=l?l:A;c|=x>>32-E-C&(1<<C)-1,u+=C,c<<=l-C,c>>>=0,A-=C,l-=C,l<=0&&(l=8),u%8===0&&(o.setUint8(h,c),h++,c=0)}}return a%8!==0&&o.setUint8(h,c),new Uint8Array(i)}function z_(e){Jb(e.length);let t=yY(e),r=t.slice(0,t.length-1);return t.fill(0),r}async function ly(e,t){let r=e.length*8;bl(r);let n=await BE(e,t),i=CE(n);return n.fill(0),i}function j_(e,t){fy(t);let r=new Set(t),n=new Uint32Array(24),i=0,o="";for(let a=0;a<e.length;a++){let c=e[a],u=c===32,h=a===e.length-1;if(h&&(o+=String.fromCharCode(c)),u||h){bs(r.has(o),pY);let l=0;for(let g of t){if(o===g)break;l++}n[i++]=l,o=""}else o+=String.fromCharCode(c)}Jb(i);let s=n.slice(0,i);return n.fill(0),s}async function dy(e,t,r){let n=await ly(e,r),i=new Uint8Array(n.reduce((s,a)=>s+t[a].length+1,-1)),o=0;for(let s of n){o>0&&(i[o++]=32);let a=t[s];for(let c of a)i[o++]=c.charCodeAt(0)}return n.fill(0),i}var F_=Uint8Array.of(109,110,101,109,111,110,105,99);async function dh(e,t,r,n,i){let o=await dy(e,r,n),s=new Uint8Array(F_.length+t.length);s.set(F_,0),s.set(t,F_.length);let a=await i(o,s,2048,64,"sha512");return s.fill(0),o.fill(0),a}p();y();var hy=X(wy());p();y();var Zb=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function G_(e){switch(e){case"english":return Zb}}function $_(e){return t=>new e(t)}function Y_(e,t){return async r=>{let n=null,i=null,o=null,s=null,a=null;try{i=z_(r),o=await BE(i,t),s=CE(o);let c=r[r.length-1],u=s[s.length-1];if(c!==u)throw q_;a=e.fromEntropy(i)}catch(c){c instanceof Error?n=c:(console.error(c),n=Yb)}finally{if(i?.fill(0),o?.fill(0),s?.fill(0),n)throw n;return a}}}function J_(e,t){return async r=>{let n=null,i=null,o=null;try{i=j_(r,t),o=await e.fromIndexes(i)}catch(s){s instanceof Error?n=s:(console.error(s),n=Yb)}finally{if(i?.fill(0),n)throw n;return o}}}function Z_(e,t){return r=>{let n=null,i=null,o=null;try{i=W_(r,t),o=e.fromEntropy(i)}catch(s){s instanceof Error?n=s:(console.error(s),n=Yb)}finally{if(i?.fill(0),n)throw n;return o}}}var Q_=class{static async webCrypto(t){let r=typeof t=="string"?await G_(t):t;fy(r);let n=s=>self.crypto.getRandomValues(new Uint8Array(s)),i=async s=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",s)),o=async(s,a,c,u,h)=>{let l="SHA-"+h.substring(3),g=await self.crypto.subtle.importKey("raw",s,"PBKDF2",!1,["deriveBits"]),x=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:a,iterations:c,hash:l},g,u*8);return new Uint8Array(x)};return class Qb{constructor(a){this.deriveSeed=(a=new Uint8Array)=>dh(this.#e,a,r,i,o);this.getEntropy=()=>this.#e.slice();this.getIndexes=()=>ly(this.#e,i);this.getMnemonic=()=>dy(this.#e,r,i);this.getSentenceLength=()=>{let a=this.#e.length*8,c=a/32;return(a+c)/11};bl(a.length*8),this.#e=a.slice()}static{this.fromEntropy=$_(Qb)}static{this.fromIndexes=Y_(Qb,i)}static{this.fromMnemonic=J_(Qb,r)}static{this.fromSentenceLength=Z_(Qb,n)}static{this.wordlist=r}#e}}static async nodeCrypto(t){let r=typeof t=="string"?await G_(t):t;fy(r);let n=s=>new Uint8Array((0,hy.randomBytes)(s).buffer),i=s=>new Uint8Array((0,hy.createHash)("sha256").update(s).digest().buffer),o=(...s)=>new Promise((a,c)=>{(0,hy.pbkdf2)(...s,(u,h)=>{if(u)return c(u);a(new Uint8Array(h.buffer))})});return class Xb{constructor(a){this.deriveSeed=(a=new Uint8Array)=>dh(this.#e,a,r,i,o);this.getEntropy=()=>this.#e.slice();this.getIndexes=()=>ly(this.#e,i);this.getMnemonic=()=>dy(this.#e,r,i);this.getSentenceLength=()=>{let a=this.#e.length*8,c=a/32;return(a+c)/11};bl(a.length*8),this.#e=a.slice()}static{this.fromEntropy=$_(Xb)}static{this.fromIndexes=Y_(Xb,i)}static{this.fromMnemonic=J_(Xb,r)}static{this.fromSentenceLength=Z_(Xb,n)}static{this.wordlist=r}#e}}static async customCrypto(t,r){let n=typeof t=="string"?await G_(t):t;fy(n);let{random:i,sha256:o,pbkdf2:s}=r;return class ex{constructor(c){this.deriveSeed=(c=new Uint8Array)=>dh(this.#e,c,n,o,s);this.getEntropy=()=>this.#e.slice();this.getIndexes=()=>ly(this.#e,o);this.getMnemonic=()=>dy(this.#e,n,o);this.getSentenceLength=()=>{let c=this.#e.length*8,u=c/32;return(c+u)/11};bl(c.length*8),this.#e=c.slice()}static{this.fromEntropy=$_(ex)}static{this.fromIndexes=Y_(ex,o)}static{this.fromMnemonic=J_(ex,n)}static{this.fromSentenceLength=Z_(ex,i)}static{this.wordlist=n}#e}}};async function mY(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await yl(e,t);try{r=await o.foldAsync(async a=>dh(a,new Uint8Array,Zb,Au,(c,u,h,l)=>hx(Au,c,u,{c:h,dkLen:l})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let i=_i.from(r);return r.fill(0),i}var t3e=new su,r3e=new jf,n3e=new Pd,er={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function xY(e,t=!1,r=!1){let n;try{if(n=await mr(e),n.length===0)return er.unonboarded}catch{return er.unableToLoadAccounts}return t?i3e(e,n,r):wY(e,n)}var i3e=async(e,t,r)=>{let n=await wY(e,t);if(n.status!=="safely-onboarded")return n;try{let a=await rP(e);if(a?.version===3&&a?.isSafelyOnboarded)return er.safelyOnboarded}catch{return er.fetchIntegrityStorageError}let i=await bY(e,t,"seed",r),o=await bY(e,t,"seedless",r),s=await s3e(e,t);return i.status!=="safely-onboarded"?i:o.status!=="safely-onboarded"?o:s.status!=="safely-onboarded"?s:(await tP(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),er.safelyOnboarded)},wY=async(e,t)=>{try{if((await rP(e))?.isSafelyOnboarded)return er.safelyOnboarded}catch{return er.fetchIntegrityStorageError}let r=await gY(e,t,"seed"),n=await gY(e,t,"seedless");return r.status!=="safely-onboarded"?r:n.status!=="safely-onboarded"?n:(await tP(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),er.safelyOnboarded)},gY=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await yl(e,i)}catch(o){if(o instanceof Error){if(o.message===t3e.message)return er.invalidIdentifier;if(o.message.match(/ExpoSecureStorage/))return er.fetchEntropyStorageError}return er.internalError}return er.safelyOnboarded},o3e=e=>{if(!(e instanceof Error))return er.invalidEntropy;let t=[[/ExpoSecureStorage/,er.fetchEntropyStorageError],[/InvalidEntropyBip39/,er.invalidEntropyBip39],[/LessThanTwelve/,er.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,er.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,er.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,er.invalidChecksumBits],[/InvalidEntropyBits/,er.invalidEntropyBits],[/InvalidChecksum/,er.invalidChecksum]];for(let[r,n]of t)if(e.message.match(r))return n;return er.invalidEntropy},bY=async(e,t,r,n)=>{let i=new Set;for(let o of t)o.type===r&&i.add(o.seedIdentifier);for(let o of i)try{n?await mY(e,o):await Wn(e,o)}catch(s){return o3e(s)}return er.safelyOnboarded},s3e=async(e,t)=>{for(let r of t)if(r.type==="privateKey")try{await PE(e,r.identifier,r.chainType)}catch(n){if(n instanceof Error){if(n.message===r3e.message)return er.invalidPkAddressType;if(n.message===n3e.message)return er.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return er.fetchPkStorageError}return er.invalidPk}return er.safelyOnboarded};p();y();async function vY(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await mr(e);if(n.length===0)return r;let i=new Map;for(let o of n){if(o.type!=="seed")continue;let s=i.get(o.seedIdentifier);s?s.push(o):i.set(o.seedIdentifier,[o])}for(let[o,s]of i){let a;for(let c of s)if(!(c.chains&&!gT(Object.values(c.chains)[0].pathType)))for(let u of t){if(c.chains[u])continue;a||(a=await Wn(e,o));let l=Xs([u]),g=lc(e,a,c.derivationIndex,l);c.chains={...c.chains,...g},r=!0}}return r&&await ia(e,n),r}p();y();p();y();var X_="m/23001'/0'";async function ME(e,t){let r;switch(t.type){case"seedless":case"seed":r=t.seedIdentifier;break;case"privateKey":r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,X_);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let i;switch(t.type){case"seedless":case"seed":{i=(await Wn(e,t.seedIdentifier)).fold(s=>new Ws(s));break}case"privateKey":{let o=await m0(e,t.privateKeyIdentifier);i=new Ws(o.privateKey);break}}try{let o=i.derivePath({ellipticCurve:"ed25519",derivationPath:X_}),s=AE(o.secretKey,Gb.CURVE.n),a=Gb.getPublicKey(s);return await e.secureCache.setClientJWTSigner(r,X_,{p256pubkey:a,p256privkey:s}),{publicKey:a,privateKey:s}}finally{i.cleanup()}}var AY=async(e,t)=>{let r=await mr(e);if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let n=r.find(i=>{switch(i.type){case"seed":case"seedless":return i.seedIdentifier===t;case"privateKey":return i.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1;default:be(i)}});if(!n)throw new Error("Unable to derive authentication public key for given secret identifier.");switch(n.type){case"seed":case"seedless":case"privateKey":{let i=await ME(e,n);return ii(Buffer.from(i.publicKey))}case"ledger":case"seedVault":case"readOnly":throw new Error(`Authentication public keys are currently unsupported for accounts of type ${n.type}.`);default:return be(n)}};p();y();async function SY(e,t){let r=await mr(e);if(r.length===0)throw new Za;let n=r.filter(i=>i.identifier!==t);await ia(e,n),await eP(e)}p();y();async function EY(e,t,r){let n=await mr(e);if(r<0||r>=n.length)throw new Za;let i=n.map(s=>s.identifier).indexOf(t);if(i<0)throw new Za;if(i===r)return;let o=n[i];n.splice(i,1),n.splice(r,0,o),await ia(e,n)}p();y();async function eB(e,t,r){let n=t.chains[r]?.pathType;if(!n)return Br("invalidAddressType",`Seed Account does not contain a chain address for the chain type ${r}.`);let i=await Wn(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(i,t.derivationIndex,n)}async function IY(e,t,r){let n=await mr(e),i=n.find(o=>o.identifier===t);if(!i)return Br("invalidAccountId",`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isJWT"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let o=await ME(e,i);return e.vaultSigner.signWithKeypair(o,r)}default:return Br("unsupportedOperation","Invalid signingAccount type provided for paramType")}switch(i.type){case"seedless":case"seed":{switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{enabledAddressTypes:o}=await e.fetchChainAvailability(),s={},a=Object.keys(i.chains).filter(c=>sf.safeParse(c).success).filter(c=>o.includes(c));for(let c of a){let u=await eB(e,i,c);if("status"in u&&u.status==="error")return u;s[c]=u}return e.vaultSigner.signWithKeypair(s,r)}case"eip155":{let o=await eB(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"solana":{let o=await eB(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"bip44_ed25519":throw new zt("sign")}break}case"privateKey":{let o=await m0(e,i.privateKeyIdentifier);if(o.chainType!==r.chainType)return Br("invalidAddressType",`Private Key account from accountID is a different chain type from params. Expected ${o.chainType}, got ${r.chainType}`);let s=e.keypairGenerator.generateKeypairFromPrivateKey(_i.from(o.privateKey),r.chainType);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return e.vaultSigner.signWithKeypair({[r.chainType]:s},r);case"eip155":return e.vaultSigner.signWithKeypair(s,r);case"solana":return e.vaultSigner.signWithKeypair(s,r);case"bip44_ed25519":throw new zt("sign")}break}case"ledger":{let o=i.chains[r.chainType];if(!o)return Br("invalidAddressType",`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let s=x1.safeParse({pathType:o.pathType,index:i.derivationIndex});if(!s.success)return Br("invalidDerivationPath","Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let a=lI(s.data);return e.vaultSigner.signWithHardware(t,a,r)}case"seedVault":{let{authToken:o,derivationPath:s,chainType:a}=i;return a!==r.chainType?Br("invalidAddressType",`Solana Seed Vault account from accountID is a different chain type from params. Expected ${a}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(o,s,r)}case"readOnly":return Br("unsupportedOperation","Read Only Accounts cannot sign transactions.");default:(o=>{throw new Error("invalid account type")})(i)}}p();y();function tB(e){switch(e.type){case"seed":return tx(e);case"seedless":return rx(e);case"privateKey":return nB(e);case"ledger":return rB(e);case"seedVault":return iB(e);case"readOnly":return e}}function rB(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(un).reduce((l,g)=>{let x=c?c[g]:void 0;if(!x)throw new kd;return{...l,[g]:x}},{});a={...u,addresses:h};break}}i[o]=a}return{...n,chains:i}}function nB(e){switch(e.chainType){case"solana":case"eip155":{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:t,version:r,...n}=e,i=Object.values(un).reduce((o,s)=>{let a=t?t[s]:void 0;if(!a)throw new kd;return{...o,[s]:a}},{});return{...n,addresses:i}}}}function iB(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}function tx(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(un).reduce((l,g)=>{let x=c?c[g]:void 0;if(!x)throw new kd;return{...l,[g]:x}},{});a={...u,addresses:h};break}}i[o]=a}return{...n,chains:i}}function rx(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(un).reduce((l,g)=>{let x=c?c[g]:void 0;if(!x)throw new kd;return{...l,[g]:x}},{});a={...u,addresses:h};break}}i[o]=a}return{...n,chains:i}}p();y();var aB=X(Us());var a3e=new Set(Object.values(wt)),kY=e=>e!==null&&a3e.has(e),sB=e=>{},RE=e=>{let t=e.addresses.reduce((r,n)=>{try{let i=Qs(n.networkId,n.address);r[i]=n.address}catch{ae.addBreadcrumb("Auth","Unable to derive AddressType from networkID and address.","error",{networkID:n.networkId,address:n.address})}return r},{});return Object.entries(t).length===0?(ae.captureError(new Error("Unable to convert synced account to read-only account. No addresses found."),"Auth"),null):{version:1,type:"readOnly",identifier:e.accountHash,addresses:t}},oB=(e,t)=>{let r=t==="seed"?"se*d":"se*dless";if(e.derivationIndex===null||e.derivationIndex<0)return ae.addBreadcrumb("Auth",`Invalid derivation index for ${r} account: ${e.derivationIndex}`,"error"),null;let n=e.addresses.reduce((o,s)=>{if(s.pathType==="privateKey")return ae.addBreadcrumb("Auth",`Invalid path type when converting synced account to ${r} account: ${s.pathType}`,"error"),o;let a=s4(s.pathType);switch(s.pathType){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":Nf(a)?o[a]={chainType:a,publicKey:Buffer.from(s.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":s.address},pathType:s.pathType}:ae.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":a==="solana"?o[a]={chainType:a,publicKey:aB.default.encode(Buffer.from(s.publicKey.replace("0x",""),"hex")),pathType:s.pathType}:ae.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":a==="eip155"?o[a]={chainType:a,publicKey:s.address,pathType:s.pathType}:ae.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44Sui":throw new zt("convert synced account to seed or social account");default:sB(s.pathType)}return o},{});if(Object.entries(n).length===0)return ae.captureError(new Error(`Unable to convert synced account to ${r} account. No addresses found.`),"Auth"),null;let i=zf(e);return i?{version:1,type:t,identifier:e.accountHash,seedIdentifier:i,derivationIndex:e.derivationIndex,chains:n}:(ae.captureError(new Error(`Unable to convert synced account to ${r} account. Missing account origin.`),"Auth"),null)},TY=e=>{let t=zf(e);if(!t)return ae.captureError(new Error("Unable to convert synced account to pk account. Missing account origin."),"Auth"),null;let r=e.addresses[0];if(!r)return ae.captureError(new Error("Unable to convert synced account to pk account. No address."),"Auth"),null;let n;try{n=Qs(r.networkId,r.address)}catch{return ae.captureError(new Error("Unable to convert synced account to pk account. Unable to determine address type."),"Auth"),null}if(Nf(n))return{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:Buffer.from(r.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":r.address},chainType:n};if(n==="solana")return{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:aB.default.encode(Buffer.from(r.publicKey.replace("0x",""),"hex")),chainType:n};if(n==="eip155")return{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:r.address,chainType:n};if(n==="bip44_ed25519")throw new zt("convert synced account to private key account");return be(n),null},PY=async(e,t)=>{let r=await mr(e),n=await _o(e),i=new Set(n.seedIdentifiers),o=new Set(n.seedlessIdentifiers),s=new Set(n.privateKeyIdentifiers);for(let c=0;c<r.length;++c){let u=r[c],h=t[u.identifier];if(delete t[u.identifier],!h||u.type!=="readOnly")continue;let l=n0(h),g=zf(h);if(!kY(l)||!g)continue;let x=null;switch(l){case"seed":case"seedless":try{(i.has(g)||o.has(g))&&(x=oB(h,l))}catch{}break;case"privateKey":try{s.has(g)&&(x=TY(h))}catch{}break;default:sB(l)}x&&(r[c]=x)}let a=[...r];for(let c of Object.values(t)){if(c.addresses.length===0)continue;let u=n0(c),h=zf(c);if(!kY(u)||!h){let l=RE(c);l&&a.push(l);continue}switch(u){case"seed":if(i.has(h)){let l=oB(c,u);l&&a.push(l)}else{let l=RE(c);l&&a.push(l)}break;case"seedless":if(o.has(h)){let l=oB(c,u);l&&a.push(l)}else{let l=RE(c);l&&a.push(l)}break;case"privateKey":if(s.has(h)){let l=TY(c);l&&a.push(l)}else{let l=RE(c);l&&a.push(l)}break;default:sB(u)}}return await ia(e,a),!1};function c3e(e){return{addSeedWithDefaultAccount:(t,r)=>lY(e,t,r).then(tx),addAccountForExistingSeed:t=>z$(e,t).then(tx),addSeedWithMultipleAccounts:(t,r,n,i)=>TE(e,t,r,n,i).then(o=>o.map(tx)),addPrivateKeyAccount:(t,r,n)=>oY(e,t,r,n).then(nB),addLedgerAccounts:(t,r)=>nY(e,t,r).then(n=>n.map(rB)),addSolanaSeedVaultAccounts:t=>hY(e,t).then(r=>r.map(iB)),addReadonlyAccount:t=>aY(e,t),deriveAddresses:()=>vY(e),removeAccount:t=>SY(e,t),reorderAccount:(t,r)=>EY(e,t,r),exportEntropy:t=>yl(e,t),exportPrivateKey:(t,r)=>PE(e,t,r),fetchAllAccounts:()=>mr(e).then(t=>t.map(tB)),fetchAllSeedMetas:()=>Cq(e),fetchAllSeedlessMetas:()=>N2(e),sign:(t,r)=>IY(e,t,r),isExistingSeed:t=>uy(e,t),checkVaultIntegrity:t=>xY(e,t),clearVault:()=>Uq(e),addSeedlessWithMultipleAccounts:(t,r,n)=>kE(e,t,r,n).then(i=>i.map(rx)),addSeedlessWithDefaultAccount:(t,r)=>fY(e,t,r).then(rx),addAccountForExistingSeedless:t=>cY(e,t).then(rx),getAuthenticationPublicKey:t=>AY(e,t),syncAccounts:t=>PY(e,t)}}p();y();p();y();var Klt=Su(si,e=>new OE(e)),OE=class{#e;constructor(t){this.#e=t}onMigrateInvalidChecksum(){this.#e.capture("migrationMultichainMigrateInvalidChecksum")}onAccountsOnlyMigrationStarted(){this.#e.capture("migrationMultichainAccountOnlyMigrationStarted")}onAccountsOnlyMigrationSettled(t){this.#e.capture("migrationMultichainAccountOnlyMigrationSettled",{data:{isSuccess:t}})}onMigrationFailureFlowOpened(){this.#e.capture("migrationFailureOpen")}onMigrationFailureUnableToFetchLegacyMnemonic(t){this.#e.capture("migrationFailureUnableToFetchLegacyMnemonic",{data:{reason:t}})}onCanStartMigrationResult(t){t.result||this.#e.capture("migrationMultichainCannotStart",{data:{reason:t.reason}})}onMigrationStarted(){this.#e.capture("migrationMultichainStarted")}onMigrationSettled(t,r){this.#e.capture("migrationMultichain",{data:{isGTM:t,isSuccess:r}})}onMigrationSecureStore(){this.#e.capture("migrationSecureStore")}};p();y();var _Y=()=>Su(si,e=>new NE(e))(),NE=class{constructor(t){this.identifyAccount=async(t,r,n)=>{let i=!!r.addresses.find(l=>ie.isSolanaNetworkID(l.networkID)),o=!!r.addresses.find(l=>ie.isEthereumNetworkID(l.networkID)),s=!!r.addresses.find(l=>ie.isBitcoinNetworkID(l.networkID)),a={hasSolanaAddress:i,hasEthereumAddress:o,hasBitcoinAddress:s},c=n.enabledChainIDs.map(l=>ie[l].name).join(", "),u=new Set,h=new Set;for(let l of t)switch(l.type){case"seed":case"seedless":u.add(l.seedIdentifier);break;case"readOnly":break;case"privateKey":case"ledger":case"seedVault":h.add(l.identifier);break;default:be(l);break}switch(r.type){case"seed":case"seedless":this.#e.identify(r.identifier,{...a,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(u),accountIds:Array.from(h),isReadOnly:!1,enabledChains:c});break;case"readOnly":this.#e.identify(r.identifier,{...a,accountType:r.type,isReadOnly:!0,enabledChains:c});break;case"privateKey":case"ledger":case"seedVault":this.#e.identify(r.identifier,{...a,accountType:r.type,rootIds:Array.from(u),accountIds:Array.from(h),isReadOnly:!1,enabledChains:c});break;default:be(r)}};this.onAppSessionStart=t=>{let r=new Map;for(let n of t){if(n.type==="readOnly")continue;let{addresses:i,identifier:o}=n;for(let s of i){let a=ie.getChainName(s.networkID),c={type:n.type,accountId:o,id:s.address};if(!r.get(a))r.set(a,[c]);else{let u=r.get(a)??[];r.set(a,[...u,c])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})};this.#e=t}#e};p();y();p();y();var u3e=e=>{let t=[];for(let r of e)r.type!=="readOnly"&&t.push(r);return t};p();y();p();y();var UE=X(wr());p();y();p();y();p();y();var py=X(wr()),BY=(0,py.createContext)(null);function f3e({children:e,storage:t}){return py.default.createElement(BY.Provider,{value:t},e)}function Ee(){let e=(0,py.useContext)(BY);if(!e)throw new Error("useStorage must be used within a StorageProvider");return e}var gu=()=>{let e=Ee(),{data:[t],isLoading:r}=tC(["enable-monad"]);return Bt({enabled:!r,queryKey:DA.chainAvailability({isMonadEnabled:t}),queryFn:()=>wd(e)})};p();y();var cB=()=>{let e=ve(),t=Ee();return Ae({mutationFn:async({addressTypes:n})=>{for(let i of n)await eF(i,t);tu(e)}})};p();y();var l3e=()=>{let e=Ee(),t=ve();return Ae({mutationFn:async({chainIDs:n})=>{for(let i of n)await JK(i,e);tu(t)}})};p();y();p();y();p();y();var yy=X(wr()),CY=(0,yy.createContext)(null);function d3e({children:e,vault:t}){return yy.default.createElement(CY.Provider,{value:t},e)}function tr(){let e=(0,yy.useContext)(CY);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}var uB=()=>{let e=ve(),t=Ee(),r=tr();return Ae({mutationFn:async({addressTypes:i})=>{for(let o of i)await XK(o,t);await r.deriveAddresses(),await tu(e)}})};p();y();var h3e=()=>{let e=Ee(),t=ve(),r=tr();return Ae({mutationFn:async({chainIDs:i})=>{for(let o of i)await A4(o,e);await r.deriveAddresses(),await tu(t)}})};p();y();var p3e=()=>{let e=Ee(),{mutateAsync:t}=cB(),{mutateAsync:r}=uB();return Ae({mutationFn:async({addressTypes:i})=>{if(await ZK(e))await r({addressTypes:i});else{let s=new Set(ie.bitcoin.addressTypes);for(let a of i)s.delete(a);if(s.size===ie.bitcoin.addressTypes.length&&s.delete("bip122_p2wpkh"),s.size>0){let a=Array.from(s);await t({addressTypes:a})}}}})};var fB=ie.getAllChainIDs().filter(e=>ie.getDefaultChainEnablement(e)),MY=fB.map(e=>ie.getMainnetNetworkID(e)),y3e=MY.flatMap(e=>ie.getAddressTypes(e)),_pt=()=>gu().data?.enabledAddressTypes??y3e,my=()=>gu().data?.enabledChainIDs??fB,Bpt=()=>gu().data?.supportedChainIDs??fB,Cpt=e=>{let t=gu().data;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:MY},Mpt=()=>my().length===1,Rpt=()=>{let e=my();return(0,UE.useMemo)(()=>ie.getChainIDs("eip155").some(t=>e.includes(t)),[e])},Opt=()=>{let e=my();return(0,UE.useMemo)(()=>e.length===1&&e.includes("solana"),[e])},Npt=e=>{let t=my();return(0,UE.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])};p();y();p();y();p();y();var RY=async(e,t)=>(await rb(e,t))?.balance,OY=async e=>await nb(e);p();y();var Tn="@phantom/accounts",lB=`${Tn}:account-identifier`,dB=`${Tn}:all-multi-chain-seeds`,Gpt=`${Tn}:account-balance`,ct={accountBalance(e){return[`${Tn}:account-balance`,{identifier:e}]},allAccountBalances(){return[`${Tn}:all-account-balances`]},allMultiChainAccounts(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[`${Tn}:all-multi-chain-accounts`,{chainAvailabilityQueryObject:t}]},allMultiChainSeeds(e){return[dB,e]},developerMode(){return[`${Tn}:developer-mode`]},accountIdentifier(e){return[lB,{identifier:e}]},selectedMultiChainAccount(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[`${Tn}:selected-multi-chain-account`,t]},selectedAccountIdentifier(){return[`${Tn}:selected-account-identifier`]},selectedAccountIndex(){return[`${Tn}:selected-account-index`]},selectedMultiChainNetworkSetting(){return[`${Tn}:selected-multi-chain-network-setting`]},trustedApps(){return[`${Tn}:multi-chain-trusted-apps`]},migratedWithInvalidChecksum(){return[`${Tn}:migrated-with-invalid-checksum`]},syncUserAccounts(){return[`${Tn}:sync-user-accounts`]},accountsEligibleToClaim(e,t,r){return[`${Tn}:are-accounts-eligible-to-claim`,{username:e,selectedAccountIdentifier:t,solanaAddresses:r}]}};var m3e=(e,t=!0)=>{let r=Ee(),n=t&&!!e,i=ct.accountBalance(e||"");return Bt({queryKey:i,queryFn:async()=>{try{return e&&await RY(r,e)||null}catch(s){throw s instanceof Error&&ae.captureError(s,"account"),s}},enabled:n})},g3e=(e=!0)=>{let t=Ee(),r=ct.allAccountBalances();return Bt({queryKey:r,queryFn:async()=>{try{return await OY(t)}catch(i){throw i instanceof Error&&ae.captureError(i,"account"),i}},enabled:e})};p();y();function nx(e){let{isSuccess:t,data:r}=gu(),n=tr(),i=ct.allMultiChainAccounts(r),o=Ee();return Bt({enabled:t,queryKey:i,queryFn:async()=>{try{if(!r)throw new Error(Zg);let a=await Cd(n,o,r);return ae.addBreadcrumb("account",`Finished fetching all accounts. Num accounts: ${a.length}`,"info"),a}catch(a){throw a instanceof Error&&ae.captureError(a,"account"),a}},select:e})}var DE=()=>{let{isSuccess:e,isFetching:t,data:r=[]}=nx(),n=e&&!t&&!!r.length;return n?{enabled:n,accounts:r}:{enabled:n}};p();y();var qt=async e=>{await e.invalidateQueries({queryKey:[dB]}),await e.invalidateQueries({queryKey:[`${Tn}:all-multi-chain-accounts`],predicate:t=>t.queryKey[0]===`${Tn}:all-multi-chain-accounts`}),await e.invalidateQueries({queryKey:[lB]}),await LE(e)},LE=async e=>{await e.invalidateQueries({predicate:t=>typeof t.queryKey[0]=="string"&&t.queryKey[0]===`${Tn}:selected-multi-chain-account`}),await e.invalidateQueries({queryKey:ct.selectedAccountIndex()}),await e.invalidateQueries({queryKey:ct.selectedAccountIdentifier()})};S4(qt);p();y();p();y();function KE(){let e=Ee(),t=ve();return Ae({mutationFn:async({metadataBatch:o})=>{ae.addBreadcrumb("account",`Adding Account Metadata Batch: ${Object.entries(o).length} entries`,"info"),await tb(e,o)},onSuccess:async()=>{await qt(t)},onError:o=>{ae.captureError(o,"account")}})}function b3e(){let{mutateAsync:e}=KE(),t=Ee(),r=ve(),n=tr(),{t:i}=Ls();return Ae({mutationFn:async({accounts:c,pairedBLEDevice:u})=>{let h=zB(),l=await n.connectLedgerAccounts(h,c),g=l.reduce((A,E,C)=>{let{name:M,accountIndex:N}=c[C],R;!M||M.length===0?R=i("onboardingImportAccountsLedgerAccountName",{walletIndex:1+N}):R=M;let V;u&&(V=[{...u,version:1,connectionType:"ble",deviceType:"ledger"}]);let q={name:R,icon:void 0,connectedDevices:V};return A[E.identifier]=q,A},{});await e({metadataBatch:g});let x=l[0]?.identifier;return x||(x=(await n.fetchAllAccounts())[0].identifier),await Hi(t,x),r.setQueryData(ct.selectedAccountIdentifier(),x),l},onSettled:async()=>{await qt(r)},onError:c=>ae.captureError(c,"account")})}p();y();var NY=X(wr());var x3e=e=>{if(e){switch(e.type){case"seed":case"seedless":return e.seedIdentifier;case"privateKey":case"ledger":case"seedVault":case"readOnly":return}be(e)}};function dc({select:e,updateESPUserProperties:t}={}){let r=(0,NY.useMemo)(()=>va.isFeatureEnabled("frontend-enable-esp-user-properties-update"),[]),{isSuccess:n,data:i}=gu(),o=DE(),s=o.enabled&&n,a=px(),c=Ee(),u=_Y(),h=ct.selectedMultiChainAccount(i);return Bt({queryKey:h,queryFn:async()=>{try{if(!i)throw new Error(Zg);if(!o.enabled)throw new Error(o0);let g=await au(o.accounts,c);if(ae.addBreadcrumb("account",`Finished fetching selected account: ${g.identifier}`,"info"),r&&t){let x=g.addresses.map(A=>A.address)??[];Promise.all(x.map(A=>t(A,Eu.language)))}return va.setSubjectAttributes({rootID:x3e(g)}),a(),u.identifyAccount(o.accounts,g,i),g}catch(g){throw g instanceof Error&&ae.captureError(g,"account"),g}},enabled:s,select:e})}p();y();function w3e(){let e=Ee(),t=ve();return Ae({mutationFn:async({identifier:i,balance:o})=>(await LT(e,i,o),{identifier:i,balance:o}),onSuccess:({identifier:i,balance:o})=>{i&&t.invalidateQueries({queryKey:ct.accountBalance(i)}),o&&t.invalidateQueries({queryKey:ct.allAccountBalances()})}})}p();y();var UY=X(wr());var ix=()=>{let{data:e}=dc();return(0,UY.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])};p();y();p();y();function hB(){let e=ct.developerMode(),t=Ee();return Bt({queryKey:e,queryFn:async()=>await t.get("developerMode")||E4})}var v3e=()=>{let{data:e}=hB();return!!e?.isDeveloperMode},A3e=()=>ix().some(t=>ie.isLocalNetworkID(t));p();y();var DY=X(wr());var S3e=e=>{let t=(0,DY.useMemo)(()=>{if(e){if(E3e(e))return n=>n.address===e.address&&n.networkID===e.networkID;if(ie.isNetworkID(e))return n=>n.networkID===e;if(E6(e))return n=>n.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]);return dc({select:n=>{let i=n.addresses.filter(t);if(i.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return i[0]}})};function E3e(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}p();y();var LY=X(wr()),I3e=({accountBalance:e,accountId:t,enabled:r,value:n,setAccountBalance:i})=>{(0,LY.useEffect)(()=>{if(r&&t&&n!==void 0&&n!==e){let o=Date.now();i({identifier:t,balance:{timestamp:o,value:n}})}},[e,t,r,n,i])};p();y();p();y();var $i=X(wr());function k3e(e){let t,r=new Set,n=(u,h)=>{let l=typeof u=="function"?u(t):u;if(l!==t){let g=t;t=h?l:Object.assign({},t,l),r.forEach(x=>x(t,g))}},i=()=>t,o=(u,h=i,l=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(t);function x(){let A=h(t);if(!l(g,A)){let E=g;u(g=A,E)}}return r.add(x),()=>r.delete(x)},c={setState:n,getState:i,subscribe:(u,h,l)=>h||l?o(u,h,l):(r.add(u),()=>r.delete(u)),destroy:()=>r.clear()};return t=e(n,i,c),c}var T3e=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),KY=T3e?$i.useEffect:$i.useLayoutEffect;function FE(e){let t=typeof e=="function"?k3e(e):e,r=(n=t.getState,i=Object.is)=>{let[,o]=(0,$i.useReducer)(C=>C+1,0),s=t.getState(),a=(0,$i.useRef)(s),c=(0,$i.useRef)(n),u=(0,$i.useRef)(i),h=(0,$i.useRef)(!1),l=(0,$i.useRef)();l.current===void 0&&(l.current=n(s));let g,x=!1;(a.current!==s||c.current!==n||u.current!==i||h.current)&&(g=n(s),x=!i(l.current,g)),KY(()=>{x&&(l.current=g),a.current=s,c.current=n,u.current=i,h.current=!1});let A=(0,$i.useRef)(s);KY(()=>{let C=()=>{try{let N=t.getState(),R=c.current(N);u.current(l.current,R)||(a.current=N,l.current=R,o())}catch{h.current=!0,o()}},M=t.subscribe(C);return t.getState()!==A.current&&C(),M},[]);let E=x?g:l.current;return(0,$i.useDebugValue)(E),E};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,t];return{next(){let i=n.length<=0;return{value:n.shift(),done:i}}}},r}var FY={username:"",icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},VY=FE((e,t)=>({...FY,setUsername:r=>e({username:r}),setIcon:r=>e({icon:r}),addSecretIdentifier:r=>{let n=[...t().secretIdentifiers];n.includes(r)||n.push(r),e({secretIdentifiers:n})},removeSecretIdentifier:r=>{e({secretIdentifiers:t().secretIdentifiers.filter(n=>n!==r)})},addAccountIdentifierToSync:r=>{let n=[...t().accountIdentifiersToSync];n.includes(r)||n.push(r),e({accountIdentifiersToSync:n})},removeAccountIdentifierToSync:r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(n=>n!==r)})},clearAccountIdentifiersToSync:()=>e({accountIdentifiersToSync:[]}),setAccountIdentifiersToSync:r=>e({accountIdentifiersToSync:r}),addAddress:(r,n)=>{let i={...t().addresses};i[r]=n,e({addresses:i})},removeAddress:(r,n)=>{let i={...t().addresses};i[r]===n&&delete i[r],e({addresses:i})},clearAddresses:()=>{e({addresses:{}})},reset:()=>{e(FY)}}));p();y();p();y();var P3e={editableAccountMetadata:void 0,setEditableAccountMetadata:()=>{}},VE=FE(e=>({...P3e,setEditableAccountMetadata:t=>{e({editableAccountMetadata:t})}}));p();y();p();y();function _3e(e){let t=DE(),r=t.enabled&&e.length>0,n=ct.accountIdentifier(e);return Bt({enabled:r,queryKey:n,queryFn:async()=>{try{if(ae.addBreadcrumb("account",`Fetching Account: ${e}`,"info"),!t.enabled)throw new Error(o0);let{accounts:o}=t,s=o.find(a=>a.identifier===e);if(!s)throw new Error(AV(o.length,e));return s}catch(o){throw o instanceof Error&&ae.captureError(o,"account"),o}}})}p();y();p();y();function B3e(){let e=Ee(),t=ve(),r=tr(),{t:n}=Ls();return Ae({mutationFn:async({name:c,icon:u,seedIdentifier:h})=>{ae.addBreadcrumb("account","Generating new multi-chain account","info");let l=await r.addAccountForSeed(h),g;if(!c||c.length===0){let A=await r.fetchAllAccounts();g=n("onboardingImportAccountsAccountName",{walletIndex:A.length})}else g=c;let x={name:g,icon:u};return await ec(e,l.identifier,x),await Hi(e,l.identifier),l},onSettled:async()=>{await qt(t)},onSuccess:c=>{t.setQueryData(ct.selectedAccountIdentifier(),c.identifier)},onError:c=>ae.captureError(c,"account")})}p();y();function C3e(){let e=Ee(),t=ve(),r=tr();return Ae({mutationFn:async({name:a,addresses:c,icon:u})=>{let h=await r.addReadonlyAccount(c),l={name:a,icon:u};return await ec(e,h.identifier,l),await Hi(e,h.identifier),h},onSettled:async()=>{await qt(t)},onSuccess:a=>{t.setQueryData(ct.selectedAccountIdentifier(),a.identifier)},onError:a=>ae.captureError(a,"account")})}p();y();function M3e(){let e=Ee(),t=ve(),r=tr(),n=Ft(),{t:i}=Ls();return Ae({mutationFn:async({name:u,icon:h,socialSeedIdentifier:l})=>{ae.addBreadcrumb("account","Generating new social seed account","info");let g=await r.addAccountForSeedless(l),x;if(!u||u.length===0){let E=await r.fetchAllAccounts();x=i("onboardingImportAccountsAccountName",{walletIndex:E.length})}else x=u;let A={name:x,icon:h};return await ec(e,g.identifier,A),await Hi(e,g.identifier),n.uploadSyncedAccount(g.identifier),g},onSettled:async()=>{await qt(t)},onSuccess:u=>{t.setQueryData(ct.selectedAccountIdentifier(),u.identifier)},onError:u=>ae.captureError(u,"account")})}p();y();function ox(e){let t=tr(),r=ct.allMultiChainSeeds(e);return Bt({queryKey:r,queryFn:async()=>{try{let i;switch(e){case"all":{let o=await t.fetchAllSeedMetas();i=[...await t.fetchAllSeedlessMetas(),...o];break}case"seeds-only":{i=[...await t.fetchAllSeedMetas()];break}case"seedless-seeds-only":{i=[...await t.fetchAllSeedlessMetas()];break}}return i}catch(i){throw i instanceof Error&&ae.captureError(i,"account"),i}}})}p();y();p();y();function R3e(){let e=Ee(),t=ve(),r=tr();return Ae({mutationFn:async({chainType:s,privateKey:a,name:c,icon:u})=>{ae.addBreadcrumb("account","Importing Private Key Account... \u23F3","info");let h=await r.importPrivateKeyAccount(s,a),l={name:c,icon:u};return await ec(e,h.identifier,l),await Hi(e,h.identifier),ae.addBreadcrumb("account",`Imported Private Key Account \u2705: ${h.identifier}`,"info"),h},onSettled:async()=>{await qt(t)},onSuccess:s=>{t.setQueryData(ct.selectedAccountIdentifier(),s.identifier)}})}p();y();p();y();function O3e(){let e=ct.selectedMultiChainNetworkSetting(),t=Ee();return Bt({queryKey:e,queryFn:()=>u0(t)})}p();y();function N3e(){let e=Ee(),t=si(),r=tr(),n=ve(),i=Ft();return Ae({mutationFn:async({identifier:a})=>{ae.addBreadcrumb("account",`Removing Account... \u23F3: ${a}`,"info"),await Promise.all([r.removeAccount(a),ib(e,a)]),await au(await r.fetchAllAccounts(),e),t.capture("removeAccount"),i.deleteSyncedAccount(a),ae.addBreadcrumb("account",`Removed Account \u2705: ${a}`,"info")},onSuccess:async()=>{await qt(n)}})}p();y();function U3e(){let e=Ee(),t=si(),r=ve(),n=tr();return Ae({mutationFn:async({seedIdentifier:a})=>{let c=await n.fetchAllAccounts(),u=[];for(let h of c)switch(h.type){case"privateKey":case"ledger":case"seedVault":case"readOnly":continue;case"seed":case"seedless":h.seedIdentifier===a&&u.push(h.identifier);break;default:be(h)}for(let h of u)await Promise.all([n.removeAccount(h),ib(e,h)]);t.capture("removeSeed",{data:{numOfAccounts:u.length}})},onSuccess:()=>{qt(r)},onError:a=>{ae.captureError(a,"account")}})}p();y();function D3e(){let e=Ee(),t=ve(),r=Ft();return Ae({mutationFn:async({identifier:s,name:a})=>{ae.addBreadcrumb("account","Renaming Multichain Account","info"),await UT(e,s,a),r.uploadSyncedAccounts()},onSuccess:async()=>{await qt(t)},onError:s=>ae.captureError(s,"account")})}p();y();function L3e(){let e=ve(),t=tr();return Ae({mutationFn:async({identifier:i,toIndex:o})=>{await t.reorderAccount(i,o)},onSuccess:()=>{qt(e)}})}p();y();function K3e(){let e=ct.selectedAccountIdentifier(),t=Ee(),r=tr();return Bt({queryKey:e,queryFn:async()=>{try{let i=await r.fetchAllAccounts(),s=(await au(i,t)).identifier;if(!s)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return s}catch(i){throw i instanceof Error&&ae.captureError(i,"account"),i}}})}p();y();function F3e(){let e=Ee(),t=ve();return Ae({mutationFn:async({developerMode:i})=>{t.setQueryData(ct.developerMode(),i),await e.set("developerMode",i)},onSuccess:()=>{qt(t)}})}p();y();function V3e(){let e=Ee(),t=ve(),r=Ft();return Ae({mutationFn:async({identifier:o,icon:s})=>{ae.addBreadcrumb("account","Setting Multichain Account Icon","info"),await DT(e,o,s),r.uploadSyncedAccounts()},onSuccess:async()=>{await qt(t)}})}p();y();function q3e(){let e=Ee(),t=ve();return Ae({mutationFn:async({networkSetting:i})=>{t.setQueryData(ct.selectedMultiChainNetworkSetting(),i),await e.set("networkSetting",i)},onSuccess:()=>{qt(t)}})}p();y();function H3e(){let e=Ee(),t=si(),r=ve();return Ae({mutationFn:async({identifier:s})=>(await Hi(e,s),t.capture("changeAccount",{data:{identifier:s}}),s),onSuccess:s=>{LE(r),r.setQueryData(ct.selectedAccountIdentifier(),s)},onError:s=>ae.captureError(s,"account")})}p();y();var W3e=()=>{let e=ve(),t=Ft(),r=Ed(),n=ct.syncUserAccounts();return Bt({enabled:r,queryKey:n,queryFn:async()=>{let o=!1;try{o=await t.downloadSyncedAccounts()}catch{return!1}return o&&await qt(e),o},gcTime:1/0,staleTime:1/0})};p();y();var qY=X(wr());var z3e=()=>{let{data:e,isFetching:t}=nx(),{data:r,isFetching:n}=dc(),i=ix();return(0,qY.useMemo)(()=>({data:{"All Accounts":e,"Selected Account":r??null,"Selected Networks":i.map(o=>ie.getNetworkName(o))},isFetching:t||n}),[e,t,n,r,i])};p();y();var HY=X(wr()),j3e=(e=[])=>{let t=my();return(0,HY.useMemo)(()=>e.filter(r=>{let n=ie.getParentChain(r.networkID);return n?t.includes(n):!1}),[e,t])};p();y();var JE=X(wr());p();y();var xr=X(wr(),1),ux=e=>e.type==="checkbox",by=e=>e instanceof Date,lo=e=>e==null,eJ=e=>typeof e=="object",zn=e=>!lo(e)&&!Array.isArray(e)&&eJ(e)&&!by(e),tJ=e=>zn(e)&&e.target?ux(e.target)?e.target.checked:e.target.value:e,G3e=e=>e.substring(0,e.search(/.\d/))||e,rJ=(e,t)=>[...e].some(r=>G3e(t)===r),GE=e=>e.filter(Boolean),Xr=e=>e===void 0,xe=(e,t,r)=>{if(!t||!zn(e))return r;let n=GE(t.split(/[,[\].]+?/)).reduce((i,o)=>lo(i)?i:i[o],e);return Xr(n)||n===e?Xr(e[t])?r:e[t]:n},gB={BLUR:"blur",CHANGE:"change"},ba={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bu={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},wB=(e,t)=>{let r=Object.assign({},e);return delete r[t],r},$3e=xr.default.createContext(null),vB=()=>xr.default.useContext($3e);var nJ=(e,t,r,n=!0)=>{function i(s){return()=>{if(s in e)return t[s]!==ba.all&&(t[s]=!n||ba.all),r&&(r[s]=!0),e[s]}}let o={};for(let s in e)Object.defineProperty(o,s,{get:i(s)});return o},Lo=e=>zn(e)&&!Object.keys(e).length,iJ=(e,t,r)=>{let n=wB(e,"name");return Lo(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(i=>t[i]===(!r||ba.all))},qE=e=>Array.isArray(e)?e:[e],oJ=(e,t,r)=>r&&t?e===t:!e||!t||e===t||qE(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n)));function AB(e){let t=xr.default.useRef(e);t.current=e,xr.default.useEffect(()=>{let r=i=>{i&&i.unsubscribe()},n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(n)},[e.disabled])}function Y3e(e){let t=vB(),{control:r=t.control,disabled:n,name:i,exact:o}=e||{},[s,a]=xr.default.useState(r._formState),c=xr.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=xr.default.useRef(i),h=xr.default.useRef(!0);u.current=i;let l=xr.default.useCallback(g=>h.current&&oJ(u.current,g.name,o)&&iJ(g,c.current)&&a(Object.assign(Object.assign({},r._formState),g)),[r,o]);return AB({disabled:n,callback:l,subject:r._subjects.state}),xr.default.useEffect(()=>()=>{h.current=!1},[]),nJ(s,r._proxyFormState,c.current,!1)}var hc=e=>typeof e=="string",sJ=(e,t,r,n)=>{let i=Array.isArray(e);return hc(e)?(n&&t.watch.add(e),xe(r,e)):i?e.map(o=>(n&&t.watch.add(o),xe(r,o))):(n&&(t.watchAll=!0),r)},$E=e=>typeof e=="function",SB=e=>{for(let t in e)if($E(e[t]))return!0;return!1};function J3e(e){let t=vB(),{control:r=t.control,name:n,defaultValue:i,disabled:o,exact:s}=e||{},a=xr.default.useRef(n);a.current=n;let c=xr.default.useCallback(l=>{if(oJ(a.current,l.name,s)){let g=sJ(a.current,r._names,l.values||r._formValues);h(Xr(a.current)||zn(g)&&!SB(g)?Object.assign({},g):Array.isArray(g)?[...g]:Xr(g)?i:g)}},[r,s,i]);AB({disabled:o,subject:r._subjects.watch,callback:c});let[u,h]=xr.default.useState(Xr(i)?r._getWatch(n):i);return xr.default.useEffect(()=>{r._removeUnmounted()}),u}function Z3e(e){let t=vB(),{name:r,control:n=t.control,shouldUnregister:i}=e,o=rJ(n._names.array,r),s=J3e({control:n,name:r,defaultValue:xe(n._formValues,r,xe(n._defaultValues,r,e.defaultValue)),exact:!o}),a=Y3e({control:n,name:r}),c=xr.default.useRef(n.register(r,Object.assign(Object.assign({},e.rules),{value:s})));return xr.default.useEffect(()=>{let u=(h,l)=>{let g=xe(n._fields,h);g&&(g._f.mount=l)};return u(r,!0),()=>{let h=n._options.shouldUnregister||i;o?h&&n._stateFlags.action:h?n.unregister(r):u(r,!1)}},[r,n,o,i]),{field:{name:r,value:s,onChange:xr.default.useCallback(u=>{c.current.onChange({target:{value:tJ(u),name:r},type:gB.CHANGE})},[r]),onBlur:xr.default.useCallback(()=>{c.current.onBlur({target:{value:xe(n._formValues,r),name:r},type:gB.BLUR})},[r,n]),ref:xr.default.useCallback(u=>{let h=xe(n._fields,r);u&&h&&u.focus&&(h._f.ref={focus:()=>u.focus(),setCustomValidity:l=>u.setCustomValidity(l),reportValidity:()=>u.reportValidity()})},[r,n])},formState:a,fieldState:{invalid:!!xe(a.errors,r),isDirty:!!xe(a.dirtyFields,r),isTouched:!!xe(a.touchedFields,r),error:xe(a.errors,r)}}}var aJ=e=>e.render(Z3e(e)),Q3e=(e,t,r,n,i)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[n]:i||!0})}):{},EB=e=>/^\w*$/.test(e),cJ=e=>GE(e.replace(/["|']|\]/g,"").split(/\.|\[/));function fn(e,t,r){let n=-1,i=EB(t)?[t]:cJ(t),o=i.length,s=o-1;for(;++n<o;){let a=i[n],c=r;if(n!==s){let u=e[a];c=zn(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}e[a]=c,e=e[a]}return e}var bB=(e,t,r)=>{for(let n of r||Object.keys(e)){let i=xe(e,n);if(i){let o=i._f,s=wB(i,"_f");if(o&&t(o.name)){if(o.ref.focus&&Xr(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else zn(s)&&bB(s,t)}}};var WY=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));function ax(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||zn(e)){t=r?[]:{};for(let n in e){if($E(e[n])){t=e;break}t[n]=ax(e[n])}}else return e;return t}function pB(){let e=[];return{get observers(){return e},next:i=>{for(let o of e)o.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(o=>o!==i)}}),unsubscribe:()=>{e=[]}}}var WE=e=>lo(e)||!eJ(e);function xy(e,t){if(WE(e)||WE(t))return e===t;if(by(e)&&by(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i of r){let o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){let s=t[i];if(by(o)&&by(s)||zn(o)&&zn(s)||Array.isArray(o)&&Array.isArray(s)?!xy(o,s):o!==s)return!1}}return!0}var zY=e=>({isOnSubmit:!e||e===ba.onSubmit,isOnBlur:e===ba.onBlur,isOnChange:e===ba.onChange,isOnAll:e===ba.all,isOnTouch:e===ba.onTouched}),cx=e=>typeof e=="boolean",IB=e=>e.type==="file",xB=e=>e instanceof HTMLElement,uJ=e=>e.type==="select-multiple",kB=e=>e.type==="radio",X3e=e=>kB(e)||ux(e),jY=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",yB=e=>xB(e)&&e.isConnected;function e8e(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=Xr(e)?n++:e[t[n++]];return e}function Yi(e,t){let r=EB(t)?[t]:cJ(t),n=r.length==1?e:e8e(e,r),i=r[r.length-1],o;n&&delete n[i];for(let s=0;s<r.slice(0,-1).length;s++){let a=-1,c,u=r.slice(0,-(s+1)),h=u.length-1;for(s>0&&(o=e);++a<u.length;){let l=u[a];c=c?c[l]:e[l],h===a&&(zn(c)&&Lo(c)||Array.isArray(c)&&!c.filter(g=>zn(g)&&!Lo(g)||cx(g)).length)&&(o?delete o[l]:delete e[l]),o=c}}return e}function zE(e,t={}){let r=Array.isArray(e);if(zn(e)||r)for(let n in e)Array.isArray(e[n])||zn(e[n])&&!SB(e[n])?(t[n]=Array.isArray(e[n])?[]:{},zE(e[n],t[n])):lo(e[n])||(t[n]=!0);return t}function fJ(e,t,r){let n=Array.isArray(e);if(zn(e)||n)for(let i in e)Array.isArray(e[i])||zn(e[i])&&!SB(e[i])?Xr(t)||WE(r[i])?r[i]=Array.isArray(e[i])?zE(e[i],[]):Object.assign({},zE(e[i])):fJ(e[i],lo(t)?{}:t[i],r[i]):r[i]=!xy(e[i],t[i]);return r}var GY=(e,t)=>fJ(e,t,zE(t)),$Y={value:!1,isValid:!1},YY={value:!0,isValid:!0},lJ=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Xr(e[0].attributes.value)?Xr(e[0].value)||e[0].value===""?YY:{value:e[0].value,isValid:!0}:YY:$Y}return $Y},dJ=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Xr(e)?e:t?e===""?NaN:+e:r&&hc(e)?new Date(e):n?n(e):e,JY={isValid:!1,value:null},hJ=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,JY):JY;function mB(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return IB(t)?t.files:kB(t)?hJ(e.refs).value:uJ(t)?[...t.selectedOptions].map(({value:r})=>r):ux(t)?lJ(e.refs).value:dJ(Xr(t.value)?e.ref.value:t.value,e)}var t8e=(e,t,r,n)=>{let i={};for(let o of e){let s=xe(t,o);s&&fn(i,o,s._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},jE=e=>e instanceof RegExp,sx=e=>Xr(e)?void 0:jE(e)?e.source:zn(e)?jE(e.value)?e.value.source:e.value:e,r8e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ZY(e,t,r){let n=xe(e,r);if(n||EB(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let o=i.join("."),s=xe(t,o),a=xe(e,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var n8e=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,i8e=(e,t)=>!GE(xe(e,t)).length&&Yi(e,t),HE=e=>hc(e)||xr.default.isValidElement(e);function QY(e,t,r="validate"){if(HE(e)||Array.isArray(e)&&e.every(HE)||cx(e)&&!e)return{type:r,message:HE(e)?e:"",ref:t}}var gy=e=>zn(e)&&!jE(e)?e:{value:e,message:""},XY=async(e,t,r,n)=>{let{ref:i,refs:o,required:s,maxLength:a,minLength:c,min:u,max:h,pattern:l,validate:g,name:x,valueAsNumber:A,mount:E,disabled:C}=e._f;if(!E||C)return{};let M=o?o[0]:i,N=_=>{n&&M.reportValidity&&(M.setCustomValidity(cx(_)?"":_||" "),M.reportValidity())},R={},V=kB(i),q=ux(i),W=V||q,G=(A||IB(i))&&!i.value||t===""||Array.isArray(t)&&!t.length,z=Q3e.bind(null,x,r,R),ee=(_,f,m,b=bu.maxLength,v=bu.minLength)=>{let w=_?f:m;R[x]=Object.assign({type:_?b:v,message:w,ref:i},z(_?b:v,w))};if(s&&(!W&&(G||lo(t))||cx(t)&&!t||q&&!lJ(o).isValid||V&&!hJ(o).isValid)){let{value:_,message:f}=HE(s)?{value:!!s,message:s}:gy(s);if(_&&(R[x]=Object.assign({type:bu.required,message:f,ref:M},z(bu.required,f)),!r))return N(f),R}if(!G&&(!lo(u)||!lo(h))){let _,f,m=gy(h),b=gy(u);if(isNaN(t)){let v=i.valueAsDate||new Date(t);hc(m.value)&&(_=v>new Date(m.value)),hc(b.value)&&(f=v<new Date(b.value))}else{let v=i.valueAsNumber||parseFloat(t);lo(m.value)||(_=v>m.value),lo(b.value)||(f=v<b.value)}if((_||f)&&(ee(!!_,m.message,b.message,bu.max,bu.min),!r))return N(R[x].message),R}if((a||c)&&!G&&hc(t)){let _=gy(a),f=gy(c),m=!lo(_.value)&&t.length>_.value,b=!lo(f.value)&&t.length<f.value;if((m||b)&&(ee(m,_.message,f.message),!r))return N(R[x].message),R}if(l&&!G&&hc(t)){let{value:_,message:f}=gy(l);if(jE(_)&&!t.match(_)&&(R[x]=Object.assign({type:bu.pattern,message:f,ref:i},z(bu.pattern,f)),!r))return N(f),R}if(g){if($E(g)){let _=await g(t),f=QY(_,M);if(f&&(R[x]=Object.assign(Object.assign({},f),z(bu.validate,f.message)),!r))return N(f.message),R}else if(zn(g)){let _={};for(let f in g){if(!Lo(_)&&!r)break;let m=QY(await g[f](t),M,f);m&&(_=Object.assign(Object.assign({},m),z(f,m.message)),N(m.message),r&&(R[x]=_))}if(!Lo(_)&&(R[x]=Object.assign({ref:M},_),!r))return R}}return N(!0),R},o8e={mode:ba.onSubmit,reValidateMode:ba.onChange,shouldFocusError:!0};function s8e(e={}){let t=Object.assign(Object.assign({},o8e),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},i=t.defaultValues||{},o=t.shouldUnregister?{}:ax(i),s={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0,h={},l={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={watch:pB(),array:pB(),state:pB()},x=zY(t.mode),A=zY(t.reValidateMode),E=t.criteriaMode===ba.all,C=(L,Y)=>(...Z)=>{clearTimeout(u),u=self.setTimeout(()=>L(...Z),Y)},M=async L=>{let Y=!1;return l.isValid&&(Y=t.resolver?Lo((await G()).errors):await ee(n,!0),!L&&Y!==r.isValid&&(r.isValid=Y,g.state.next({isValid:Y}))),Y},N=(L,Y,Z,re=[],pe=!0,te=!0)=>{if(s.action=!0,te&&Array.isArray(xe(n,L))){let ce=Y(xe(n,L),Z.argA,Z.argB);pe&&fn(n,L,ce)}if(l.errors&&te&&Array.isArray(xe(r.errors,L))){let ce=Y(xe(r.errors,L),Z.argA,Z.argB);pe&&fn(r.errors,L,ce),i8e(r.errors,L)}if(l.touchedFields&&Array.isArray(xe(r.touchedFields,L))){let ce=Y(xe(r.touchedFields,L),Z.argA,Z.argB);pe&&fn(r.touchedFields,L,ce)}l.dirtyFields&&(r.dirtyFields=GY(i,o)),g.state.next({isDirty:f(L,re),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},R=(L,Y)=>(fn(r.errors,L,Y),g.state.next({errors:r.errors})),V=(L,Y,Z,re)=>{let pe=xe(n,L);if(pe){let te=xe(o,L,Xr(Z)?xe(i,L):Z);Xr(te)||re&&re.defaultChecked||Y?fn(o,L,Y?te:mB(pe._f)):v(L,te),s.mount&&M()}},q=(L,Y,Z,re,pe)=>{let te=!1,ce={name:L},ut=xe(r.touchedFields,L);if(l.isDirty){let Ie=r.isDirty;r.isDirty=ce.isDirty=f(),te=Ie!==ce.isDirty}if(l.dirtyFields&&(!Z||re)){let Ie=xe(r.dirtyFields,L);xy(xe(i,L),Y)?Yi(r.dirtyFields,L):fn(r.dirtyFields,L,!0),ce.dirtyFields=r.dirtyFields,te=te||Ie!==xe(r.dirtyFields,L)}return Z&&!ut&&(fn(r.touchedFields,L,Z),ce.touchedFields=r.touchedFields,te=te||l.touchedFields&&ut!==Z),te&&pe&&g.state.next(ce),te?ce:{}},W=async(L,Y,Z,re,pe)=>{let te=xe(r.errors,Y),ce=l.isValid&&r.isValid!==Z;if(e.delayError&&re?(c=c||C(R,e.delayError),c(Y,re)):(clearTimeout(u),re?fn(r.errors,Y,re):Yi(r.errors,Y)),((re?!xy(te,re):te)||!Lo(pe)||ce)&&!L){let ut=Object.assign(Object.assign(Object.assign({},pe),ce?{isValid:Z}:{}),{errors:r.errors,name:Y});r=Object.assign(Object.assign({},r),ut),g.state.next(ut)}h[Y]--,l.isValidating&&!h[Y]&&(g.state.next({isValidating:!1}),h={})},G=async L=>t.resolver?await t.resolver(Object.assign({},o),t.context,t8e(L||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation)):{},z=async L=>{let{errors:Y}=await G();if(L)for(let Z of L){let re=xe(Y,Z);re?fn(r.errors,Z,re):Yi(r.errors,Z)}else r.errors=Y;return Y},ee=async(L,Y,Z={valid:!0})=>{for(let re in L){let pe=L[re];if(pe){let te=pe._f,ce=wB(pe,"_f");if(te){let ut=await XY(pe,xe(o,te.name),E,t.shouldUseNativeValidation);if(ut[te.name]&&(Z.valid=!1,Y))break;Y||(ut[te.name]?fn(r.errors,te.name,ut[te.name]):Yi(r.errors,te.name))}ce&&await ee(ce,Y,Z)}}return Z.valid},_=()=>{for(let L of a.unMount){let Y=xe(n,L);Y&&(Y._f.refs?Y._f.refs.every(Z=>!yB(Z)):!yB(Y._f.ref))&&D(L)}a.unMount=new Set},f=(L,Y)=>(L&&Y&&fn(o,L,Y),!xy(d(),i)),m=(L,Y,Z)=>{let re=Object.assign({},s.mount?o:Xr(Y)?i:hc(L)?{[L]:Y}:Y);return sJ(L,a,re,Z)},b=L=>GE(xe(s.mount?o:i,L,e.shouldUnregister?xe(i,L,[]):[])),v=(L,Y,Z={})=>{let re=xe(n,L),pe=Y;if(re){let te=re._f;te&&(!te.disabled&&fn(o,L,dJ(Y,te)),pe=jY&&xB(te.ref)&&lo(Y)?"":Y,uJ(te.ref)?[...te.ref.options].forEach(ce=>ce.selected=pe.includes(ce.value)):te.refs?ux(te.ref)?te.refs.length>1?te.refs.forEach(ce=>ce.checked=Array.isArray(pe)?!!pe.find(ut=>ut===ce.value):pe===ce.value):te.refs[0]&&(te.refs[0].checked=!!pe):te.refs.forEach(ce=>ce.checked=ce.value===pe):IB(te.ref)||(te.ref.value=pe,te.ref.type||g.watch.next({name:L})))}(Z.shouldDirty||Z.shouldTouch)&&q(L,pe,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&k(L)},w=(L,Y,Z)=>{for(let re in Y){let pe=Y[re],te=`${L}.${re}`,ce=xe(n,te);(a.array.has(L)||!WE(pe)||ce&&!ce._f)&&!by(pe)?w(te,pe,Z):v(te,pe,Z)}},P=(L,Y,Z={})=>{let re=xe(n,L),pe=a.array.has(L);fn(o,L,Y),pe?(g.array.next({name:L,values:o}),(l.isDirty||l.dirtyFields)&&Z.shouldDirty&&(r.dirtyFields=GY(i,o),g.state.next({name:L,dirtyFields:r.dirtyFields,isDirty:f(L,Y)}))):re&&!re._f&&!lo(Y)?w(L,Y,Z):v(L,Y,Z),WY(L,a)&&g.state.next({}),g.watch.next({name:L})},B=async L=>{let Y=L.target,Z=Y.name,re=xe(n,Z);if(re){let pe,te,ce=Y.type?mB(re._f):tJ(L),ut=L.type===gB.BLUR,Ie=!r8e(re._f)&&!t.resolver&&!xe(r.errors,Z)&&!re._f.deps||n8e(ut,xe(r.touchedFields,Z),r.isSubmitted,A,x),_e=WY(Z,a,ut);fn(o,Z,ce),ut?re._f.onBlur&&re._f.onBlur(L):re._f.onChange&&re._f.onChange(L);let Ko=q(Z,ce,ut,!1),Oe=!Lo(Ko)||_e;if(!ut&&g.watch.next({name:Z,type:L.type}),Ie)return Oe&&g.state.next(Object.assign({name:Z},_e?{}:Ko));if(!ut&&_e&&g.state.next({}),h[Z]=(h[Z],1),l.isValidating&&g.state.next({isValidating:!0}),t.resolver){let{errors:Be}=await G([Z]),xa=ZY(r.errors,n,Z),Ce=ZY(Be,n,xa.name||Z);pe=Ce.error,Z=Ce.name,te=Lo(Be)}else pe=(await XY(re,xe(o,Z),E,t.shouldUseNativeValidation))[Z],te=await M(!0);re._f.deps&&k(re._f.deps),W(!1,Z,te,pe,Ko)}},k=async(L,Y={})=>{let Z,re,pe=qE(L);if(g.state.next({isValidating:!0}),t.resolver){let te=await z(Xr(L)?L:pe);Z=Lo(te),re=L?!pe.some(ce=>xe(te,ce)):Z}else L?(re=(await Promise.all(pe.map(async te=>{let ce=xe(n,te);return await ee(ce&&ce._f?{[te]:ce}:ce)}))).every(Boolean),!(!re&&!r.isValid)&&M()):re=Z=await ee(n);return g.state.next(Object.assign(Object.assign(Object.assign({},!hc(L)||l.isValid&&Z!==r.isValid?{}:{name:L}),t.resolver?{isValid:Z}:{}),{errors:r.errors,isValidating:!1})),Y.shouldFocus&&!re&&bB(n,te=>xe(r.errors,te),L?pe:a.mount),re},d=L=>{let Y=Object.assign(Object.assign({},i),s.mount?o:{});return Xr(L)?Y:hc(L)?xe(Y,L):L.map(Z=>xe(Y,Z))},S=L=>{L?qE(L).forEach(Y=>Yi(r.errors,Y)):r.errors={},g.state.next({errors:r.errors})},F=(L,Y,Z)=>{let re=(xe(n,L,{_f:{}})._f||{}).ref;fn(r.errors,L,Object.assign(Object.assign({},Y),{ref:re})),g.state.next({name:L,errors:r.errors,isValid:!1}),Z&&Z.shouldFocus&&re&&re.focus&&re.focus()},U=(L,Y)=>$E(L)?g.watch.subscribe({next:Z=>L(m(void 0,Y),Z)}):m(L,Y,!0),D=(L,Y={})=>{for(let Z of L?qE(L):a.mount)a.mount.delete(Z),a.array.delete(Z),xe(n,Z)&&(Y.keepValue||(Yi(n,Z),Yi(o,Z)),!Y.keepError&&Yi(r.errors,Z),!Y.keepDirty&&Yi(r.dirtyFields,Z),!Y.keepTouched&&Yi(r.touchedFields,Z),!t.shouldUnregister&&!Y.keepDefaultValue&&Yi(i,Z));g.watch.next({}),g.state.next(Object.assign(Object.assign({},r),Y.keepDirty?{isDirty:f()}:{})),!Y.keepIsValid&&M()},J=(L,Y={})=>{let Z=xe(n,L),re=cx(Y.disabled);return fn(n,L,{_f:Object.assign(Object.assign(Object.assign({},Z&&Z._f?Z._f:{ref:{name:L}}),{name:L,mount:!0}),Y)}),a.mount.add(L),Z?re&&fn(o,L,Y.disabled?void 0:xe(o,L,mB(Z._f))):V(L,!0,Y.value),Object.assign(Object.assign(Object.assign({},re?{disabled:Y.disabled}:{}),t.shouldUseNativeValidation?{required:!!Y.required,min:sx(Y.min),max:sx(Y.max),minLength:sx(Y.minLength),maxLength:sx(Y.maxLength),pattern:sx(Y.pattern)}:{}),{name:L,onChange:B,onBlur:B,ref:pe=>{if(pe){J(L,Y),Z=xe(n,L);let te=Xr(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,ce=X3e(te),ut=Z._f.refs||[];if(ce?ut.find(Ie=>Ie===te):te===Z._f.ref)return;fn(n,L,{_f:Object.assign(Object.assign({},Z._f),ce?{refs:ut.concat(te).filter(yB),ref:{type:te.type,name:L}}:{ref:te})}),V(L,!1,void 0,te)}else Z=xe(n,L,{}),Z._f&&(Z._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(rJ(a.array,L)&&s.action)&&a.unMount.add(L)}})};return{control:{register:J,unregister:D,_executeSchema:G,_getWatch:m,_getDirty:f,_updateValid:M,_removeUnmounted:_,_updateFieldArray:N,_getFieldArray:b,_subjects:g,_proxyFormState:l,get _fields(){return n},set _fields(L){n=L},get _formValues(){return o},set _formValues(L){o=L},get _stateFlags(){return s},set _stateFlags(L){s=L},get _defaultValues(){return i},set _defaultValues(L){i=L},get _names(){return a},set _names(L){a=L},get _formState(){return r},set _formState(L){r=L},get _options(){return t},set _options(L){t=Object.assign(Object.assign({},t),L)}},trigger:k,register:J,handleSubmit:(L,Y)=>async Z=>{Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let re=!0,pe=t.shouldUnregister?ax(o):Object.assign({},o);g.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:te,values:ce}=await G();r.errors=te,pe=ce}else await ee(n);Lo(r.errors)&&Object.keys(r.errors).every(te=>xe(pe,te))?(g.state.next({errors:{},isSubmitting:!0}),await L(pe,Z)):(Y&&await Y(r.errors,Z),t.shouldFocusError&&bB(n,te=>xe(r.errors,te),a.mount))}catch(te){throw re=!1,te}finally{r.isSubmitted=!0,g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Lo(r.errors)&&re,submitCount:r.submitCount+1,errors:r.errors})}},watch:U,setValue:P,getValues:d,reset:(L,Y={})=>{let Z=L||i,re=ax(Z),pe=L&&!Lo(L)?re:i;if(Y.keepDefaultValues||(i=Z),!Y.keepValues){if(jY&&Xr(L))for(let te of a.mount){let ce=xe(n,te);if(ce&&ce._f){let ut=Array.isArray(ce._f.refs)?ce._f.refs[0]:ce._f.ref;try{xB(ut)&&ut.closest("form").reset();break}catch{}}}o=e.shouldUnregister?Y.keepDefaultValues?ax(i):{}:re,n={},g.array.next({values:pe}),g.watch.next({values:pe})}a={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!l.isValid||!!Y.keepIsValid,s.watch=!!e.shouldUnregister,g.state.next({submitCount:Y.keepSubmitCount?r.submitCount:0,isDirty:Y.keepDirty?r.isDirty:Y.keepDefaultValues?!xy(L,i):!1,isSubmitted:Y.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Y.keepDirty?r.dirtyFields:Y.keepDefaultValues&&L?Object.entries(L).reduce((te,[ce,ut])=>Object.assign(Object.assign({},te),{[ce]:ut!==xe(i,ce)}),{}):{},touchedFields:Y.keepTouched?r.touchedFields:{},errors:Y.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(L,Y={})=>{xe(n,L)&&(Xr(Y.defaultValue)?P(L,xe(i,L)):(P(L,Y.defaultValue),fn(i,L,Y.defaultValue)),Y.keepTouched||Yi(r.touchedFields,L),Y.keepDirty||(Yi(r.dirtyFields,L),r.isDirty=Y.defaultValue?f(L,xe(i,L)):f()),Y.keepError||(Yi(r.errors,L),l.isValid&&M()),g.state.next(Object.assign({},r)))},clearErrors:S,unregister:D,setError:F,setFocus:L=>{let Y=xe(n,L)._f;(Y.ref.focus?Y.ref:Y.refs[0]).focus()}}}function YE(e={}){let t=xr.default.useRef(),[r,n]=xr.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},s8e(e)),{formState:r});let i=t.current.control,o=xr.default.useCallback(s=>{iJ(s,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),s),n(Object.assign({},i._formState)))},[i]);return AB({subject:i._subjects.state,callback:o}),xr.default.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),t.current.formState=nJ(r,i._proxyFormState),t.current}var a8e=({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:n,addReadOnlyAccount:i,fetchDomainOwner:o})=>{let s=Ft(),{t:a}=Ls(),c=si(),u=n?.networkID||Kt.Solana.Mainnet,{formState:{errors:h},control:l,clearErrors:g,getValues:x,setValue:A,register:E,handleSubmit:C,watch:M,trigger:N}=YE({mode:"all"}),{networkID:R,name:V,address:q,resolvedAddress:W}=M(),G={required:!0},z=(0,JE.useMemo)(()=>({required:{value:!0,message:a("addAccountImportAccountPublicKeyRequired")},validate:async f=>{if(f==="")return!0;if(!NA(f,R||u))try{let w=(await o(f,R,s))?.owner;return w?(A("resolvedAddress",w),e.find(B=>B.addresses.map(k=>k.address).includes(w))?a("addAccountImportAccountDuplicateAddress"):!0):a("addAccountImportAccountIncorrectFormat")}catch{return a("sendFormErrorInvalidDomain")}return A("resolvedAddress",f),e.find(v=>v.addresses.map(w=>w.address).includes(f))?a("addAccountImportAccountDuplicateAddress"):!0}}),[a,R,u,A,e,o,s]),ee=V&&W&&!h.name&&!h.address,_=(0,JE.useCallback)(async({networkID:f,name:m,resolvedAddress:b},v)=>{let w=Qs(f,b);t.includes(w)||await r({addressTypes:[w]});let P={};P[w]=b,i({name:m,addresses:P,icon:n?.icon}),v(),c.capture("addReadOnlyAccount",{data:{networkID:f,chainType:w}})},[i,n?.icon,r,t,c]);return{Controller:aJ,canSubmit:ee,control:l,errors:h,nameValidations:G,address:q,addressValidations:z,clearErrors:g,getValues:x,handleSubmit:C,onSubmit:_,register:E,setValue:A,trigger:N}};p();y();var c8e=X(wr());p();y();p();y();var pJ=X(wr());var u8e=e=>{let t=(0,pJ.useCallback)(r=>r.addresses.find(n=>e===ie.getChainID(n.networkID))?.networkID,[e]);return dc({select:t})};p();y();var yJ=X(wr());var f8e=()=>{let{data:e=[]}=ox("seeds-only"),{data:t=[]}=ox("seedless-seeds-only");return(0,yJ.useMemo)(()=>e.length+t.length>1,[e.length,t.length])};p();y();var gJ=X(wr()),mJ=/(\p{Emoji_Presentation}|\p{Extended_Pictographic})/giu,l8e=/[\p{Script=Latin}\p{Script=Cyrillic}]+/giu,d8e=(e="",t)=>(0,gJ.useMemo)(()=>{let r=e.split(" "),n=r[0]??"",i=new RegExp(mJ).test(n),o=new RegExp(l8e).test(n),s=!i&&!o,a=t!==void 0?t+1:"";if(i){let c=Array.from(n);if(c.length>1){let u="";for(let h of c)if(h.match(mJ))u+=h;else break;n=u}}else o&&(n=nC(n).charAt(0));if(r.length>1){let c=Number(r[1]);if(Number.isInteger(c)&&c>=0)return s?a:`${n}${c}`}return s?a:n},[e,t]);p();y();var bJ=X(Us()),pc=X(wr());var h8e=({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:n})=>{let{t:i}=Ls(),{formState:{errors:o},control:s,clearErrors:a,getValues:c,setValue:u,register:h,handleSubmit:l,watch:g,trigger:x}=YE({mode:"all",defaultValues:{addressType:r?.addressType||"solana",networkID:r?.networkID||Kt.Solana.Mainnet}}),[A,E]=(0,pc.useState)(null),C=VE(m=>m.setEditableAccountMetadata),{name:M}=g(),N=r?.secrets,R=c("networkID"),V=c("addressType"),q=c("privateKey"),W=(0,pc.useMemo)(()=>new Jm,[]),G={required:!0},z=(0,pc.useMemo)(()=>({required:{value:!0,message:i("addAccountImportAccountPrivateKeyRequired")},onChange:m=>{m.target.value||E(null)},validate:m=>{try{let b=c("networkID"),v=c("addressType");if(/\s/.test(m)||!v)return i("addAccountImportAccountIncorrectFormat");let w=ie.getNetworkDefinition(b).value,P=Zm({privateKey:m,addressType:v,networkIDValue:w});C({...r,secrets:P});let B=W.generateKeypairFromPrivateKey(P,v);return t.find(d=>!d.isReadOnly&&(d.addresses.map(S=>S.address).includes(oo({publicKey:B.publicKey,addressType:v,networkID:b}))||d.addresses.filter(S=>"publicKey"in S).map(S=>S.publicKey).find(S=>S?Buffer.from(S).equals(Buffer.from(B.publicKey)):!1)))?i("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return i("addAccountImportAccountIncorrectFormat")}}}),[i,W,t,r,C,c]);(0,pc.useEffect)(()=>{if(o.privateKey){E(null);return}if(q||N)try{let m=ie.getNetworkDefinition(R).value,b=N||Zm({privateKey:q,addressType:V,networkIDValue:m}),v=W.generateKeypairFromPrivateKey(b,V);if(!q){let w="";switch(V){case"solana":{w=bJ.default.encode(v.privateKey);break}case"eip155":{w="0x"+Buffer.from(v.privateKey).toString("hex");break}}u("privateKey",w)}E(oo({publicKey:v.publicKey,addressType:V,networkID:R}))}catch{E(null)}},[o.privateKey,V,W,q,N,u,R]);let ee=(0,pc.useMemo)(()=>!!(M&&q&&!o.name&&!o.privateKey),[o.name,o.privateKey,M,q]),_=(0,pc.useCallback)(async({networkID:m,name:b,privateKey:v,addressType:w})=>{let P=ie.getNetworkDefinition(m).value,B=Zm({privateKey:v,addressType:w,networkIDValue:P});await e({chainType:w,name:b,icon:r?.icon,privateKey:B}),n.capture("addPrivateKeyAccount",{data:{networkID:m,chainType:w}})},[e,r?.icon,n]);return{formOnSubmitHandler:l(m=>_(m)),canSubmit:ee,control:s,getValues:c,register:h,setValue:u,trigger:x,errors:o,clearErrors:a,nameValidations:G,privateKey:q,privateKeyValidations:z,addressPreview:A}};p();y();var p8e=async(e,t,r)=>{let{enabledAddressTypes:n,enabledChainIDs:i,enabledMainnetOnlyNetworkIDs:o}=r,[s,a]=await Promise.all([t.get("developerMode"),u0(t)]),c=await e.fetchAllAccounts(),u=await au(c,t),h=await rb(t,u.identifier),l={name:h.name,icon:h.icon,identifier:u.identifier,addresses:Jg(u,o,n,i,a??vd,s?.isDeveloperMode??!1)};return u.type==="seed"?{...l,type:"seed",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="seedless"?{...l,type:"seedless",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="readOnly"?{...l,type:"readOnly",isReadOnly:!0}:u.type==="privateKey"?{...l,privateKeyIdentifier:u.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...l,type:u.type,isReadOnly:!1}};p();y();export{PC as a,qC as b,Px as c,HC as d,Ly as e,U3 as f,r7 as g,I7 as h,Ch as i,Q3 as j,O7 as k,X3 as l,t8 as m,D7 as n,r8 as o,i8 as p,K7 as q,V7 as r,Y7 as s,Z7 as t,u8 as u,Jw as v,vM as w,SM as x,q8 as y,rM as z,Wo as A,H8 as B,jh as C,W8 as D,z8 as E,fM as F,lM as G,dM as H,hM as I,yM as J,mM as K,gM as L,bM as M,Jne as N,eo as O,bo as P,rr as Q,yye as R,mye as S,gye as T,bye as U,lI as V,loe as W,dI as X,hI as Y,pI as Z,Ws as _,Se as $,nR as aa,sf as ba,gi as ca,Go as da,yR as ea,C1 as fa,Km as ga,xR as ha,mI as ia,uf as ja,VR as ka,MI as la,OI as ma,UI as na,jI as oa,JI as pa,ZI as qa,l_e as ra,yf as sa,S6 as ta,Jm as ua,mp as va,dv as wa,nce as xa,Zm as ya,Sv as za,tk as Aa,zU as Ba,mk as Ca,Ek as Da,$L as Ea,Sg as Fa,oo as Ga,Nf as Ha,s4 as Ia,zt as Ja,Uf as Ka,Df as La,Lf as Ma,Kf as Na,Lp as Oa,ie as Pa,PK as Qa,Kt as Ra,eu as Sa,EK as Ta,Kp as Ua,kK as Va,_K as Wa,TK as Xa,BK as Ya,MK as Za,RK as _a,OK as $a,NK as ab,UK as bb,DK as cb,LK as db,KK as eb,FK as fb,VK as gb,qK as hb,NA as ib,Qs as jb,CK as kb,HK as lb,WK as mb,v4 as nb,Pg as ob,jK as pb,Fpe as qb,Vpe as rb,qpe as sb,wd as tb,S4 as ub,tu as vb,Ype as wb,Jpe as xb,E4 as yb,vd as zb,Xs as Ab,Qpe as Bb,Xpe as Cb,m2 as Db,Wg as Eb,Nme as Fb,Zg as Gb,hT as Hb,zme as Ib,gT as Jb,$me as Kb,Yme as Lb,IV as Mb,Jme as Nb,b2 as Ob,Bg as Pb,Zme as Qb,t0e as Rb,r0e as Sb,Qme as Tb,Xme as Ub,ege as Vb,tge as Wb,Hye as Xb,aT as Yb,Id as Zb,Wye as _b,ra as $b,cV as ac,fT as bc,uV as cc,eme as dc,pme as ec,i0e as fc,ta as gc,Sye as hc,Mye as ic,Rye as jc,n0e as kc,qi as lc,Oye as mc,Sd as nc,tT as oc,nT as pc,Lg as qc,Uye as rc,Dye as sc,Ed as tc,Lye as uc,Kye as vc,si as wc,Kg as xc,Fye as yc,Ft as zc,yme as Ac,mme as Bc,ou as Cc,pV as Dc,xme as Ec,wme as Fc,vme as Gc,Ame as Hc,Sme as Ic,Ime as Jc,kme as Kc,Tme as Lc,Cme as Mc,Mme as Nc,VJe as Oc,Cd as Pc,bge as Qc,xge as Rc,wge as Sc,vge as Tc,kq as Uc,Ybe as Vc,Jbe as Wc,C2 as Xc,qd as Yc,ZP as Zc,Br as _c,XP as $c,iW as ad,Bb as bd,u$ as cd,d$ as dd,N$ as ed,L$ as fd,K$ as gd,EE as hd,F$ as id,MEe as jd,lh as kd,Q$ as ld,Q_ as md,c3e as nd,NE as od,u3e as pd,f3e as qd,Ee as rd,gu as sd,cB as td,l3e as ud,d3e as vd,tr as wd,uB as xd,h3e as yd,p3e as zd,_pt as Ad,my as Bd,Bpt as Cd,Cpt as Dd,Mpt as Ed,Rpt as Fd,Opt as Gd,Npt as Hd,m3e as Id,g3e as Jd,nx as Kd,_3e as Ld,qt as Md,KE as Nd,B3e as Od,C3e as Pd,M3e as Qd,ox as Rd,b3e as Sd,hB as Td,R3e as Ud,O3e as Vd,N3e as Wd,U3e as Xd,D3e as Yd,L3e as Zd,K3e as _d,dc as $d,w3e as ae,F3e as be,V3e as ce,q3e as de,H3e as ee,W3e as fe,ix as ge,z3e as he,j3e as ie,Z3e as je,aJ as ke,YE as le,a8e as me,v3e as ne,A3e as oe,S3e as pe,u8e as qe,I3e as re,f8e as se,FE as te,VE as ue,VY as ve,d8e as we,h8e as xe,p8e as ye};
/*! Bundled license information:

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ed25519/lib/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@babel/runtime/helpers/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)

@noble/secp256k1/lib/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

@noble/ed25519/lib/esm/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/btc-signer/index.js:
  (*! scure-btc-signer - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-MZZEJ42N.js.map
